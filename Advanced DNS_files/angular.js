/**
 * @license AngularJS v1.3.13
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(d,re,ce){"use strict";function C(i,o){return o=o||Error,function(){var e,t=arguments[0],n=arguments,a="["+(i?i+":":"")+t+"] "+arguments[1].replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);return 2+t<n.length?Me(n[2+t]):e});for(a=a+"\nhttp://errors.angularjs.org/1.3.13/"+(i?i+"/":"")+t,e=2;e<arguments.length;e++)a=a+(2==e?"?":"&")+"p"+(e-2)+"="+encodeURIComponent(Me(arguments[e]));return new o(a)}}var o=/^\/(.+)\/([a-z]*)$/,s="validity",L=function(e){return fe(e)?e.toLowerCase():e},E=Object.prototype.hasOwnProperty,c=function(e){return fe(e)?e.toUpperCase():e};"i"!=="I".toLowerCase()&&(L=function(e){return fe(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},c=function(e){return fe(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e});var z,le,h,f,a=[].slice,n=[].splice,e=[].push,r=Object.prototype.toString,u=C("ng"),A=d.angular||(d.angular={}),t=0;function k(e){if(null!=e&&!w(e)){var t=e.length;return e.nodeType===Ie&&t||(fe(e)||he(e)||0===t||"number"==typeof t&&0<t&&t-1 in e)}}function de(e,t,n){if(e)if(ge(e))for(i in e)"prototype"==i||"length"==i||"name"==i||e.hasOwnProperty&&!e.hasOwnProperty(i)||t.call(n,e[i],i,e);else if(he(e)||k(e))for(var a="object"!=typeof e,i=0,o=e.length;i<o;i++)(a||i in e)&&t.call(n,e[i],i,e);else if(e.forEach&&e.forEach!==de)e.forEach(t,n,e);else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e);return e}function j(e){return Object.keys(e).sort()}function g(n){return function(e,t){n(t,e)}}function i(){return++t}function m(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function V(e){for(var t=e.$$hashKey,n=1,a=arguments.length;n<a;n++){var i=arguments[n];if(i)for(var o=Object.keys(i),s=0,r=o.length;s<r;s++){var c=o[s];e[c]=i[c]}}return m(e,t),e}function p(e){return parseInt(e,10)}function ue(e,t){return V(Object.create(e),t)}function me(){}function v(e){return e}function S(e){return function(){return e}}function P(e){return void 0===e}function K(e){return void 0!==e}function pe(e){return null!==e&&"object"==typeof e}function fe(e){return"string"==typeof e}function y(e){return"number"==typeof e}function D(e){return"[object Date]"===r.call(e)}z=re.documentMode,me.$inject=[],v.$inject=[];var he=Array.isArray;function ge(e){return"function"==typeof e}function N(e){return"[object RegExp]"===r.call(e)}function w(e){return e&&e.window===e}function ve(e){return e&&e.$evalAsync&&e.$watch}function R(e){return"boolean"==typeof e}function b(e){return e&&ge(e.then)}var Se=function(e){return fe(e)?e.trim():e},l=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function I(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function ye(e){return L(e.nodeName||e[0]&&e[0].nodeName)}function Ce(e,t){var n=e.indexOf(t);return 0<=n&&e.splice(n,1),t}function $(e,n,t,a){if(w(e)||ve(e))throw u("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(n){if(e===n)throw u("cpi","Can't copy! Source and destination are identical.");if(t=t||[],a=a||[],pe(e)){var i=t.indexOf(e);if(-1!==i)return a[i];t.push(e),a.push(n)}var o;if(he(e))for(var s=n.length=0;s<e.length;s++)o=$(e[s],null,t,a),pe(e[s])&&(t.push(e[s]),a.push(o)),n.push(o);else{var r,c=n.$$hashKey;for(r in he(n)?n.length=0:de(n,function(e,t){delete n[t]}),e)e.hasOwnProperty(r)&&(o=$(e[r],null,t,a),pe(e[r])&&(t.push(e[r]),a.push(o)),n[r]=o);m(n,c)}}else{var l;(n=e)&&(he(e)?n=$(e,[],t,a):D(e)?n=new Date(e.getTime()):N(e)?(n=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0])).lastIndex=e.lastIndex:pe(e)&&(l=Object.create(Object.getPrototypeOf(e)),n=$(e,l,t,a)))}return n}function x(e,t){if(he(e)){t=t||[];for(var n=0,a=e.length;n<a;n++)t[n]=e[n]}else if(pe(e))for(var i in t=t||{},e)"$"===i.charAt(0)&&"$"===i.charAt(1)||(t[i]=e[i]);return t||e}function Ae(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,a,i,o=typeof e;if(o==typeof t&&"object"==o){if(!he(e)){if(D(e))return!!D(t)&&Ae(e.getTime(),t.getTime());if(N(e)&&N(t))return e.toString()==t.toString();if(ve(e)||ve(t)||w(e)||w(t)||he(t))return!1;for(a in i={},e)if("$"!==a.charAt(0)&&!ge(e[a])){if(!Ae(e[a],t[a]))return!1;i[a]=!0}for(a in t)if(!i.hasOwnProperty(a)&&"$"!==a.charAt(0)&&t[a]!==ce&&!ge(t[a]))return!1;return!0}if(!he(t))return!1;if((n=e.length)==t.length){for(a=0;a<n;a++)if(!Ae(e[a],t[a]))return!1;return!0}}return!1}var M=function(){if(K(M.isActive_))return M.isActive_;var t=!(!re.querySelector("[ng-csp]")&&!re.querySelector("[data-ng-csp]"));if(!t)try{new Function("")}catch(e){t=!0}return M.isActive_=t};function T(e,t,n){return e.concat(a.call(t,n))}function De(e,t){return a.call(e,t||0)}function B(e,t){var n=2<arguments.length?De(arguments,2):[];return!ge(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,T(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function F(e,t){var n=t;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?n=ce:w(t)?n="$WINDOW":t&&re===t?n="$DOCUMENT":ve(t)&&(n="$SCOPE"),n}function O(e,t){return void 0===e?ce:(y(t)||(t=t?2:null),JSON.stringify(e,F,t))}function H(e){return fe(e)?JSON.parse(e):e}function Ne(e){e=le(e).clone();try{e.empty()}catch(e){}var t=le("<div>").append(e).html();try{return e[0].nodeType===$e?L(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+L(t)})}catch(e){return L(t)}}function U(e){try{return decodeURIComponent(e)}catch(e){}}function _(e){var n,a,i={};return de((e||"").split("&"),function(e){var t;e&&(n=e.replace(/\+/g,"%20").split("="),K(a=U(n[0]))&&(t=!K(n[1])||U(n[1]),E.call(i,a)?he(i[a])?i[a].push(t):i[a]=[i[a],t]:i[a]=t))}),i}function G(e){var n=[];return de(e,function(e,t){he(e)?de(e,function(e){n.push(q(t,!0)+(!0===e?"":"="+q(e,!0)))}):n.push(q(t,!0)+(!0===e?"":"="+q(e,!0)))}),n.length?n.join("&"):""}function W(e){return q(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function q(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}var J=["ng-","data-ng-","ng:","x-ng-"];function Y(a,e){var i,o,t={};de(J,function(e){var t=e+"app";!i&&a.hasAttribute&&a.hasAttribute(t)&&(o=(i=a).getAttribute(t))}),de(J,function(e){var t,n=e+"app";!i&&(t=a.querySelector("["+n.replace(":","\\:")+"]"))&&(o=(i=t).getAttribute(n))}),i&&(t.strictDi=null!==function(e,t){var n,a,i=J.length;for(e=le(e),a=0;a<i;++a)if(n=J[a]+t,fe(n=e.attr(n)))return n;return null}(i,"strict-di"),e(i,o?[o]:[],t))}function X(n,a,i){pe(i)||(i={});i=V({strictDi:!1},i);function t(){if((n=le(n)).injector()){var e=n[0]===re?"document":Ne(n);throw u("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}(a=a||[]).unshift(["$provide",function(e){e.value("$rootElement",n)}]),i.debugInfoEnabled&&a.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),a.unshift("ng");var t=bt(a,i.strictDi);return t.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,a){e.$apply(function(){t.data("$injector",a),n(t)(e)})}]),t}var e=/^NG_ENABLE_DEBUG_INFO!/,o=/^NG_DEFER_BOOTSTRAP!/;if(d&&e.test(d.name)&&(i.debugInfoEnabled=!0,d.name=d.name.replace(e,"")),d&&!o.test(d.name))return t();d.name=d.name.replace(o,""),A.resumeBootstrap=function(e){return de(e,function(e){a.push(e)}),t()},ge(A.resumeDeferredBootstrap)&&A.resumeDeferredBootstrap()}function Z(){d.name="NG_ENABLE_DEBUG_INFO!"+d.name,d.location.reload()}function Q(e){var t=A.element(e).injector();if(!t)throw u("test","no injector found for element argument to getTestability");return t.get("$$testability")}var ee=/[A-Z]/g;function we(e,n){return n=n||"_",e.replace(ee,function(e,t){return(t?n:"")+e.toLowerCase()})}var Re,te=!1;function Ee(e,t,n){if(!e)throw u("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function ne(e,t,n){return n&&he(e)&&(e=e[e.length-1]),Ee(ge(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function ae(e,t){if("hasOwnProperty"===e)throw u("badname","hasOwnProperty is not a valid {0} name",t)}function ie(e,t,n){if(!t)return e;for(var a,i=t.split("."),o=e,s=i.length,r=0;r<s;r++)a=i[r],e=e&&(o=e)[a];return!n&&ge(e)?B(o,e):e}function oe(e){var t=e[0],n=e[e.length-1],a=[t];do{if(!(t=t.nextSibling))break;a.push(t)}while(t!==n);return le(a)}function be(){return Object.create(null)}var Ie=1,$e=3,xe=8,se=9,Pe=11;function Me(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):void 0===e?"undefined":"string"!=typeof e?(t=e,n=[],JSON.stringify(t,function(e,t){if(pe(t=F(e,t))){if(0<=n.indexOf(t))return"<<already seen>>";n.push(t)}return t})):e;var t,n}var Te={full:"1.3.13",major:1,minor:3,dot:13,codeName:"meticulous-riffleshuffle"};Xe.expando="ng339";var Le=Xe.cache={},ke=1,Ve=function(e,t,n){e.addEventListener(t,n,!1)},Be=function(e,t,n){e.removeEventListener(t,n,!1)};Xe._data=function(e){return this.cache[e[this.expando]]||{}};var Fe=/([\:\-\_]+(.))/g,Oe=/^moz([A-Z])/,He={mouseleave:"mouseout",mouseenter:"mouseover"},Ue=C("jqLite");function _e(e){return e.replace(Fe,function(e,t,n,a){return a?n.toUpperCase():n}).replace(Oe,"Moz$1")}var Ge=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,We=/<|&#?\w+;/,qe=/<([\w:]+)/,ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,je={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ke(e){return!We.test(e)}function Je(e){var t=e.nodeType;return t===Ie||!t||t===se}function Ye(e,t){var n,a,i,o,s=t.createDocumentFragment(),r=[];if(Ke(e))r.push(t.createTextNode(e));else{for(n=n||s.appendChild(t.createElement("div")),a=(qe.exec(e)||["",""])[1].toLowerCase(),i=je[a]||je._default,n.innerHTML=i[1]+e.replace(ze,"<$1></$2>")+i[2],o=i[0];o--;)n=n.lastChild;r=T(r,n.childNodes),(n=s.firstChild).textContent=""}return s.textContent="",s.innerHTML="",de(r,function(e){s.appendChild(e)}),s}function Xe(e){if(e instanceof Xe)return e;var t,n,a,i;if(fe(e)&&(e=Se(e),t=!0),!(this instanceof Xe)){if(t&&"<"!=e.charAt(0))throw Ue("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Xe(e)}rt(this,t?(n=e,a=a||re,(i=Ge.exec(n))?[a.createElement(i[1])]:(i=Ye(n,a))?i.childNodes:[]):e)}function Ze(e){return e.cloneNode(!0)}function Qe(e,t){if(t||tt(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),a=0,i=n.length;a<i;a++)tt(n[a])}function et(n,e,a,t){if(K(t))throw Ue("offargs","jqLite#off() does not support the `selector` argument");var i=nt(n),o=i&&i.events,s=i&&i.handle;if(s)if(e)de(e.split(" "),function(e){if(K(a)){var t=o[e];if(Ce(t||[],a),t&&0<t.length)return}Be(n,e,s),delete o[e]});else for(e in o)"$destroy"!==e&&Be(n,e,s),delete o[e]}function tt(e,t){var n=e.ng339,a=n&&Le[n];if(a){if(t)return void delete a.data[t];a.handle&&(a.events.$destroy&&a.handle({},"$destroy"),et(e)),delete Le[n],e.ng339=ce}}function nt(e,t){var n=e.ng339,a=n&&Le[n];return t&&!a&&(e.ng339=n=++ke,a=Le[n]={events:{},data:{},handle:ce}),a}function at(e,t,n){if(Je(e)){var a=K(n),i=!a&&t&&!pe(t),o=!t,s=nt(e,!i),r=s&&s.data;if(a)r[t]=n;else{if(o)return r;if(i)return r&&r[t];V(r,t)}}}function it(e,t){return!!e.getAttribute&&-1<(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")}function ot(t,e){e&&t.setAttribute&&de(e.split(" "),function(e){t.setAttribute("class",Se((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Se(e)+" "," ")))})}function st(e,t){var n;t&&e.setAttribute&&(n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),de(t.split(" "),function(e){e=Se(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",Se(n)))}function rt(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var a=0;a<n;a++)e[e.length++]=t[a]}else e[e.length++]=t}}function ct(e,t){return lt(e,"$"+(t||"ngController")+"Controller")}function lt(e,t,n){e.nodeType==se&&(e=e.documentElement);for(var a=he(t)?t:[t];e;){for(var i=0,o=a.length;i<o;i++)if((n=le.data(e,a[i]))!==ce)return n;e=e.parentNode||e.nodeType===Pe&&e.host}}function dt(e){for(Qe(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function ut(e,t){t||Qe(e);var n=e.parentNode;n&&n.removeChild(e)}je.optgroup=je.option,je.tbody=je.tfoot=je.colgroup=je.caption=je.thead,je.th=je.td;var mt=Xe.prototype={ready:function(e){var t=!1;function n(){t||(t=!0,e())}"complete"===re.readyState?setTimeout(n):(this.on("DOMContentLoaded",n),Xe(d).on("load",n))},toString:function(){var t=[];return de(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(e){return le(0<=e?this[e]:this[this.length+e])},length:0,push:e,sort:[].sort,splice:[].splice},pt={};de("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){pt[L(e)]=e});var ft={};de("input,select,option,textarea,button,form,details".split(","),function(e){ft[e]=!0});var ht={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};function gt(e,t){var n=pt[t.toLowerCase()];return n&&ft[ye(e)]&&n}function vt(e,t){if(P(t)){var n=e.nodeType;return n===Ie||n===$e?e.textContent:""}e.textContent=t}function St(s,r){function e(e,t){e.isDefaultPrevented=function(){return e.defaultPrevented};var n,a=r[t||e.type],i=a?a.length:0;if(i){P(e.immediatePropagationStopped)&&(n=e.stopImmediatePropagation,e.stopImmediatePropagation=function(){e.immediatePropagationStopped=!0,e.stopPropagation&&e.stopPropagation(),n&&n.call(e)}),e.isImmediatePropagationStopped=function(){return!0===e.immediatePropagationStopped},1<i&&(a=x(a));for(var o=0;o<i;o++)e.isImmediatePropagationStopped()||a[o].call(s,e)}}return e.elem=s,e}function yt(){this.$get=function(){return V(Xe,{hasClass:function(e,t){return e.attr&&(e=e[0]),it(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),st(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),ot(e,t)}})}}function Ct(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var a=typeof e;return n="function"==a||"object"==a&&null!==e?e.$$hashKey=a+":"+(t||i)():a+":"+e}function At(e,t){var n;t&&(n=0,this.nextUid=function(){return++n}),de(e,this.put,this)}de({data:at,removeData:tt},function(e,t){Xe[t]=e}),de({data:at,inheritedData:lt,scope:function(e){return le.data(e,"$scope")||lt(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return le.data(e,"$isolateScope")||le.data(e,"$isolateScopeNoTemplate")},controller:ct,injector:function(e){return lt(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:it,css:function(e,t,n){if(t=_e(t),!K(n))return e.style[t];e.style[t]=n},attr:function(e,t,n){var a=L(t);if(pt[a]){if(!K(n))return e[t]||(e.attributes.getNamedItem(t)||me).specified?a:ce;n?(e[t]=!0,e.setAttribute(t,a)):(e[t]=!1,e.removeAttribute(a))}else if(K(n))e.setAttribute(t,n);else if(e.getAttribute){var i=e.getAttribute(t,2);return null===i?ce:i}},prop:function(e,t,n){if(!K(n))return e[t];e[t]=n},text:(vt.$dv="",vt),val:function(e,t){if(P(t)){if(e.multiple&&"select"===ye(e)){var n=[];return de(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){if(P(t))return e.innerHTML;Qe(e,!0),e.innerHTML=t},empty:dt},function(l,e){Xe.prototype[e]=function(e,t){var n,a,i=this.length;if(l!==dt&&(2==l.length&&l!==it&&l!==ct?e:t)===ce){if(pe(e)){for(n=0;n<i;n++)if(l===at)l(this[n],e);else for(a in e)l(this[n],a,e[a]);return this}for(var o=(c=l.$dv)===ce?Math.min(i,1):i,s=0;s<o;s++)var r=l(this[s],e,t),c=c?c+r:r;return c}for(n=0;n<i;n++)l(this[n],e,t);return this}}),de({removeData:tt,on:function e(t,n,a,i){if(K(i))throw Ue("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Je(t))for(var o=nt(t,!0),s=o.events,r=(r=o.handle)||(o.handle=St(t,s)),c=0<=n.indexOf(" ")?n.split(" "):[n],l=c.length;l--;){var d=s[n=c[l]];d||(s[n]=[],"mouseenter"===n||"mouseleave"===n?e(t,He[n],function(e){var t=e.relatedTarget;t&&(t===this||this.contains(t))||r(e,n)}):"$destroy"!==n&&Ve(t,n,r),d=s[n]),d.push(a)}},off:et,one:function(t,n,a){(t=le(t)).on(n,function e(){t.off(n,a),t.off(n,e)}),t.on(n,a)},replaceWith:function(t,e){var n,a=t.parentNode;Qe(t),de(new Xe(e),function(e){n?a.insertBefore(e,n.nextSibling):a.replaceChild(e,t),n=e})},children:function(e){var t=[];return de(e.childNodes,function(e){e.nodeType===Ie&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===Ie||n===Pe)for(var a=0,i=(t=new Xe(t)).length;a<i;a++){var o=t[a];e.appendChild(o)}},prepend:function(t,e){var n;t.nodeType===Ie&&(n=t.firstChild,de(new Xe(e),function(e){t.insertBefore(e,n)}))},wrap:function(e,t){t=le(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:ut,detach:function(e){ut(e,!0)},after:function(e,t){for(var n=e,a=e.parentNode,i=0,o=(t=new Xe(t)).length;i<o;i++){var s=t[i];a.insertBefore(s,n.nextSibling),n=s}},addClass:st,removeClass:ot,toggleClass:function(n,e,a){e&&de(e.split(" "),function(e){var t=a;P(t)&&(t=!it(n,e)),(t?st:ot)(n,e)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==Pe?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Ze,triggerHandler:function(t,e,n){var a,i,o,s=e.type||e,r=nt(t),c=r&&r.events,l=c&&c[s];l&&(a={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:me,type:s,target:t},e.type&&(a=V(a,e)),i=x(l),o=n?[a].concat(n):[a],de(i,function(e){a.isImmediatePropagationStopped()||e.apply(t,o)}))}},function(s,e){Xe.prototype[e]=function(e,t,n){for(var a,i=0,o=this.length;i<o;i++)P(a)?K(a=s(this[i],e,t,n))&&(a=le(a)):rt(a,s(this[i],e,t,n));return K(a)?a:this},Xe.prototype.bind=Xe.prototype.on,Xe.prototype.unbind=Xe.prototype.off}),At.prototype={put:function(e,t){this[Ct(e,this.nextUid)]=t},get:function(e){return this[Ct(e,this.nextUid)]},remove:function(e){var t=this[e=Ct(e,this.nextUid)];return delete this[e],t}};var Dt=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Nt=/,/,wt=/^\s*(_?)(\S+?)\1\s*$/,Rt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Et=C("$injector");function bt(e,d){d=!0===d;var i={},s="Provider",r=[],o=new At([],!0),c={$provide:{provider:t(m),factory:t(a),service:t(function(e,t){return a(e,["$injector",function(e){return e.instantiate(t)}])}),value:t(function(e,t){return a(e,S(t),!1)}),constant:t(function(e,t){ae(e,"constant"),c[e]=t,n[e]=t}),decorator:function(e,t){var n=l.get(e+s),a=n.$get;n.$get=function(){var e=u.invoke(a,n);return u.invoke(t,null,{$delegate:e})}}}},l=c.$injector=p(c,function(e,t){throw A.isString(t)&&r.push(t),Et("unpr","Unknown provider: {0}",r.join(" <- "))}),n={},u=n.$injector=p(n,function(e,t){var n=l.get(e+s,t);return u.invoke(n.$get,n,ce,e)});return de(function n(e){var a,i=[];de(e,function(t){if(!o.get(t)){o.put(t,!0);try{fe(t)?(a=f(t),i=i.concat(n(a.requires)).concat(a._runBlocks),e(a._invokeQueue),e(a._configBlocks)):ge(t)||he(t)?i.push(l.invoke(t)):ne(t,"module")}catch(e){throw he(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Et("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}function e(e){var t,n;for(t=0,n=e.length;t<n;t++){var a=e[t],i=l.get(a[0]);i[a[1]].apply(i,a[2])}}});return i}(e),function(e){u.invoke(e||me)}),u;function t(n){return function(e,t){if(!pe(e))return n(e,t);de(e,g(n))}}function m(e,t){if(ae(e,"service"),(ge(t)||he(t))&&(t=l.instantiate(t)),!t.$get)throw Et("pget","Provider '{0}' must define $get factory method.",e);return c[e+s]=t}function a(e,t,n){return m(e,{$get:!1!==n?(a=e,i=t,function(){var e=u.invoke(i,this);if(P(e))throw Et("undef","Provider '{0}' must return a value from $get factory method.",a);return e}):t});var a,i}function p(n,a){function l(t,e){if(n.hasOwnProperty(t)){if(n[t]===i)throw Et("cdep","Circular dependency found: {0}",t+" <- "+r.join(" <- "));return n[t]}try{return r.unshift(t),n[t]=i,n[t]=a(t,e)}catch(e){throw n[t]===i&&delete n[t],e}finally{r.shift()}}function o(e,t,n,a){"string"==typeof n&&(a=n,n=null);for(var i,o=[],s=bt.$$annotate(e,d,a),r=0,c=s.length;r<c;r++){if("string"!=typeof(i=s[r]))throw Et("itkn","Incorrect injection token! Expected service name as string, got {0}",i);o.push(n&&n.hasOwnProperty(i)?n[i]:l(i,a))}return he(e)&&(e=e[c]),e.apply(t,o)}return{invoke:o,instantiate:function(e,t,n){var a=Object.create((he(e)?e[e.length-1]:e).prototype||null),i=o(e,a,t,n);return pe(i)||ge(i)?i:a},get:l,annotate:bt.$$annotate,has:function(e){return c.hasOwnProperty(e+s)||n.hasOwnProperty(e)}}}}function It(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(o,i,s){var r=o.document;function c(e){var t,n,a,i;e?(e.scrollIntoView(),(t=(ge(i=l.yOffset)?i=i():I(i)?(a=i[0],i="fixed"!==o.getComputedStyle(a).position?0:a.getBoundingClientRect().bottom):y(i)||(i=0),i))&&(n=e.getBoundingClientRect().top,o.scrollBy(0,n-t))):o.scrollTo(0,0)}function l(){var e,t,n,a=i.hash();a?(e=r.getElementById(a))?c(e):(t=r.getElementsByName(a),n=null,Array.prototype.some.call(t,function(e){if("a"===ye(e))return n=e,!0}),(e=n)?c(e):"top"===a&&c(null)):c(null)}return e&&s.$watch(function(){return i.hash()},function(e,t){var n,a;e===t&&""===e||(n=function(){s.$evalAsync(l)},"complete"===(a=a||d).document.readyState?a.setTimeout(n):le(a).on("load",n))}),l}]}bt.$$annotate=function(e,t,n){var a,i,o;if("function"==typeof e){if(!(a=e.$inject)){if(a=[],e.length){if(t)throw fe(n)&&n||(n=e.name||((o=e.toString().replace(Rt,"").match(Dt))?"function("+(o[1]||"").replace(/[\s\r\n]+/," ")+")":"fn")),Et("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);de(e.toString().replace(Rt,"").match(Dt)[1].split(Nt),function(e){e.replace(wt,function(e,t,n){a.push(n)})})}e.$inject=a}}else he(e)?(ne(e[i=e.length-1],"fn"),a=e.slice(0,i)):ne(e,"fn",!0);return a};var $t=C("$animate"),xt=["$provide",function(a){this.$$selectors={},this.register=function(e,t){var n=e+"-animation";if(e&&"."!=e.charAt(0))throw $t("notcsel","Expecting class selector starting with '.' got '{0}'.",e);this.$$selectors[e.substr(1)]=n,a.factory(n,t)},this.classNameFilter=function(e){return 1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(m,e,p){var t;function f(e,t,n){for(var a=0,i=t.length;a<i;++a){e[t[a]]=n}}function i(){return t||(t=m.defer(),e(function(){t.resolve(),t=null})),t.promise}function o(e,t){var n;A.isObject(t)&&(n=V(t.from||{},t.to||{}),e.css(n))}return{animate:function(e,t,n){return o(e,{from:t,to:n}),i()},enter:function(e,t,n,a){return o(e,a),n?n.after(e):t.prepend(e),i()},leave:function(e,t){return e.remove(),i()},move:function(e,t,n,a){return this.enter(e,t,n,a)},addClass:function(e,t,n){return this.setClass(e,t,[],n)},$$addClassImmediately:function(e,t,n){return e=le(e),t=fe(t)?t:he(t)?t.join(" "):"",de(e,function(e){st(e,t)}),o(e,n),i()},removeClass:function(e,t,n){return this.setClass(e,[],t,n)},$$removeClassImmediately:function(e,t,n){return e=le(e),t=fe(t)?t:he(t)?t.join(" "):"",de(e,function(e){ot(e,t)}),o(e,n),i()},setClass:function(c,e,t,n){var l=this,d="$$animateClasses",a=!1,i=(c=le(c)).data(d);i?n&&i.options&&(i.options=A.extend(i.options||{},n)):(i={classes:{},options:n},a=!0);var o,s,r,u=i.classes;return e=he(e)?e:e.split(" "),t=he(t)?t:t.split(" "),f(u,e,!0),f(u,t,!1),a&&(i.promise=(o=function(e){var t,n,a,i,o,s,r=c.data(d);c.removeData(d),r&&(n=c,a=r.classes,i=[],o=[],s=be(),de((n.attr("class")||"").split(/\s+/),function(e){s[e]=!0}),de(a,function(e,t){var n=s[t];!1===e&&n?o.push(t):!0!==e||n||i.push(t)}),(t=0<i.length+o.length&&[i.length?i:null,o.length?o:null])&&l.$$setClassImmediately(c,t[0],t[1],r.options)),e()},(r=m.defer()).promise.$$cancelFn=function(){s&&s()},p.$$postDigest(function(){s=o(function(){r.resolve()})}),r.promise),c.data(d,i)),i.promise},$$setClassImmediately:function(e,t,n,a){return t&&this.$$addClassImmediately(e,t),n&&this.$$removeClassImmediately(e,n),o(e,a),i()},enabled:me,cancel:me}}]}];function Pt(){this.$get=["$$rAF","$timeout",function(t,n){return t.supported?function(e){return t(e)}:function(e){return n(e,0,!1)}}]}function Mt(r,e,c,l){var d=this,u=e[0],m=r.location,p=r.history,a=r.setTimeout,t=r.clearTimeout,i={};d.isMock=!1;var o=0,n=[];function s(e){try{e.apply(null,De(arguments,1))}finally{if(0===--o)for(;n.length;)try{n.pop()()}catch(e){c.error(e)}}}d.$$completeOutstandingRequest=s,d.$$incOutstandingRequestCount=function(){o++},d.notifyWhenNoOutstandingRequests=function(e){de(h,function(e){e()}),0===o?e():n.push(e)};var f,h=[];d.addPollFn=function(e){var t,n;return P(f)&&(t=100,n=a,function e(){de(h,function(e){e()}),f=n(e,t)}()),h.push(e),e};var g,v,S=m.href,y=e.find("base"),C=null;R(),v=g,d.url=function(e,t,n){if(P(n)&&(n=null),m!==r.location&&(m=r.location),p!==r.history&&(p=r.history),e){var a=v===n;if(S===e&&(!l.history||a))return d;var i=S&&vn(S)===vn(e);return S=e,v=n,!l.history||i&&a?(i||(C=e),t?m.replace(e):i?m.hash=-1===(s=(o=e).indexOf("#"))?"":o.substr(s+1):m.href=e):(p[t?"replaceState":"pushState"](n,"",e),R(),v=g),d}return C||m.href.replace(/%27/g,"'");var o,s},d.state=function(){return g};var A=[],D=!1;function N(){R(),E()}var w=null;function R(){Ae(g=P(g=r.history.state)?null:g,w)&&(g=w),w=g}function E(){S===d.url()&&v===g||(S=d.url(),v=g,de(A,function(e){e(d.url(),g)}))}d.onUrlChange=function(e){return D||(l.history&&le(r).on("popstate",N),le(r).on("hashchange",N),D=!0),A.push(e),e},d.$$checkUrlChange=E,d.baseHref=function(){var e=y.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var b={},I="",$=d.baseHref();function x(t){try{return decodeURIComponent(t)}catch(e){return t}}d.cookies=function(e,t){var n,a,i,o,s;if(!e){if(u.cookie!==I)for(a=(I=u.cookie).split("; "),b={},o=0;o<a.length;o++)0<(s=(i=a[o]).indexOf("="))&&(e=x(i.substring(0,s)),b[e]===ce&&(b[e]=x(i.substring(s+1))));return b}t===ce?u.cookie=encodeURIComponent(e)+"=;path="+$+";expires=Thu, 01 Jan 1970 00:00:00 GMT":fe(t)&&4096<(n=(u.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path="+$).length+1)&&c.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+n+" > 4096 bytes)!")},d.defer=function(e,t){var n;return o++,n=a(function(){delete i[n],s(e)},t||0),i[n]=!0,n},d.defer.cancel=function(e){return!!i[e]&&(delete i[e],t(e),s(me),!0)}}function Tt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,a){return new Mt(e,a,t,n)}]}function Lt(){this.$get=function(){var u={};function e(e,t){if(e in u)throw C("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var n=0,a=V({},t,{id:e}),i={},o=t&&t.capacity||Number.MAX_VALUE,s={},r=null,c=null;return u[e]={put:function(e,t){if(o<Number.MAX_VALUE&&l(s[e]||(s[e]={key:e})),!P(t))return e in i||n++,i[e]=t,o<n&&this.remove(c.key),t},get:function(e){if(o<Number.MAX_VALUE){var t=s[e];if(!t)return;l(t)}return i[e]},remove:function(e){if(o<Number.MAX_VALUE){var t=s[e];if(!t)return;t==r&&(r=t.p),t==c&&(c=t.n),d(t.n,t.p),delete s[e]}delete i[e],n--},removeAll:function(){i={},n=0,s={},r=c=null},destroy:function(){s=a=i=null,delete u[e]},info:function(){return V({},a,{size:n})}};function l(e){e!=r&&(c?c==e&&(c=e.n):c=e,d(e.n,e.p),d(e,r),(r=e).n=null)}function d(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}}return e.info=function(){var n={};return de(u,function(e,t){n[t]=e.info()}),n},e.get=function(e){return u[e]},e}}function kt(){this.$get=["$cacheFactory",function(e){return e("templates")}]}var Vt=C("$compile");function Bt(n,t){var I={},$="Directive",x=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,P=/(([\w\-]+)(?:\:([^;]+))?;?)/,M=function(e){for(var t={},n=e.split(","),a=0;a<n.length;a++)t[n[a]]=!0;return t}("ngSrc,ngSrcset,src,srcset"),se=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,T=/^(on[a-z]+|formaction)$/;this.directive=function e(d,t){return ae(d,"directive"),fe(d)?(Ee(t,"directiveFactory"),I.hasOwnProperty(d)||(I[d]=[],n.factory(d+$,["$injector","$exceptionHandler",function(r,c){var l=[];return de(I[d],function(e,t){try{var n=r.invoke(e);ge(n)?n={compile:S(n)}:!n.compile&&n.link&&(n.compile=S(n.link)),n.priority=n.priority||0,n.index=t,n.name=n.name||d,n.require=n.require||n.controller&&n.name,n.restrict=n.restrict||"EA",pe(n.scope)&&(n.$$isolateBindings=(a=n.scope,i=n.name,o=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,s={},de(a,function(e,t){var n=e.match(o);if(!n)throw Vt("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",i,t,e);s[t]={mode:n[1][0],collection:"*"===n[2],optional:"?"===n[3],attrName:n[4]||t}}),s)),l.push(n)}catch(e){c(e)}var a,i,o,s}),l}])),I[d].push(t)):de(d,g(e)),this},this.aHrefSanitizationWhitelist=function(e){return K(e)?(t.aHrefSanitizationWhitelist(e),this):t.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return K(e)?(t.imgSrcSanitizationWhitelist(e),this):t.imgSrcSanitizationWhitelist()};var a=!0;this.debugInfoEnabled=function(e){return K(e)?(a=e,this):a},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(w,B,F,O,H,U,o,e,_,i,C){var G=function(e,t){if(t)for(var n,a=Object.keys(t),i=0,o=a.length;i<o;i++)this[n=a[i]]=t[n];else this.$attr={};this.$$element=e};function W(e,t){try{e.addClass(t)}catch(e){}}G.prototype={$normalize:Ot,$addClass:function(e){e&&0<e.length&&i.addClass(this.$$element,e)},$removeClass:function(e){e&&0<e.length&&i.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Ht(e,t);n&&n.length&&i.addClass(this.$$element,n);var a=Ht(t,e);a&&a.length&&i.removeClass(this.$$element,a)},$set:function(e,t,n,a){var i,o,s,r=this.$$element[0],c=gt(r,e),l=(o=e,("INPUT"===(s=r.nodeName)||"TEXTAREA"===s)&&ht[o]),d=e;if(c?(this.$$element.prop(e,t),a=c):l&&(this[l]=t,d=l),this[e]=t,a?this.$attr[e]=a:(a=this.$attr[e])||(this.$attr[e]=a=we(e,"-")),"a"===(i=ye(this.$$element))&&"href"===e||"img"===i&&"src"===e)this[e]=t=C(t,"src"===e);else if("img"===i&&"srcset"===e){for(var u="",m=Se(t),p=/\s/.test(m)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,f=m.split(p),h=Math.floor(f.length/2),g=0;g<h;g++){var v=2*g;u+=C(Se(f[v]),!0),u+=" "+Se(f[1+v])}var S=Se(f[2*g]).split(/\s/);u+=C(Se(S[0]),!0),2===S.length&&(u+=" "+Se(S[1])),this[e]=t=u}!1!==n&&(null===t||t===ce?this.$$element.removeAttr(a):this.$$element.attr(a,t));var y=this.$$observers;y&&de(y[d],function(e){try{e(t)}catch(e){F(e)}})},$observe:function(e,t){var n=this,a=n.$$observers||(n.$$observers=be()),i=a[e]||(a[e]=[]);return i.push(t),o.$evalAsync(function(){!i.$$inter&&n.hasOwnProperty(e)&&t(n[e])}),function(){Ce(i,t)}}};var t=B.startSymbol(),n=B.endSymbol(),q="{{"==t||"}}"==n?v:function(e){return e.replace(/\{\{/g,t).replace(/}}/g,n)},R=/^ngAttr[A-Z]/;return z.$$addBindingInfo=a?function(e,t){var n=e.data("$binding")||[];he(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:me,z.$$addBindingClass=a?function(e){W(e,"ng-binding")}:me,z.$$addScopeInfo=a?function(e,t,n,a){var i=n?a?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:me,z.$$addScopeClass=a?function(e,t){W(e,t?"ng-isolate-scope":"ng-scope")}:me,z;function z(d,e,t,n,a){d instanceof le||(d=le(d)),de(d,function(e,t){e.nodeType==$e&&e.nodeValue.match(/\S+/)&&(d[t]=le(e).wrap("<span></span>").parent()[0])});var u=j(d,e,d,t,n,a);z.$$addScopeClass(d);var m=null;return function(e,t,n){Ee(e,"scope");var a,i,o,s=(n=n||{}).parentBoundTranscludeFn,r=n.transcludeControllers,c=n.futureParentElement;if(s&&s.$$boundTransclude&&(s=s.$$boundTransclude),m||(i=(a=c)&&a[0],m=i&&"foreignobject"!==ye(i)&&i.toString().match(/SVG/)?"svg":"html"),o="html"!==m?le(ne(m,le("<div>").append(d).html())):t?mt.clone.call(d):d,r)for(var l in r)o.data("$"+l+"Controller",r[l].instance);return z.$$addScopeInfo(o,e),t&&t(o,e),u&&u(e,o,o,s),o}}function j(e,f,t,n,a,i){for(var o,s,r,c,l,d,h,g=[],u=0;u<e.length;u++)o=new G,(r=(s=J(e[u],[],o,0===u?n:ce,a)).length?Z(s,e[u],o,f,t,null,[],[],i):null)&&r.scope&&z.$$addScopeClass(o.$$element),l=r&&r.terminal||!(c=e[u].childNodes)||!c.length?null:j(c,r?(r.transcludeOnThisElement||!r.templateOnThisElement)&&r.transclude:f),(r||l)&&(g.push(u,r,l),d=!0,h=h||r),i=null;return d?function(e,t,n,a){var i,o,s,r,c,l,d,u,m;if(h){var p=t.length;for(m=new Array(p),c=0;c<g.length;c+=3)d=g[c],m[d]=t[d]}else m=t;for(c=0,l=g.length;c<l;)s=m[g[c++]],i=g[c++],o=g[c++],i?(i.scope?(r=e.$new(),z.$$addScopeInfo(le(s),r)):r=e,u=i.transcludeOnThisElement?K(e,i.transclude,a,i.elementTranscludeOnThisElement):!i.templateOnThisElement&&a?a:!a&&f?K(e,f):null,i(o,r,s,n,u)):o&&o(e,s.childNodes,ce,a)}:null}function K(o,s,r){return function(e,t,n,a,i){return e||((e=o.$new(!1,i)).$$transcluded=!0),s(e,t,{parentBoundTranscludeFn:r,transcludeControllers:n,futureParentElement:a})}}function J(e,t,n,a,i){var o,s,r,c,l,d=e.nodeType,u=n.$attr;switch(d){case Ie:E(t,Ot(ye(e)),"E",a,i);for(var m,p,f=e.attributes,h=0,g=f&&f.length;h<g;h++){var v,S=!1,y=!1,C=(v=f[h]).name,A=Se(v.value),D=Ot(C);(p=R.test(D))&&(C=C.replace(Ft,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var N=D.replace(/(Start|End)$/,"");!function(e){if(I.hasOwnProperty(e))for(var t=w.get(e+$),n=0,a=t.length;n<a;n++)if(t[n].multiElement)return!0;return!1}(N)||D!==N+"Start"||(y=(S=C).substr(0,C.length-5)+"end",C=C.substr(0,C.length-6)),u[m=Ot(C.toLowerCase())]=C,!p&&n.hasOwnProperty(m)||(n[m]=A,gt(e,m)&&(n[m]=!0)),function(e,t,o,s,r){var c=function(e,t){if("srcdoc"==t)return _.HTML;var n=ye(e);if("xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t))return _.RESOURCE_URL}(e,s);r=M[s]||r;var l=B(o,!0,c,r);if(!l)return;if("multiple"===s&&"select"===ye(e))throw Vt("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Ne(e));t.push({priority:100,compile:function(){return{pre:function(e,t,n){var a=n.$$observers||(n.$$observers={});if(T.test(s))throw Vt("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var i=n[s];i!==o&&(l=i&&B(i,!0,c,r),o=i),l&&(n[s]=l(e),(a[s]||(a[s]=[])).$$inter=!0,(n.$$observers&&n.$$observers[s].$$scope||e).$watch(l,function(e,t){"class"===s&&e!=t?n.$updateClass(e,t):n.$set(s,e)}))}}}})}(e,t,A,m,p),E(t,m,"A",a,i,S,y)}if(pe(s=e.className)&&(s=s.animVal),fe(s)&&""!==s)for(;o=P.exec(s);)E(t,m=Ot(o[2]),"C",a,i)&&(n[m]=Se(o[3])),s=s.substr(o.index+o[0].length);break;case $e:r=t,c=e.nodeValue,(l=B(c,!0))&&r.push({priority:0,compile:function(e){var t=e.parent(),a=!!t.length;return a&&z.$$addBindingClass(t),function(e,t){var n=t.parent();a||z.$$addBindingClass(n),z.$$addBindingInfo(n,l.expressions),e.$watch(l,function(e){t[0].nodeValue=e})}}});break;case xe:try{(o=x.exec(e.nodeValue))&&E(t,m=Ot(o[1]),"M",a,i)&&(n[m]=Se(o[2]))}catch(e){}}return t.sort(b),t}function Y(e,t,n){var a=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw Vt("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==Ie&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),a.push(e),e=e.nextSibling}while(0<i);else a.push(e);return le(a)}function X(o,s,r){return function(e,t,n,a,i){return t=Y(t[0],s,r),o(e,t,n,a,i)}}function Z(e,v,S,t,n,a,y,C,i){i=i||{};for(var o,A,s,r,c,l,d,u=-Number.MAX_VALUE,D=i.controllerDirectives,N=i.newIsolateScopeDirective,w=i.templateDirective,m=i.nonTlbTranscludeDirective,p=!1,f=!1,R=i.hasElementTranscludeDirective,h=S.$$element=le(v),g=a,E=t,b=0,I=e.length;b<I;b++){var $=(s=e[b]).$$start,x=s.$$end;if($&&(h=Y(v,$,x)),c=ce,u>s.priority)break;if((d=s.scope)&&(s.templateUrl||(pe(d)?(te("new/isolated scope",N||o,s,h),N=s):te("new/isolated scope",N,s,h)),o=o||s),r=s.name,!s.templateUrl&&s.controller&&(d=s.controller,te("'"+r+"' controller",(D=D||{})[r],s,h),D[r]=s),(d=s.transclude)&&(p=!0,s.$$tlb||(te("transclusion",m,s,h),m=s),E="element"==d?(R=!0,u=s.priority,c=h,h=S.$$element=le(re.createComment(" "+r+": "+S[r]+" ")),v=h[0],ae(n,De(c),v),z(c,t,u,g&&g.name,{nonTlbTranscludeDirective:m})):(c=le(Ze(v)).contents(),h.empty(),z(c,t))),s.template)if(f=!0,te("template",w,s,h),d=ge((w=s).template)?s.template(h,S):s.template,d=q(d),s.replace){if(g=s,c=Ke(d)?[]:Ut(ne(s.templateNamespace,Se(d))),v=c[0],1!=c.length||v.nodeType!==Ie)throw Vt("tplrt","Template for directive '{0}' must have exactly one root element. {1}",r,"");ae(n,h,v);var P={$attr:{}},M=J(v,[],P),T=e.splice(b+1,e.length-(b+1));N&&Q(M),e=e.concat(M).concat(T),ee(S,P),I=e.length}else h.html(d);if(s.templateUrl)f=!0,te("template",w,s,h),(w=s).replace&&(g=s),V=function(m,p,f,h,g,v,S,y){var C,A,D=[],N=p[0],w=m.shift(),R=ue(w,{templateUrl:null,transclude:null,replace:null,$$originalDirective:w}),E=ge(w.templateUrl)?w.templateUrl(p,f):w.templateUrl,b=w.templateNamespace;return p.empty(),O(_.getTrustedResourceUrl(E)).then(function(e){var n,t,a,i;if(e=q(e),w.replace){if(a=Ke(e)?[]:Ut(ne(b,Se(e))),n=a[0],1!=a.length||n.nodeType!==Ie)throw Vt("tplrt","Template for directive '{0}' must have exactly one root element. {1}",w.name,E);t={$attr:{}},ae(h,p,n);var o=J(n,[],t);pe(w.scope)&&Q(o),m=o.concat(m),ee(f,t)}else n=N,p.html(e);for(m.unshift(R),C=Z(m,n,f,g,p,w,v,S,y),de(h,function(e,t){e==n&&(h[t]=p[0])}),A=j(p[0].childNodes,g);D.length;){var s,r=D.shift(),c=D.shift(),l=D.shift(),d=D.shift(),u=p[0];r.$$destroyed||(c!==N&&(s=c.className,y.hasElementTranscludeDirective&&w.replace||(u=Ze(n)),ae(l,le(c),u),W(le(u),s)),i=C.transcludeOnThisElement?K(r,C.transclude,d):d,C(A,r,u,h,i))}D=null}),function(e,t,n,a,i){var o=i;t.$$destroyed||(D?D.push(t,n,a,o):(C.transcludeOnThisElement&&(o=K(t,C.transclude,i)),C(A,t,n,a,o)))}}(e.splice(b,e.length-b),h,S,n,p&&E,y,C,{controllerDirectives:D,newIsolateScopeDirective:N,templateDirective:w,nonTlbTranscludeDirective:m}),I=e.length;else if(s.compile)try{ge(l=s.compile(h,S,E))?L(null,l,$,x):l&&L(l.pre,l.post,$,x)}catch(e){F(e,Ne(h))}s.terminal&&(V.terminal=!0,u=Math.max(u,s.priority))}return V.scope=o&&!0===o.scope,V.transcludeOnThisElement=p,V.elementTranscludeOnThisElement=R,V.templateOnThisElement=f,V.transclude=E,i.hasElementTranscludeDirective=R,V;function L(e,t,n,a){e&&(n&&(e=X(e,n,a)),e.require=s.require,e.directiveName=r,N!==s&&!s.$$isolateScope||(e=ie(e,{isolateScope:!0})),y.push(e)),t&&(n&&(t=X(t,n,a)),t.require=s.require,t.directiveName=r,N!==s&&!s.$$isolateScope||(t=ie(t,{isolateScope:!0})),C.push(t))}function k(t,e,n,a){var i,o,s="data",r=!1,c=n;if(fe(e)){if(o=e.match(se),e=e.substring(o[0].length),o[3]&&(o[1]?o[3]=null:o[1]=o[3]),"^"===o[1]?s="inheritedData":"^^"===o[1]&&(s="inheritedData",c=n.parent()),"?"===o[2]&&(r=!0),i=null,a&&"data"===s&&(i=a[e])&&(i=i.instance),!(i=i||c[s]("$"+e+"Controller"))&&!r)throw Vt("ctreq","Controller '{0}', required by directive '{1}', can't be found!",e,t);return i||null}return he(e)&&(i=[],de(e,function(e){i.push(k(t,e,n,a))})),i}function V(e,d,t,n,i){var a,o,s,r,u,c,l,m,p,f,h;for(v===t?m=(p=S).$$element:(m=le(t),p=new G(m,S)),N&&(u=d.$new(!0)),i&&((l=function(e,t,n){var a;ve(e)||(n=t,t=e,e=ce);R&&(a=c);n=n||(R?m.parent():m);return i(e,t,a,n,g)}).$$boundTransclude=i),D&&(A={},c={},de(D,function(e){var t,n={$scope:e===N||e.$$isolateScope?u:d,$element:m,$attrs:p,$transclude:l};"@"==(r=e.controller)&&(r=p[e.name]),t=U(r,n,!0,e.controllerAs),c[e.name]=t,R||m.data("$"+e.name+"Controller",t.instance),A[e.name]=t})),N&&(z.$$addScopeInfo(m,u,!0,!(w&&(w===N||w===N.$$originalDirective))),z.$$addScopeClass(m,!0),f=A&&A[N.name],h=u,f&&f.identifier&&!0===N.bindToController&&(h=f.instance),de(u.$$isolateBindings=N.$$isolateBindings,function(e,t){var n,a,i,o,s=e.attrName,r=e.optional;switch(e.mode){case"@":p.$observe(s,function(e){h[t]=e}),p.$$observers[s].$$scope=d,p[s]&&(h[t]=B(p[s])(d));break;case"=":if(r&&!p[s])return;a=H(p[s]),o=a.literal?Ae:function(e,t){return e===t||e!=e&&t!=t},i=a.assign||function(){throw n=h[t]=a(d),Vt("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",p[s],N.name)},n=h[t]=a(d);var c,l=function(e){return o(e,h[t])||(o(e,n)?i(d,e=h[t]):h[t]=e),n=e};l.$stateful=!0,c=e.collection?d.$watchCollection(p[s],l):d.$watch(H(p[s],l),null,a.literal),u.$on("$destroy",c);break;case"&":a=H(p[s]),h[t]=function(e){return a(d,e)}}})),A&&(de(A,function(e){e()}),A=null),a=0,o=y.length;a<o;a++)oe(s=y[a],s.isolateScope?u:d,m,p,s.require&&k(s.directiveName,s.require,m,c),l);var g=d;for(N&&(N.template||null===N.templateUrl)&&(g=u),e&&e(g,t.childNodes,ce,i),a=C.length-1;0<=a;a--)oe(s=C[a],s.isolateScope?u:d,m,p,s.require&&k(s.directiveName,s.require,m,c),l)}}function Q(e){for(var t=0,n=e.length;t<n;t++)e[t]=ue(e[t],{$$isolateScope:!0})}function E(e,t,n,a,i,o,s){if(t!==i){var r=null;if(I.hasOwnProperty(t))for(var c,l=w.get(t+$),d=0,u=l.length;d<u;d++)try{c=l[d],(a===ce||a>c.priority)&&-1!=c.restrict.indexOf(n)&&(o&&(c=ue(c,{$$start:o,$$end:s})),e.push(c),r=c)}catch(e){F(e)}return r}}function ee(n,a){var i=a.$attr,o=n.$attr,s=n.$$element;de(n,function(e,t){"$"!=t.charAt(0)&&(a[t]&&a[t]!==e&&(e+=("style"===t?";":" ")+a[t]),n.$set(t,e,!0,i[t]))}),de(a,function(e,t){"class"==t?(W(s,e),n.class=(n.class?n.class+" ":"")+e):"style"==t?(s.attr("style",s.attr("style")+";"+e),n.style=(n.style?n.style+";":"")+e):"$"==t.charAt(0)||n.hasOwnProperty(t)||(n[t]=e,o[t]=i[t])})}function b(e,t){var n=t.priority-e.priority;return 0!=n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function te(e,t,n,a){if(t)throw Vt("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,Ne(a))}function ne(e,t){switch(e=L(e||"html")){case"svg":case"math":var n=re.createElement("div");return n.innerHTML="<"+e+">"+t+"</"+e+">",n.childNodes[0].childNodes;default:return t}}function ae(e,t,n){var a,i,o=t[0],s=t.length,r=o.parentNode;if(e)for(a=0,i=e.length;a<i;a++)if(e[a]==o){e[a++]=n;for(var c=a,l=c+s-1,d=e.length;c<d;c++,l++)l<d?e[c]=e[l]:delete e[c];e.length-=s-1,e.context===o&&(e.context=n);break}r&&r.replaceChild(n,o);var u=re.createDocumentFragment();u.appendChild(o),le(n).data(le(o).data()),h?(Re=!0,h.cleanData([o])):delete le.cache[o[le.expando]];for(var m=1,p=t.length;m<p;m++){var f=t[m];le(f).remove(),u.appendChild(f),delete t[m]}t[0]=n,t.length=1}function ie(e,t){return V(function(){return e.apply(null,arguments)},e,t)}function oe(e,t,n,a,i,o){try{e(t,n,a,i,o)}catch(e){F(e,Ne(n))}}}]}Bt.$inject=["$provide","$$sanitizeUriProvider"];var Ft=/^((?:x|data)[\:\-_])/i;function Ot(e){return _e(e.replace(Ft,""))}function Ht(e,t){var n="",a=e.split(/\s+/),i=t.split(/\s+/);e:for(var o=0;o<a.length;o++){for(var s=a[o],r=0;r<i.length;r++)if(s==i[r])continue e;n+=(0<n.length?" ":"")+s}return n}function Ut(e){var t=(e=le(e)).length;if(t<=1)return e;for(;t--;){e[t].nodeType===xe&&n.call(e,t,1)}return e}var _t=C("$controller");function Gt(){var m={},p=!1,f=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(e,t){ae(e,"controller"),pe(e)?V(m,e):m[e]=t},this.allowGlobals=function(){p=!0},this.$get=["$injector","$window",function(l,d){return function(e,t,n,a){var i,o,s;if(n=!0===n,a&&fe(a)&&(s=a),fe(e)){if(!(i=e.match(f)))throw _t("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",e);o=i[1],s=s||i[3],ne(e=m.hasOwnProperty(o)?m[o]:ie(t.$scope,o,!0)||(p?ie(d,o,!0):ce),o,!0)}if(n){var r=(he(e)?e[e.length-1]:e).prototype,c=Object.create(r||null);return s&&u(t,s,c,o||e.name),V(function(){return l.invoke(e,c,t,o),c},{instance:c,identifier:s})}return c=l.instantiate(e,t,o),s&&u(t,s,c,o||e.name),c};function u(e,t,n,a){if(!e||!pe(e.$scope))throw C("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",a,t);e.$scope[t]=n}}]}function Wt(){this.$get=["$window",function(e){return le(e.document)}]}function qt(){this.$get=["$log",function(n){return function(e,t){n.error.apply(n,arguments)}}]}var zt="application/json",jt={"Content-Type":zt+";charset=utf-8"},Kt=/^\[|^\{(?!\{)/,Jt={"[":/]$/,"{":/}$/},Yt=/^\)\]\}',?\n/;function Xt(e,t){var n,a,i,o;return fe(e)&&(!(n=e.replace(Yt,"").trim())||((a=t("Content-Type"))&&0===a.indexOf(zt)||(o=(i=n).match(Kt))&&Jt[o[0]].test(i))&&(e=H(n))),e}function Zt(e){var t,n,a,i=be();return e&&de(e.split("\n"),function(e){a=e.indexOf(":"),t=L(Se(e.substr(0,a))),n=Se(e.substr(a+1)),t&&(i[t]=i[t]?i[t]+", "+n:n)}),i}function Qt(n){var a=pe(n)?n:ce;return function(e){if(a=a||Zt(n),e){var t=a[L(e)];return void 0===t&&(t=null),t}return a}}function en(t,n,a,e){return ge(e)?e(t,n,a):(de(e,function(e){t=e(t,n,a)}),t)}function tn(e){return 200<=e&&e<300}function nn(){var S=this.defaults={transformResponse:[Xt],transformRequest:[function(e){return pe(e)&&(a=e,"[object File]"!==r.call(a))&&(n=e,"[object Blob]"!==r.call(n))&&(t=e,"[object FormData]"!==r.call(t))?O(e):e;var t,n,a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:x(jt),put:x(jt),patch:x(jt)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},y=!1;this.useApplyAsync=function(e){return K(e)?(y=!!e,this):y};var n=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(m,p,e,f,h,t){var g=e("$http"),r=[];function v(e){if(!A.isObject(e))throw C("$http")("badreq","Http request configuration must be an object.  Received: {0}",e);var n=V({method:"get",transformRequest:S.transformRequest,transformResponse:S.transformResponse},e);n.headers=function(e){var t,n,a,i=S.headers,o=V({},e.headers);i=V({},i.common,i[L(e.method)]);e:for(t in i){for(a in n=L(t),o)if(L(a)===n)continue e;o[t]=i[t]}return function(e){var n,a={};return de(e,function(e,t){ge(e)?null!=(n=e())&&(a[t]=n):a[t]=e}),a}(o)}(e),n.method=c(n.method);var t=[function(e){var n=e.headers,t=en(e.data,Qt(n),ce,e.transformRequest);return P(t)&&de(n,function(e,t){"content-type"===L(t)&&delete n[t]}),P(e.withCredentials)&&!P(S.withCredentials)&&(e.withCredentials=S.withCredentials),function(i,e){var o,t,s=h.defer(),n=s.promise,a=i.headers,r=function(e,t){if(!t)return e;var n=[];(function(e,t,n){for(var a=j(e),i=0;i<a.length;i++)t.call(n,e[a[i]],a[i])})(t,function(e,t){null===e||P(e)||(he(e)||(e=[e]),de(e,function(e){pe(e)&&(e=D(e)?e.toISOString():O(e)),n.push(q(t)+"="+q(e))}))}),0<n.length&&(e+=(-1==e.indexOf("?")?"?":"&")+n.join("&"));return e}(i.url,i.params);v.pendingRequests.push(i),n.then(u,u),!i.cache&&!S.cache||!1===i.cache||"GET"!==i.method&&"JSONP"!==i.method||(o=pe(i.cache)?i.cache:pe(S.cache)?S.cache:g);o&&(K(t=o.get(r))?b(t)?t.then(d,d):he(t)?l(t[1],t[0],x(t[2]),t[3]):l(t,200,{},"OK"):o.put(r,n));{var c;P(t)&&((c=ma(i.url)?p.cookies()[i.xsrfCookieName||S.xsrfCookieName]:ce)&&(a[i.xsrfHeaderName||S.xsrfHeaderName]=c),m(i.method,r,e,function(e,t,n,a){o&&(tn(e)?o.put(r,[e,t,Zt(n),a]):o.remove(r));function i(){l(t,e,n,a)}y?f.$applyAsync(i):(i(),f.$$phase||f.$apply())},a,i.timeout,i.withCredentials,i.responseType))}return n;function l(e,t,n,a){(tn(t=Math.max(t,0))?s.resolve:s.reject)({data:e,status:t,headers:Qt(n),config:i,statusText:a})}function d(e){l(e.data,e.status,x(e.headers()),e.statusText)}function u(){var e=v.pendingRequests.indexOf(i);-1!==e&&v.pendingRequests.splice(e,1)}}(e,t).then(s,s)},ce],a=h.when(n);for(de(r,function(e){(e.request||e.requestError)&&t.unshift(e.request,e.requestError),(e.response||e.responseError)&&t.push(e.response,e.responseError)});t.length;)var i=t.shift(),o=t.shift(),a=a.then(i,o);return a.success=function(t){return a.then(function(e){t(e.data,e.status,e.headers,n)}),a},a.error=function(t){return a.then(null,function(e){t(e.data,e.status,e.headers,n)}),a},a;function s(e){var t=V({},e);return e.data?t.data=en(e.data,e.headers,e.status,n.transformResponse):t.data=e.data,tn(e.status)?t:h.reject(t)}}return de(n,function(e){r.unshift(fe(e)?t.get(e):t.invoke(e))}),v.pendingRequests=[],function(e){de(arguments,function(n){v[n]=function(e,t){return v(V(t||{},{method:n,url:e}))}})}("get","delete","head","jsonp"),function(e){de(arguments,function(a){v[a]=function(e,t,n){return v(V(n||{},{method:a,url:e,data:t}))}})}("post","put","patch"),v.defaults=S,v}]}function an(){return new d.XMLHttpRequest}function on(){this.$get=["$browser","$window","$document",function(e,t,n){return A=an,D=(C=e).defer,N=t.angular.callbacks,w=n[0],function(e,a,t,i,n,o,s,r){if(C.$$incOutstandingRequestCount(),a=a||C.url(),"jsonp"==L(e)){var c="_"+(N.counter++).toString(36);N[c]=function(e){N[c].data=e,N[c].called=!0};var l=(m=a.replace("JSON_CALLBACK","angular.callbacks."+c),p=c,f=function(e,t){y(i,e,N[c].data,"",t),N[c]=me},h=w.createElement("script"),g=null,h.type="text/javascript",h.src=m,h.async=!0,g=function(e){Be(h,"load",g),Be(h,"error",g),w.body.removeChild(h),h=null;var t=-1,n="unknown";e&&("load"!==e.type||N[p].called||(e={type:"error"}),n=e.type,t="error"===e.type?404:200),f&&f(t,n)},Ve(h,"load",g),Ve(h,"error",g),w.body.appendChild(h),g)}else{var d=A();d.open(e,a,!0),de(n,function(e,t){K(e)&&d.setRequestHeader(t,e)}),d.onload=function(){var e=d.statusText||"",t="response"in d?d.response:d.responseText,n=1223===d.status?204:d.status;0===n&&(n=t?200:"file"==ua(a).protocol?404:0),y(i,n,t,d.getAllResponseHeaders(),e)};var u=function(){y(i,-1,null,null,"")};if(d.onerror=u,d.onabort=u,s&&(d.withCredentials=!0),r)try{d.responseType=r}catch(e){if("json"!==r)throw e}d.send(t||null)}var m,p,f,h,g,v;function S(){l&&l(),d&&d.abort()}function y(e,t,n,a,i){v!==ce&&D.cancel(v),l=d=null,e(t,n,a,i),C.$$completeOutstandingRequest(me)}0<o?v=D(S,o):b(o)&&o.then(S)};var C,A,D,N,w}]}var sn=C("$interpolate");function rn(){var R="{{",E="}}";this.startSymbol=function(e){return e?(R=e,this):R},this.endSymbol=function(e){return e?(E=e,this):E},this.$get=["$parse","$exceptionHandler","$sce",function(S,y,C){var A=R.length,D=E.length,N=new RegExp(R.replace(/./g,e),"g"),w=new RegExp(E.replace(/./g,e),"g");function e(e){return"\\\\\\"+e}function t(o,e,t,a){a=!!a;for(var n,i,s,r=0,c=[],l=[],d=o.length,u=[],m=[];r<d;){if(-1==(n=o.indexOf(R,r))||-1==(i=o.indexOf(E,n+A))){r!==d&&u.push(g(o.substring(r)));break}r!==n&&u.push(g(o.substring(r,n))),s=o.substring(n+A,i),c.push(s),l.push(S(s,v)),r=i+D,m.push(u.length),u.push("")}if(t&&1<u.length)throw sn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",o);if(!e||c.length){var p=function(e){for(var t=0,n=c.length;t<n;t++){if(a&&P(e[t]))return;u[m[t]]=e[t]}return u.join("")},f=function(e){return t?C.getTrusted(t,e):C.valueOf(e)},h=function(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=O(e)}return e};return V(function(e){var t=0,n=c.length,a=new Array(n);try{for(;t<n;t++)a[t]=l[t](e);return p(a)}catch(e){var i=sn("interr","Can't interpolate: {0}\n{1}",o,e.toString());y(i)}},{exp:o,expressions:c,$$watchDelegate:function(a,i,e){var o;return a.$watchGroup(l,function(e,t){var n=p(e);ge(i)&&i.call(this,n,e!==t?o:n,a),o=n},e)}})}function g(e){return e.replace(N,R).replace(w,E)}function v(e){try{return e=f(e),a&&!K(e)?e:h(e)}catch(e){var t=sn("interr","Can't interpolate: {0}\n{1}",o,e.toString());y(t)}}}return t.startSymbol=function(){return R},t.endSymbol=function(){return E},t}]}function cn(){this.$get=["$rootScope","$window","$q","$$q",function(d,u,m,p){var f={};function e(e,t,n,a){var i=u.setInterval,o=u.clearInterval,s=0,r=K(a)&&!a,c=(r?p:m).defer(),l=c.promise;return n=K(n)?n:0,l.then(null,null,e),l.$$intervalId=i(function(){c.notify(s++),0<n&&n<=s&&(c.resolve(s),o(l.$$intervalId),delete f[l.$$intervalId]),r||d.$apply()},t),f[l.$$intervalId]=c,l}return e.cancel=function(e){return!!(e&&e.$$intervalId in f)&&(f[e.$$intervalId].reject("canceled"),u.clearInterval(e.$$intervalId),delete f[e.$$intervalId],!0)},e}]}function ln(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"",posSuf:"",negPre:"(",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a",short:"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(e){return 1===e?"one":"other"}}}}var dn=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,un={http:80,https:443,ftp:21},mn=C("$location");function pn(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=W(t[n]);return t.join("/")}function fn(e,t){var n=ua(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=p(n.port)||un[n.protocol]||null}function hn(e,t){var n="/"!==e.charAt(0);n&&(e="/"+e);var a=ua(e);t.$$path=decodeURIComponent(n&&"/"===a.pathname.charAt(0)?a.pathname.substring(1):a.pathname),t.$$search=_(a.search),t.$$hash=decodeURIComponent(a.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function gn(e,t){if(0===t.indexOf(e))return t.substr(e.length)}function vn(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function Sn(e){return e.replace(/(#.+)|#$/,"$1")}function yn(e){return e.substr(0,vn(e).lastIndexOf("/")+1)}function Cn(o,s){this.$$html5=!0,s=s||"";var r=yn(o);fn(o,this),this.$$parse=function(e){var t=gn(r,e);if(!fe(t))throw mn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,r);hn(t,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=G(this.$$search),t=this.$$hash?"#"+W(this.$$hash):"";this.$$url=pn(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=r+this.$$url.substr(1)},this.$$parseLinkUrl=function(e,t){return t&&"#"===t[0]?(this.hash(t.slice(1)),!0):((n=gn(o,e))!==ce?i=(n=gn(s,a=n))!==ce?r+(gn("/",n)||n):o+a:(n=gn(r,e))!==ce?i=r+n:r==e+"/"&&(i=r),i&&this.$$parse(i),!!i);var n,a,i}}function An(a,i){var o=yn(a);fn(a,this),this.$$parse=function(e){var t,n=gn(a,e)||gn(o,e);"#"===n.charAt(0)?P(t=gn(i,n))&&(t=n):t=this.$$html5?n:"",hn(t,this),this.$$path=function(e,t,n){var a,i=/^\/[A-Z]:(\/.*)/;0===t.indexOf(n)&&(t=t.replace(n,""));if(i.exec(t))return e;return(a=i.exec(e))?a[1]:e}(this.$$path,t,a),this.$$compose()},this.$$compose=function(){var e=G(this.$$search),t=this.$$hash?"#"+W(this.$$hash):"";this.$$url=pn(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=a+(this.$$url?i+this.$$url:"")},this.$$parseLinkUrl=function(e,t){return vn(a)==vn(e)&&(this.$$parse(e),!0)}}function Dn(i,o){this.$$html5=!0,An.apply(this,arguments);var s=yn(i);this.$$parseLinkUrl=function(e,t){return t&&"#"===t[0]?(this.hash(t.slice(1)),!0):(i==vn(e)?n=e:(a=gn(s,e))?n=i+o+a:s===e+"/"&&(n=s),n&&this.$$parse(n),!!n);var n,a},this.$$compose=function(){var e=G(this.$$search),t=this.$$hash?"#"+W(this.$$hash):"";this.$$url=pn(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=i+o+this.$$url}}var Nn={$$html5:!1,$$replace:!1,absUrl:wn("$$absUrl"),url:function(e){if(P(e))return this.$$url;var t=dn.exec(e);return!t[1]&&""!==e||this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:wn("$$protocol"),host:wn("$$host"),port:wn("$$port"),path:Rn("$$path",function(e){return"/"==(e=null!==e?e.toString():"").charAt(0)?e:"/"+e}),search:function(n,e){switch(arguments.length){case 0:return this.$$search;case 1:if(fe(n)||y(n))n=n.toString(),this.$$search=_(n);else{if(!pe(n))throw mn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");de(n=$(n,{}),function(e,t){null==e&&delete n[t]}),this.$$search=n}break;default:P(e)||null===e?delete this.$$search[n]:this.$$search[n]=e}return this.$$compose(),this},hash:Rn("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};function wn(e){return function(){return this[e]}}function Rn(t,n){return function(e){return P(e)?this[t]:(this[t]=n(e),this.$$compose(),this)}}function En(){var h="",g={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return K(e)?(h=e,this):h},this.html5Mode=function(e){return R(e)?(g.enabled=e,this):pe(e)?(R(e.enabled)&&(g.enabled=e.enabled),R(e.requireBase)&&(g.requireBase=e.requireBase),R(e.rewriteLinks)&&(g.rewriteLinks=e.rewriteLinks),this):g},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(s,r,t,i,o){var c,e,n,a,l=r.baseHref(),d=r.url();if(g.enabled){if(!l&&g.requireBase)throw mn("nobase","$location in HTML5 mode requires a <base> tag to be present!");n=(a=d).substring(0,a.indexOf("/",a.indexOf("//")+2))+(l||"/"),e=t.history?Cn:Dn}else n=vn(d),e=An;(c=new e(n,"#"+h)).$$parseLinkUrl(d,d),c.$$state=r.state();var u=/^\s*(javascript|mailto):/i;function m(e,t,n){var a=c.url(),i=c.$$state;try{r.url(e,t,n),c.$$state=r.state()}catch(e){throw c.url(a),c.$$state=i,e}}i.on("click",function(e){if(g.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var t=le(e.target);"a"!==ye(t[0]);)if(t[0]===i[0]||!(t=t.parent())[0])return;var n=t.prop("href"),a=t.attr("href")||t.attr("xlink:href");pe(n)&&"[object SVGAnimatedString]"===n.toString()&&(n=ua(n.animVal).href),u.test(n)||!n||t.attr("target")||e.isDefaultPrevented()||c.$$parseLinkUrl(n,a)&&(e.preventDefault(),c.absUrl()!=r.url()&&(s.$apply(),o.angular["ff-684208-preventDefault"]=!0))}}),Sn(c.absUrl())!=Sn(d)&&r.url(c.absUrl(),!0);var p=!0;return r.onUrlChange(function(a,i){s.$evalAsync(function(){var e,t=c.absUrl(),n=c.$$state;c.$$parse(a),c.$$state=i,e=s.$broadcast("$locationChangeStart",a,t,i,n).defaultPrevented,c.absUrl()===a&&(e?(c.$$parse(t),c.$$state=n,m(t,!1,n)):(p=!1,f(t,n)))}),s.$$phase||s.$digest()}),s.$watch(function(){var n=Sn(r.url()),e=Sn(c.absUrl()),a=r.state(),i=c.$$replace,o=n!==e||c.$$html5&&t.history&&a!==c.$$state;(p||o)&&(p=!1,s.$evalAsync(function(){var e=c.absUrl(),t=s.$broadcast("$locationChangeStart",e,n,c.$$state,a).defaultPrevented;c.absUrl()===e&&(t?(c.$$parse(n),c.$$state=a):(o&&m(e,i,a===c.$$state?null:c.$$state),f(n,a)))})),c.$$replace=!1}),c;function f(e,t){s.$broadcast("$locationChangeSuccess",c.absUrl(),e,c.$$state,t)}}]}function bn(){var n=!0,a=this;this.debugEnabled=function(e){return K(e)?(n=e,this):n},this.$get=["$window",function(i){return{log:t("log"),info:t("info"),warn:t("warn"),error:t("error"),debug:(e=t("debug"),function(){n&&e.apply(a,arguments)})};var e;function t(e){var t=i.console||{},a=t[e]||t.log||me,n=!1;try{n=!!a.apply}catch(e){}return n?function(){var n=[];return de(arguments,function(e){var t;n.push(((t=e)instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t))}),a.apply(t,n)}:function(e,t){a(e,null==t?"":t)}}}]}de([Dn,An,Cn],function(t){t.prototype=Object.create(Nn),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==Cn||!this.$$html5)throw mn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=P(e)?null:e,this}});var In=C("$parse");function $n(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw In("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function xn(e,t){if(e){if(e.constructor===e)throw In("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw In("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw In("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw In("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}var Pn=Function.prototype.call,Mn=Function.prototype.apply,Tn=Function.prototype.bind;var Ln=be();de({null:function(){return null},true:function(){return!0},false:function(){return!1},undefined:function(){}},function(e,t){e.constant=e.literal=e.sharedGetter=!0,Ln[t]=e}),Ln.this=function(e){return e},Ln.this.sharedGetter=!0;var kn=V(be(),{"+":function(e,t,n,a){return n=n(e,t),a=a(e,t),K(n)?K(a)?n+a:n:K(a)?a:ce},"-":function(e,t,n,a){return n=n(e,t),a=a(e,t),(K(n)?n:0)-(K(a)?a:0)},"*":function(e,t,n,a){return n(e,t)*a(e,t)},"/":function(e,t,n,a){return n(e,t)/a(e,t)},"%":function(e,t,n,a){return n(e,t)%a(e,t)},"===":function(e,t,n,a){return n(e,t)===a(e,t)},"!==":function(e,t,n,a){return n(e,t)!==a(e,t)},"==":function(e,t,n,a){return n(e,t)==a(e,t)},"!=":function(e,t,n,a){return n(e,t)!=a(e,t)},"<":function(e,t,n,a){return n(e,t)<a(e,t)},">":function(e,t,n,a){return n(e,t)>a(e,t)},"<=":function(e,t,n,a){return n(e,t)<=a(e,t)},">=":function(e,t,n,a){return n(e,t)>=a(e,t)},"&&":function(e,t,n,a){return n(e,t)&&a(e,t)},"||":function(e,t,n,a){return n(e,t)||a(e,t)},"!":function(e,t,n){return!n(e,t)},"=":!0,"|":!0}),Vn={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Bn=function(e){this.options=e};function Fn(e){return e.constant}Bn.prototype={constructor:Bn,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t,n,a,i,o,s,r=this.text.charAt(this.index);'"'===r||"'"===r?this.readString(r):this.isNumber(r)||"."===r&&this.isNumber(this.peek())?this.readNumber():this.isIdent(r)?this.readIdent():this.is(r,"(){}[].,;:?")?(this.tokens.push({index:this.index,text:r}),this.index++):this.isWhitespace(r)?this.index++:(n=(t=r+this.peek())+this.peek(2),a=kn[r],i=kn[t],o=kn[n],a||i||o?(s=o?n:i?t:r,this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length):this.throwError("Unexpected next character ",this.index,this.index+1))}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||""===e},isIdent:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var a=K(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw In("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,a,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=L(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var a=this.peek();if("e"==n&&this.isExpOperator(a))e+=n;else if(this.isExpOperator(n)&&a&&this.isNumber(a)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||a&&this.isNumber(a)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){for(var e=this.index;this.index<this.text.length;){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",a=e,i=!1;this.index<this.text.length;){var o,s=this.text.charAt(this.index);if(a+=s,i)"u"===s?((o=this.text.substring(this.index+1,this.index+5)).match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))):n+=Vn[s]||s,i=!1;else if("\\"===s)i=!0;else{if(s===e)return this.index++,void this.tokens.push({index:t,text:a,constant:!0,value:n});n+=s}this.index++}this.throwError("Unterminated quote",t)}};var On=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};function Hn(e,t,n,a,i){xn(e,i),xn(t,i);for(var o,s=n.split("."),r=0;1<s.length;r++){o=$n(s.shift(),i);var c=0===r&&t&&t[o]||e[o];c||(c={},e[o]=c),e=xn(c,i)}return xn(e[o=$n(s.shift(),i)],i),e[o]=a}On.ZERO=V(function(){return 0},{sharedGetter:!0,constant:!0}),On.prototype={constructor:On,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e,t,n;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.peek().identifier&&this.peek().text in Ln?e=Ln[this.consume().text]:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(;t=this.expect("(","[",".");)"("===t.text?(e=this.functionCall(e,n),n=null):"["===t.text?(n=e,e=this.objectIndex(e)):"."===t.text?(n=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw In("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw In("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,a){return this.peekAhead(0,e,t,n,a)},peekAhead:function(e,t,n,a,i){if(this.tokens.length>e){var o=this.tokens[e],s=o.text;if(s===t||s===n||s===a||s===i||!t&&!n&&!a&&!i)return o}return!1},expect:function(e,t,n,a){var i=this.peek(e,t,n,a);return!!i&&(this.tokens.shift(),i)},consume:function(e){if(0===this.tokens.length)throw In("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},unaryFn:function(e,n){var a=kn[e];return V(function(e,t){return a(e,t,n)},{constant:n.constant,inputs:[n]})},binaryFn:function(n,e,a,t){var i=kn[e];return V(function(e,t){return i(e,t,n,a)},{constant:n.constant&&a.constant,inputs:!t&&[n,a]})},identifier:function(){for(var e=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)e+=this.consume().text+this.consume().text;return function(a,e,i){var o=e.expensiveChecks,t=o?_n:Un,n=t[a];if(n)return n;var s=a.split("."),r=s.length;{var c,l,d;n=e.csp?r<6?Wn(s[0],s[1],s[2],s[3],s[4],i,o):function(e,t){for(var n,a=0;n=Wn(s[a++],s[a++],s[a++],s[a++],s[a++],i,o)(e,t),t=ce,e=n,a<r;);return n}:(c="",o&&(c+="s = eso(s, fe);\nl = eso(l, fe);\n"),l=o,de(s,function(e,t){$n(e,i);var n=(t?"s":'((l&&l.hasOwnProperty("'+e+'"))?l:s)')+"."+e;(o||Gn(e))&&(n="eso("+n+", fe)",l=!0),c+="if(s == null) return undefined;\ns="+n+";\n"}),c+="return s;",(d=new Function("s","l","eso","fe",c)).toString=S(c),l&&(d=function(n,a){return function(e,t){return n(e,t,xn,a)}}(d,i)),d)}return n.sharedGetter=!0,n.assign=function(e,t,n){return Hn(e,n,a,t,a)},t[a]=n}(e,this.options,this.text)},constant:function(){var e=this.consume().value;return V(function(){return e},{constant:!0,literal:!0})},statements:function(){for(var o=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&o.push(this.filterChain()),!this.expect(";"))return 1===o.length?o[0]:function(e,t){for(var n,a=0,i=o.length;a<i;a++)n=o[a](e,t);return n}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},filter:function(i){var o,s,r=this.$filter(this.consume().text);if(this.peek(":"))for(o=[],s=[];this.expect(":");)o.push(this.expression());var e=[i].concat(o||[]);return V(function(e,t){var n=i(e,t);if(s){s[0]=n;for(var a=o.length;a--;)s[a+1]=o[a](e,t);return r.apply(ce,s)}return r(n)},{constant:!r.$stateful&&e.every(Fn),inputs:!r.$stateful&&e})},expression:function(){return this.assignment()},assignment:function(){var n,e,a=this.ternary();return(e=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,e.index)+"] can not be assigned to",e),n=this.ternary(),V(function(e,t){return a.assign(e,n(e,t),t)},{inputs:[a,n]})):a},ternary:function(){var n,a=this.logicalOR();if(this.expect("?")&&(n=this.assignment(),this.consume(":"))){var i=this.assignment();return V(function(e,t){return(a(e,t)?n:i)(e,t)},{constant:a.constant&&n.constant&&i.constant})}return a},logicalOR:function(){for(var e,t=this.logicalAND();e=this.expect("||");)t=this.binaryFn(t,e.text,this.logicalAND(),!0);return t},logicalAND:function(){for(var e,t=this.equality();e=this.expect("&&");)t=this.binaryFn(t,e.text,this.equality(),!0);return t},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t=this.binaryFn(t,e.text,this.relational());return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t=this.binaryFn(t,e.text,this.additive());return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=this.binaryFn(t,e.text,this.multiplicative());return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=this.binaryFn(t,e.text,this.unary());return t},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(On.ZERO,e.text,this.unary()):(e=this.expect("!"))?this.unaryFn(e.text,this.unary()):this.primary()},fieldAccess:function(i){var o=this.identifier();return V(function(e,t,n){var a=n||i(e,t);return null==a?ce:o(a)},{assign:function(e,t,n){var a=i(e,n);return a||i.assign(e,a={},n),o.assign(a,t)}})},objectIndex:function(o){var s=this.text,r=this.expression();return this.consume("]"),V(function(e,t){var n=o(e,t),a=r(e,t);return $n(a,s),n?xn(n[a],s):ce},{assign:function(e,t,n){var a=$n(r(e,n),s),i=xn(o(e,n),s);return i||o.assign(e,i={},n),i[a]=t}})},functionCall:function(s,r){var c=[];if(")"!==this.peekToken().text)for(;c.push(this.expression()),this.expect(","););this.consume(")");var l=this.text,d=c.length?[]:null;return function(e,t){var n=r?r(e,t):K(r)?ce:e,a=s(e,t,n)||me;if(d)for(var i=c.length;i--;)d[i]=xn(c[i](e,t),l);xn(n,l),function(e,t){if(e){if(e.constructor===e)throw In("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===Pn||e===Mn||e===Tn)throw In("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}(a,l);var o=a.apply?a.apply(n,d):a(d[0],d[1],d[2],d[3],d[4]);return d&&(d.length=0),xn(o,l)}},arrayDeclaration:function(){var o=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;o.push(this.expression())}while(this.expect(","));return this.consume("]"),V(function(e,t){for(var n=[],a=0,i=o.length;a<i;a++)n.push(o[a](e,t));return n},{literal:!0,constant:o.every(Fn),inputs:o})},object:function(){var o=[],s=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var e=this.consume();e.constant?o.push(e.value):e.identifier?o.push(e.text):this.throwError("invalid key",e),this.consume(":"),s.push(this.expression())}while(this.expect(","));return this.consume("}"),V(function(e,t){for(var n={},a=0,i=s.length;a<i;a++)n[o[a]]=s[a](e,t);return n},{literal:!0,constant:s.every(Fn),inputs:s})}};var Un=be(),_n=be();function Gn(e){return"constructor"==e}function Wn(a,i,o,s,r,t,e){$n(a,t),$n(i,t),$n(o,t),$n(s,t),$n(r,t);function n(e){return xn(e,t)}var c=e||Gn(a)?n:v,l=e||Gn(i)?n:v,d=e||Gn(o)?n:v,u=e||Gn(s)?n:v,m=e||Gn(r)?n:v;return function(e,t){var n=t&&t.hasOwnProperty(a)?t:e;return null==n?n:(n=c(n[a]),i?null==n?ce:(n=l(n[i]),o?null==n?ce:(n=d(n[o]),s?null==n?ce:(n=u(n[s]),r?null==n?ce:n=m(n[r]):n):n):n):n)}}var qn=Object.prototype.valueOf;function zn(e){return ge(e.valueOf)?e.valueOf():qn.call(e)}function jn(){var y=be(),C=be();this.$get=["$filter","$sniffer",function(u,e){var m={csp:e.csp,expensiveChecks:!1},p={csp:e.csp,expensiveChecks:!0};return function(e,t,n){var a,i,o,s;switch(typeof e){case"string":i=e=e.trim();var r,c,l,d=n?C:y;return(l=d[i])||(":"===e.charAt(0)&&":"===e.charAt(1)&&(a=!0,e=e.substring(2)),c=new Bn(r=n?p:m),(l=new On(c,u,r).parse(e)).constant?l.$$watchDelegate=v:a?((s=o=l).sharedGetter&&((s=function(e,t){return o(e,t)}).literal=o.literal,s.constant=o.constant,s.assign=o.assign),(l=s).$$watchDelegate=l.literal?g:h):l.inputs&&(l.$$watchDelegate=f),d[i]=l),S(l,t);case"function":return S(e,t);default:return S(me,t)}};function d(e,t){return null==e||null==t?e===t:("object"!=typeof e||"object"!=typeof(e=zn(e)))&&(e===t||e!=e&&t!=t)}function f(e,t,n,o){var s;if(1===(r=o.$$inputs||(o.$$inputs=function e(t,n){for(var a=0,i=t.length;a<i;a++){var o=t[a];o.constant||(o.inputs?e(o.inputs,n):-1===n.indexOf(o)&&n.push(o))}return n}(o.inputs,[]))).length){var a=d,r=r[0];return e.$watch(function(e){var t=r(e);return d(t,a)||(s=o(e),a=t&&zn(t)),s},t,n)}for(var c=[],i=0,l=r.length;i<l;i++)c[i]=d;return e.$watch(function(e){for(var t=!1,n=0,a=r.length;n<a;n++){var i=r[n](e);(t=t||!d(i,c[n]))&&(c[n]=i&&zn(i))}return t&&(s=o(e)),s},t,n)}function h(e,a,t,n){var i,o;return i=e.$watch(function(e){return n(e)},function(e,t,n){o=e,ge(a)&&a.apply(this,arguments),K(e)&&n.$$postDigest(function(){K(o)&&i()})},t)}function g(e,a,t,n){var i,o;return i=e.$watch(function(e){return n(e)},function(e,t,n){o=e,ge(a)&&a.call(this,e,t,n),s(e)&&n.$$postDigest(function(){s(o)&&i()})},t);function s(e){var t=!0;return de(e,function(e){K(e)||(t=!1)}),t}}function v(e,a,t,n){var i;return i=e.$watch(function(e){return n(e)},function(e,t,n){ge(a)&&a.apply(this,arguments),i()},t)}function S(i,o){if(!o)return i;var e=i.$$watchDelegate,t=e!==g&&e!==h?function(e,t){var n=i(e,t);return o(n,e,t)}:function(e,t){var n=i(e,t),a=o(n,e,t);return K(n)?a:n};return i.$$watchDelegate&&i.$$watchDelegate!==f?t.$$watchDelegate=i.$$watchDelegate:o.$stateful||(t.$$watchDelegate=f,t.inputs=[i]),t}}]}function Kn(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return Yn(function(e){t.$evalAsync(e)},e)}]}function Jn(){this.$get=["$browser","$exceptionHandler",function(t,e){return Yn(function(e){t.defer(e)},e)}]}function Yn(t,c){var n=C("$q",TypeError);function e(){this.$$state={status:0}}function a(t,n){return function(e){n.call(t,e)}}function l(e){!e.processScheduled&&e.pending&&(e.processScheduled=!0,t(function(){!function(e){var t,n,a=e.pending;e.processScheduled=!1,e.pending=ce;for(var i=0,o=a.length;i<o;++i){n=a[i][0],t=a[i][e.status];try{ge(t)?n.resolve(t(e.value)):1===e.status?n.resolve(e.value):n.reject(e.value)}catch(e){n.reject(e),c(e)}}}(e)}))}function o(){this.promise=new e,this.resolve=a(this,this.resolve),this.reject=a(this,this.reject),this.notify=a(this,this.notify)}e.prototype={then:function(e,t,n){var a=new o;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([a,e,t,n]),0<this.$$state.status&&l(this.$$state),a.promise},catch:function(e){return this.then(null,e)},finally:function(t,e){return this.then(function(e){return r(e,!0,t)},function(e){return r(e,!1,t)},e)}},o.prototype={resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(n("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){var t,n,a,i,o,s;function r(t){return function(e){s||(s=!0,t.call(a,e))}}i=(a=this).$$resolve,o=this.$$reject,s=!1,n=[r(i),r(o)];try{(pe(e)||ge(e))&&(t=e&&e.then),ge(t)?(this.promise.$$state.status=-1,t.call(e,n[0],n[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,l(this.promise.$$state))}catch(e){n[1](e),c(e)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,l(this.promise.$$state)},notify:function(i){var o=this.promise.$$state.pending;this.promise.$$state.status<=0&&o&&o.length&&t(function(){for(var e,t,n=0,a=o.length;n<a;n++){t=o[n][0],e=o[n][3];try{t.notify(ge(e)?e(i):i)}catch(e){c(e)}}})}};function i(e,t){var n=new o;return t?n.resolve(e):n.reject(e),n.promise}function s(e,t,n,a){var i=new o;return i.resolve(e),i.promise.then(t,n,a)}var r=function(e,t,n){var a=null;try{ge(n)&&(a=n())}catch(e){return i(e,!1)}return b(a)?a.then(function(){return i(e,t)},function(e){return i(e,!1)}):i(e,t)};function d(e){if(!ge(e))throw n("norslvr","Expected resolverFn, got '{0}'",e);if(!(this instanceof d))return new d(e);var t=new o;return e(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}return d.defer=function(){return new o},d.reject=function(e){var t=new o;return t.reject(e),t.promise},d.when=s,d.all=function(e){var n=new o,a=0,i=he(e)?[]:{};return de(e,function(e,t){a++,s(e).then(function(e){i.hasOwnProperty(t)||(i[t]=e,--a||n.resolve(i))},function(e){i.hasOwnProperty(t)||n.reject(e)})}),0===a&&n.resolve(i),n.promise},d}function Xn(){this.$get=["$window","$timeout",function(e,n){var a=e.requestAnimationFrame||e.webkitRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,t=!!a,o=t?function(e){var t=a(e);return function(){i(t)}}:function(e){var t=n(e,16.66,!1);return function(){n.cancel(t)}};return o.supported=t,o}]}function Zn(){var D=10,N=C("$rootScope"),w=null,R=null;this.digestTtl=function(e){return arguments.length&&(D=e),D},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(e,m,f,p){function a(){this.$id=i(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,(this.$root=this).$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}a.prototype={constructor:a,$new:function(e,t){var n;return t=t||this,e?(n=new a).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=i(),this.$$ChildScope=null},this.$$ChildScope.prototype=this),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,!e&&t==this||n.$on("$destroy",function(){n.$$destroyed=!0}),n},$watch:function(e,t,n){var a=f(e);if(a.$$watchDelegate)return a.$$watchDelegate(this,t,n,a);var i=this.$$watchers,o={fn:t,last:C,get:a,exp:e,eq:!!n};return w=null,ge(t)||(o.fn=me),(i=i||(this.$$watchers=[])).unshift(o),function(){Ce(i,o),w=null}},$watchGroup:function(e,a){var i=new Array(e.length),o=new Array(e.length),s=[],r=this,c=!1,t=!0;if(!e.length){var n=!0;return r.$evalAsync(function(){n&&a(o,o,r)}),function(){n=!1}}if(1===e.length)return this.$watch(e[0],function(e,t,n){o[0]=e,i[0]=t,a(o,e===t?o:i,n)});function l(){c=!1,t?(t=!1,a(o,o,r)):a(o,i,r)}return de(e,function(e,n){var t=r.$watch(e,function(e,t){o[n]=e,i[n]=t,c||(c=!0,r.$evalAsync(l))});s.push(t)}),function(){for(;s.length;)s.shift()()}},$watchCollection:function(e,n){p.$stateful=!0;var s,r,a,i=this,o=1<n.length,c=0,t=f(e,p),l=[],d={},u=!0,m=0;function p(e){var t,n,a,i;if(!P(s=e)){if(pe(s))if(k(s)){r!==l&&(m=(r=l).length=0,c++),t=s.length,m!==t&&(c++,r.length=m=t);for(var o=0;o<t;o++)i=r[o],a=s[o],i!=i&&a!=a||i===a||(c++,r[o]=a)}else{for(n in r!==d&&(r=d={},m=0,c++),t=0,s)s.hasOwnProperty(n)&&(t++,a=s[n],i=r[n],n in r?i!=i&&a!=a||i===a||(c++,r[n]=a):(m++,r[n]=a,c++));if(t<m)for(n in c++,r)s.hasOwnProperty(n)||(m--,delete r[n])}else r!==s&&(r=s,c++);return c}}return this.$watch(t,function(){if(u?(u=!1,n(s,s,i)):n(s,a,i),o)if(pe(s))if(k(s)){a=new Array(s.length);for(var e=0;e<s.length;e++)a[e]=s[e]}else for(var t in a={},s)E.call(s,t)&&(a[t]=s[t]);else a=s})},$digest:function(){var e,t,n,a,i,o,s,r,c,l,d=D,u=[];S("$digest"),p.$$checkUrlChange(),this===h&&null!==R&&(p.defer.cancel(R),A()),w=null;do{for(o=!1,r=this;g.length;){try{(l=g.shift()).scope.$eval(l.expression,l.locals)}catch(e){m(e)}w=null}e:do{if(a=r.$$watchers)for(i=a.length;i--;)try{if(e=a[i])if((t=e.get(r))===(n=e.last)||(e.eq?Ae(t,n):"number"==typeof t&&"number"==typeof n&&isNaN(t)&&isNaN(n))){if(e===w){o=!1;break e}}else o=!0,(w=e).last=e.eq?$(t,null):t,e.fn(t,n===C?t:n,r),d<5&&(u[c=4-d]||(u[c]=[]),u[c].push({msg:ge(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:t,oldVal:n}))}catch(e){m(e)}if(!(s=r.$$childHead||r!==this&&r.$$nextSibling))for(;r!==this&&!(s=r.$$nextSibling);)r=r.$parent}while(r=s);if((o||g.length)&&!d--)throw y(),N("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",D,u)}while(o||g.length);for(y();v.length;)try{v.shift()()}catch(e){m(e)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==h){for(var t in this.$$listenerCount)o(this,this.$$listenerCount[t],t);e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=me,this.$on=this.$watch=this.$watchGroup=function(){return me},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(e,t){return f(e)(this,t)},$evalAsync:function(e,t){h.$$phase||g.length||p.defer(function(){g.length&&h.$digest()}),g.push({scope:this,expression:e,locals:t})},$$postDigest:function(e){v.push(e)},$apply:function(e){try{return S("$apply"),this.$eval(e)}catch(e){m(e)}finally{y();try{h.$digest()}catch(e){throw m(e),e}}},$applyAsync:function(e){var t=this;e&&n.push(function(){t.$eval(e)}),null===R&&(R=p.defer(function(){h.$apply(A)}))},$on:function(t,n){var a=this.$$listeners[t];a||(this.$$listeners[t]=a=[]),a.push(n);for(var e=this;e.$$listenerCount[t]||(e.$$listenerCount[t]=0),e.$$listenerCount[t]++,e=e.$parent;);var i=this;return function(){var e=a.indexOf(n);-1!==e&&(a[e]=null,o(i,1,t))}},$emit:function(e,t){var n,a,i,o=[],s=this,r=!1,c={name:e,targetScope:s,stopPropagation:function(){r=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},l=T([c],arguments,1);do{for(n=s.$$listeners[e]||o,c.currentScope=s,a=0,i=n.length;a<i;a++)if(n[a])try{n[a].apply(null,l)}catch(e){m(e)}else n.splice(a,1),a--,i--;if(r)return c.currentScope=null,c;s=s.$parent}while(s);return c.currentScope=null,c},$broadcast:function(e,t){var n=this,a=n,i=n,o={name:e,targetScope:n,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return o;for(var s,r,c,l=T([o],arguments,1);a=i;){for(r=0,c=(s=(o.currentScope=a).$$listeners[e]||[]).length;r<c;r++)if(s[r])try{s[r].apply(null,l)}catch(e){m(e)}else s.splice(r,1),r--,c--;if(!(i=a.$$listenerCount[e]&&a.$$childHead||a!==n&&a.$$nextSibling))for(;a!==n&&!(i=a.$$nextSibling);)a=a.$parent}return o.currentScope=null,o}};var h=new a,g=h.$$asyncQueue=[],v=h.$$postDigestQueue=[],n=h.$$applyAsyncQueue=[];return h;function S(e){if(h.$$phase)throw N("inprog","{0} already in progress",h.$$phase);h.$$phase=e}function y(){h.$$phase=null}function o(e,t,n){for(;e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n],e=e.$parent;);}function C(){}function A(){for(;n.length;)try{n.shift()()}catch(e){m(e)}R=null}}]}function Qn(){var i=/^\s*(https?|ftp|mailto|tel|file):/,o=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return K(e)?(i=e,this):i},this.imgSrcSanitizationWhitelist=function(e){return K(e)?(o=e,this):o},this.$get=function(){return function(e,t){var n=t?o:i,a=ua(e).href;return""===a||a.match(n)?e:"unsafe:"+a}}}var ea=C("$sce"),ta={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function na(e){var t=[];return K(e)&&de(e,function(e){t.push(function(e){if("self"===e)return e;if(fe(e)){if(-1<e.indexOf("***"))throw ea("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=l(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(N(e))return new RegExp("^"+e.source+"$");throw ea("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(e))}),t}function aa(){this.SCE_CONTEXTS=ta;var s=["self"],r=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(s=na(e)),s},this.resourceUrlBlacklist=function(e){return arguments.length&&(r=na(e)),r},this.$get=["$injector",function(e){var a=function(){throw ea("unsafe","Attempting to use an unsafe value in a safe context.")};function o(e,t){return"self"===e?ma(t):e.exec(t.href)}function t(e){function t(e){this.$$unwrapTrustedValue=function(){return e}}return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}e.has("$sanitize")&&(a=e.get("$sanitize"));var n=t(),i={};return i[ta.HTML]=t(n),i[ta.CSS]=t(n),i[ta.URL]=t(n),i[ta.JS]=t(n),i[ta.RESOURCE_URL]=t(i[ta.URL]),{trustAs:function(e,t){var n=i.hasOwnProperty(e)?i[e]:null;if(!n)throw ea("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===ce||""===t)return t;if("string"!=typeof t)throw ea("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)},getTrusted:function(e,t){if(null===t||t===ce||""===t)return t;var n=i.hasOwnProperty(e)?i[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===ta.RESOURCE_URL){if(function(e){for(var t=ua(e.toString()),n=!1,a=0,i=s.length;a<i;a++)if(o(s[a],t)){n=!0;break}if(n)for(a=0,i=r.length;a<i;a++)if(o(r[a],t)){n=!1;break}return n}(t))return t;throw ea("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===ta.HTML)return a(t);throw ea("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(e){return e instanceof n?e.$$unwrapTrustedValue():e}}}]}function ia(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(a,e){if(t&&z<8)throw ea("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=x(ta);i.isEnabled=function(){return t},i.trustAs=e.trustAs,i.getTrusted=e.getTrusted,i.valueOf=e.valueOf,t||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=v),i.parseAs=function(t,e){var n=a(e);return n.literal&&n.constant?n:a(e,function(e){return i.getTrusted(t,e)})};var o=i.parseAs,s=i.getTrusted,r=i.trustAs;return de(ta,function(t,e){var n=L(e);i[_e("parse_as_"+n)]=function(e){return o(t,e)},i[_e("get_trusted_"+n)]=function(e){return s(t,e)},i[_e("trust_as_"+n)]=function(e){return r(t,e)}}),i}]}function oa(){this.$get=["$window","$document",function(e,t){var n,a,i={},o=p((/android (\d+)/.exec(L((e.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((e.navigator||{}).userAgent),r=t[0]||{},c=/^(Moz|webkit|ms)(?=[A-Z])/,l=r.body&&r.body.style,d=!1,u=!1;if(l){for(var m in l)if(a=c.exec(m)){n=(n=a[0]).substr(0,1).toUpperCase()+n.substr(1);break}n=n||"WebkitOpacity"in l&&"webkit",d=!!("transition"in l||n+"Transition"in l),u=!!("animation"in l||n+"Animation"in l),!o||d&&u||(d=fe(r.body.style.webkitTransition),u=fe(r.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||o<4||s),hasEvent:function(e){return!("input"===e&&z<=11)&&(P(i[e])&&(t=r.createElement("div"),i[e]="on"+e in t),i[e]);var t},csp:M(),vendorPrefix:n,transitions:d,animations:u,android:o}}]}Vt=C("$compile");function sa(){this.$get=["$templateCache","$http","$q",function(i,o,s){function r(t,n){r.totalPendingRequests++;var e=o.defaults&&o.defaults.transformResponse;he(e)?e=e.filter(function(e){return e!==Xt}):e===Xt&&(e=null);var a={cache:i,transformResponse:e};return o.get(t,a).finally(function(){r.totalPendingRequests--}).then(function(e){return e.data},function(e){if(n)return s.reject(e);throw Vt("tpload","Failed to load template: {0}",t)})}return r.totalPendingRequests=0,r}]}function ra(){this.$get=["$rootScope","$browser","$location",function(t,n,a){var e={findBindings:function(e,n,a){var t=e.getElementsByClassName("ng-binding"),i=[];return de(t,function(t){var e=A.element(t).data("$binding");e&&de(e,function(e){a?new RegExp("(^|\\s)"+l(n)+"(\\s|\\||$)").test(e)&&i.push(t):-1!=e.indexOf(n)&&i.push(t)})}),i},findModels:function(e,t,n){for(var a=["ng-","data-ng-","ng\\:"],i=0;i<a.length;++i){var o="["+a[i]+"model"+(n?"=":"*=")+'"'+t+'"]',s=e.querySelectorAll(o);if(s.length)return s}},getLocation:function(){return a.url()},setLocation:function(e){e!==a.url()&&(a.url(e),t.$digest())},whenStable:function(e){n.notifyWhenNoOutstandingRequests(e)}};return e}]}function ca(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(r,c,l,d,u){var m={};function e(e,t,n){var a=K(n)&&!n,i=(a?d:l).defer(),o=i.promise,s=c.defer(function(){try{i.resolve(e())}catch(e){i.reject(e),u(e)}finally{delete m[o.$$timeoutId]}a||r.$apply()},t);return o.$$timeoutId=s,m[s]=i,o}return e.cancel=function(e){return!!(e&&e.$$timeoutId in m)&&(m[e.$$timeoutId].reject("canceled"),delete m[e.$$timeoutId],c.defer.cancel(e.$$timeoutId))},e}]}var la=re.createElement("a"),da=ua(d.location.href);function ua(e){var t=e;return z&&(la.setAttribute("href",t),t=la.href),la.setAttribute("href",t),{href:la.href,protocol:la.protocol?la.protocol.replace(/:$/,""):"",host:la.host,search:la.search?la.search.replace(/^\?/,""):"",hash:la.hash?la.hash.replace(/^#/,""):"",hostname:la.hostname,port:la.port,pathname:"/"===la.pathname.charAt(0)?la.pathname:"/"+la.pathname}}function ma(e){var t=fe(e)?ua(e):e;return t.protocol===da.protocol&&t.host===da.host}function pa(){this.$get=S(d)}function fa(a){var i="Filter";function o(e,t){if(pe(e)){var n={};return de(e,function(e,t){n[t]=o(t,e)}),n}return a.factory(e+i,t)}this.register=o,this.$get=["$injector",function(t){return function(e){return t.get(e+i)}}],o("currency",va),o("date",$a),o("filter",ha),o("json",xa),o("limitTo",Ta),o("lowercase",Pa),o("number",Sa),o("orderBy",La),o("uppercase",Ma)}function ha(){return function(e,t,n){if(!he(e))return e;var a,i;switch(typeof t){case"function":a=t;break;case"boolean":case"number":case"string":i=!0;case"object":a=function(t,n,a){var i=pe(t)&&"$"in t;!0===n?n=Ae:ge(n)||(n=function(e,t){return!pe(e)&&!pe(t)&&(e=L(""+e),t=L(""+t),-1!==e.indexOf(t))});return function(e){return i&&!pe(e)?ga(e,t.$,n,!1):ga(e,t,n,a)}}(t,n,i);break;default:return e}return e.filter(a)}}function ga(e,t,n,a,i){var o,s=typeof e,r=typeof t;if("string"==r&&"!"===t.charAt(0))return!ga(e,t.substring(1),n,a);if(he(e))return e.some(function(e){return ga(e,t,n,a)});switch(s){case"object":if(a){for(o in e)if("$"!==o.charAt(0)&&ga(e[o],t,n,!0))return!0;return!i&&ga(e,t,n,!1)}if("object"!=r)return n(e,t);for(o in t){var c=t[o];if(!ge(c)){var l="$"===o;if(!ga(l?e:e[o],c,n,l,l))return!1}}return!0;case"function":return!1;default:return n(e,t)}}function va(e){var a=e.NUMBER_FORMATS;return function(e,t,n){return P(t)&&(t=a.CURRENCY_SYM),P(n)&&(n=a.PATTERNS[1].maxFrac),null==e?e:Ca(e,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,n).replace(/\u00A4/g,t)}}function Sa(e){var n=e.NUMBER_FORMATS;return function(e,t){return null==e?e:Ca(e,n.PATTERNS[0],n.GROUP_SEP,n.DECIMAL_SEP,t)}}fa.$inject=["$provide"],va.$inject=["$locale"],Sa.$inject=["$locale"];var ya=".";function Ca(e,t,n,a,i){if(!isFinite(e)||pe(e))return"";var o,s=e<0,r=(e=Math.abs(e))+"",c="",l=[],d=!1;if(-1!==r.indexOf("e")&&((o=r.match(/([\d\.]+)e(-?)(\d+)/))&&"-"==o[2]&&o[3]>i+1?e=0:(c=r,d=!0)),d)0<i&&e<1&&(c=e.toFixed(i),e=parseFloat(c));else{var u=(r.split(ya)[1]||"").length;P(i)&&(i=Math.min(Math.max(t.minFrac,u),t.maxFrac));var m,p=(f=(""+(e=+(Math.round(+(e.toString()+"e"+i)).toString()+"e"+-i))).split(ya))[0],f=f[1]||"",h=0,g=t.lgSize,v=t.gSize;if(p.length>=g+v)for(h=p.length-g,m=0;m<h;m++)(h-m)%v==0&&0!==m&&(c+=n),c+=p.charAt(m);for(m=h;m<p.length;m++)(p.length-m)%g==0&&0!==m&&(c+=n),c+=p.charAt(m);for(;f.length<i;)f+="0";i&&"0"!==i&&(c+=a+f.substr(0,i))}return 0===e&&(s=!1),l.push(s?t.negPre:t.posPre,c,s?t.negSuf:t.posSuf),l.join("")}function Aa(e,t,n){var a="";for(e<0&&(a="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),a+e}function Da(n,a,i,o){return i=i||0,function(e){var t=e["get"+n]();return(0<i||-i<t)&&(t+=i),0===t&&-12==i&&(t=12),Aa(t,a,o)}}function Na(a,i){return function(e,t){var n=e["get"+a]();return t[c(i?"SHORT"+a:a)][n]}}function wa(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function Ra(i){return function(e){var t,n=wa(e.getFullYear()),a=(t=e,new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay())))-n;return Aa(1+Math.round(a/6048e5),i)}}var Ea={yyyy:Da("FullYear",4),yy:Da("FullYear",2,0,!0),y:Da("FullYear",1),MMMM:Na("Month"),MMM:Na("Month",!0),MM:Da("Month",2,1),M:Da("Month",1,1),dd:Da("Date",2),d:Da("Date",1),HH:Da("Hours",2),H:Da("Hours",1),hh:Da("Hours",2,-12),h:Da("Hours",1,-12),mm:Da("Minutes",2),m:Da("Minutes",1),ss:Da("Seconds",2),s:Da("Seconds",1),sss:Da("Milliseconds",3),EEEE:Na("Day"),EEE:Na("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e){var t=-1*e.getTimezoneOffset(),n=0<=t?"+":"";return n+=Aa(Math[0<t?"floor":"ceil"](t/60),2)+Aa(Math.abs(t%60),2)},ww:Ra(2),w:Ra(1)},ba=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,Ia=/^\-?\d+$/;function $a(r){var u=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(t,e,n){var a,i,o="",s=[];if(e=e||"mediumDate",e=r.DATETIME_FORMATS[e]||e,fe(t)&&(t=(Ia.test(t)?p:function(e){var t;if(t=e.match(u)){var n=new Date(0),a=0,i=0,o=t[8]?n.setUTCFullYear:n.setFullYear,s=t[8]?n.setUTCHours:n.setHours;t[9]&&(a=p(t[9]+t[10]),i=p(t[9]+t[11])),o.call(n,p(t[1]),p(t[2])-1,p(t[3]));var r=p(t[4]||0)-a,c=p(t[5]||0)-i,l=p(t[6]||0),d=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(n,r,c,l,d),n}return e})(t)),y(t)&&(t=new Date(t)),!D(t))return t;for(;e;)e=(i=ba.exec(e))?(s=T(s,i,1)).pop():(s.push(e),null);return n&&"UTC"===n&&(t=new Date(t.getTime())).setMinutes(t.getMinutes()+t.getTimezoneOffset()),de(s,function(e){a=Ea[e],o+=a?a(t,r.DATETIME_FORMATS):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),o}}function xa(){return function(e,t){return P(t)&&(t=2),O(e,t)}}$a.$inject=["$locale"];var Pa=S(L),Ma=S(c);function Ta(){return function(e,t){return y(e)&&(e=e.toString()),he(e)||fe(e)?(t=(Math.abs(Number(t))===1/0?Number:p)(t))?0<t?e.slice(0,t):e.slice(t):fe(e)?"":[]:e}}function La(c){return function(e,i,t){return k(e)?(0===(i=he(i)?i:[i]).length&&(i=["+"]),i=i.map(function(e){var t=!1,n=e||v;if(fe(e)){if("+"!=e.charAt(0)&&"-"!=e.charAt(0)||(t="-"==e.charAt(0),e=e.substring(1)),""===e)return o(r,t);if((n=c(e)).constant){var a=n();return o(function(e,t){return r(e[a],t[a])},t)}}return o(function(e,t){return r(n(e),n(t))},t)}),a.call(e).sort(o(function(e,t){for(var n=0;n<i.length;n++){var a=i[n](e,t);if(0!==a)return a}return 0},t))):e;function o(n,e){return e?function(e,t){return n(t,e)}:n}function n(e){switch(typeof e){case"number":case"boolean":case"string":return 1;default:return}}function s(e){return null===e?"null":"function"==typeof e.valueOf&&n(e=e.valueOf())||"function"==typeof e.toString&&n(e=e.toString())?e:""}function r(e,t){var n=typeof e,a=typeof t;return n==a&&"object"==n&&(e=s(e),t=s(t)),n==a?("string"==n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:e<t?-1:1):n<a?-1:1}}}function ka(e){return ge(e)&&(e={link:e}),e.restrict=e.restrict||"AC",S(e)}La.$inject=["$parse"];var Va=S({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref&&!t.name)return function(e,t){var n;"a"===t[0].nodeName.toLowerCase()&&(n="[object SVGAnimatedString]"===r.call(t.prop("href"))?"xlink:href":"href",t.on("click",function(e){t.attr(n)||e.preventDefault()}))}}}),Ba={};de(pt,function(e,a){var i;"multiple"!=e&&(i=Ot("ng-"+a),Ba[i]=function(){return{restrict:"A",priority:100,link:function(e,t,n){e.$watch(n[i],function(e){n.$set(a,!!e)})}}})}),de(ht,function(e,i){Ba[i]=function(){return{priority:100,link:function(e,t,n){if("ngPattern"===i&&"/"==n.ngPattern.charAt(0)){var a=n.ngPattern.match(o);if(a)return void n.$set("ngPattern",new RegExp(a[1],a[2]))}e.$watch(n[i],function(e){n.$set(i,e)})}}}}),de(["src","srcset","href"],function(o){var s=Ot("ng-"+o);Ba[s]=function(){return{priority:99,link:function(e,t,n){var a=o,i=o;"href"===o&&"[object SVGAnimatedString]"===r.call(t.prop("href"))&&(i="xlinkHref",n.$attr[i]="xlink:href",a=null),n.$observe(s,function(e){e?(n.$set(i,e),z&&a&&t.prop(a,n[i])):"href"===o&&n.$set(i,null)})}}}});var Fa={$addControl:me,$$renameControl:function(e,t){e.$name=t},$removeControl:me,$setValidity:me,$setDirty:me,$setPristine:me,$setSubmitted:me},Oa="ng-submitted";function Ha(e,t,n,a,i){var o=this,s=[],r=o.$$parentForm=e.parent().controller("form")||Fa;o.$error={},o.$$success={},o.$pending=ce,o.$name=i(t.name||t.ngForm||"")(n),o.$dirty=!1,o.$pristine=!0,o.$valid=!0,o.$invalid=!1,o.$submitted=!1,r.$addControl(o),o.$rollbackViewValue=function(){de(s,function(e){e.$rollbackViewValue()})},o.$commitViewValue=function(){de(s,function(e){e.$commitViewValue()})},o.$addControl=function(e){ae(e.$name,"input"),s.push(e),e.$name&&(o[e.$name]=e)},o.$$renameControl=function(e,t){var n=e.$name;o[n]===e&&delete o[n],(o[t]=e).$name=t},o.$removeControl=function(n){n.$name&&o[n.$name]===n&&delete o[n.$name],de(o.$pending,function(e,t){o.$setValidity(t,null,n)}),de(o.$error,function(e,t){o.$setValidity(t,null,n)}),de(o.$$success,function(e,t){o.$setValidity(t,null,n)}),Ce(s,n)},Fi({ctrl:this,$element:e,set:function(e,t,n){var a=e[t];a?-1===a.indexOf(n)&&a.push(n):e[t]=[n]},unset:function(e,t,n){var a=e[t];a&&(Ce(a,n),0===a.length&&delete e[t])},parentForm:r,$animate:a}),o.$setDirty=function(){a.removeClass(e,$i),a.addClass(e,xi),o.$dirty=!0,o.$pristine=!1,r.$setDirty()},o.$setPristine=function(){a.setClass(e,$i,xi+" "+Oa),o.$dirty=!1,o.$pristine=!0,o.$submitted=!1,de(s,function(e){e.$setPristine()})},o.$setUntouched=function(){de(s,function(e){e.$setUntouched()})},o.$setSubmitted=function(){a.addClass(e,Oa),o.$submitted=!0,r.$setSubmitted()}}Ha.$inject=["$element","$attrs","$scope","$animate","$interpolate"];function Ua(e){return["$timeout",function(r){return{name:"form",restrict:e?"EAC":"E",controller:Ha,compile:function(e){return e.addClass($i).addClass(bi),{pre:function(t,e,n,a){var i;"action"in n||(i=function(e){t.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),e.preventDefault()},Ve(e[0],"submit",i),e.on("$destroy",function(){r(function(){Be(e[0],"submit",i)},0,!1)}));var o=a.$$parentForm,s=a.$name;s&&(Hn(t,null,s,a,s),n.$observe(n.name?"name":"ngForm",function(e){s!==e&&(Hn(t,null,s,ce,s),Hn(t,null,s=e,a,s),o.$$renameControl(a,s))})),e.on("$destroy",function(){o.$removeControl(a),s&&Hn(t,null,s,ce,s),V(a,Fa)})}}}}}]}var _a=Ua(),Ga=Ua(!0),Wa=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,qa=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,za=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,ja=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Ka=/^(\d{4})-(\d{2})-(\d{2})$/,Ja=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ya=/^(\d{4})-W(\d\d)$/,Xa=/^(\d{4})-(\d\d)$/,Za=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Qa={text:function(e,t,n,a,i,o){ti(0,t,n,a,i,o),ei(a)},date:ai("date",Ka,ni(Ka,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ai("datetimelocal",Ja,ni(Ja,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:ai("time",Za,ni(Za,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ai("week",Ya,function(e,t){if(D(e))return e;if(fe(e)){Ya.lastIndex=0;var n=Ya.exec(e);if(n){var a=+n[1],i=+n[2],o=0,s=0,r=0,c=0,l=wa(a),d=7*(i-1);return t&&(o=t.getHours(),s=t.getMinutes(),r=t.getSeconds(),c=t.getMilliseconds()),new Date(a,0,l.getDate()+d,o,s,r,c)}}return NaN},"yyyy-Www"),month:ai("month",Xa,ni(Xa,["yyyy","MM"]),"yyyy-MM"),number:function(e,t,n,a,i,o){{var s;ii(0,t,0,a),ti(0,t,n,a,i,o),a.$$parserName="number",a.$parsers.push(function(e){return a.$isEmpty(e)?null:ja.test(e)?parseFloat(e):ce}),a.$formatters.push(function(e){if(!a.$isEmpty(e)){if(!y(e))throw Li("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}),(n.min||n.ngMin)&&(a.$validators.min=function(e){return a.$isEmpty(e)||P(s)||s<=e},n.$observe("min",function(e){K(e)&&!y(e)&&(e=parseFloat(e,10)),s=y(e)&&!isNaN(e)?e:ce,a.$validate()}))}{var r;(n.max||n.ngMax)&&(a.$validators.max=function(e){return a.$isEmpty(e)||P(r)||e<=r},n.$observe("max",function(e){K(e)&&!y(e)&&(e=parseFloat(e,10)),r=y(e)&&!isNaN(e)?e:ce,a.$validate()}))}},url:function(e,t,n,a,i,o){ti(0,t,n,a,i,o),ei(a),a.$$parserName="url",a.$validators.url=function(e,t){var n=e||t;return a.$isEmpty(n)||qa.test(n)}},email:function(e,t,n,a,i,o){ti(0,t,n,a,i,o),ei(a),a.$$parserName="email",a.$validators.email=function(e,t){var n=e||t;return a.$isEmpty(n)||za.test(n)}},radio:function(e,t,n,a){P(n.name)&&t.attr("name",i());t.on("click",function(e){t[0].checked&&a.$setViewValue(n.value,e&&e.type)}),a.$render=function(){var e=n.value;t[0].checked=e==a.$viewValue},n.$observe("value",a.$render)},checkbox:function(e,t,n,a,i,o,s,r){var c=oi(r,e,"ngTrueValue",n.ngTrueValue,!0),l=oi(r,e,"ngFalseValue",n.ngFalseValue,!1);t.on("click",function(e){a.$setViewValue(t[0].checked,e&&e.type)}),a.$render=function(){t[0].checked=a.$viewValue},a.$isEmpty=function(e){return!1===e},a.$formatters.push(function(e){return Ae(e,c)}),a.$parsers.push(function(e){return e?c:l})},hidden:me,button:me,submit:me,reset:me,file:me};function ei(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function ti(e,a,i,o,t,s){var r,c=L(a[0].type);t.android||(r=!1,a.on("compositionstart",function(e){r=!0}),a.on("compositionend",function(){r=!1,d()}));var l,n,d=function(e){var t,n;l&&(s.defer.cancel(l),l=null),r||(t=a.val(),n=e&&e.type,"password"===c||i.ngTrim&&"false"===i.ngTrim||(t=Se(t)),(o.$viewValue!==t||""===t&&o.$$hasNativeValidators)&&o.$setViewValue(t,n))};t.hasEvent("input")?a.on("input",d):(n=function(e,t,n){l=l||s.defer(function(){l=null,t&&t.value===n||d(e)})},a.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||n(e,this,this.value)}),t.hasEvent("paste")&&a.on("paste cut",n)),a.on("change",d),o.$render=function(){a.val(o.$isEmpty(o.$viewValue)?"":o.$viewValue)}}function ni(i,o){return function(e,t){var n,a;if(D(e))return e;if(fe(e)){if('"'==e.charAt(0)&&'"'==e.charAt(e.length-1)&&(e=e.substring(1,e.length-1)),Wa.test(e))return new Date(e);if(i.lastIndex=0,n=i.exec(e))return n.shift(),a=t?{yyyy:t.getFullYear(),MM:t.getMonth()+1,dd:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds(),sss:t.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},de(n,function(e,t){t<o.length&&(a[o[t]]=+e)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function ai(p,f,h,g){return function(e,t,n,a,i,o,s){ii(0,t,0,a),ti(0,t,n,a,i,o);var r,c,l,d=a&&a.$options&&a.$options.timezone;function u(e){return e&&(!e.getTime||e.getTime()===e.getTime())}function m(e){return K(e)?D(e)?e:h(e):ce}a.$$parserName=p,a.$parsers.push(function(e){if(a.$isEmpty(e))return null;if(f.test(e)){var t=h(e,r);return"UTC"===d&&t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t}return ce}),a.$formatters.push(function(e){if(e&&!D(e))throw Li("datefmt","Expected `{0}` to be a date",e);var t;return u(e)?((r=e)&&"UTC"===d&&(t=6e4*r.getTimezoneOffset(),r=new Date(r.getTime()+t)),s("date")(e,g,d)):(r=null,"")}),(K(n.min)||n.ngMin)&&(a.$validators.min=function(e){return!u(e)||P(c)||h(e)>=c},n.$observe("min",function(e){c=m(e),a.$validate()})),(K(n.max)||n.ngMax)&&(a.$validators.max=function(e){return!u(e)||P(l)||h(e)<=l},n.$observe("max",function(e){l=m(e),a.$validate()}))}}function ii(e,n,t,a){var i=n[0];(a.$$hasNativeValidators=pe(i.validity))&&a.$parsers.push(function(e){var t=n.prop(s)||{};return t.badInput&&!t.typeMismatch?ce:e})}function oi(e,t,n,a,i){var o;if(K(a)){if(!(o=e(a)).constant)throw C("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,a);return o(t)}return i}function si(){return{restrict:"A",priority:100,compile:function(e,t){return ci.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}}var ri=["$browser","$sniffer","$filter","$parse",function(i,o,s,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,t,n,a){a[0]&&(Qa[L(n.type)]||Qa.text)(e,t,n,a[0],o,i,s,r)}}}}],ci=/^(true|false|\d+)$/,li=["$compile",function(a){return{restrict:"AC",compile:function(e){return a.$$addBindingClass(e),function(e,t,n){a.$$addBindingInfo(t,n.ngBind),t=t[0],e.$watch(n.ngBind,function(e){t.textContent=e===ce?"":e})}}}}],di=["$interpolate","$compile",function(i,o){return{compile:function(e){return o.$$addBindingClass(e),function(e,t,n){var a=i(t.attr(n.$attr.ngBindTemplate));o.$$addBindingInfo(t,a.expressions),t=t[0],n.$observe("ngBindTemplate",function(e){t.textContent=e===ce?"":e})}}}}],ui=["$sce","$parse","$compile",function(o,n,s){return{restrict:"A",compile:function(e,t){var a=n(t.ngBindHtml),i=n(t.ngBindHtml,function(e){return(e||"").toString()});return s.$$addBindingClass(e),function(e,t,n){s.$$addBindingInfo(t,n.ngBindHtml),e.$watch(i,function(){t.html(o.getTrustedHtml(a(e))||"")})}}}}],mi=S({restrict:"A",require:"ngModel",link:function(e,t,n,a){a.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}});function pi(s,h){return s="ngClass"+s,["$animate",function(m){return{restrict:"AC",link:function(r,c,o){var l;function d(e){var t=u(e,1);o.$addClass(t)}function u(e,t){var n=c.data("$classCounts")||{},a=[];return de(e,function(e){(0<t||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(0<t)&&a.push(e))}),c.data("$classCounts",n),a.join(" ")}function t(e){var t,n,a,i,o,s;!0!==h&&r.$index%2!==h||(t=f(e||[]),l?Ae(e,l)||(n=f(l),o=p(i=t,a=n),s=p(a,i),o=u(o,1),s=u(s,-1),o&&o.length&&m.addClass(c,o),s&&s.length&&m.removeClass(c,s)):d(t)),l=x(e)}r.$watch(o[s],t,!0),o.$observe("class",function(e){t(r.$eval(o[s]))}),"ngClass"!==s&&r.$watch("$index",function(e,t){var n,a,i=1&e;i!=(1&t)&&(n=f(r.$eval(o[s])),i===h?d(n):(a=u(n,-1),o.$removeClass(a)))})}};function p(e,t){var n=[];e:for(var a=0;a<e.length;a++){for(var i=e[a],o=0;o<t.length;o++)if(i==t[o])continue e;n.push(i)}return n}function f(e){if(he(e))return e;if(fe(e))return e.split(" ");if(pe(e)){var n=[];return de(e,function(e,t){e&&(n=n.concat(t.split(" ")))}),n}return e}}]}var fi=pi("",!0),hi=pi("Odd",0),gi=pi("Even",1),vi=ka({compile:function(e,t){t.$set("ngCloak",ce),e.removeClass("ng-cloak")}}),Si=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],yi={},Ci={blur:!0,focus:!0};de("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(o){var s=Ot("ng-"+o);yi[s]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(e,t){var a=n(t[s],null,!0);return function(n,e){e.on(o,function(e){function t(){a(n,{$event:e})}Ci[o]&&i.$$phase?n.$evalAsync(t):n.$apply(t)})}}}}]});function Ai(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,a){var i=t.attr(n.$attr.ngList)||", ",o="false"!==n.ngTrim,s=o?Se(i):i;a.$parsers.push(function(e){if(!P(e)){var t=[];return e&&de(e.split(s),function(e){e&&t.push(o?Se(e):e)}),t}}),a.$formatters.push(function(e){return he(e)?e.join(i):ce}),a.$isEmpty=function(e){return!e||!e.length}}}}function Di(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var n=this;this.$options=e.$eval(t.ngModelOptions),this.$options.updateOn!==ce?(this.$options.updateOnDefault=!1,this.$options.updateOn=Se(this.$options.updateOn.replace(Bi,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}}var Ni=["$animate",function(c){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(e,n,a,t,i){var o,s,r;e.$watch(a.ngIf,function(e){e?s||i(function(e,t){s=t,e[e.length++]=re.createComment(" end ngIf: "+a.ngIf+" "),o={clone:e},c.enter(e,n.parent(),n)}):(r&&(r.remove(),r=null),s&&(s.$destroy(),s=null),o&&(r=oe(o.clone),c.leave(r).then(function(){r=null}),o=null))})}}}],wi=["$templateRequest","$anchorScroll","$animate","$sce",function(g,v,S,a){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:A.noop,compile:function(e,t){var n=t.ngInclude||t.src,f=t.onload||"",h=t.autoscroll;return function(s,r,e,c,l){function d(){t&&(t.remove(),t=null),u&&(u.$destroy(),u=null),m&&(S.leave(m).then(function(){t=null}),t=m,m=null)}var u,t,m,p=0;s.$watch(a.parseAsResourceUrl(n),function(a){function i(){!K(h)||h&&!s.$eval(h)||v()}var o=++p;a?(g(a,!0).then(function(e){var t,n;o===p&&(t=s.$new(),c.template=e,n=l(t,function(e){d(),S.enter(e,null,r).then(i)}),m=n,(u=t).$emit("$includeContentLoaded",a),s.$eval(f))},function(){o===p&&(d(),s.$emit("$includeContentError",a))}),s.$emit("$includeContentRequested",a)):(d(),c.template=null)})}}}}],Ri=["$compile",function(i){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(e,t,n,a){if(/SVG/.test(t[0].toString()))return t.empty(),void i(Ye(a.template,re).childNodes)(e,function(e){t.append(e)},{futureParentElement:t});t.html(a.template),i(t.contents())(e)}}}],Ei=ka({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),bi="ng-valid",Ii="ng-invalid",$i="ng-pristine",xi="ng-dirty",Pi="ng-untouched",Mi="ng-touched",Ti="ng-pending",Li=new C("ngModel"),ki=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(s,t,i,o,r,e,c,l,d,n){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=ce,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=ce,this.$name=n(i.name||"",!1)(s);var u=r(i.ngModel),m=u.assign,p=u,f=m,h=null,g=this;this.$$setOptions=function(e){if((g.$options=e)&&e.getterSetter){var n=r(i.ngModel+"()"),a=r(i.ngModel+"($$$p)");p=function(e){var t=u(e);return ge(t)&&(t=n(e)),t},f=function(e,t){ge(u(e))?a(e,{$$$p:g.$modelValue}):m(e,g.$modelValue)}}else if(!u.assign)throw Li("nonassign","Expression '{0}' is non-assignable. Element: {1}",i.ngModel,Ne(o))},this.$render=me,this.$isEmpty=function(e){return P(e)||""===e||null===e||e!=e};var a=o.inheritedData("$formController")||Fa,v=0;Fi({ctrl:this,$element:o,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},parentForm:a,$animate:e}),this.$setPristine=function(){g.$dirty=!1,g.$pristine=!0,e.removeClass(o,xi),e.addClass(o,$i)},this.$setDirty=function(){g.$dirty=!0,g.$pristine=!1,e.removeClass(o,$i),e.addClass(o,xi),a.$setDirty()},this.$setUntouched=function(){g.$touched=!1,g.$untouched=!0,e.setClass(o,Pi,Mi)},this.$setTouched=function(){g.$touched=!0,g.$untouched=!1,e.setClass(o,Mi,Pi)},this.$rollbackViewValue=function(){c.cancel(h),g.$viewValue=g.$$lastCommittedViewValue,g.$render()},this.$validate=function(){var e,t,n,a,i,o,s;y(g.$modelValue)&&isNaN(g.$modelValue)||(e=g.$$lastCommittedViewValue,t=g.$$rawModelValue,n=g.$$parserName||"parse",a=!g.$error[n]&&ce,i=g.$valid,o=g.$modelValue,s=g.$options&&g.$options.allowInvalid,g.$$runValidators(a,t,e,function(e){s||i===e||(g.$modelValue=e?t:ce,g.$modelValue!==o&&g.$$writeModelToScope())}))},this.$$runValidators=function(e,a,i,t){var o,s,r,n=++v;function c(e,t){n===v&&g.$setValidity(e,t)}function l(e){n===v&&t(e)}!function(e){var t=g.$$parserName||"parse";if(e===ce)c(t,null);else if(c(t,e),!e)return de(g.$validators,function(e,t){c(t,null)}),de(g.$asyncValidators,function(e,t){c(t,null)}),!1;return!0}(e)?l(!1):(o=!0,de(g.$validators,function(e,t){var n=e(a,i);o=o&&n,c(t,n)}),o||(de(g.$asyncValidators,function(e,t){c(t,null)}),0)?(s=[],r=!0,de(g.$asyncValidators,function(e,t){var n=e(a,i);if(!b(n))throw Li("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",n);c(t,ce),s.push(n.then(function(){c(t,!0)},function(e){c(t,r=!1)}))}),s.length?d.all(s).then(function(){l(r)},me):l(!0)):l(!1))},this.$commitViewValue=function(){var e=g.$viewValue;c.cancel(h),(g.$$lastCommittedViewValue!==e||""===e&&g.$$hasNativeValidators)&&(g.$$lastCommittedViewValue=e,g.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var t=g.$$lastCommittedViewValue,e=!P(t)||ce;if(e)for(var n=0;n<g.$parsers.length;n++)if(P(t=g.$parsers[n](t))){e=!1;break}y(g.$modelValue)&&isNaN(g.$modelValue)&&(g.$modelValue=p(s));var a=g.$modelValue,i=g.$options&&g.$options.allowInvalid;function o(){g.$modelValue!==a&&g.$$writeModelToScope()}g.$$rawModelValue=t,i&&(g.$modelValue=t,o()),g.$$runValidators(e,t,g.$$lastCommittedViewValue,function(e){i||(g.$modelValue=e?t:ce,o())})},this.$$writeModelToScope=function(){f(s,g.$modelValue),de(g.$viewChangeListeners,function(e){try{e()}catch(e){t(e)}})},this.$setViewValue=function(e,t){g.$viewValue=e,g.$options&&!g.$options.updateOnDefault||g.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(e){var t,n=0,a=g.$options;a&&K(a.debounce)&&(y(t=a.debounce)?n=t:y(t[e])?n=t[e]:y(t.default)&&(n=t.default)),c.cancel(h),n?h=c(function(){g.$commitViewValue()},n):l.$$phase?g.$commitViewValue():s.$apply(function(){g.$commitViewValue()})},s.$watch(function(){var e=p(s);if(e!==g.$modelValue){g.$modelValue=g.$$rawModelValue=e;for(var t=g.$formatters,n=t.length,a=e;n--;)a=t[n](a);g.$viewValue!==a&&(g.$viewValue=g.$$lastCommittedViewValue=a,g.$render(),g.$$runValidators(ce,e,a,me))}return e})}],Vi=["$rootScope",function(o){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ki,priority:1,compile:function(e){return e.addClass($i).addClass(Pi).addClass(bi),{pre:function(e,t,n,a){var i=a[0],o=a[1]||Fa;i.$$setOptions(a[2]&&a[2].$options),o.$addControl(i),n.$observe("name",function(e){i.$name!==e&&o.$$renameControl(i,e)}),e.$on("$destroy",function(){o.$removeControl(i)})},post:function(t,e,n,a){var i=a[0];i.$options&&i.$options.updateOn&&e.on(i.$options.updateOn,function(e){i.$$debounceViewValueCommit(e&&e.type)}),e.on("blur",function(e){i.$touched||(o.$$phase?t.$evalAsync(i.$setTouched):t.$apply(i.$setTouched))})}}}}}],Bi=/(\s+|^)default(\s+|$)/;function Fi(e){var i=e.ctrl,n=e.$element,a={},o=e.set,s=e.unset,r=e.parentForm,c=e.$animate;function l(e,t){t&&!a[e]?(c.addClass(n,e),a[e]=!0):!t&&a[e]&&(c.removeClass(n,e),a[e]=!1)}function d(e,t){e=e?"-"+we(e,"-"):"",l(bi+e,!0===t),l(Ii+e,!1===t)}a[Ii]=!(a[bi]=n.hasClass(bi)),i.$setValidity=function(e,t,n){(t===ce?function(e,t,n){i[e]||(i[e]={});o(i[e],t,n)}:function(e,t,n){i[e]&&s(i[e],t,n);Oi(i[e])&&(i[e]=ce)})("$pending",e,n);R(t)?t?(s(i.$error,e,n),o(i.$$success,e,n)):(o(i.$error,e,n),s(i.$$success,e,n)):(s(i.$error,e,n),s(i.$$success,e,n));i.$pending?(l(Ti,!0),i.$valid=i.$invalid=ce,d("",null)):(l(Ti,!1),i.$valid=Oi(i.$error),i.$invalid=!i.$valid,d("",i.$valid));var a;a=i.$pending&&i.$pending[e]?ce:!i.$error[e]&&(!!i.$$success[e]||null);d(e,a),r.$setValidity(e,a,i)}}function Oi(e){if(e)for(var t in e)return!1;return!0}function Hi(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,a){a&&(n.required=!0,a.$validators.required=function(e,t){return!n.required||!a.$isEmpty(t)},n.$observe("required",function(){a.$validate()}))}}}function Ui(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,a){var i,o;a&&(o=n.ngPattern||n.pattern,n.$observe("pattern",function(e){if(fe(e)&&0<e.length&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw C("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",o,e,Ne(t));i=e||ce,a.$validate()}),a.$validators.pattern=function(e){return a.$isEmpty(e)||P(i)||i.test(e)})}}}function _i(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,a){var i;a&&(i=-1,n.$observe("maxlength",function(e){var t=p(e);i=isNaN(t)?-1:t,a.$validate()}),a.$validators.maxlength=function(e,t){return i<0||a.$isEmpty(t)||t.length<=i})}}}function Gi(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,a){var i;a&&(i=0,n.$observe("minlength",function(e){i=p(e)||0,a.$validate()}),a.$validators.minlength=function(e,t){return a.$isEmpty(t)||t.length>=i})}}}var Wi,qi=ka({terminal:!0,priority:1e3}),zi=["$locale","$interpolate",function(f,h){var g=/{}/g,v=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(a,i,o){var s,e=o.count,t=o.$attr.when&&i.attr(o.$attr.when),r=o.offset||0,c=a.$eval(t)||{},l={},n=h.startSymbol(),d=h.endSymbol(),u=n+e+"-"+r+d,m=A.noop;function p(e){i.text(e||"")}de(o,function(e,t){var n,a=v.exec(t);a&&(n=(a[1]?"-":"")+L(a[2]),c[n]=i.attr(o.$attr[t]))}),de(c,function(e,t){l[t]=h(e.replace(g,u))}),a.$watch(e,function(e){var t=parseFloat(e),n=isNaN(t);n||t in c||(t=f.pluralCat(t-r)),t===s||n&&isNaN(s)||(m(),m=a.$watch(l[t],p),s=t)})}}}],ji=["$parse","$animate",function(c,x){function P(e,t,n,a,i,o,s){e[n]=a,i&&(e[i]=o),e.$index=t,e.$first=0===t,e.$last=t===s-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))}var M="$$NG_REMOVED",T=C("ngRepeat");return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(e,t){var D=t.ngRepeat,N=re.createComment(" end ngRepeat: "+D+" "),n=D.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!n)throw T("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",D);var a=n[1],i=n[2],w=n[3],o=n[4];if(!(n=a.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/)))throw T("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",a);var s,R,E,b,I=n[3]||n[1],$=n[2];if(w&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(w)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(w)))throw T("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",w);var r={$id:Ct};return o?s=c(o):(E=function(e,t){return Ct(t)},b=function(e){return e}),function(S,y,e,t,C){s&&(R=function(e,t,n){return $&&(r[$]=e),r[I]=t,r.$index=n,s(S,r)});var A=be();S.$watchCollection(i,function(e){var a,t,n,i,o,s,r,c,l,d,u,m,p,f,h=y[0],g=be();if(w&&(S[w]=e),k(e))l=e,c=R||E;else{for(var v in c=R||b,l=[],e)e.hasOwnProperty(v)&&"$"!=v.charAt(0)&&l.push(v);l.sort()}for(i=l.length,u=new Array(i),a=0;a<i;a++)if(o=e===l?a:l[a],s=e[o],r=c(o,s,a),A[r])d=A[r],delete A[r],g[r]=d,u[a]=d;else{if(g[r])throw de(u,function(e){e&&e.scope&&(A[e.id]=e)}),T("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",D,r,s);u[a]={id:r,scope:ce,clone:ce},g[r]=!0}for(p in A){if(m=oe((d=A[p]).clone),x.leave(m),m[0].parentNode)for(a=0,t=m.length;a<t;a++)m[a][M]=!0;d.scope.$destroy()}for(a=0;a<i;a++)if(o=e===l?a:l[a],s=e[o],(d=u[a]).scope){for(n=h;(n=n.nextSibling)&&n[M];);d.clone[0]!=n&&x.move(oe(d.clone),null,le(h)),h=(f=d).clone[f.clone.length-1],P(d.scope,a,I,s,$,o,i)}else C(function(e,t){d.scope=t;var n=N.cloneNode(!1);e[e.length++]=n,x.enter(e,null,le(h)),h=n,d.clone=e,g[d.id]=d,P(d.scope,a,I,s,$,o,i)});A=g})}}}}],Ki="ng-hide",Ji="ng-hide-animate",Yi=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(e,t,n){e.$watch(n.ngShow,function(e){a[e?"removeClass":"addClass"](t,Ki,{tempClasses:Ji})})}}}],Xi=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(e,t,n){e.$watch(n.ngHide,function(e){a[e?"addClass":"removeClass"](t,Ki,{tempClasses:Ji})})}}}],Zi=ka(function(e,n,t){e.$watchCollection(t.ngStyle,function(e,t){t&&e!==t&&de(t,function(e,t){n.css(t,"")}),e&&n.css(e)})}),Qi=["$animate",function(l){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(e,t,n,i){var o,a=n.ngSwitch||n.on,s=[],r=[],c=[];e.$watch(a,function(e){for(var t=0,n=r.length;t<n;++t)l.cancel(r[t]);for(t=r.length=0,n=c.length;t<n;++t){var a=oe(s[t].clone);c[t].$destroy(),(r[t]=l.leave(a)).then(function(e,t){return function(){e.splice(t,1)}}(r,t))}s.length=0,c.length=0,(o=i.cases["!"+e]||i.cases["?"])&&de(o,function(i){i.transclude(function(e,t){c.push(t);var n=i.element;e[e.length++]=re.createComment(" end ngSwitchWhen: ");var a={clone:e};s.push(a),l.enter(e,n.parent(),n)})})})}}}],eo=ka({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,a,i){a.cases["!"+n.ngSwitchWhen]=a.cases["!"+n.ngSwitchWhen]||[],a.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),to=ka({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,a,i){a.cases["?"]=a.cases["?"]||[],a.cases["?"].push({transclude:i,element:t})}}),no=ka({restrict:"EAC",link:function(e,t,n,a,i){if(!i)throw C("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Ne(t));i(function(e){t.empty(),t.append(e)})}}),ao=["$templateCache",function(i){return{restrict:"E",terminal:!0,compile:function(e,t){var n,a;"text/ng-template"==t.type&&(n=t.id,a=e[0].text,i.put(n,a))}}}],io=C("ngOptions"),oo=S({restrict:"A",terminal:!0}),so=["$compile","$parse",function(y,C){var A=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,r={$setViewValue:me};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(n,e,t){var a,i=this,o={},s=r;i.databound=t.ngModel,i.init=function(e,t,n){s=e,a=n},i.addOption=function(e,t){ae(e,'"option value"'),o[e]=!0,s.$viewValue==e&&(n.val(e),a.parent()&&a.remove()),t&&t[0].hasAttribute("selected")&&(t[0].selected=!0)},i.removeOption=function(e){this.hasOption(e)&&(delete o[e],s.$viewValue===e&&this.renderUnknownOption(e))},i.renderUnknownOption=function(e){var t="? "+Ct(e)+" ?";a.val(t),n.prepend(a),n.val(t),a.prop("selected",!0)},i.hasOption=function(e){return o.hasOwnProperty(e)},e.$on("$destroy",function(){i.renderUnknownOption=me})}],link:function(e,t,n,a){if(a[1]){for(var i,o,s,r,c,l,d,u,m,H=a[0],p=a[1],U=n.multiple,f=n.ngOptions,_=!1,G=!1,W=le(re.createElement("option")),q=le(re.createElement("optgroup")),h=W.clone(),g=0,v=t.children(),S=v.length;g<S;g++)if(""===v[g].value){i=_=v.eq(g);break}H.init(p,_,h),U&&(p.$isEmpty=function(e){return!e||0===e.length}),f?function(R,E,b){var e;if(!(e=f.match(A)))throw io("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",f,Ne(E));var I=C(e[2]||e[1]),a=e[4]||e[6],t=/ as /.test(e[0])&&e[1],$=t?C(t):null,x=e[5],P=C(e[3]||""),M=C(e[2]?e[1]:a),T=C(e[7]),L=e[8]?C(e[8]):null,k={},V=[[{element:E,label:""}]],B={};_&&(y(_)(R),_.removeClass("ng-scope"),_.remove());E.empty(),E.on("change",function(){R.$apply(function(){var e,t,n=T(R)||[];U?(t=[],de(E.val(),function(e){e=L?k[e]:e,t.push(i(e,n[e]))})):(e=L?k[E.val()]:E.val(),t=i(e,n[e])),b.$setViewValue(t),o()})}),b.$render=o,R.$watchCollection(T,n),R.$watchCollection(function(){var e,t=T(R);{if(t&&he(t)){e=new Array(t.length);for(var n=0,a=t.length;n<a;n++)e[n]=F(I,n,t[n]);return e}if(t)for(var i in e={},t)t.hasOwnProperty(i)&&(e[i]=F(I,i,t[i]))}return e},n),U&&R.$watchCollection(function(){return b.$modelValue},n);function F(e,t,n){return B[a]=n,x&&(B[x]=t),e(R,B)}function i(e,t){return"?"===e?ce:""===e?null:F($||M,e,t)}function n(){G||(R.$$postDigest(o),G=!0)}function O(e,t,n){e[t]=e[t]||0,e[t]+=n?1:-1}function o(){G=!1;var e,t,n,a,i,o,s,r,c,l,d,u,m,p,f,h,g,v={"":[]},S=[""],y=b.$viewValue,C=T(R)||[],A=x?j(C):C,D={},N=function(a){var i;if(U)if(L&&he(a)){i=new At([]);for(var e=0;e<a.length;e++)i.put(F(L,null,a[e]),!0)}else i=new At(a);else L&&(a=F(L,null,a));return function(e,t){var n=L||($||M);return U?K(i.remove(F(n,e,t))):a===F(n,e,t)}}(y),w=!1;for(k={},u=0;u<(l=A.length);u++)s=u,x&&"$"===(s=A[u]).charAt(0)||((t=v[e=F(P,s,r=C[s])||""])||(t=v[e]=[],S.push(e)),m=N(s,r),w=w||m,h=K(h=F(I,s,r))?h:"",g=L?L(R,B):x?A[u]:u,L&&(k[g]=s),t.push({id:g,label:h,selected:m}));for(U||(_||null===y?v[""].unshift({id:"",label:"",selected:!w}):w||v[""].unshift({id:"?",label:"",selected:!0})),d=0,c=S.length;d<c;d++){for(t=v[e=S[d]],V.length<=d?(i=[a={element:q.clone().attr("label",e),label:t.label}],V.push(i),E.append(a.element)):(a=(i=V[d])[0]).label!=e&&a.element.attr("label",a.label=e),p=null,u=0,l=t.length;u<l;u++)n=t[u],(o=i[u+1])?(p=o.element,o.label!==n.label&&(O(D,o.label,!1),O(D,n.label,!0),p.text(o.label=n.label),p.prop("label",o.label)),o.id!==n.id&&p.val(o.id=n.id),p[0].selected!==n.selected&&(p.prop("selected",o.selected=n.selected),z&&p.prop("selected",o.selected))):(""===n.id&&_?f=_:(f=W.clone()).val(n.id).prop("selected",n.selected).attr("selected",n.selected).prop("label",n.label).text(n.label),i.push(o={element:f,label:n.label,id:n.id,selected:n.selected}),O(D,n.label,!0),p?p.after(f):a.element.append(f),p=f);for(u++;i.length>u;)O(D,(n=i.pop()).label,!1),n.element.remove()}for(;V.length>d;){for(t=V.pop(),u=1;u<t.length;++u)O(D,t[u].label,!1);t[0].element.remove()}de(D,function(e,t){0<e?H.addOption(t):e<0&&H.removeOption(t)})}}(e,t,p):U?(l=e,d=t,(u=p).$render=function(){var t=new At(u.$viewValue);de(d.find("option"),function(e){e.selected=K(t.get(e.value))})},l.$watch(function(){Ae(m,u.$viewValue)||(m=x(u.$viewValue),u.$render())}),d.on("change",function(){l.$apply(function(){var t=[];de(d.find("option"),function(e){e.selected&&t.push(e.value)}),u.$setViewValue(t)})})):(o=e,s=t,c=H,(r=p).$render=function(){var e=r.$viewValue;c.hasOption(e)?(h.parent()&&h.remove(),s.val(e),""===e&&i.prop("selected",!0)):P(e)&&i?s.val(""):c.renderUnknownOption(e)},s.on("change",function(){o.$apply(function(){h.parent()&&h.remove(),r.$setViewValue(s.val())})}))}}}}],ro=["$interpolate",function(n){var r={addOption:me,removeOption:me};return{restrict:"E",priority:100,compile:function(e,t){var s;return P(t.value)&&((s=n(e.text(),!0))||t.$set("value",e.text())),function(e,n,a){var t="$selectController",i=n.parent(),o=i.data(t)||i.parent().data(t);o&&o.databound||(o=r),s?e.$watch(s,function(e,t){a.$set("value",e),t!==e&&o.removeOption(t),o.addOption(e,n)}):o.addOption(a.value,n),n.on("$destroy",function(){o.removeOption(a.value)})}}}}],co=S({restrict:"E",terminal:!1});d.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(te||((h=d.jQuery)&&h.fn.on?(V((le=h).fn,{scope:mt.scope,isolateScope:mt.isolateScope,controller:mt.controller,injector:mt.injector,inheritedData:mt.inheritedData}),Wi=h.cleanData,h.cleanData=function(e){var t;if(Re)Re=!1;else for(var n,a=0;null!=(n=e[a]);a++)(t=h._data(n,"events"))&&t.$destroy&&h(n).triggerHandler("$destroy");Wi(e)}):le=Xe,A.element=le,te=!0),function(e){function t(e,t,n){return e[t]||(e[t]=n())}var l,n,a;V(e,{bootstrap:X,copy:$,extend:V,equals:Ae,element:le,forEach:de,injector:bt,noop:me,bind:B,toJson:O,fromJson:H,identity:v,isUndefined:P,isDefined:K,isString:fe,isFunction:ge,isObject:pe,isNumber:y,isElement:I,isArray:he,version:Te,isDate:D,lowercase:L,uppercase:c,callbacks:{counter:0},getTestability:Q,$$minErr:C,$$csp:M,reloadWithDebugInfo:Z}),l=C("$injector"),n=C("ng"),(a=t(d,"angular",Object)).$$minErr=a.$$minErr||C,f=t(a,"module",function(){var e={};return function(s,r,c){return function(e,t){if("hasOwnProperty"===e)throw n("badname","hasOwnProperty is not a valid {0} name",t)}(s,"module"),r&&e.hasOwnProperty(s)&&(e[s]=null),t(e,s,function(){if(!r)throw l("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",s);var i=[],e=[],t=[],n=a("$injector","invoke","push",e),o={_invokeQueue:i,_configBlocks:e,_runBlocks:t,requires:r,name:s,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:n,run:function(e){return t.push(e),this}};return c&&n(c),o;function a(e,t,n,a){return a=a||i,function(){return a[n||"push"]([e,t,arguments]),o}}})}});try{f("ngLocale")}catch(e){f("ngLocale",[]).provider("$locale",ln)}f("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Qn}),e.provider("$compile",Bt).directive({a:Va,input:ri,textarea:ri,form:_a,script:ao,select:so,style:co,option:ro,ngBind:li,ngBindHtml:ui,ngBindTemplate:di,ngClass:fi,ngClassEven:gi,ngClassOdd:hi,ngCloak:vi,ngController:Si,ngForm:Ga,ngHide:Xi,ngIf:Ni,ngInclude:wi,ngInit:Ei,ngNonBindable:qi,ngPluralize:zi,ngRepeat:ji,ngShow:Yi,ngStyle:Zi,ngSwitch:Qi,ngSwitchWhen:eo,ngSwitchDefault:to,ngOptions:oo,ngTransclude:no,ngModel:Vi,ngList:Ai,ngChange:mi,pattern:Ui,ngPattern:Ui,required:Hi,ngRequired:Hi,minlength:Gi,ngMinlength:Gi,maxlength:_i,ngMaxlength:_i,ngValue:si,ngModelOptions:Di}).directive({ngInclude:Ri}).directive(Ba).directive(yi),e.provider({$anchorScroll:It,$animate:xt,$browser:Tt,$cacheFactory:Lt,$controller:Gt,$document:Wt,$exceptionHandler:qt,$filter:fa,$interpolate:rn,$interval:cn,$http:nn,$httpBackend:on,$location:En,$log:bn,$parse:jn,$rootScope:Zn,$q:Kn,$$q:Jn,$sce:ia,$sceDelegate:aa,$sniffer:oa,$templateCache:kt,$templateRequest:sa,$$testability:ra,$timeout:ca,$window:pa,$$rAF:Xn,$$asyncCallback:Pt,$$jqLite:yt})}])}(A),le(re).ready(function(){Y(re,X)}))}(window,document),window.angular.$$csp()||window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),
/**
 * @license AngularJS v1.3.13
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(l){"use strict";l.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(t,i){var n,o={},s={},a=!1,r=l.copy,c=l.isUndefined;return i.addPollFn(function(){var e=i.cookies();n!=e&&(r(n=e,s),r(e,o),a&&t.$apply())})(),a=!0,t.$watch(function(){var e,t,n,a;for(e in s)c(o[e])&&i.cookies(e,void 0);for(e in o)t=o[e],l.isString(t)||(t=""+t,o[e]=t),t!==s[e]&&(i.cookies(e,t),a=!0);if(a)for(e in a=!1,n=i.cookies(),o)o[e]!==n[e]&&(c(n[e])?delete o[e]:o[e]=n[e],a=!0)}),o}]).factory("$cookieStore",["$cookies",function(n){return{get:function(e){var t=n[e];return t?l.fromJson(t):t},put:function(e,t){n[e]=l.toJson(t)},remove:function(e){delete n[e]}}}])}((window,window.angular)),
/**
 * @license AngularJS v1.3.13
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(P,M){"use strict";var T=P.$$minErr("$resource"),r=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;function L(e,t){if(null==(n=t)||""===n||"hasOwnProperty"===n||!r.test("."+n))throw T("badmember",'Dotted member path "@{0}" is invalid.',t);for(var n,a=t.split("."),i=0,o=a.length;i<o&&e!==M;i++){var s=a[i];e=null!==e?e[s]:M}return e}function k(e,n){for(var t in n=n||{},P.forEach(n,function(e,t){delete n[t]}),e)!e.hasOwnProperty(t)||"$"===t.charAt(0)&&"$"===t.charAt(1)||(n[t]=e[t]);return n}P.module("ngResource",["ng"]).provider("$resource",function(){var o=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}}},this.$get=["$http","$q",function(w,R){var E=P.noop,b=P.forEach,I=P.extend,$=P.copy,x=P.isFunction;function c(e){return t=!0,encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+");var t}function i(e,t){this.template=e,this.defaults=I({},o.defaults,t),this.urlParams={}}return i.prototype={setUrlParams:function(n,a,e){var i,o,s=this,r=e||s.template,t=s.urlParams={};b(r.split(/\W/),function(e){if("hasOwnProperty"===e)throw T("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(e)&&e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(r)&&(t[e]=!0)}),r=r.replace(/\\:/g,":"),a=a||{},b(s.urlParams,function(e,t){i=a.hasOwnProperty(t)?a[t]:s.defaults[t],r=P.isDefined(i)&&null!==i?(o=c(i),r.replace(new RegExp(":"+t+"(\\W|$)","g"),function(e,t){return o+t})):r.replace(new RegExp("(/?):"+t+"(\\W|$)","g"),function(e,t,n){return"/"==n.charAt(0)?n:t+n})}),s.defaults.stripTrailingSlashes&&(r=r.replace(/\/+$/,"")||"/"),r=r.replace(/\/\.(?=\w+($|\?))/,"."),n.url=r.replace(/\/\\\./,"/."),b(a,function(e,t){s.urlParams[t]||(n.params=n.params||{},n.params[t]=e)})}},function t(n,C,a,e){var A=new i(n,e);function D(e){return e.resource}function N(e){k(e||{},this)}return a=I({},o.defaults.actions,a),N.prototype.toJSON=function(){var e=I({},this);return delete e.$promise,delete e.$resolved,e},b(a,function(v,S){var y=/^(POST|PUT|PATCH)$/i.test(v.method);N[S]=function(e,t,n,a){var i,o,s,r={};switch(arguments.length){case 4:s=a,o=n;case 3:case 2:if(!x(t)){r=e,i=t,o=n;break}if(x(e)){o=e,s=t;break}o=t,s=n;case 1:x(e)?o=e:y?i=e:r=e;break;case 0:break;default:throw T("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var c,l,d,u=this instanceof N,m=u?i:v.isArray?[]:new N(i),p={},f=v.interceptor&&v.interceptor.response||D,h=v.interceptor&&v.interceptor.responseError||M;b(v,function(e,t){"params"!=t&&"isArray"!=t&&"interceptor"!=t&&(p[t]=$(e))}),y&&(p.data=i),A.setUrlParams(p,I({},(c=i,l=v.params||{},d={},l=I({},C,l),b(l,function(e,t){x(e)&&(e=e()),d[t]=e&&e.charAt&&"@"==e.charAt(0)?L(c,e.substr(1)):e}),d),r),v.url);var g=(g=w(p).then(function(e){var t=e.data,n=m.$promise;if(t){if(P.isArray(t)!==!!v.isArray)throw T("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2}",S,v.isArray?"array":"object",P.isArray(t)?"array":"object");v.isArray?(m.length=0,b(t,function(e){"object"==typeof e?m.push(new N(e)):m.push(e)})):(k(t,m),m.$promise=n)}return m.$resolved=!0,e.resource=m,e},function(e){return m.$resolved=!0,(s||E)(e),R.reject(e)})).then(function(e){var t=f(e);return(o||E)(t,e.headers),t},h);return u?g:(m.$promise=g,m.$resolved=!1,m)},N.prototype["$"+S]=function(e,t,n){x(e)&&(n=t,t=e,e={});var a=N[S].call(this,e,this,t,n);return a.$promise||a}}),N.bind=function(e){return t(n,I({},C,e),a)},N}}]})}((window,window.angular)),
/**
 * @license AngularJS v1.3.13
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(v){"use strict";var e=v.module("ngRoute",["ng"]).provider("$route",function(){function h(e,t){return v.extend(Object.create(e),t)}var g={};function i(e,t){var n=t.caseInsensitiveMatch,a={originalPath:e,regexp:e},s=a.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(e,t,n,a){var i="?"===a?a:null,o="*"===a?a:null;return s.push({name:n,optional:!!i}),t=t||"",(i?"":t)+"(?:"+(i?t:"")+(o?"(.+?)":"([^/]+)")+(i||"")+")"+(i||"")}).replace(/([\/$\*])/g,"\\$1"),a.regexp=new RegExp("^"+e+"$",n?"i":""),a}this.when=function(e,t){var n,a=v.copy(t);return v.isUndefined(a.reloadOnSearch)&&(a.reloadOnSearch=!0),v.isUndefined(a.caseInsensitiveMatch)&&(a.caseInsensitiveMatch=this.caseInsensitiveMatch),g[e]=v.extend(a,e&&i(e,a)),e&&(n="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/",g[n]=v.extend({redirectTo:e},i(n,a))),this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(i,o,n,s,r,c,l){var d,u,m=!1,p={routes:g,reload:function(){m=!0,i.$evalAsync(function(){e(),t()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw a("norout","Tried updating route when with no current route");e=v.extend({},this.current.params,e),o.path(f(this.current.$$route.originalPath,e)),o.search(e)}};return i.$on("$locationChangeStart",e),i.$on("$locationChangeSuccess",t),p;function e(e){var n,a,t=p.current;v.forEach(g,function(e,t){!a&&(n=function(e,t){var n=t.keys,a={};if(!t.regexp)return null;var i=t.regexp.exec(e);if(!i)return null;for(var o=1,s=i.length;o<s;++o){var r=n[o-1],c=i[o];r&&c&&(a[r.name]=c)}return a}(o.path(),e))&&((a=h(e,{params:v.extend({},o.search(),n),pathParams:n})).$$route=e)}),d=a||g.null&&h(g.null,{params:{},pathParams:{}}),(u=d&&t&&d.$$route===t.$$route&&v.equals(d.pathParams,t.pathParams)&&!d.reloadOnSearch&&!m)||!t&&!d||i.$broadcast("$routeChangeStart",d,t).defaultPrevented&&e&&e.preventDefault()}function t(){var t=p.current,a=d;u?(t.params=a.params,v.copy(t.params,n),i.$broadcast("$routeUpdate",t)):(a||t)&&(m=!1,(p.current=a)&&a.redirectTo&&(v.isString(a.redirectTo)?o.path(f(a.redirectTo,a.params)).search(a.params).replace():o.url(a.redirectTo(a.pathParams,o.path(),o.search())).replace()),s.when(a).then(function(){if(a){var e,t,n=v.extend({},a.resolve);return v.forEach(n,function(e,t){n[t]=v.isString(e)?r.get(e):r.invoke(e,null,null,t)}),v.isDefined(e=a.template)?v.isFunction(e)&&(e=e(a.params)):v.isDefined(t=a.templateUrl)&&(v.isFunction(t)&&(t=t(a.params)),t=l.getTrustedResourceUrl(t),v.isDefined(t)&&(a.loadedTemplateUrl=t,e=c(t))),v.isDefined(e)&&(n.$template=e),s.all(n)}}).then(function(e){a==p.current&&(a&&(a.locals=e,v.copy(a.params,n)),i.$broadcast("$routeChangeSuccess",a,t))},function(e){a==p.current&&i.$broadcast("$routeChangeError",a,t,e)}))}function f(e,i){var o=[];return v.forEach((e||"").split(":"),function(e,t){var n,a;0===t?o.push(e):(a=(n=e.match(/(\w+)(?:[?*])?(.*)/))[1],o.push(i[a]),o.push(n[2]||""),delete i[a])}),o.join("")}}]}),a=v.$$minErr("ngRoute");function t(p,f,h){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(o,s,e,t,r){var c,l,n,d=e.autoscroll,u=e.onload||"";function m(){n&&(h.cancel(n),n=null),c&&(c.$destroy(),c=null),l&&((n=h.leave(l)).then(function(){n=null}),l=null)}function a(){var e,t,n,a=p.current&&p.current.locals,i=a&&a.$template;v.isDefined(i)?(e=o.$new(),t=p.current,n=r(e,function(e){h.enter(e,null,l||s).then(function(){!v.isDefined(d)||d&&!o.$eval(d)||f()}),m()}),l=n,(c=t.scope=e).$emit("$viewContentLoaded"),c.$eval(u)):m()}o.$on("$routeChangeSuccess",a),a()}}}function n(s,r,c){return{restrict:"ECA",priority:-400,link:function(e,t){var n=c.current,a=n.locals;t.html(a.$template);var i,o=s(t.contents());n.controller&&(a.$scope=e,i=r(n.controller,a),n.controllerAs&&(e[n.controllerAs]=i),t.data("$ngControllerController",i),t.children().data("$ngControllerController",i)),o(e)}}}e.provider("$routeParams",function(){this.$get=function(){return{}}}),e.directive("ngView",t),e.directive("ngView",n),t.$inject=["$route","$anchorScroll","$animate"],n.$inject=["$compile","$controller","$route"]}((window,window.angular)),
/**
 * @license AngularJS v1.3.13
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(u){"use strict";var d=u.$$minErr("$sanitize");var m=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,p=/^<\/\s*([\w:-]+)[^>]*>/,f=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,h=/^</,g=/^<\//,v=/<!--(.*?)-->/g,S=/<!DOCTYPE([^>]*?)>/i,y=/<!\[CDATA\[(.*?)]]>/g,t=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,n=/([^\#-~| |!])/g,C=R("area,br,col,hr,img,wbr"),e=R("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),a=R("rp,rt"),A=u.extend({},a,e),D=u.extend({},e,R("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),N=u.extend({},a,R("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),i=R("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),w=R("script,style"),r=u.extend({},C,D,N,A,i),c=R("background,cite,href,longdesc,src,usemap,xlink:href"),o=R("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),s=R("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),l=u.extend({},c,s,o);function R(e){for(var t={},n=e.split(","),a=0;a<n.length;a++)t[n[a]]=!0;return t}var E=document.createElement("pre"),b=/^(\s*)([\s\S]*?)(\s*)$/;function I(e){if(!e)return"";var t=b.exec(e),n=t[1],a=t[3],i=t[2];return i&&(E.innerHTML=i.replace(/</g,"&lt;"),i="textContent"in E?E.textContent:E.innerText),n+i+a}function $(e){return e.replace(/&/g,"&amp;").replace(t,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(n,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function x(e,o){var n=!1,s=u.bind(e,e.push);return{start:function(i,e,t){i=u.lowercase(i),!n&&w[i]&&(n=i),n||!0!==r[i]||(s("<"),s(i),u.forEach(e,function(e,t){var n=u.lowercase(t),a="img"===i&&"src"===n||"background"===n;!0!==l[n]||!0===c[n]&&!o(e,a)||(s(" "),s(t),s('="'),s($(e)),s('"'))}),s(t?"/>":">"))},end:function(e){e=u.lowercase(e),n||!0!==r[e]||(s("</"),s(e),s(">")),e==n&&(n=!1)},chars:function(e){n||s($(e))}}}u.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(n){return function(e){var t=[];return function(e,i){"string"!=typeof e&&(e=null==e?"":""+e);var t,n,a,o,r=[],s=e;r.last=function(){return r[r.length-1]};for(;e;){if(n=!(o=""),r.last()&&w[r.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+r.last()+"[^>]*>","i"),function(e,t){return t=t.replace(v,"$1").replace(y,"$1"),i.chars&&i.chars(I(t)),""}),l(0,r.last())):(0===e.indexOf("\x3c!--")?0<=(t=e.indexOf("--",4))&&e.lastIndexOf("--\x3e",t)===t&&(i.comment&&i.comment(e.substring(4,t)),e=e.substring(t+3),n=!1):S.test(e)?(a=e.match(S))&&(e=e.replace(a[0],""),n=!1):g.test(e)?(a=e.match(p))&&(e=e.substring(a[0].length),a[0].replace(p,l),n=!1):h.test(e)&&((a=e.match(m))?(a[4]&&(e=e.substring(a[0].length),a[0].replace(m,c)),n=!1):(o+="<",e=e.substring(1))),n&&(t=e.indexOf("<"),o+=t<0?e:e.substring(0,t),e=t<0?"":e.substring(t),i.chars&&i.chars(I(o)))),e==s)throw d("badparse","The sanitizer was unable to parse the following block of html: {0}",e);s=e}function c(e,t,n,a){if(t=u.lowercase(t),D[t])for(;r.last()&&N[r.last()];)l(0,r.last());A[t]&&r.last()==t&&l(0,t),(a=C[t]||!!a)||r.push(t);var s={};n.replace(f,function(e,t,n,a,i){var o=n||a||i||"";s[t]=I(o)}),i.start&&i.start(t,s,a)}function l(e,t){var n,a=0;if(t=u.lowercase(t))for(a=r.length-1;0<=a&&r[a]!=t;a--);if(0<=a){for(n=r.length-1;a<=n;n--)i.end&&i.end(r[n]);r.length=a}}l()}(e,x(t,function(e,t){return!/^unsafe/.test(n(e,t))})),t.join("")}}]}),u.module("ngSanitize").filter("linky",["$sanitize",function(c){var l=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,d=/^mailto:/;return function(e,n){if(!e)return e;for(var t,a,i,o=e,s=[];t=o.match(l);)a=t[0],t[2]||t[4]||(a=(t[3]?"http://":"mailto:")+a),i=t.index,r(o.substr(0,i)),function(e,t){s.push("<a "),u.isDefined(n)&&s.push('target="',n,'" ');s.push('href="',e.replace(/"/g,"&quot;"),'">'),r(t),s.push("</a>")}(a,t[0].replace(d,"")),o=o.substring(i+t[0].length);return r(o),c(s.join(""));function r(e){var t,n;e&&s.push((t=e,x(n=[],u.noop).chars(t),n.join("")))}}}])}((window,window.angular)),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(s,r,c){var l=function(t,e,n){n=n||{};var a=s.defer(),i=l[n.animation?"animationEndEventName":"transitionEndEventName"],o=function(e){c.$apply(function(){t.unbind(i,o),a.resolve(t)})};return i&&t.bind(i,o),r(function(){angular.isString(e)?t.addClass(e):angular.isFunction(e)?e(t):angular.isObject(e)&&t.css(e),i||a.resolve(t)}),a.promise.cancel=function(){i&&t.unbind(i,o),a.reject("Transition cancelled")},a.promise},n=document.createElement("trans");function e(e){for(var t in e)if(void 0!==n.style[t])return e[t]}return l.transitionEndEventName=e({WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}),l.animationEndEventName=e({WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"}),l}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(c){return{link:function(e,a,t){var i,n=!0;function o(e){var t=c(a,e);return i&&i.cancel(),(i=t).then(n,n),t;function n(){i===t&&(i=void 0)}}function s(){a.removeClass("collapsing"),a.addClass("collapse in"),a.css({height:"auto"})}function r(){a.removeClass("collapsing"),a.addClass("collapse")}e.$watch(t.collapse,function(e){e?n?(n=!1,r(),a.css({height:0})):(a.css({height:a[0].scrollHeight+"px"}),a[0].offsetWidth,a.removeClass("collapse in").addClass("collapsing"),o({height:0}).then(r)):n?(n=!1,s()):(a.removeClass("collapse").addClass("collapsing"),o({height:a[0].scrollHeight+"px"}).then(s))})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,n,a){this.groups=[],this.closeOthers=function(t){(angular.isDefined(n.closeOthers)?e.$eval(n.closeOthers):a.closeOthers)&&angular.forEach(this.groups,function(e){e!==t&&(e.isOpen=!1)})},this.addGroup=function(t){var n=this;this.groups.push(t),t.$on("$destroy",function(e){n.removeGroup(t)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(t,e,n,a){a.addGroup(t),t.$watch("isOpen",function(e){e&&a.closeOthers(t)}),t.toggleOpen=function(){t.isDisabled||(t.isOpen=!t.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,n,a,i){a.setHeading(i(e,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,n,a){e.$watch(function(){return a[n.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){e.closeable="close"in t,this.close=e.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(i){return{require:"alert",link:function(e,t,n,a){i(function(){a.close()},parseInt(n.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),e.$watch(n.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(t,n,a,e){var i=e[0],o=e[1];o.$render=function(){n.toggleClass(i.activeClass,angular.equals(o.$modelValue,t.$eval(a.btnRadio)))},n.bind(i.toggleEvent,function(){var e=n.hasClass(i.activeClass);e&&!angular.isDefined(a.uncheckable)||t.$apply(function(){o.$setViewValue(e?null:t.$eval(a.btnRadio)),o.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,e,t,n){var i=n[0],o=n[1];function s(){return r(t.btnCheckboxTrue,!0)}function r(e,t){var n=a.$eval(e);return angular.isDefined(n)?n:t}o.$render=function(){e.toggleClass(i.activeClass,angular.equals(o.$modelValue,s()))},e.bind(i.toggleEvent,function(){a.$apply(function(){o.$setViewValue(e.hasClass(i.activeClass)?r(t.btnCheckboxFalse,!1):s()),o.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(s,t,n,r){var a,i,c=this,l=c.slides=s.slides=[],d=-1;c.currentSlide=null;var u=!1;function m(){o();var e=+s.interval;!isNaN(e)&&0<e&&(a=n(p,e))}function o(){a&&(n.cancel(a),a=null)}function p(){var e=+s.interval;i&&!isNaN(e)&&0<e?s.next():s.pause()}c.select=s.select=function(n,a){var i=l.indexOf(n);function e(){var e,t;u||(c.currentSlide&&angular.isString(a)&&!s.noTransition&&n.$element?(n.$element.addClass(a),n.$element[0].offsetWidth,angular.forEach(l,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(n,{direction:a,active:!0,entering:!0}),angular.extend(c.currentSlide||{},{direction:a,leaving:!0}),s.$currentTransition=r(n.$element,{}),e=n,t=c.currentSlide,s.$currentTransition.then(function(){o(e,t)},function(){o(e,t)})):o(n,c.currentSlide),c.currentSlide=n,d=i,m())}function o(e,t){angular.extend(e,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(t||{},{direction:"",active:!1,leaving:!1,entering:!1}),s.$currentTransition=null}void 0===a&&(a=d<i?"next":"prev"),n&&n!==c.currentSlide&&(s.$currentTransition?(s.$currentTransition.cancel(),t(e)):e())},s.$on("$destroy",function(){u=!0}),c.indexOfSlide=function(e){return l.indexOf(e)},s.next=function(){var e=(d+1)%l.length;if(!s.$currentTransition)return c.select(l[e],"next")},s.prev=function(){var e=d-1<0?l.length-1:d-1;if(!s.$currentTransition)return c.select(l[e],"prev")},s.isActive=function(e){return c.currentSlide===e},s.$watch("interval",m),s.$on("$destroy",o),s.play=function(){i||(i=!0,m())},s.pause=function(){s.noPause||(i=!1,o())},c.addSlide=function(e,t){e.$element=t,l.push(e),1===l.length||e.active?(c.select(l[l.length-1]),1==l.length&&s.play()):e.active=!1},c.removeSlide=function(e){var t=l.indexOf(e);l.splice(t,1),0<l.length&&e.active?t>=l.length?c.select(l[t-1]):c.select(l[t]):t<d&&d--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(t,e,n,a){a.addSlide(t,e),t.$on("$destroy",function(){a.removeSlide(t)}),t.$watch("active",function(e){e&&a.select(t)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(f,h){this.parsers={};var g={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:f.DATETIME_FORMATS.MONTH.join("|"),apply:function(e){this.month=f.DATETIME_FORMATS.MONTH.indexOf(e)}},MMM:{regex:f.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(e){this.month=f.DATETIME_FORMATS.SHORTMONTH.indexOf(e)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:f.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:f.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(e,t){if(!angular.isString(e)||!t)return e;var o,s,r;t=f.DATETIME_FORMATS[t]||t,this.parsers[t]||(this.parsers[t]=(s=[],r=(o=t).split(""),angular.forEach(g,function(e,t){var n=o.indexOf(t);if(-1<n){o=o.split(""),r[n]="("+e.regex+")",o[n]="$";for(var a=n+1,i=n+t.length;a<i;a++)r[a]="",o[a]="$";o=o.join(""),s.push({index:n,apply:e.apply})}}),{regex:new RegExp("^"+r.join("")+"$"),map:h(s,"index")}));var n=this.parsers[t],a=n.regex,i=n.map,c=e.match(a);if(c&&c.length){for(var l,d={year:1900,month:0,date:1,hours:0},u=1,m=c.length;u<m;u++){var p=i[u-1];p.apply&&p.apply.call(d,c[u])}return function(e,t,n){if(1===t&&28<n)return 29===n&&(e%4==0&&e%100!=0||e%400==0);return 3!==t&&5!==t&&8!==t&&10!==t||n<31}(d.year,d.month,d.date)&&(l=new Date(d.year,d.month,d.date,d.hours)),l}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(o,a){function s(e){return"static"===(n="position",((t=e).currentStyle?t.currentStyle[n]:a.getComputedStyle?a.getComputedStyle(t)[n]:t.style[n])||"static");var t,n}return{position:function(e){var t=this.offset(e),n={top:0,left:0},a=function(e){for(var t=o[0],n=e.offsetParent||t;n&&n!==t&&s(n);)n=n.offsetParent;return n||t}(e[0]);a!=o[0]&&((n=this.offset(angular.element(a))).top+=a.clientTop-a.scrollTop,n.left+=a.clientLeft-a.scrollLeft);var i=e[0].getBoundingClientRect();return{width:i.width||e.prop("offsetWidth"),height:i.height||e.prop("offsetHeight"),top:t.top-n.top,left:t.left-n.left}},offset:function(e){var t=e[0].getBoundingClientRect();return{width:t.width||e.prop("offsetWidth"),height:t.height||e.prop("offsetHeight"),top:t.top+(a.pageYOffset||o[0].documentElement.scrollTop),left:t.left+(a.pageXOffset||o[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,a){var i,o=n.split("-"),s=o[0],r=o[1]||"center",c=a?this.offset(e):this.position(e),l=t.prop("offsetWidth"),d=t.prop("offsetHeight"),u={center:function(){return c.left+c.width/2-l/2},left:function(){return c.left},right:function(){return c.left+c.width}},m={center:function(){return c.top+c.height/2-d/2},top:function(){return c.top},bottom:function(){return c.top+c.height}};switch(s){case"right":i={top:m[r](),left:u[s]()};break;case"left":i={top:m[r](),left:c.left-l};break;case"bottom":i={top:m[s](),left:u[r]()};break;default:i={top:c.top-d,left:u[r]()}}return i}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(n,a,e,i,t,o,s,r){var c=this,l={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(e,t){c[e]=angular.isDefined(a[e])?t<8?i(a[e])(n.$parent):n.$parent.$eval(a[e]):r[e]}),angular.forEach(["minDate","maxDate"],function(t){a[t]?n.$parent.$watch(e(a[t]),function(e){c[t]=e?new Date(e):null,c.refreshView()}):c[t]=r[t]?new Date(r[t]):null}),n.datepickerMode=n.datepickerMode||r.datepickerMode,n.uniqueId="datepicker-"+n.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(a.initDate)?n.$parent.$eval(a.initDate):new Date,n.isActive=function(e){return 0===c.compare(e.date,c.activeDate)&&(n.activeDateId=e.uid,!0)},this.init=function(e){(l=e).$render=function(){c.render()}},this.render=function(){var e,t;l.$modelValue&&(e=new Date(l.$modelValue),(t=!isNaN(e))?this.activeDate=e:o.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),l.$setValidity("date",t)),this.refreshView()},this.refreshView=function(){var e;this.element&&(this._refreshView(),e=l.$modelValue?new Date(l.$modelValue):null,l.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e)))},this.createDateObject=function(e,t){var n=l.$modelValue?new Date(l.$modelValue):null;return{date:e,label:s(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date)}},this.isDisabled=function(e){return this.minDate&&this.compare(e,this.minDate)<0||this.maxDate&&0<this.compare(e,this.maxDate)||a.dateDisabled&&n.dateDisabled({date:e,mode:n.datepickerMode})},this.split=function(e,t){for(var n=[];0<e.length;)n.push(e.splice(0,t));return n},n.select=function(e){var t;n.datepickerMode===c.minMode?((t=l.$modelValue?new Date(l.$modelValue):new Date(0,0,0,0,0,0,0)).setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),l.$setViewValue(t),l.$render()):(c.activeDate=e,n.datepickerMode=c.modes[c.modes.indexOf(n.datepickerMode)-1])},n.move=function(e){var t=c.activeDate.getFullYear()+e*(c.step.years||0),n=c.activeDate.getMonth()+e*(c.step.months||0);c.activeDate.setFullYear(t,n,1),c.refreshView()},n.toggleMode=function(e){e=e||1,n.datepickerMode===c.maxMode&&1===e||n.datepickerMode===c.minMode&&-1===e||(n.datepickerMode=c.modes[c.modes.indexOf(n.datepickerMode)+e])},n.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};function d(){t(function(){c.element[0].focus()},0,!1)}n.$on("datepicker.focus",d),n.keydown=function(e){var t=n.keys[e.which];if(t&&!e.shiftKey&&!e.altKey)if(e.preventDefault(),e.stopPropagation(),"enter"===t||"space"===t){if(c.isDisabled(c.activeDate))return;n.select(c.activeDate),d()}else!e.ctrlKey||"up"!==t&&"down"!==t?(c.handleKeyDown(t,e),c.refreshView()):(n.toggleMode("up"===t?1:-1),d())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,n,a){var i=a[0],o=a[1];o&&i.init(o)}}}).directive("daypicker",["dateFilter",function(p){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(u,e,t,m){u.showWeeks=m.showWeeks,m.step={months:1},m.element=e;var n=[31,28,31,30,31,30,31,31,30,31,30,31];function i(e,t){return 1!==t||e%4!=0||e%100==0&&e%400!=0?n[t]:29}m._refreshView=function(){var e=m.activeDate.getFullYear(),t=m.activeDate.getMonth(),n=new Date(e,t,1),a=m.startingDay-n.getDay(),i=0<a?7-a:-a,o=new Date(n);0<i&&o.setDate(1-i);for(var s=function(e,t){var n=new Array(t),a=new Date(e),i=0;for(a.setHours(12);i<t;)n[i++]=new Date(a),a.setDate(a.getDate()+1);return n}(o,42),r=0;r<42;r++)s[r]=angular.extend(m.createDateObject(s[r],m.formatDay),{secondary:s[r].getMonth()!==t,uid:u.uniqueId+"-"+r});u.labels=new Array(7);for(var c=0;c<7;c++)u.labels[c]={abbr:p(s[c].date,m.formatDayHeader),full:p(s[c].date,"EEEE")};if(u.title=p(m.activeDate,m.formatDayTitle),u.rows=m.split(s,7),u.showWeeks){u.weekNumbers=[];for(var l=function(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}(u.rows[0][0].date),d=u.rows.length;u.weekNumbers.push(l++)<d;);}},m.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},m.handleKeyDown=function(e,t){var n,a=m.activeDate.getDate();"left"===e?--a:"up"===e?a-=7:"right"===e?a+=1:"down"===e?a+=7:"pageup"===e||"pagedown"===e?(n=m.activeDate.getMonth()+("pageup"===e?-1:1),m.activeDate.setMonth(n,1),a=Math.min(i(m.activeDate.getFullYear(),m.activeDate.getMonth()),a)):"home"===e?a=1:"end"===e&&(a=i(m.activeDate.getFullYear(),m.activeDate.getMonth())),m.activeDate.setDate(a)},m.refreshView()}}}]).directive("monthpicker",["dateFilter",function(o){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(a,e,t,i){i.step={years:1},i.element=e,i._refreshView=function(){for(var e=new Array(12),t=i.activeDate.getFullYear(),n=0;n<12;n++)e[n]=angular.extend(i.createDateObject(new Date(t,n,1),i.formatMonth),{uid:a.uniqueId+"-"+n});a.title=o(i.activeDate,i.formatMonthTitle),a.rows=i.split(e,3)},i.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},i.handleKeyDown=function(e,t){var n,a=i.activeDate.getMonth();"left"===e?--a:"up"===e?a-=3:"right"===e?a+=1:"down"===e?a+=3:"pageup"===e||"pagedown"===e?(n=i.activeDate.getFullYear()+("pageup"===e?-1:1),i.activeDate.setFullYear(n)):"home"===e?a=0:"end"===e&&(a=11),i.activeDate.setMonth(a)},i.refreshView()}}}]).directive("yearpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,e,t,i){var o=i.yearRange;function s(e){return parseInt((e-1)/o,10)*o+1}i.step={years:o},i.element=e,i._refreshView=function(){for(var e=new Array(o),t=0,n=s(i.activeDate.getFullYear());t<o;t++)e[t]=angular.extend(i.createDateObject(new Date(n+t,0,1),i.formatYear),{uid:a.uniqueId+"-"+t});a.title=[e[0].label,e[o-1].label].join(" - "),a.rows=i.split(e,5)},i.compare=function(e,t){return e.getFullYear()-t.getFullYear()},i.handleKeyDown=function(e,t){var n=i.activeDate.getFullYear();"left"===e?--n:"up"===e?n-=5:"right"===e?n+=1:"down"===e?n+=5:"pageup"===e||"pagedown"===e?n+=("pageup"===e?-1:1)*i.step.years:"home"===e?n=s(i.activeDate.getFullYear()):"end"===e&&(n=s(i.activeDate.getFullYear())+o-1),i.activeDate.setFullYear(n)},i.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(f,h,g,v,S,y,C){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(a,t,i,n){var o,s=angular.isDefined(i.closeOnDateSelection)?a.$parent.$eval(i.closeOnDateSelection):C.closeOnDateSelection,r=angular.isDefined(i.datepickerAppendToBody)?a.$parent.$eval(i.datepickerAppendToBody):C.appendToBody;a.showButtonBar=angular.isDefined(i.showButtonBar)?a.$parent.$eval(i.showButtonBar):C.showButtonBar,a.getText=function(e){return a[e+"Text"]||C[e+"Text"]},i.$observe("datepickerPopup",function(e){o=e||C.datepickerPopup,n.$render()});var e=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");function c(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}e.attr({"ng-model":"date","ng-change":"dateSelection()"});var l=angular.element(e.children()[0]);function d(e){if(!e)return n.$setValidity("date",!0),null;if(angular.isDate(e)&&!isNaN(e))return n.$setValidity("date",!0),e;if(angular.isString(e)){var t=y.parse(e,o)||new Date(e);return isNaN(t)?void n.$setValidity("date",!1):(n.$setValidity("date",!0),t)}n.$setValidity("date",!1)}i.datepickerOptions&&angular.forEach(a.$parent.$eval(i.datepickerOptions),function(e,t){l.attr(c(t),e)}),a.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(t){var e,n;i[t]&&(e=h(i[t]),a.$parent.$watch(e,function(e){a.watchData[t]=e}),l.attr(c(t),"watchData."+t),"datepickerMode"===t&&(n=e.assign,a.$watch("watchData."+t,function(e,t){e!==t&&n(a.$parent,e)})))}),i.dateDisabled&&l.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),n.$parsers.unshift(d),a.dateSelection=function(e){angular.isDefined(e)&&(a.date=e),n.$setViewValue(a.date),n.$render(),s&&(a.isOpen=!1,t[0].focus())},t.bind("input change keyup",function(){a.$apply(function(){a.date=n.$modelValue})}),n.$render=function(){var e=n.$viewValue?S(n.$viewValue,o):"";t.val(e),a.date=d(n.$modelValue)};function u(e){a.isOpen&&e.target!==t[0]&&a.$apply(function(){a.isOpen=!1})}function m(e,t){a.keydown(e)}t.bind("keydown",m),a.keydown=function(e){27===e.which?(e.preventDefault(),e.stopPropagation(),a.close()):40!==e.which||a.isOpen||(a.isOpen=!0)},a.$watch("isOpen",function(e){e?(a.$broadcast("datepicker.focus"),a.position=r?v.offset(t):v.position(t),a.position.top=a.position.top+t.prop("offsetHeight"),g.bind("click",u)):g.unbind("click",u)}),a.select=function(e){var t;"today"===e&&(t=new Date,angular.isDate(n.$modelValue)?(e=new Date(n.$modelValue)).setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):e=new Date(t.setHours(0,0,0,0))),a.dateSelection(e)},a.close=function(){a.isOpen=!1,t[0].focus()};var p=f(e)(a);e.remove(),r?g.find("body").append(p):t.after(p),a.$on("$destroy",function(){p.remove(),t.unbind("keydown",m),g.unbind("click",u)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t,n){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(t){var n=null;this.open=function(e){n||(t.bind("click",a),t.bind("keydown",i)),n&&n!==e&&(n.isOpen=!1),n=e},this.close=function(e){n===e&&(n=null,t.unbind("click",a),t.unbind("keydown",i))};var a=function(e){var t;n&&(t=n.getToggleElement(),e&&t&&t[0].contains(e.target)||n.$apply(function(){n.isOpen=!1}))},i=function(e){27===e.which&&(n.focusToggleElement(),a())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(n,t,a,e,i,o){var s,r=this,c=n.$new(),l=e.openClass,d=angular.noop,u=t.onToggle?a(t.onToggle):angular.noop;this.init=function(e){r.$element=e,t.isOpen&&(s=a(t.isOpen),d=s.assign,n.$watch(s,function(e){c.isOpen=!!e}))},this.toggle=function(e){return c.isOpen=arguments.length?!!e:!c.isOpen},this.isOpen=function(){return c.isOpen},c.getToggleElement=function(){return r.toggleElement},c.focusToggleElement=function(){r.toggleElement&&r.toggleElement[0].focus()},c.$watch("isOpen",function(e,t){o[e?"addClass":"removeClass"](r.$element,l),e?(c.focusToggleElement(),i.open(c)):i.close(c),d(n,e),angular.isDefined(e)&&e!==t&&u(n,{open:!!e})}),n.$on("$locationChangeSuccess",function(){c.isOpen=!1}),n.$on("$destroy",function(){c.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(e,t,n,a){a.init(t)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(t,n,a,i){var e;i&&(i.toggleElement=n,e=function(e){e.preventDefault(),n.hasClass("disabled")||a.disabled||t.$apply(function(){i.toggle()})},n.bind("click",e),n.attr({"aria-haspopup":!0,"aria-expanded":!1}),t.$watch(i.isOpen,function(e){n.attr("aria-expanded",!!e)}),t.$on("$destroy",function(){n.unbind("click",e)}))}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(e,t){a.push({key:e,value:t})},get:function(e){for(var t=0;t<a.length;t++)if(e==a[t].key)return a[t]},keys:function(){for(var e=[],t=0;t<a.length;t++)e.push(a[t].key);return e},top:function(){return a[a.length-1]},remove:function(e){for(var t=-1,n=0;n<a.length;n++)if(e==a[n].key){t=n;break}return a.splice(t,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(e,t,n){e.backdropClass=n.backdropClass||"",e.animate=!1,a(function(){e.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,i){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(e,t,n){t.addClass(n.windowClass||""),e.size=n.size,i(function(){e.animate=!0,t[0].querySelectorAll("[autofocus]").length||t[0].focus()}),e.close=function(e){var t=a.getTop();t&&t.value.backdrop&&"static"!=t.value.backdrop&&e.target===e.currentTarget&&(e.preventDefault(),e.stopPropagation(),a.dismiss(t.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(e,t,n,a,i){i(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(r,c,l,d,u,e){var m,p,f="modal-open",h=e.createNew(),n={};function g(){for(var e=-1,t=h.keys(),n=0;n<t.length;n++)h.get(t[n]).value.backdrop&&(e=n);return e}function a(e){var t=l.find("body").eq(0),n=l.find("html").eq(0),a=h.get(e).value;h.remove(e),i(a.modalDomEl,a.modalScope,300,function(){a.modalScope.$destroy(),t.toggleClass(f,0<h.length()),n[0].style.overflowY="auto",function(){{var e;m&&-1==g()&&(i(m,e=p,150,function(){e.$destroy(),e=null}),p=m=void 0)}}()})}function i(e,t,n,a){t.animate=!1;var i,o=r.transitionEndEventName;function s(){s.done||(s.done=!0,e.remove(),a&&a())}o?(i=c(s,n),e.bind(o,function(){c.cancel(i),s(),t.$apply()})):c(s)}return u.$watch(g,function(e){p&&(p.index=e)}),l.bind("keydown",function(e){var t;27===e.which&&(t=h.top())&&t.value.keyboard&&(e.preventDefault(),u.$apply(function(){n.dismiss(t.key,"escape key press")}))}),n.open=function(e,t){h.add(e,{deferred:t.deferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var n,a=l.find("body").eq(0),i=g(),o=l.find("html").eq(0);0<=i&&!m&&((p=u.$new(!0)).index=i,(n=angular.element("<div modal-backdrop></div>")).attr("backdrop-class",t.backdropClass),m=d(n)(p),a.append(m));var s=angular.element("<div modal-window></div>");s.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,size:t.size,index:h.length()-1,animate:"animate"}).html(t.content);var r=d(s)(t.scope);h.top().value.modalDomEl=r,a.append(r),a.addClass(f),o[0].style.overflowY="hidden"},n.close=function(e,t){var n=h.get(e);n&&(n.value.deferred.resolve(t),a(e))},n.dismiss=function(e,t){var n=h.get(e);n&&(n.value.deferred.reject(t),a(e))},n.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},n.getTop=function(){return h.top()},n}]).provider("$modal",function(){var h={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(c,l,d,u,m,p,f){var e={};return e.open=function(o){var s=d.defer(),e=d.defer(),r={result:s.promise,opened:e.promise,close:function(e){f.close(r,e)},dismiss:function(e){f.dismiss(r,e)}};if((o=angular.extend({},h.options,o)).resolve=o.resolve||{},!o.template&&!o.templateUrl)throw new Error("One of template or templateUrl options is required.");var t,n,a,i=d.all([(a=o).template?d.when(a.template):u.get(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl,{cache:m}).then(function(e){return e.data})].concat((t=o.resolve,n=[],angular.forEach(t,function(e){(angular.isFunction(e)||angular.isArray(e))&&n.push(d.when(c.invoke(e)))}),n)));return i.then(function(n){var e=(o.scope||l).$new();e.$close=r.close,e.$dismiss=r.dismiss;var t,a={},i=1;o.controller&&(a.$scope=e,a.$modalInstance=r,angular.forEach(o.resolve,function(e,t){a[t]=n[i++]}),t=p(o.controller,a),o.controllerAs&&(e[o.controllerAs]=t)),f.open(r,{scope:e,deferred:s,content:n[0],backdrop:o.backdrop,keyboard:o.keyboard,backdropClass:o.backdropClass,windowClass:o.windowClass,windowTemplateUrl:o.windowTemplateUrl,size:o.size})},function(e){s.reject(e)}),i.then(function(){e.resolve(!0)},function(){e.reject(!1)}),r},e}]};return h}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(n,a,i){var o=this,s={$setViewValue:angular.noop},t=a.numPages?i(a.numPages).assign:angular.noop;this.init=function(e,t){s=e,this.config=t,s.$render=function(){o.render()},a.itemsPerPage?n.$parent.$watch(i(a.itemsPerPage),function(e){o.itemsPerPage=parseInt(e,10),n.totalPages=o.calculateTotalPages()}):this.itemsPerPage=t.itemsPerPage},this.calculateTotalPages=function(){var e=this.itemsPerPage<1?1:Math.ceil(n.totalItems/this.itemsPerPage);return Math.max(e||0,1)},this.render=function(){n.page=parseInt(s.$viewValue,10)||1},n.selectPage=function(e){n.page!==e&&0<e&&e<=n.totalPages&&(s.$setViewValue(e),s.$render())},n.getText=function(e){return n[e+"Text"]||o.config[e+"Text"]},n.noPrevious=function(){return 1===n.page},n.noNext=function(){return n.page===n.totalPages},n.$watch("totalItems",function(){n.totalPages=o.calculateTotalPages()}),n.$watch("totalPages",function(e){t(n.$parent,e),n.page>e?n.selectPage(e):s.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(r,c){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(e,t,n,a){var d,u,i,o=a[0],s=a[1];function m(e,t,n){return{number:e,text:t,active:n}}s&&(d=angular.isDefined(n.maxSize)?e.$parent.$eval(n.maxSize):c.maxSize,u=angular.isDefined(n.rotate)?e.$parent.$eval(n.rotate):c.rotate,e.boundaryLinks=angular.isDefined(n.boundaryLinks)?e.$parent.$eval(n.boundaryLinks):c.boundaryLinks,e.directionLinks=angular.isDefined(n.directionLinks)?e.$parent.$eval(n.directionLinks):c.directionLinks,o.init(s,c),n.maxSize&&e.$parent.$watch(r(n.maxSize),function(e){d=parseInt(e,10),o.render()}),i=o.render,o.render=function(){i(),0<e.page&&e.page<=e.totalPages&&(e.pages=function(e,t){var n=[],a=1,i=t,o=angular.isDefined(d)&&d<t;o&&(u?t<(i=(a=Math.max(e-Math.floor(d/2),1))+d-1)&&(a=(i=t)-d+1):(a=(Math.ceil(e/d)-1)*d+1,i=Math.min(a+d-1,t)));for(var s,r,c=a;c<=i;c++){var l=m(c,c,c===e);n.push(l)}return o&&!u&&(1<a&&(s=m(a-1,"...",!1),n.unshift(s)),i<t&&(r=m(i+1,"...",!1),n.push(r))),n}(e.page,e.totalPages))})}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("pager",["pagerConfig",function(s){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(e,t,n,a){var i=a[0],o=a[1];o&&(e.align=angular.isDefined(n.align)?e.$parent.$eval(n.align):s.align,i.init(o,s))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){var r={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},l={};this.options=function(e){angular.extend(l,e)},this.setTriggers=function(e){angular.extend(c,e)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(e,o,b,I,$,s){return function(N,w,n){var R=angular.extend({},r,l);function E(e){var t=e||R.trigger||n;return{show:t,hide:c[t]||t}}var e=N.replace(/[A-Z]/g,function(e,t){return(t?"-":"")+e.toLowerCase()}),t=s.startSymbol(),a=s.endSymbol(),i="<div "+e+'-popup title="'+t+"title"+a+'" content="'+t+"content"+a+'" placement="'+t+"placement"+a+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(e,t){var D=o(i);return function(e,t,n){var a,i,o,s,r=!!angular.isDefined(R.appendToBody)&&R.appendToBody,c=E(void 0),l=angular.isDefined(n[w+"Enable"]),d=e.$new(!0),u=function(){var e=$.positionElements(t,a,d.placement,r);e.top+="px",e.left+="px",a.css(e)};function m(){(d.isOpen?f:p)()}function p(){l&&!e.$eval(n[w+"Enable"])||(function(){var e=n[w+"Placement"];d.placement=angular.isDefined(e)?e:R.placement}(),function(){var e=n[w+"PopupDelay"],t=parseInt(e,10);d.popupDelay=isNaN(t)?R.popupDelay:t}(),d.popupDelay?s||(s=b(h,d.popupDelay,!1)).then(function(e){e()}):h()())}function f(){e.$apply(function(){g()})}function h(){return s=null,o&&(b.cancel(o),o=null),d.content?(function(){a&&v();i=d.$new(),a=D(i,angular.noop)}(),a.css({top:0,left:0,display:"block"}),r?I.find("body").append(a):t.after(a),u(),d.isOpen=!0,d.$digest(),u):angular.noop}function g(){d.isOpen=!1,b.cancel(s),s=null,d.animation?o=o||b(v,500):v()}function v(){o=null,a&&(a.remove(),a=null),i&&(i.$destroy(),i=null)}d.isOpen=!1,n.$observe(N,function(e){!(d.content=e)&&d.isOpen&&g()}),n.$observe(w+"Title",function(e){d.title=e});function S(){t.unbind(c.show,p),t.unbind(c.hide,f)}var y;y=n[w+"Trigger"],S(),(c=E(y)).show===c.hide?t.bind(c.show,m):(t.bind(c.show,p),t.bind(c.hide,f));var C=e.$eval(n[w+"Animation"]);d.animation=angular.isDefined(C)?!!C:R.animation;var A=e.$eval(n[w+"AppendToBody"]);(r=angular.isDefined(A)?A:r)&&e.$on("$locationChangeSuccess",function(){d.isOpen&&g()}),e.$on("$destroy",function(){b.cancel(o),b.cancel(s),S(),v(),d=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(e){return e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(n,e,t){var a=this,i=angular.isDefined(e.animate)?n.$parent.$eval(e.animate):t.animate;this.bars=[],n.max=angular.isDefined(e.max)?n.$parent.$eval(e.max):t.max,this.addBar=function(t,e){i||e.css({transition:"none"}),this.bars.push(t),t.$watch("value",function(e){t.percent=+(100*e/n.max).toFixed(2)}),t.$on("$destroy",function(){e=null,a.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)}}]).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,n,a){a.addBar(e,t)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,n,a){a.addBar(e,angular.element(t.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(n,a,i){var o={$setViewValue:angular.noop};this.init=function(e){(o=e).$render=this.render,this.stateOn=angular.isDefined(a.stateOn)?n.$parent.$eval(a.stateOn):i.stateOn,this.stateOff=angular.isDefined(a.stateOff)?n.$parent.$eval(a.stateOff):i.stateOff;var t=angular.isDefined(a.ratingStates)?n.$parent.$eval(a.ratingStates):new Array(angular.isDefined(a.max)?n.$parent.$eval(a.max):i.max);n.range=this.buildTemplateObjects(t)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;t<n;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff},e[t]);return e},n.rate=function(e){!n.readonly&&0<=e&&e<=n.range.length&&(o.$setViewValue(e),o.$render())},n.enter=function(e){n.readonly||(n.value=e),n.onHover({value:e})},n.reset=function(){n.value=o.$viewValue,n.onLeave()},n.onKeydown=function(e){/(37|38|39|40)/.test(e.which)&&(e.preventDefault(),e.stopPropagation(),n.rate(n.value+(38===e.which||39===e.which?1:-1)))},this.render=function(){n.value=o.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,n,a){var i=a[0],o=a[1];o&&i.init(o)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(e){var a,i=this,o=i.tabs=e.tabs=[];i.select=function(t){angular.forEach(o,function(e){e.active&&e!==t&&(e.active=!1,e.onDeselect())}),t.active=!0,t.onSelect()},i.addTab=function(e){o.push(e),1===o.length?e.active=!0:e.active&&i.select(e)},i.removeTab=function(e){var t,n=o.indexOf(e);e.active&&1<o.length&&!a&&(t=n==o.length-1?n-1:n+1,i.select(o[t])),o.splice(n,1)},e.$on("$destroy",function(){a=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,n){e.vertical=!!angular.isDefined(n.vertical)&&e.$parent.$eval(n.vertical),e.justified=!!angular.isDefined(n.justified)&&e.$parent.$eval(n.justified)}}}).directive("tab",["$parse",function(o){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(e,t,i){return function(t,e,n,a){t.$watch("active",function(e){e&&a.select(t)}),t.disabled=!1,n.disabled&&t.$parent.$watch(o(n.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},a.addTab(t),t.$on("$destroy",function(){a.removeTab(t)}),t.$transcludeFn=i}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t,n,a){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",function(){return{restrict:"A",require:"^tabset",link:function(e,n,t){var a=e.$eval(t.tabContentTransclude);a.$transcludeFn(a.$parent,function(e){angular.forEach(e,function(e){var t;(t=e).tagName&&(t.hasAttribute("tab-heading")||t.hasAttribute("data-tab-heading")||"tab-heading"===t.tagName.toLowerCase()||"data-tab-heading"===t.tagName.toLowerCase())?a.headingElement=e:n.append(e)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(i,o,e,t,n,s){var a=new Date,r={$setViewValue:angular.noop},c=angular.isDefined(o.meridians)?i.$parent.$eval(o.meridians):s.meridians||n.DATETIME_FORMATS.AMPMS;this.init=function(e,t){(r=e).$render=this.render;var n=t.eq(0),a=t.eq(1);(angular.isDefined(o.mousewheel)?i.$parent.$eval(o.mousewheel):s.mousewheel)&&this.setupMousewheelEvents(n,a),i.readonlyInput=angular.isDefined(o.readonlyInput)?i.$parent.$eval(o.readonlyInput):s.readonlyInput,this.setupInputEvents(n,a)};var l=s.hourStep;o.hourStep&&i.$parent.$watch(e(o.hourStep),function(e){l=parseInt(e,10)});var d=s.minuteStep;function u(){var e=parseInt(i.hours,10);if(i.showMeridian?0<e&&e<13:0<=e&&e<24)return i.showMeridian&&(12===e&&(e=0),i.meridian===c[1]&&(e+=12)),e}function m(){var e=parseInt(i.minutes,10);return 0<=e&&e<60?e:void 0}function p(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e}function f(e){h(),r.$setViewValue(new Date(a)),g(e)}function h(){r.$setValidity("time",!0),i.invalidHours=!1,i.invalidMinutes=!1}function g(e){var t=a.getHours(),n=a.getMinutes();i.showMeridian&&(t=0===t||12===t?12:t%12),i.hours="h"===e?t:p(t),i.minutes="m"===e?n:p(n),i.meridian=a.getHours()<12?c[0]:c[1]}function v(e){var t=new Date(a.getTime()+6e4*e);a.setHours(t.getHours(),t.getMinutes()),f()}o.minuteStep&&i.$parent.$watch(e(o.minuteStep),function(e){d=parseInt(e,10)}),i.showMeridian=s.showMeridian,o.showMeridian&&i.$parent.$watch(e(o.showMeridian),function(e){var t,n;i.showMeridian=!!e,r.$error.time?(t=u(),n=m(),angular.isDefined(t)&&angular.isDefined(n)&&(a.setHours(t),f())):g()}),this.setupMousewheelEvents=function(e,t){function n(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||0<t}e.bind("mousewheel wheel",function(e){i.$apply(n(e)?i.incrementHours():i.decrementHours()),e.preventDefault()}),t.bind("mousewheel wheel",function(e){i.$apply(n(e)?i.incrementMinutes():i.decrementMinutes()),e.preventDefault()})},this.setupInputEvents=function(e,t){if(i.readonlyInput)return i.updateHours=angular.noop,void(i.updateMinutes=angular.noop);function n(e,t){r.$setViewValue(null),r.$setValidity("time",!1),angular.isDefined(e)&&(i.invalidHours=e),angular.isDefined(t)&&(i.invalidMinutes=t)}i.updateHours=function(){var e=u();angular.isDefined(e)?(a.setHours(e),f("h")):n(!0)},e.bind("blur",function(e){!i.invalidHours&&i.hours<10&&i.$apply(function(){i.hours=p(i.hours)})}),i.updateMinutes=function(){var e=m();angular.isDefined(e)?(a.setMinutes(e),f("m")):n(void 0,!0)},t.bind("blur",function(e){!i.invalidMinutes&&i.minutes<10&&i.$apply(function(){i.minutes=p(i.minutes)})})},this.render=function(){var e=r.$modelValue?new Date(r.$modelValue):null;isNaN(e)?(r.$setValidity("time",!1),t.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(a=e),h(),g())},i.incrementHours=function(){v(60*l)},i.decrementHours=function(){v(60*-l)},i.incrementMinutes=function(){v(d)},i.decrementMinutes=function(){v(-d)},i.toggleMeridian=function(){v(720*(a.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,t,n,a){var i=a[0],o=a[1];o&&i.init(o,t.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(n){var a=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(e){var t=e.match(a);if(!t)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+e+'".');return{itemName:t[3],source:n(t[4]),viewMapper:n(t[2]||t[1]),modelMapper:n(t[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(R,E,b,I,$,x,P){var M=[9,13,27,38,40];return{require:"ngModel",link:function(o,s,e,r){var c,n=o.$eval(e.typeaheadMinLength)||1,a=o.$eval(e.typeaheadWaitMs)||0,i=!1!==o.$eval(e.typeaheadEditable),l=E(e.typeaheadLoading).assign||angular.noop,d=E(e.typeaheadOnSelect),u=e.typeaheadInputFormatter?E(e.typeaheadInputFormatter):void 0,m=!!e.typeaheadAppendToBody&&o.$eval(e.typeaheadAppendToBody),p=!1!==o.$eval(e.typeaheadFocusFirst),f=E(e.ngModel).assign,h=P.parse(e.typeahead),g=o.$new();o.$on("$destroy",function(){g.$destroy()});var t="typeahead-"+g.$id+"-"+Math.floor(1e4*Math.random());s.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":t});var v=angular.element("<div typeahead-popup></div>");v.attr({id:t,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(e.typeaheadTemplateUrl)&&v.attr("template-url",e.typeaheadTemplateUrl);function S(){g.matches=[],g.activeIdx=-1,s.attr("aria-expanded",!1)}function y(e){return t+"-option-"+e}g.$watch("activeIdx",function(e){e<0?s.removeAttr("aria-activedescendant"):s.attr("aria-activedescendant",y(e))});function C(a){var i={$viewValue:a};l(o,!0),b.when(h.source(o,i)).then(function(e){var t=a===r.$viewValue;if(t&&c)if(0<e.length){g.activeIdx=p?0:-1;for(var n=g.matches.length=0;n<e.length;n++)i[h.itemName]=e[n],g.matches.push({id:y(n),label:h.viewMapper(g,i),model:e[n]});g.query=a,g.position=m?x.offset(s):x.position(s),g.position.top=g.position.top+s.prop("offsetHeight"),s.attr("aria-expanded",!0)}else S();t&&l(o,!1)},function(){S(),l(o,!1)})}var A;S(),g.query=void 0;function D(){A&&I.cancel(A)}r.$parsers.unshift(function(e){var t;return c=!0,e&&e.length>=n?0<a?(D(),t=e,A=I(function(){C(t)},a)):C(e):(l(o,!1),D(),S()),i?e:e?void r.$setValidity("editable",!1):(r.$setValidity("editable",!0),e)}),r.$formatters.push(function(e){var t,n={};return u?(n.$model=e,u(o,n)):(n[h.itemName]=e,t=h.viewMapper(o,n),n[h.itemName]=void 0,t!==h.viewMapper(o,n)?t:e)}),g.select=function(e){var t,n,a={};a[h.itemName]=n=g.matches[e].model,t=h.modelMapper(o,a),f(o,t),r.$setValidity("editable",!0),d(o,{$item:n,$model:t,$label:h.viewMapper(o,a)}),S(),I(function(){s[0].focus()},0,!1)},s.bind("keydown",function(e){0!==g.matches.length&&-1!==M.indexOf(e.which)&&(-1!=g.activeIdx||13!==e.which&&9!==e.which)&&(e.preventDefault(),40===e.which?(g.activeIdx=(g.activeIdx+1)%g.matches.length,g.$digest()):38===e.which?(g.activeIdx=(0<g.activeIdx?g.activeIdx:g.matches.length)-1,g.$digest()):13===e.which||9===e.which?g.$apply(function(){g.select(g.activeIdx)}):27===e.which&&(e.stopPropagation(),S(),g.$digest()))}),s.bind("blur",function(e){c=!1});function N(e){s[0]!==e.target&&(S(),g.$digest())}$.bind("click",N),o.$on("$destroy",function(){$.unbind("click",N),m&&w.remove()});var w=R(v)(g);m?$.find("body").append(w):s.after(w)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(t,e,n){t.templateUrl=n.templateUrl,t.isOpen=function(){return 0<t.matches.length},t.isActive=function(e){return t.active==e},t.selectActive=function(e){t.active=e},t.selectMatch=function(e){t.select({activeIdx:e})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(i,o,s,r){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(t,n,e){var a=r(e.templateUrl)(t.$parent)||"template/typeahead/typeahead-match.html";i.get(a,{cache:o}).success(function(e){n.replaceWith(s(e.trim())(t))})}}}]).filter("typeaheadHighlight",function(){return function(e,t){return t?(""+e).replace(new RegExp(t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi"),"<strong>$&</strong>"):e}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n\t  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n\t<li ng-transclude></li>\n\t<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n\t\t<span class="btn-group pull-left">\n\t\t\t<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n\t\t\t<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n\t\t</span>\n\t\t<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n\t</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div class="mfp-bg mfp-ready {{ backdropClass }}"\n     ng-class="{in: animate}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade mfp-wrap  mfp-close-btn-in mfp-auto-cursor mfp-ready" ng-class="{in: animate}" style="overflow-y: auto; overflow-x: hidden" ng-click="close($event)">\n    <div class="mfp-container mfp-s-ready mfp-inline-holder" ng-class=""><div class="mfp-content" modal-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("template/timepicker/timepicker.html",'<table>\n\t<tbody>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n\t\t\t<td>&nbsp;</td>\n\t\t\t<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n\t\t\t<td ng-show="showMeridian"></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n\t\t\t\t<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t</td>\n\t\t\t<td>:</td>\n\t\t\t<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n\t\t\t\t<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t</td>\n\t\t\t<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n\t\t</tr>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n\t\t\t<td>&nbsp;</td>\n\t\t\t<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n\t\t\t<td ng-show="showMeridian"></td>\n\t\t</tr>\n\t</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]);var app=angular.module("app",["ngResource","ngSanitize","ngRoute","ngCookies","ui.bootstrap","ui.select2","ncGrid","ncWizard","ncUiModule","reCAPTCHA"]).config(["$compileProvider","$httpProvider",function(e,t){e.debugInfoEnabled(!1),t.defaults.headers.get||(t.defaults.headers.get={}),t.defaults.headers.get["Cache-Control"]="no-cache",t.defaults.headers.get.Pragma="no-cache"}]).run(["$locale","$rootScope","$location","$http","ncTableParser",function($locale,$rootScope,$location,$http,ncTableParser){var formats=$locale.NUMBER_FORMATS;formats.GROUP_SEP=" ",$rootScope.closeLightbox=function(){},$rootScope.scroolToElement=function(e,t){$("html,body").animate({scrollTop:e.offset().top-t},"slow")},$http.defaults.transformResponse.unshift(function(responseData,headers){var header=headers();return header["x-nc-content-type"]&&"nctable"==header["x-nc-content-type"]&&(responseData="string"==typeof responseData?eval("("+responseData+")"):responseData,responseData.Result&&"NcTable"==responseData.Result.DataType&&(responseData.Result.Data=ncTableParser(responseData.Result))),responseData})}]).run(["expiringCounter",function(e){e.update()}]);app.directive("getStateProvince",[function(){var l={US:{states:{AL:["AL","Alabama"],AK:["AK","Alaska"],AZ:["AZ","Arizona"],AR:["AR","Arkansas"],CA:["CA","California"],CO:["CO","Colorado"],CT:["CT","Connecticut"],DE:["DE","Delaware"],FL:["FL","Florida"],GA:["GA","Georgia"],HI:["HI","Hawaii"],ID:["ID","Idaho"],IL:["IL","Illinois"],IN:["IN","Indiana"],IA:["IA","Iowa"],KS:["KS","Kansas"],KY:["KY","Kentucky"],LA:["LA","Louisiana"],ME:["ME","Maine"],MD:["MD","Maryland"],MA:["MA","Massachetts"],MI:["MI","Michigan"],MN:["MN","Minnesota"],MS:["MS","Mississippi"],MO:["MO","Missouri"],MT:["MT","Montana"],NE:["NE","Nebraska"],NV:["NV","Nevada"],NH:["NH","New Hampshire"],NJ:["NJ","New Jersey"],NM:["NM","New Mexico"],NY:["NY","New York"],NC:["NC","North Carolina"],ND:["ND","North Dakota"],OH:["OH","Ohio"],OK:["OK","Oklahoma"],OR:["OR","Oregon"],PA:["PA","Pennsylvania"],RI:["RI","Rhode Island"],SC:["SC","South Carolina"],SD:["SD","South Dakota"],TN:["TN","Tennessee"],TX:["TX","Texas"],UT:["UT","Utah"],VT:["VT","Vermont"],VA:["VA","Virginia"],WA:["WA","Washington"],WV:["WV","West Virginia"],WI:["WI","Wisconsin"],WY:["WY","Wyoming"],DC:["DC","Washington, D.C","Washington D.C","Washington DC","Washington, DC"],AS:["AS","American Samoa"],UM:["UM","Minor Outlying Islands"],MP:["MP","Northern Mariana Islands"],PR:["PR","Puerto Rico"],VI:["VI","Virgin Islands"],GU:["GU","Guam"],FM:["FM","Federated States of Micronesia"],MH:["MH","Marshall Islands"],PW:["PW","Palau"],AE:["AE","Armed Forces Europe"],AP:["AP","Armed Forces Pacific"],AA:["AA","Armed Forces Americas"]}},CA:{states:{AB:["AB","Alberta"],BC:["BC","British Columbia"],MB:["MB","Manitoba"],NB:["NB","New Brunswick"],NL:["NL","Newfoundland & Labrador"],NS:["NS","Nova Scotia"],ON:["ON","Ontario"],PE:["PE","Prince Edward Island"],QC:["QC","Quebec"],SK:["SK","Saskatchewan"],NT:["NT","Northwest Territories"],NU:["NU","Nunavut"],YT:["YT","Yukon"]}}};return{require:"ngModel",link:function(e,t,r,c){c.$parsers.push(function(e){var t=r.selectedCountry,n=l[t];if(null==n)return c.$setValidity("invalidstate",!0),e;validateState=!0;var a,i,o=n.states;o[e];for(i in o)for(var s in o[i])if("sortOn"!=s&&(a=o[i][s].replace(/[^a-zA-Z0-9]/g,"").toLowerCase(),e.toLowerCase()===a))return c.$setValidity("invalidstate",!0),c.$setViewValue(i),c.$render(),i;return c.$setValidity("invalidstate",!1),c.$setViewValue(e),c.$render(),e})}}}]),app.directive("ncCategoriesDropDown",["$compile",function($compile){return{restrict:"A",replace:!1,scope:{selectChange:"=",createItem:"=",removeItem:"="},link:function(scope,elm,attrs,ctrl){var elem=elm,idValue=attrs.angularid;$(elem).attr("id",attrs.angularid),null!=attrs.angularcategoryid&&"0"!=attrs.angularcategoryid&&$(elem).attr("value",attrs.angularcategoryid),$(elem).addClass("select2-categories select2-offscreen");var initValues=attrs.initvalues;""!=initValues&&initAddCategories(idValue,eval(initValues)),$(elem).on("change",function(e){var data=$(this).data(),parameters;null!=e.val?(parameters=eval($(elem).data("parameters")),null!=e.added&&(-1!=e.added.id?(scope.selectChange(e.added.id,e.added.text,parameters),data.angularcategoryid=e.added.id):scope.createItem(e.added.id,e.added.text,parameters)),null!=e.removed&&scope.removeItem(e.removed.id,e.removed.text,parameters)):($(elem).attr("value",data.angularcategoryid),$(this).select2("val",data.angularcategoryid))}),$(elem).on("select2-opening",function(){var e=$(this).data();0==e.angularcategoryid&&""!=e.select2cache_val&&(e.angularcategoryid=e.select2cache_val),$(this).data("select2cache_val",e.angularcategoryid),$(this).data("select2cache_newval",e.angularcategoryid),$(this).data("select2cache_opened","true"),$(this).data("select2cache_text",$(this).select2("data").text),$(this).select2("val","")}),$(elem).on("select2-close",function(){var e=$(this).data();$this=$(this),""!=e.select2cache_newval?$(this).select2("val",e.select2cache_newval):$(this).select2("val",e.angularcategoryid)}),$(elem).on("select2-focus",function(e){var t=$(this).data("select2"),n=$(this).data("select2cache_opened");setTimeout(function(){t.opened()||null!=n&&"false"!=n||t.open()},0)}),$(elem).on("select2-selecting",function(e){$(this).data("select2cache_newval",e.val)})}}}]),app.directive("ncDomainCategories",["$compile","$timeout","sanitizeHtmlService","$filter",function(e,l,d,u){return{restrict:"E",scope:{placeholder:"@",categoryId:"=",initCategoryName:"=",categories:"=",onCreate:"=create",onChange:"=change",onRemove:"=remove"},template:'<div class="select2-container select2-container-multi select2-categories"><ul class="select2-choices"><li class="select2-search-choice" data-ng-if="categoryId"><div data-ng-bind="categoryName"></div><a href="" class="select2-search-choice-close" tabindex="-1"></a></li><li class="select2-search-field" data-ng-if="!categoryId"><input type="text" spellcheck="false" class="select2-input select2-default" ng-value="::placeholder" ></li></ul>',link:function(i,o,e,t){var s=void 0!==e.bulk;i.select2Options={placeholder:i.placeholder,containerCssClass:"select2-categories",dropdownCssClass:"select2-categories",multiple:!0,simple_tags:!0,tags:i.categories,maximumInputLength:20,formatSelection:function(e){return d(e.text)},formatResult:function(e){return null!=e.html?e.html:d(e.text)},createSearchChoice:function(n,e){if(0===$(e).filter(function(e,t){return!(null==t.text||!t.text.localeCompare)&&0===t.text.localeCompare(n)}).length)return{id:-1,text:n,html:'<div class="create-category"><span>'+d(n)+'</span><a href="" class="btn btn-green btn-small-uppercase">create</a></div>'}}};function n(){var e=u("propertyFilter")(i.categories,{id:i.categoryId})[0];i.categoryName=e?e.text:i.initCategoryName||i.categoryId}var r=!0,c=i.categoryId;i.$evalAsync(function(){n()}),o.bind("click",function(e,t){var n;o.attr("rendered")||(n=angular.element(e.target).hasClass("select2-search-choice-close"),a(n),o.attr("rendered",!0))}),i.$watch("categoryId",function(e){n()});var a=function(e){var a=o.select2(i.select2Options);a.select2("val",c),i.$watch("categoryId",function(e){a.select2("val")!=e&&c!=e&&"-1"!=e&&a.select2("val",e)}),a.on("select2-focus",function(e,t){var n;s||!a.select2("val")||r||(n=$(this),l(function(){n.data("select2").open()})),r=!1}),a.on("select2-opening",function(){s||(c=$(this).select2("val"),$(this).select2("val",""))}),a.on("select2-close",function(){""!=$(this).select2("val")||null==c||s||$(this).select2("val",c)}),a.on("change",function(t){var n;t.val!=i.categoryId&&t.val!=c&&(t.val,n=$(this),"-1"!=c&&$(this).select2("val",c),i.categoryId=t.val,null!=t.val&&(null!=t.added&&(-1!=t.added.id?i.onChange(t.added.text,t.added.id).then(function(e){0==e.Error?(n.select2("val",[e.categoryId]),c=t.val):n.select2("val",c)}):i.onCreate(t.added.text,t.added.id).then(function(e){0==e.Error?(n.select2("val",[e.categoryId]),c=t.val):n.select2("val",c)})),null!=t.removed&&i.onRemove(t.removed.text,t.removed.id).then(function(e){0==e.Error?(n.select2("val",t.val),c=t.val):n.select2("val",c),n.data("select2").blur()})),r=!0)}),e?l(function(){var e=angular.element("#"+a.data().select2.containerId).find(".select2-search-choice-close");e&&e.click()}):a.data("select2").open()}}}}]),app.directive("ncSplitButton",["$compile","$templateCache","$http",function(e,t,n){return{restrict:"E",replace:!0,scope:{actionList:"=",clickEvent:"=",services:"="},templateUrl:"/Common/ncSplitButton"}}]),app.directive("numbersOnly",[function(){return{require:"ngModel",link:function(e,t,n,a){a.$parsers.push(function(e){if(null==e)return"";var t=e.replace(/[^0-9]/g,"");return t!=e&&(a.$setViewValue(t),a.$render()),t})}}}]),app.directive("numbersdotandcommaOnly",[function(){return{require:"ngModel",link:function(e,t,n,a){a.$parsers.push(function(e){if(null==e)return"";var t=e.replace(/[^0-9.,]/g,"");return t!=e&&(a.$setViewValue(t),a.$render()),t})}}}]),app.directive("zipcodeValidation",[function(){return{require:"ngModel",link:function(e,t,n,a){a.$parsers.push(function(e){var t;return""!=e.trim()&&(t=n.selectedCountry.toLowerCase(),nc_postalregx="us"==t?nc_Val_US_PostalCodeRegex:"ca"==t?nc_Val_CA_PostalCodeRegex:"gb"==t?nc_Val_GB_PostalCodeRegex:"nl"==t?nc_Val_NL_PostalCodeRegex:"br"==t?nc_Val_BR_PostalCodeRegex:"jp"==t?nc_Val_JP_PostalCodeRegex:nc_Val_PostalCodeRegex,e.match(nc_postalregx)?a.$setValidity("invalidzipcode",!0):a.$setValidity("invalidzipcode",!1),a.$render()),e})}}}]),app.service("affixScrollSpyService",["$window",function(s){function e(e){var t,n,a=((n={width:(t=s).innerWidth,height:t.innerHeight,maxWidth:t.document.body.scrollWidth,maxHeight:t.document.body.scrollHeight,posX:t.scrollX||t.pageXOffset||t.document.documentElement.scrollLeft,posY:t.scrollY||t.pageYOffset||t.document.documentElement.scrollTop}).posX<0?(n.posX=0,n.overscrollLeft=!0):n.posX+n.width>n.maxWidth&&(n.posX=n.maxWidth-n.width,n.overscrollRight=!0),n.posY<0?(n.posY=0,n.overscrollTop=!0):n.posY+n.height>n.maxHeight&&(n.posY=n.maxHeight-n.height,n.overscrollBottom=!0),n.hasOverscroll=n.overscrollTop||n.overscrollBottom||n.overscrollLeft||n.overscrollRight,n),i=function(e,t){if(!e||!t)return angular.extend({isEqual:!1,velocityX:0,velocityY:0},t);var n={posX:t.posX-e.posX,posY:t.posY-e.posY,width:t.width-e.width,height:t.height-e.height,maxWidth:t.maxWidth-e.maxWidth,maxHeight:t.maxHeight-e.maxHeight};return 0<t.width&&(n.velocityX=n.posX/t.width),0<t.height&&(n.velocityY=n.posY/t.height),n.isEqual=!(0!==n.posX||0!==n.posY||0!==n.width||0!==n.height||0!==n.maxWidth||0!==n.maxHeight),n}(r,a);if(!i.isEqual||a.hasOverscroll||e){for(var o in c){((0,c[o].cond)(a,i)||e)&&c[o].handler(a,i)}r=a}}var r,c={};angular.element(s).on("scroll",e);var t=this,n=0;this.trigger=function(){this.isForced=!0,e(!0),this.isForced=!1},this.addHandler=function(e,t){return c[n]={cond:e,handler:t},++n-1},this.removeHandler=function(e){delete c[e]},this.onScroll=function(n){return t.addHandler(function(){return!0},function(e,t){n(e,t)})},this.onXScroll=function(n){return t.addHandler(function(e,t){return 0!==t.posX},function(e,t){n(e.posX,t.posX,e,t)})},this.onYScroll=function(n){return t.addHandler(function(e,t){return 0!==t.posY},function(e,t){n(e.posY,t.posY,e,t)})},this.onOverscrollHorz=function(e){return t.addHandler(function(e,t){return e.overscrollLeft||e.overscrollRight},e)},this.onOverscrollLeft=function(e){return t.addHandler(function(e,t){return e.overscrollLeft},e)},this.onOverscrollRight=function(e){return t.addHandler(function(e,t){return e.overscrollRight},e)},this.onOverscrollVert=function(e){return t.addHandler(function(e,t){return e.overscrollTop||e.overscrollBottom},e)},this.onOverscrollTop=function(e){return t.addHandler(function(e,t){return e.overscrollTop},e)},this.onOverscrollBottom=function(e){return t.addHandler(function(e,t){return e.overscrollBottom},e)}}]),app.directive("angAffix",["affixScrollSpyService",function(d){function u(e,t,n,a){var i=e(a[0].getBoundingClientRect());i!==t&&(i?a.addClass(n):a.removeClass(n))}var m;return{restrict:"A",scope:{affix:"@",affixClass:"@"},link:function(e,t,n,a){var i,o,s,r,c,l;e.affix=e.affix||"top",e.affixClass=e.affixClass||"affix",i=e.affix,o=e.affixClass,s=t,l=c=!1,"top"===i?m=d.onYScroll(function(t){u(function(e){return c?c=r<=t:e.top<=0&&(r=e.top<0?t+e.top:t,c=!0)},c,o,s)}):"bottom"===i?(l=!0,m=d.onYScroll(function(t,e,n){u(function(e){return c?c=t<=r:e.bottom>=n.height&&(r=d.isForced&&0===t?t+e.bottom-n.height-e.height:t+e.bottom-n.height,c=!0)},c,o,s)})):"left"===i?m=d.onXScroll(function(t){u(function(e){return c?c=r<=t:e.left<=0&&(r=e.left<0?t+e.left:t,c=!0)},c,o,s)}):"right"===i&&(l=!0,m=d.onXScroll(function(t,e,n){u(function(e){return c?c=t<=r:e.right>=n.width&&(r=d.isForced&&0===t?t+e.right-n.width-e.width:t+e.right-n.width,c=!0)},c,o,s)})),l&&d.trigger(),e.$on("destroy",function(){d.removeHandler(m)})}}}]),angular.module("ncCache",[]).service("ncCache",["$cacheFactory",function(t){var n;return this.get=function(e){if(void 0===n)throw"Cache not initialized properly";return n.get(e)},this.put=function(e,t){if(void 0===n)throw"Cache not initialized properly";return n.put(e,t)},this.remove=function(e){if(void 0===n)throw"Cache not initialized properly";return n.put(e,value)},this.removeAll=function(){if(void 0===n)throw"Cache not initialized properly";return n.removeAll()},this.Initialize=function(e){n=t.get(e)},cacheService}]),function(e,t){"use strict";if("function"!=typeof define||!define.amd)return t(e);define(["angular"],t)}(angular||null,function(m){var e=m.module("ncGrid",[]);e.service("ncGridParams",["$q","$filter","$timeout","ncGridEventNames",function(a,d,i,o){return function(){var l=this;this.ncGridScope=null,this.eventScope=null,this.eventListenerDefer=a.defer(),this.eventListener=this.eventListenerDefer.promise,this.getStateModel=function(){var e={ServerChunkSize:l.parameters.mapping.serverChunkSize,LastAvailableChunkIndex:l.parameters.mapping.lastAvailableChunkIndex,IsLazyLoading:l.parameters.mapping.isLazyLoading,TotalServerItemsCount:l.parameters.storage.totalItemsCount};return l.parameters.filter.isEnabled&&l.parameters.filter.isActive&&(e.FilterProperties=l.parameters.filter.properties),l.parameters.category.isEnabled&&l.parameters.category.isActive&&(e.CategoryProperties=l.parameters.category.properties),l.parameters.search.isEnabled&&(e.SearchValue=l.parameters.search.value),l.parameters.ordering.isEnabled&&l.parameters.ordering.isActive&&(e.OrderModel=l.settings.ordering.getActiveEntity()),l.parameters.calendar.isEnabled&&l.parameters.calendar.isActive&&(e.CalendarModel=l.parameters.calendar.activeEntity),e},this.parameters={storage:{isFullData:!1,isOneItem:!1,isEmpty:!1,totalItemsCount:null,requestData:[],sortedData:[],pageData:[],addNewFirst:!0,totalServerItemsCount:null},mapping:{isLoading:!0,isPageFull:!1,isLazyLoading:!0,isConcatPageDataFromNewServerChunk:!0,serverChunkSize:1e4,renderChunkSize:25,lastRenderedIndex:0,lastAvailableChunkIndex:0,isNcRowDirective:!1,isRenderMoreProcessing:!1},pagination:{isTopEnabled:!1,isBottomEnabled:!1,isTopActive:!1,isBottomActive:!1,sizes:[25,50,100,250,500,1e3],totalPageCount:0,pageSize:25,pageIndex:1,pageSizeEntities:[],bottomPageEntities:[]},filter:{isEnabled:!1,isActive:!1,properties:[],availableProperties:[]},category:{isEnabled:!1,isActive:!1,properties:[],availableProperties:[]},search:{isEnabled:!1,value:null,serchPropertyNames:[]},ordering:{isEnabled:!1,isActive:!1,activeEntity:{},notActiveClassName:"order",activeClassName:"current-order",descMarker:"",ascMarker:"",usedEntities:[],alreadySorted:!1},selection:{isSearchBySelected:!1,isSelectAllEnabled:!1,isSelectPageEnabled:!1,allItemsSelected:!1,pageItemsSelected:!1,selectedPropertyName:"$ncColumnSelected",selectedItems:[],isSelectAllActive:!1,isSelectPageActive:!1},calendar:{isEnabled:!1,isActive:!1,activeEntity:{},propertyName:null}},this.settings={lazyLoading:function(){var e=a.defer();l.settings.events.broadcastEvent(o.ncGridLoadServerChunkBefore,{pageIndex:l.parameters.pagination.pageIndex,lastAvailableChunkIndex:l.parameters.mapping.lastAvailableChunkIndex}),l.settings.getData(e,l.getStateModel()),e.promise.then(function(e){null!=e&&null!=e.Data&&(l.parameters.selection.allItemsSelected&&e.Data.forEach(function(e){var t=l.settings.selection.columnSelect(e,!0);(e[l.parameters.selection.selectedPropertyName]=t)&&l.parameters.selection.selectedItems.push(e)}),l.parameters.storage.requestData=l.parameters.storage.requestData.concat(e.Data),l.parameters.storage.totalItemsCount=null!=e.TotalServerItemsCount?e.TotalServerItemsCount:l.parameters.storage.requestData.length,l.settings.mapping.isAnyRestrictions(l.parameters,l.settings)&&(l.parameters.storage.sortedData=l.settings.mapping.getSortedData(l.parameters.storage.requestData,l.parameters,l.settings)),l.settings.mapping.updateState(l.parameters,l.settings),l.parameters.mapping.isConcatPageDataFromNewServerChunk&&!l.parameters.mapping.isPageFull&&l.settings.mapping.isAnyRestrictions(l.parameters,l.settings)&&l.settings.mapping.concatPageDataFromNewServerChunk(e.Data,l.parameters,l.settings)),null!=e&&e.Data.length>=l.parameters.mapping.serverChunkSize?(l.parameters.mapping.lastAvailableChunkIndex++,l.parameters.mapping.isLazyLoading&&l.settings.lazyLoading()):(l.parameters.storage.isFullData=!0,l.settings.mapping.updateState(l.parameters,l.settings)),null!=e&&null!=e.TotalServerItemsCount&&e.TotalServerItemsCount==l.parameters.storage.requestData.length&&(l.parameters.storage.isFullData=!0),l.settings.events.broadcastEvent(o.ncGridLoadServerChunkBefore,{pageIndex:l.parameters.pagination.pageIndex,lastAvailableChunkIndex:l.parameters.mapping.lastAvailableChunkIndex})})},reload:function(){l.parameters.mapping.lastRenderedIndex=0,l.parameters.mapping.lastAvailableChunkIndex=0,l.parameters.mapping.isLoading=!0,l.parameters.storage.requestData=[],l.parameters.storage.pageData=[],l.parameters.storage.sortedData=[],l.parameters.search.value=null;var t=a.defer(),e=a.defer();return l.settings.events.broadcastEvent(o.ncGridLoadServerChunkBefore,{pageIndex:l.parameters.pagination.pageIndex,lastAvailableChunkIndex:l.parameters.mapping.lastAvailableChunkIndex}),l.settings.getData(e,l.getStateModel()),e.promise.then(function(e){null!=e&&null!=e.Data&&Array.isArray(e.Data)?(l.parameters.storage.requestData=e.Data,l.parameters.storage.totalItemsCount=null!=e.TotalServerItemsCount?e.TotalServerItemsCount:l.parameters.storage.requestData.length,l.parameters.mapping.lastAvailableChunkIndex++,l.parameters.mapping.isLazyLoading?(l.parameters.storage.isFullData=!1,l.settings.lazyLoading()):(l.parameters.storage.isFullData=!0,l.parameters.mapping.isLoading=!1,l.settings.mapping.updateState(l.parameters,l.settings)),null!=e.TotalServerItemsCount&&e.TotalServerItemsCount==l.parameters.storage.requestData.length&&(l.parameters.storage.isFullData=!0)):(l.parameters.storage.requestData=[],l.parameters.storage.isFullData=!0,l.parameters.storage.totalItemsCount=0,l.parameters.mapping.isLoading=!1),l.parameters.storage.isOneItem=1==l.parameters.storage.requestData.length,l.parameters.storage.isEmpty=0==l.parameters.storage.requestData.length,l.settings.events.broadcastEvent(o.ncGridLoadServerChunkAfter,{pageIndex:l.parameters.pagination.pageIndex,lastAvailableChunkIndex:l.parameters.mapping.lastAvailableChunkIndex}),l.settings.mapping.renderPage(),t.resolve()}),t.promise},getData:function(e,t){return e.resolve([]),e.promise},mapping:{resetFilters:function(){l.parameters.filter.availableProperties.forEach(function(e){e.clearState()}),l.parameters.filter.properties=[],l.settings.pagination.setPage(1)},updateFilterPosition:function(){i(function(){$(".table-sticky-filters").trigger("update")},0)},concatPageDataFromNewServerChunk:function(e,t,n){var a=t.pagination.pageSize-t.storage.pageData.length,i=n.mapping.getSortedData(e,t,n);t.storage.pageData=t.storage.pageData.concat(i.slice(0,a))},isAnyRestrictions:function(e,t){return e.filter.isActive||e.category.isActive||null!=e.search.value||e.calendar.isActive&&null!=e.calendar.activeEntity},updateState:function(e,t){e.storage.totalItemsCount<e.storage.requestData.length&&(e.storage.totalItemsCount=e.storage.requestData.length);var n=l.settings.mapping.getSortedData(e.storage.requestData,e,t);n.length!=e.storage.sortedData.length&&0==e.storage.pageData.length?(e.storage.sortedData=n,t.mapping.renderMore()):e.storage.sortedData=n,t.pagination.update(e,t),i(function(){e.mapping.isPageFull=t.mapping.isPageFullyRendered(e,t)})},renderPage:function(){if(l.settings.events.broadcastEvent(o.ncGridRenderPageBefore,{pageIndex:l.parameters.pagination.pageIndex}),null==l.parameters.storage.requestData||0==l.parameters.storage.requestData.length)return l.parameters.mapping.isPageFull=!0,l.parameters.mapping.isLoading=!1,void l.settings.events.broadcastEvent(o.ncGridRenderPageAfter,{pageIndex:l.parameters.pagination.pageIndex});l.parameters.mapping.isLoading=!0,l.parameters.pagination.isTopEnabled||(l.parameters.pagination.pageSize=l.parameters.storage.requestData.length),l.parameters.mapping.lastRenderedIndex=0,l.settings.mapping.setPageData(l.parameters,l.settings),l.settings.pagination.update(l.parameters,l.settings),l.parameters.mapping.isPageFull=l.settings.mapping.isPageFullyRendered(l.parameters,l.settings),l.settings.mapping.updateFilterPosition(),l.settings.selection.checkSelectPage(),i(function(){l.parameters.mapping.isPageFull=l.settings.mapping.isPageFullyRendered(l.parameters,l.settings)}),l.settings.events.broadcastEvent(o.ncGridRenderPageAfter,{pageIndex:l.parameters.pagination.pageIndex})},renderMore:function(){1!=l.parameters.mapping.isRenderMoreProcessing&&1!=l.parameters.mapping.isPageFull&&(l.parameters.mapping.isLoading=!0,l.settings.events.broadcastEvent(o.ncGridRenderMoreBefore,{pageIndex:l.parameters.pagination.pageIndex}),l.settings.mapping.setRangeDataToRendered(l.parameters),l.settings.mapping.updateFilterPosition(),l.settings.events.broadcastEvent(o.ncGridRenderMoreAfter,{pageIndex:l.parameters.pagination.pageIndex}),l.parameters.mapping.isPageFull=l.settings.mapping.isPageFullyRendered(l.parameters,l.settings),i(function(){l.parameters.mapping.isLoading=!1}))},isPageFullyRendered:function(e,t){return e.storage.pageData.length>=e.pagination.pageSize||!(!e.storage.isFullData&&t.mapping.isAnyRestrictions(e,t))&&(!(!l.parameters.storage.isFullData&&e.storage.pageData.length<e.pagination.pageSize)&&!(l.parameters.storage.isFullData&&e.storage.pageData.length<t.mapping.getFullPageData().length))},getSortedData:function(e,t,n){var a=e;t.selection.isSearchBySelected&&0<t.selection.selectedItems.length&&n.mapping.isAnyRestrictions(t,n)&&(t.selection.isSelectAllEnabled||t.selection.isSelectPageEnabled)&&(a=t.selection.selectedItems),t.calendar.isActive&&null!=t.calendar.activeEntity&&(a=d("ncGridDateRangeByProperty")(a,{property:t.calendar.propertyName,from:t.calendar.activeEntity.from,to:t.calendar.activeEntity.to}));for(var i=t.filter.properties.concat(l.parameters.category.properties),o=[],s=[],r=0;r<i.length;r++){var c={propertyName:i[r].key,propertyValue:i[r].value.toString(),required:i[r].required};c.required?s.push(c):o.push(c)}return a=d("propertyFilter")(d("propertyFilter")(a,s),o,!0),t.search.isEnabled&&null!=t.search.value&&(a=l.settings.search(a,t)),a},setPageData:function(e,t){var n;e.ordering.isActive&&e.storage.isFullData&&(null==(n=t.ordering.getActiveEntity())||e.ordering.alreadySorted||(e.storage.requestData=d("ncGridStableSorting")(e.storage.requestData,n.propertyName,n.descending),l.parameters.ordering.alreadySorted=!0)),e.storage.sortedData=t.mapping.getSortedData(e.storage.requestData,e,t),e.selection.isSelectPageActive=1<e.storage.sortedData.length,e.selection.isSelectAllActive=1<e.storage.sortedData.length,l.parameters.storage.pageData=[],l.parameters.mapping.isPageFull=!1,l.settings.mapping.renderMore()},getFullPageData:function(){var e=(l.parameters.pagination.pageIndex-1)*l.parameters.pagination.pageSize,t=e+l.parameters.pagination.pageSize;return l.parameters.storage.sortedData.slice(e,t)},setRangeDataToRendered:function(i){null!=l.ncGridScope&&l.ncGridScope.$evalAsync(function(){var e=i.mapping.lastRenderedIndex+i.mapping.renderChunkSize;e>i.pagination.pageSize&&(e=i.pagination.pageSize),e>l.parameters.storage.sortedData.length&&(e=l.parameters.storage.sortedData.length);for(var t=(i.pagination.pageIndex-1)*i.pagination.pageSize,n=l.parameters.storage.sortedData.slice(t+i.mapping.lastRenderedIndex,t+e),a=0;a<n.length;a++)l.parameters.storage.pageData.push(n[a]),i.mapping.lastRenderedIndex++;i.mapping.isLazyLoading||(l.parameters.mapping.isPageFull=l.settings.mapping.isPageFullyRendered(l.parameters,l.settings))})}},pagination:{update:function(e,t){var n=e.storage.requestData.length;l.parameters.filter.isActive=l.parameters.filter.isEnabled&&0<l.parameters.filter.properties.length,l.parameters.category.isActive=l.parameters.category.isEnabled&&0<l.parameters.category.properties.length;var a=l.settings.mapping.isAnyRestrictions(l.parameters,l.settings);if(a&&(n=e.storage.sortedData.length),n<e.pagination.pageSize)for(var i=0;i<e.pagination.sizes.length;i++)e.pagination.sizes[i]<n&&(e.pagination.pageSize=e.pagination.sizes[i]);if(-1==e.pagination.sizes.indexOf(e.pagination.pageSize)&&n>e.pagination.pageSize)for(i=e.pagination.sizes.length;0<i;i--)if(e.pagination.sizes[i]<n){e.pagination.pageSize=e.pagination.sizes[i];break}e.pagination.totalPageCount=a?Math.ceil(n/e.pagination.pageSize):Math.ceil(e.storage.totalItemsCount/e.pagination.pageSize),(e.pagination.isTopActive=e.pagination.isTopEnabled&&1<e.pagination.totalPageCount)&&t.pagination.fillPageSizesEntities(a?n:e.storage.totalItemsCount),(e.pagination.isBottomActive=e.pagination.isBottomEnabled&&1<e.pagination.totalPageCount)&&t.pagination.fillBottomPageEntities()},setPage:function(e){l.parameters.pagination.pageIndex=e,l.settings.mapping.renderPage()},setPreviousPage:function(){l.parameters.pagination.pageIndex--,l.settings.mapping.renderPage()},setNextPage:function(){l.parameters.pagination.pageIndex++,l.settings.mapping.renderPage()},changePageSize:function(e){l.settings.events.broadcastEvent(o.ncGridChangePageSizeBefore,{newValue:e,oldValue:l.parameters.pagination.pageSize}),parseInt(e)?l.parameters.pagination.pageSize=e:l.parameters.pagination.pageSize=l.parameters.storage.totalItemsCount,l.parameters.pagination.pageIndex=1,l.settings.mapping.renderPage(),l.settings.events.broadcastEvent(o.ncGridChangePageSizeAfter,{newValue:e,oldValue:l.parameters.pagination.pageSize})},fillPageSizesEntities:function(t){l.parameters.pagination.pageSizeEntities=[],l.parameters.pagination.sizes.forEach(function(e){e<=t&&l.parameters.pagination.pageSizeEntities.push(e)});var e=l.parameters.pagination.pageSizeEntities[l.parameters.pagination.pageSizeEntities.length-1];e<1e3&&e<t&&e!=t&&l.parameters.pagination.pageSizeEntities.push(t)},fillBottomPageEntities:function(){l.parameters.pagination.bottomPageEntities=[];var e=[],t=l.parameters.pagination.totalPageCount;if(t<=15)for(var n=1;n<=t;n++)e.push(n);else{var a=l.parameters.pagination.pageIndex;-1==e.indexOf(a-4)&&0<a-4?(e.push(1),e.push("...")):1!=a&&e.push(1),-1==e.indexOf(a-2)&&0<a-2&&e.push(a-2),-1==e.indexOf(a-1)&&0<a-1&&e.push(a-1),e.push(a),-1==e.indexOf(a+1)&&a+1<t&&e.push(a+1),-1==e.indexOf(a+2)&&a+2<t&&e.push(a+2),-1==e.indexOf(a+4)&&a+4<t?(e.push("..."),e.push(t)):a!=t&&e.push(t)}l.parameters.pagination.bottomPageEntities=e}},search:function(e,t){if(t.search.isEnabled&&null!=t.search.value&&0<t.search.serchPropertyNames.length){for(var n={},a=0;a<t.search.serchPropertyNames.length;a++)n[t.search.serchPropertyNames[a]]=t.search.value;return d("ncGridStringEntryFilter")(e,n)}return e},actions:{removeItem:function(e){var t,n=a.defer();return e?(t=l.parameters.storage.requestData.indexOf(e),l.settings.events.broadcastEvent(o.ncGridRemoveItemBefore,{item:e,index:t}),-1!=t?(-1!=l.parameters.storage.pageData.indexOf(e)&&l.parameters.storage.pageData.splice(l.parameters.storage.pageData.indexOf(e),1),-1!=l.parameters.storage.sortedData.indexOf(e)&&l.parameters.storage.sortedData.splice(l.parameters.storage.sortedData.indexOf(e),1),-1!=l.parameters.storage.requestData.indexOf(e)&&l.parameters.storage.requestData.splice(l.parameters.storage.requestData.indexOf(e),1),l.parameters.storage.isOneItem=1==l.parameters.storage.requestData.length,l.parameters.storage.isEmpty=0==l.parameters.storage.requestData.length,l.parameters.mapping.lastRenderedIndex--,l.parameters.storage.totalItemsCount--,l.parameters.storage.isOneItem&&0==l.parameters.storage.pageData.length&&(l.parameters.search.value=null),l.settings.selection.unselectItem(e),l.settings.pagination.update(l.parameters,l.settings),l.parameters.selection.isSelectPageActive=1<l.parameters.storage.sortedData.length,l.parameters.selection.isSelectAllActive=1<l.parameters.storage.sortedData.length,0==l.parameters.storage.pageData.length&&0<l.parameters.storage.sortedData.length&&l.settings.pagination.setPage(1),n.resolve(e),l.settings.events.broadcastEvent(o.ncGridRemoveItemAfter,{item:e,index:t})):(n.resolve(null),l.settings.events.broadcastEvent(o.ncGridRemoveItemAfter,{item:null,index:t}))):n.resolve(null),n.promise},addNewItem:function(e){var t=a.defer();return e?(l.settings.events.broadcastEvent(o.ncGridAddItemBefore,{item:e}),l.parameters.storage.addNewFirst?l.parameters.storage.pageData.unshift(e):l.parameters.storage.pageData.push(e),l.parameters.storage.requestData.push(e),l.parameters.storage.sortedData.push(e),l.parameters.storage.isOneItem=1==l.parameters.storage.requestData.length,l.parameters.storage.totalItemsCount++,l.parameters.pagination.isTopEnabled||l.parameters.pagination.pageSize++,l.parameters.storage.isEmpty?(l.parameters.storage.isEmpty=!1,l.settings.pagination.setPage(1)):(l.parameters.storage.isEmpty=!1,l.settings.pagination.update(l.parameters,l.settings),l.settings.selection.checkSelectPage(),l.parameters.selection.isSelectPageActive=1<l.parameters.storage.sortedData.length,l.parameters.selection.isSelectAllActive=1<l.parameters.storage.sortedData.length),t.resolve(e),l.settings.events.broadcastEvent(o.ncGridAddItemAfter,{item:e}),l.settings.mapping.updateFilterPosition()):t.resolve(null),t.promise},updateDropDownBtns:function(){i(function(){$(".dropdown .dropdown-content .filter-dropdown").each(function(e){$this=$(this),$this.closest(".dropdown-content").css({left:"-9999em",display:"block"}),250<$this.outerHeight()&&$this.slimscroll({}),$this.closest(".dropdown-content").removeAttr("style")})},0,!1)}},selection:{selectAll:function(){l.settings.events.broadcastEvent(o.ncGridSelectAllItemsBefore,{items:l.parameters.selection.selectedItems}),l.parameters.selection.allItemsSelected=!l.parameters.selection.allItemsSelected,0==l.parameters.selection.allItemsSelected?l.settings.selection.unselectAll():(l.parameters.selection.selectedItems=[],l.parameters.storage.requestData.forEach(function(e){var t;l.settings.selection.canChangeSelection(e)&&(t=l.settings.selection.columnSelect(e,!0),(e[l.parameters.selection.selectedPropertyName]=t)&&l.parameters.selection.selectedItems.push(e))}),l.parameters.selection.allItemsSelected=!0),l.settings.events.broadcastEvent(o.ncGridSelectAllItemsAfter,{items:l.parameters.selection.selectedItems}),l.settings.selection.checkSelectAll()},unselectAll:function(){l.settings.events.broadcastEvent(o.ncGridUnselectAllItemsBefore,{items:l.parameters.selection.selectedItems}),null!=l.parameters.storage.requestData&&(l.parameters.selection.selectedItems=[],l.parameters.storage.requestData.forEach(function(e){e[l.parameters.selection.selectedPropertyName]=!1}),l.parameters.selection.allItemsSelected=!1,l.settings.events.broadcastEvent(o.ncGridUnselectAllItemsAfter,{items:l.parameters.selection.selectedItems}),l.settings.selection.checkSelectAll())},checkSelectAll:function(){if(l.parameters.selection.isSelectAllEnabled){for(var e=0,t=0,n=0,a=l.parameters.storage.requestData,i=0;i<a.length;i++){var o,s=a[i];l.settings.selection.canChangeSelection(s)?null==s[l.parameters.selection.selectedPropertyName]||0==s[l.parameters.selection.selectedPropertyName]?(t++,-1!=(o=l.parameters.selection.selectedItems.indexOf(s))&&l.parameters.selection.selectedItems.splice(o,1)):null!=s.$ncColumnSelected&&1==s.$ncColumnSelected&&e++:n++}0!=e&&0!=t?l.parameters.selection.allItemsSelected=!1:e==a.length-n?l.parameters.selection.allItemsSelected=!0:t==a.length-n&&(l.parameters.selection.allItemsSelected=null)}else l.parameters.selection.allItemsSelected=null},unselectItem:function(e){l.settings.events.broadcastEvent(o.ncGridUnselectItemBefore,{data:e}),e[l.parameters.selection.selectedPropertyName]=!1;var t=l.parameters.selection.selectedItems.indexOf(e);l.parameters.selection.selectedItems.splice(t,1),l.settings.selection.checkSelectPage(),l.settings.selection.checkSelectAll(),l.settings.events.broadcastEvent(o.ncGridUnselectItemAfter,{data:e})},unselectPage:function(){l.settings.events.broadcastEvent(o.ncGridUnselectPageItemsBefore,{items:l.parameters.selection.selectedItems}),null!=l.parameters.storage.sortedData&&(l.settings.mapping.getFullPageData().forEach(function(e){e[l.parameters.selection.selectedPropertyName]=!1;var t=l.parameters.selection.selectedItems.indexOf(e);-1!=t&&l.parameters.selection.selectedItems.splice(t,1)}),l.parameters.selection.pageItemsSelected=!1,l.settings.selection.checkSelectPage(),l.settings.events.broadcastEvent(o.ncGridUnselectPageItemsAfter,{items:l.parameters.selection.selectedItems}))},checkSelectPage:function(){if(l.parameters.selection.isSelectPageEnabled){for(var e=0,t=0,n=0,a=l.settings.mapping.getFullPageData(),i=0;i<a.length;i++){var o=a[i];l.settings.selection.canChangeSelection(o)?null==o[l.parameters.selection.selectedPropertyName]||0==o[l.parameters.selection.selectedPropertyName]?t++:null!=o.$ncColumnSelected&&1==o.$ncColumnSelected&&e++:n++}0!=e&&0!=t?l.parameters.selection.pageItemsSelected=!1:e==a.length-n?l.parameters.selection.pageItemsSelected=!0:t==a.length-n&&(l.parameters.selection.pageItemsSelected=null)}else l.parameters.selection.pageItemsSelected=null},selectPage:function(){l.settings.events.broadcastEvent(o.ncGridSelectPageItemsBefore,{items:l.parameters.selection.selectedItems}),l.parameters.selection.pageItemsSelected=!l.parameters.selection.pageItemsSelected,0==l.parameters.selection.pageItemsSelected?l.settings.selection.unselectPage():(l.parameters.selection.selectedItems=[],l.settings.mapping.getFullPageData().forEach(function(e){var t;l.settings.selection.canChangeSelection(e)&&(t=l.settings.selection.columnSelect(e,!0),(e[l.parameters.selection.selectedPropertyName]=t)&&l.parameters.selection.selectedItems.push(e))}),l.parameters.selection.pageItemsSelected=!0),l.settings.selection.checkSelectPage(),l.settings.events.broadcastEvent(o.ncGridSelectPageItemsAfter,{items:l.parameters.selection.selectedItems})},selectItem:function(e){var t;l.settings.events.broadcastEvent(o.ncGridSelectItemBefore,{data:e}),l.settings.selection.canChangeSelection(e)&&(1==e[l.parameters.selection.selectedPropertyName]&&(l.parameters.selection.pageItemsSelected=!1,-1!=(t=l.parameters.selection.selectedItems.indexOf(e))&&l.parameters.selection.selectedItems.splice(t,1)),e[l.parameters.selection.selectedPropertyName]=l.settings.selection.columnSelect(e,e[l.parameters.selection.selectedPropertyName]),-1==l.parameters.selection.selectedItems.indexOf(e)&&l.parameters.selection.selectedItems.push(e),l.settings.selection.checkSelectPage(),l.settings.selection.checkSelectAll()),l.settings.events.broadcastEvent(o.ncGridSelectItemAfter,{data:e})},columnIsSelelted:function(e){return e[l.parameters.selection.selectedPropertyName]},columnSelect:function(e,t){return null==e[l.parameters.selection.selectedPropertyName]?e[l.parameters.selection.selectedPropertyName]=!0:e[l.parameters.selection.selectedPropertyName]=t},canChangeSelection:function(e){return!0}},ordering:{disable:function(){for(var e in l.parameters.ordering.alreadySorted=!1,l.parameters.ordering.usedEntities)l.parameters.ordering.usedEntities[e].className=l.parameters.ordering.notActiveClassName,l.parameters.ordering.usedEntities[e].descending=null,l.parameters.ordering.usedEntities[e].vector=l.parameters.ordering.ascMarker;l.parameters.ordering.isActive=!1,l.settings.pagination.setPage(1)},set:function(t){l.parameters.mapping.isLoading=!0,i(function(){for(var e in l.parameters.ordering.alreadySorted=!1,l.settings.events.broadcastEvent(o.ncGridChangeOrderBefore),l.parameters.ordering.usedEntities)l.parameters.ordering.usedEntities[e].propertyName!=t.propertyName?(l.parameters.ordering.usedEntities[e].className=l.parameters.ordering.notActiveClassName,l.parameters.ordering.usedEntities[e].vector=l.parameters.ordering.ascMarker,l.parameters.ordering.usedEntities[e].descending=!1,l.parameters.ordering.isActive=!0):(l.parameters.ordering.usedEntities[e].descending=null!=t.descending&&1!=t.descending,l.parameters.ordering.usedEntities[e].vector=t.descending?l.parameters.ordering.descMarker:l.parameters.ordering.ascMarker,l.parameters.ordering.usedEntities[e].className=l.parameters.ordering.activeClassName);l.settings.pagination.setPage(1),l.settings.events.broadcastEvent(o.ncGridChangeOrderAfter)})},getActiveEntity:function(){if(0!=l.parameters.ordering.isActive)for(var e in l.parameters.ordering.usedEntities)if(l.parameters.ordering.usedEntities[e].className==l.parameters.ordering.activeClassName)return l.parameters.ordering.usedEntities[e];return null}},events:{initEventScope:function(e){l.ncGridScope=e,l.eventScope=e.$new(!0),l.eventListenerDefer.resolve(l.eventScope)},broadcastEvent:function(e,t){null!=l.ncGridScope&&null!=l.eventScope&&l.eventScope.$broadcast(e,t)}}}}}]),e.directive("ncGrid",["$parse",function(i){return{restrict:"A",priority:1001,scope:!0,link:function(t,n,e){var a=i(e.ncGrid);t.$watch(a,function(e){m.isUndefined(e)||(t.$parameters=e.parameters,t.$settings=e.settings,t.$ncGridState=e.ncGridState,e.ncGridScope=t,e.settings.events.initEventScope(t),t.$broadcast("ncGridParametersIsBinded"))}),t.scrollToTopOfGrid=function(){var e=$(n).offset().top-100;$("html, body").animate({scrollTop:e},0)}}}}]),e.directive("ncSelectAll",["$parse",function(a){return{restrict:"E",replace:!0,scope:!0,template:'<div class="has-checkbox no-label"><input id="{{selectAllId}}" type="checkbox" data-ng-checked="$parameters.selection.allItemsSelected"data-ng-class="isSelectedAllChilds()"  /><label for="{{selectAllId}}" data-ng-class="{disabled:selectAllDisabled}" data-ng-click="onChangeSelectAll()"></label></div>',link:function(t,e,n){t.$on("ncGridParametersIsBinded",function(){t.$parameters.selection.isSelectAllEnabled=!0}),t.onChangeSelectAll=function(){t.selectAllDisabled||t.$settings.selection.selectAll()},t.isSelectedAllChilds=function(){return null!=t.$parameters.selection.allItemsSelected&&!t.$parameters.selection.allItemsSelected&&0<t.$parameters.selection.selectedItems.length?"selected-childs":""},n.$observe("disabled",function(e){t.selectAllDisabled=e}),n.$observe("id",function(e){t.selectAllId=e}),t.$watch(a(n.disabled),function(e){null!=e&&(t.selectAllDisabled=e)}),t.$watch(a(n.id),function(e){null!=e&&(t.selectAllId=e)})}}}]),e.directive("ncSelectPage",["$parse",function(a){return{restrict:"E",replace:!0,scope:!0,template:'<div class="has-checkbox no-label"><input id="{{selectPageId}}" type="checkbox" data-ng-checked="$parameters.selection.pageItemsSelected"data-ng-class="isSelectedPageChilds()"  /><label for="{{selectPageId}}" data-ng-class="{disabled:selectPageDisabled}" data-ng-click="onChangeSelectPage()"></label></div>',link:function(t,e,n){t.$on("ncGridParametersIsBinded",function(){t.$parameters.selection.isSelectPageEnabled=!0}),t.onChangeSelectPage=function(){t.selectPageDisabled||t.$settings.selection.selectPage()},t.isSelectedPageChilds=function(){return null!=t.$parameters.selection.pageItemsSelected&&!t.$parameters.selection.pageItemsSelected&&0<t.$parameters.selection.selectedItems.length?"selected-childs":""},n.$observe("disabled",function(e){t.selectPageDisabled=e}),n.$observe("id",function(e){t.selectPageId=e}),t.$watch(a(n.disabled),function(e){null!=e&&(t.selectPageDisabled=e)}),t.$watch(a(n.id),function(e){null!=e&&(t.selectPageId=e)})}}}]),e.directive("ncColumnSelection",["$parse","$compile","$timeout",function(e,t,n){return{restrict:"E",replace:!0,scope:{id:"=id",data:"=data"},template:'<input type="checkbox" data-ng-change="onChange()"data-ng-checked="data[propertyName]"data-ng-model="data[propertyName]" />',link:function(t,n,a){t.$evalAsync(function(){var e=t.id?t.id.toString().replace(" ",""):a.id;n.attr("id",e),t.propertyName=t.$parent.$parameters?t.$parent.$parameters.selection.selectedPropertyName:t.$parameters?t.$parameters.selection.selectedPropertyName:"",t.onChange=function(){t.data[t.propertyName]?t.$parent.$settings.selection.selectItem(t.data):t.$parent.$settings.selection.unselectItem(t.data)}})}}}]),e.directive("ncTopPagination",["$compile","ncGridTemplateService","ncGridTemplatesProperties",function(a,e,i){return{restrict:"E",replace:!0,scope:!0,link:function(t,n){e(i.topPignationTmpId).then(function(e){if(null==e)throw"Error: ncGrid Top Pignation.";n.replaceWith(a(e)(t))}),t.$on("ncGridParametersIsBinded",function(){t.$parameters.pagination.isTopEnabled=!0}),t.setPreviousPage=function(){t.$settings.pagination.setPreviousPage(),t.scrollToTopOfGrid()},t.setNextPage=function(){t.$settings.pagination.setNextPage(),t.scrollToTopOfGrid()},t.changePageSize=function(e){t.$settings.pagination.changePageSize(e),t.scrollToTopOfGrid()}}}}]),e.directive("ncBottomPagination",["$compile","ncGridTemplateService","ncGridTemplatesProperties",function(a,e,i){return{restrict:"E",replace:!0,scope:!0,link:function(t,n){e(i.bottomPignationTmpId).then(function(e){if(null==e)throw"Error: ncGrid Bottom Pignation.";n.replaceWith(a(e)(t))}),t.$on("ncGridParametersIsBinded",function(){t.$parameters.pagination.isBottomEnabled=!0}),t.setPreviousPage=function(){t.$settings.pagination.setPreviousPage(),t.scrollToTopOfGrid()},t.setNextPage=function(){t.$settings.pagination.setNextPage(),t.scrollToTopOfGrid()},t.setPage=function(e){t.$settings.pagination.setPage(e),t.scrollToTopOfGrid()}}}}]),e.directive("ncGridSearch",["$compile","ncGridTemplateService","ncGridTemplatesProperties","ncGridEventNames",function(a,i,o,s){return{restrict:"E",replace:!0,scope:!1,link:function(n,t,e){try{n.__disableSearch=n.$eval(e.disable)}catch(e){}i(o.searchTmpId).then(function(e){if(null==e)throw"Error: ncGrid search.";t=t.replaceWith(a(e)(n))}),n.$on("ncGridParametersIsBinded",function(){n.$parameters.search.isEnabled=!0,0<n.$parameters.search.serchPropertyNames.length&&n.$watch("$parameters.search.value",function(e,t){e!=t&&(n.$settings.events.broadcastEvent(s.ncGridSearchBefore,{newValue:e,oldValue:t}),n.$settings.pagination.setPage(1),n.scrollToTopOfGrid(),n.$settings.events.broadcastEvent(s.ncGridSearchAfter,{newValue:e,oldValue:t}))})})}}}]),e.filter("ncGridStringEntryFilter",function(){return function(e,l){var d=[];return m.isArray(e)?e.forEach(function(e){for(var t=!1,n=Object.keys(l),a=0;a<n.length;a++){var i=n[a];if(null==(t=function(e,t,n){var a=t.indexOf("("),i=t.indexOf(")");if(-1<a&&-1<i){var o=t.slice(0,a);if(e[o])return e[o](n)}return null}(e,i,l[i]))){var o=l[i].toLowerCase(),s="";if(1<(s=i.split(".")).length){for(var r=e,c=0;c<s.length;c++)r=r[s[c]];if(null!=r&&-1!==r.toString().toLowerCase().indexOf(o)||""==r&&""==o){t=!0;break}}else if(e[i]&&-1!==e[i].toString().toLowerCase().indexOf(o)){t=!0;break}}else if(1==t)break}t&&d.push(e)}):d=e,d}}),e.directive("ncRowOrdering",[function(){return{restrict:"E",scope:!0,template:'<a href="" data-ng-class="{disabled:!$parameters.storage.isFullData}"><span data-ng-bind="orderEntity.title"></span><span data-ng-class="orderEntity.className" data-ng-bind="orderEntity.vector"></span></a>',link:function(e,t,n){e.$on("ncGridParametersIsBinded",function(){e.orderEntity={propertyName:n.value,reverse:null,title:n.title,className:e.$parameters.ordering.notActiveClassName,vector:e.$parameters.ordering.ascMarker},e.$parameters.ordering.usedEntities.push(e.orderEntity)}),t.bind("click",function(){e.$settings.ordering.set(e.orderEntity)})}}}]),e.filter("ncGridStableSorting",["$parse",function(u){return function(e,t,n,a){if(null==n&&(n=!1),null!=t&&""!=t)for(var i,o=u(t),s=e.length,r=!1;!r;){r=!0,(s=parseInt(s/=1.247))<1&&(s=1);for(var c,l,d=0;d<e.length-1;d++){d+s<e.length?(c=o(e[d]),l=o(e[d+s]),null!=c&&null==l?(i=e[d+s],e[d+s]=e[d],e[d]=i,d++):null==c&&null!=l?(i=e[d],e[d]=e[d+s],e[d+s]=i,d++):(l<c&&!n||c<l&&n)&&(i=e[d],e[d]=e[d+s],e[d+s]=i,r=!1)):r=!1}}return a&&e.reverse(),e}}]),e.directive("ncFilter",["ncGridEventNames",function(a){return{priority:1e3,restrict:"E",replace:!0,scope:!1,transclude:!0,template:'<div class="dropdown has-icon icon-filter" data-ng-mouseleave="closeDropDown()" data-ng-class="{disabled:$parameters.mapping.isLoading || __disableFilter }"><a href data-ng-class="{disabled:$parameters.mapping.isLoading, \'filter-active\': $parameters.filter.properties.length > 0}"><span>Filters</span></a><div class="dropdown-content"><div class="form filter-dropdown" ng-transclude></div><div class="actions text-center"><a href="" class="btn btn-small-uppercase" data-ng-click="applyFilter()">Apply</a><a href="" class="alt-action" data-ng-click="clearFilter()">Clear</a></div></div></div>',link:function(t,n,e){try{t.__disableFilter=t.$eval(e.disable)}catch(e){}t.closeDropDown=function(){var e=n[0].className.split(" ");-1!=e.indexOf("expanded")&&(e.splice(e.indexOf("expanded"),1),n[0].className=e.join(" "))},t.filterFormsCount=0,t.clearFilter=function(){t.$settings.events.broadcastEvent(a.ncGridFilterClearBefore,{properties:t.$parameters.filter.properties}),t.$parameters.filter.availableProperties.forEach(function(e){e.clearState()}),t.$parameters.filter.properties=[],t.$settings.pagination.setPage(1),t.scrollToTopOfGrid(),t.$settings.events.broadcastEvent(a.ncGridFilterClearAfter,{properties:t.$parameters.filter.properties}),t.closeDropDown()},t.applyFilter=function(){t.$settings.events.broadcastEvent(a.ncGridFilterApplyBefore,{properties:t.$parameters.filter.properties}),t.$parameters.filter.properties=[],t.$parameters.filter.availableProperties.forEach(function(e){if(1==e.getState())if("[object Array]"===Object.prototype.toString.call(e.propertyName))for(propIndex=0;propIndex<e.propertyName.length;propIndex++)t.$parameters.filter.properties.push({key:e.propertyName[propIndex],value:e.propertyValue,required:e.required});else t.$parameters.filter.properties.push({key:e.propertyName,value:e.propertyValue,required:e.required})}),t.closeDropDown(),t.$settings.pagination.setPage(1),t.scrollToTopOfGrid(),t.$settings.events.broadcastEvent(a.ncGridFilterApplyAfter,{properties:t.$parameters.filter.properties})},t.$on("ncGridParametersIsBinded",function(){t.$settings.actions.updateDropDownBtns(),initCheckboxFilter(),t.$parameters.filter.isEnabled=!0})}}}]),e.directive("ncFilterCheckboxForm",[function(){return{restrict:"E",replace:!0,transclude:!0,scope:{header:"="},template:"<span><h3 data-ng-bind='header'/><ng-transclude></ng-transclude></span>",link:function(e){e.checkboxCount=0}}}]),e.directive("ncFilterCheckboxItem",["ncGridEmitPropertyScopeSearch",function(a){return{restrict:"E",replace:!0,scope:{header:"=header",propertyName:"=propertyname",propertyValue:"=propertyvalue"},template:'<div class="has-checkbox"><input type="checkbox" id="{{itemArg.elementId}}" data-ng-model="itemModel"><label for="{{itemArg.elementId}}" data-ng-bind="header"/></div>',link:function(n){n.itemArg={elementId:null,getState:function(){return n.itemModel},clearState:function(){n.itemModel=!1},formHeader:null,propertyName:n.propertyName,propertyValue:n.propertyValue,header:n.header,required:!1},n.$evalAsync(function(){var e=a(n.$parent,"header"),t=a(n,"filterFormsCount");null!=e&&(n.itemArg.formHeader=e.header.toLowerCase().replace(" ",""),n.itemArg.elementId=n.itemArg.formHeader+"_"+e.checkboxCount++),null!=t&&t.$parameters.filter.availableProperties.push(n.itemArg)})}}}]),e.directive("ncFilterRadioForm",[function(){return{restrict:"E",replace:!0,transclude:!0,scope:{header:"="},template:"<span><h3 data-ng-bind='header'/><ng-transclude></ng-transclude></span>",link:function(e){e.radioCount=0,e.radioItems=[],e.onChecked=function(t){e.radioItems.forEach(function(e){e.checked=e.elementId==t})}}}}]),e.directive("ncFilterRadioItem",["ncGridEmitPropertyScopeSearch",function(a){return{restrict:"E",replace:!0,scope:{header:"=header",propertyName:"=propertyname",propertyValue:"=propertyvalue"},template:'<div class="has-radio" ><input type="radio" id="{{itemArg.elementId}}" name={{itemArg.formHeader}}  ng-checked="itemArg.checked" ><label for="{{itemArg.elementId}}" data-ng-click="onClick()" data-ng-bind="header" /></div>',link:function(n,e){n.itemArg={elementId:null,checked:!1,getState:function(){return this.checked},clearState:function(){this.checked=!1},formHeader:null,propertyName:n.propertyName,propertyValue:n.propertyValue,header:n.header,required:!0},n.$evalAsync(function(){var e=a(n.$parent,"header"),t=a(n,"filterFormsCount");null!=e&&(n.itemArg.formHeader=e.header.toLowerCase().replace(" ",""),n.itemArg.elementId=n.itemArg.formHeader+"_"+e.radioCount++,e.radioItems.push(n.itemArg),n.onClick=function(){e.onChecked(n.itemArg.elementId)}),null!=t&&t.$parameters.filter.availableProperties.push(n.itemArg)})}}}]),e.directive("ncCategories",["ncGridEventNames","$timeout",function(e,t){return{restrict:"E",replace:!0,scope:!0,transclude:!0,template:' <div class="dropdown has-icon icon-category" data-ng-mouseleave="closeDropDown()" data-ng-class="{disabled:$parameters.mapping.isLoading}"><a href="" data-ng-class="{disabled:$parameters.mapping.isLoading}"><span>Categories</span></a><div class="dropdown-content"><div class="filter-dropdown checkbox-control" ><div class="has-checkbox"><input type="checkbox" id="chb_categoriesSelectAll" ng-class="{\'selected-childs\':categoriesSelectAll==null}" data-ng-click="onSelectAll()" data-ng-model="categoriesSelectAll"><label for="chb_categoriesSelectAll">All</label><ng-transclude></ng-transclude> </div></div> <div class="actions text-center">  <a href="" class="btn btn-small-uppercase" data-ng-click="applyCategories()">Apply</a>  <a href="" class="alt-action" data-ng-click="clearCategories()">Clear</a> </div></div> </div>',link:function(n,t){n.closeDropDown=function(){var e=t[0].className.split(" ");-1!=e.indexOf("expanded")&&(e.splice(e.indexOf("expanded"),1),t[0].className=e.join(" "))},n.categoriesSelectAll=!1,n.checkSelectAll=function(){var t=0;n.$parameters.category.availableProperties.forEach(function(e){1==e.getState()&&t++}),t==n.$parameters.category.availableProperties.length?n.categoriesSelectAll=!0:0!=t&&t<n.$parameters.category.availableProperties.length?n.categoriesSelectAll=null:n.categoriesSelectAll=!1},n.onSelectAll=function(){n.$parameters.category.availableProperties.forEach(function(e){e.scope.itemModel=n.categoriesSelectAll})},n.checkboxCount=0,n.clearCategories=function(){n.$settings.events.broadcastEvent(e.ncGridCategoriesClearBefore,{properties:n.$parameters.category.properties}),n.$parameters.category.availableProperties.forEach(function(e){e.clearState()}),n.$parameters.category.properties=[],n.$settings.pagination.setPage(1),n.scrollToTopOfGrid(),n.$settings.events.broadcastEvent(e.ncGridCategoriesClearAfter,{properties:n.$parameters.category.properties}),n.closeDropDown()},n.applyCategories=function(){n.$settings.events.broadcastEvent(e.ncGridCategoriesApplyBefore,{properties:n.$parameters.category.properties}),n.$parameters.category.properties=[],n.$parameters.category.availableProperties.forEach(function(e){1==e.getState()&&n.$parameters.category.properties.push({key:e.propertyName,value:e.propertyValue,required:!1})}),n.$settings.pagination.setPage(1),n.scrollToTopOfGrid(),n.$settings.events.broadcastEvent(e.ncGridCategoriesApplyAfter,{properties:n.$parameters.category.properties}),n.closeDropDown()},n.$on("ncGridParametersIsBinded",function(){n.$settings.actions.updateDropDownBtns(),n.$parameters.category.isEnabled=!0})}}}]),e.directive("ncCategoriesItem",["ncGridEmitPropertyScopeSearch",function(a){return{restrict:"E",replace:!0,scope:{header:"=header",propertyName:"=propertyname",propertyValue:"=propertyvalue"},template:'<div class="has-checkbox"><input type="checkbox" id="{{itemArg.elementId}}" data-ng-model="itemModel"><label for="{{itemArg.elementId}}" data-ng-bind="header"/></div>',link:function(e,t,n){e.itemArg={elementId:null,getState:function(){return e.itemModel},clearState:function(){e.itemModel=!1},scope:e,formHeader:null,propertyName:e.propertyName,propertyValue:e.propertyValue,header:e.header,required:!1},e.$evalAsync(function(){var n=a(e,"checkboxCount");null!=n&&(e.itemArg.formHeader="ncCategory",e.itemArg.elementId=e.itemArg.formHeader+"_"+n.checkboxCount++,n.$parameters.category.availableProperties.push(e.itemArg),e.$watch("itemModel",function(e,t){e!=t&&n.checkSelectAll()}))})}}}]),e.directive("ncCalendar",["$parse","ncGridEventNames",function(d,u){return{restrict:"E",replace:!0,scope:!0,template:'<div class="dropdown has-icon icon-calendar daterange-field" data-ng-class="{disabled:$parameters.mapping.isLoading}"><a class="show-calendar" data-ng-class="{disabled:$parameters.mapping.isLoading}" href=""> <span data-ng-show="startDate!=null && endDate!=null">{{startDate| date : "MM/dd/yyyy"}}-{{endDate| date : "MM/dd/yyyy"}}</span> </a></div>',link:function(n,t,e){function a(){var e=t[0].className.split(" ");-1!=e.indexOf("expanded")&&(e.splice(e.indexOf("expanded"),1),t[0].className=e.join(" "))}var i,o,s=$(t[0].children[0]);n.propertyName=e.propertyname;var r="calendar_apply_btn_"+n.propertyName.toLowerCase();s.daterangepicker({applyClass:r}),s.on("apply.daterangepicker",function(e,t){n.$settings.events.broadcastEvent(u.ncGridCalendarApplyBefore,{startDate:n.startDate,endDate:n.endDate}),n.startDate=new Date(s.data("daterangepicker").startDate),n.endDate=new Date(s.data("daterangepicker").endDate),n.$parameters.calendar.activeEntity={from:n.startDate,to:n.endDate},n.$parameters.calendar.isActive=!0,n.$settings.pagination.setPage(1),a(),n.$apply(),n.$settings.events.broadcastEvent(u.ncGridCalendarApplyAfter,{startDate:n.startDate,endDate:n.endDate})});var c=d(e.startdate);n.$watch(c,function(e){m.isUndefined(e)||(i=e,n.$parameters.calendar.propertyName=n.propertyName)});var l=d(e.enddate);n.$watch(l,function(e){m.isUndefined(e)||(o=e,n.$parameters.calendar.propertyName=n.propertyName)}),$("body").on("click",".daterangepicker .resetBtn",function(e){$(this).siblings(".applyBtn").hasClass(r)&&(n.$settings.events.broadcastEvent(u.ncGridCalendarResetBefore,{startDate:n.startDate,endDate:n.endDate}),n.startDate=null,n.endDate=null,s.data("daterangepicker").setStartDate(i),s.data("daterangepicker").setEndDate(o),n.$parameters.calendar.activeEntity=null,n.$parameters.calendar.isActive=!1,n.$settings.pagination.setPage(1),a(),n.$apply(),n.$settings.events.broadcastEvent(u.ncGridCalendarResetAfter,{startDate:n.startDate,endDate:n.endDate}))}),n.$on("ncGridParametersIsBinded",function(){n.$parameters.calendar.isEnabled=!0})}}}]),e.filter("ncGridDateRangeByProperty",function(){return function(e,s){var r=[];return m.isArray(e)&&null!=s.property&&null!=s.from&&null!=s.to?e.forEach(function(e){var t=!1,n=s.property,a=n.split(".");if(1<a.length){for(var i=e,o=0;o<a.length;o++)i=i[a[o]];null!=i&&s.from<=i&&s.to>=i&&(t=!0)}else null!=e[n]&&s.from<=e[n]&&s.to>=e[n]&&(t=!0);t&&r.push(e)}):r=e,r}}),e.directive("ncGridRow",["$timeout","$compile","$q",function(e,t,a){return function(e,t,n){e.$parameters.mapping.isNcRowDirective=!0,e.$first&&(e.$parameters.mapping.isRenderMoreProcessing=!0,e.$parent.gridItemWatchers=[],e.$parent.renderDefer=a.defer()),e.$parent.gridItemWatchers[e.$index]=e.$$watchers,e.$$watchers=[],e.$last&&(e.$parent.renderDefer.resolve(),e.$parameters.mapping.isRenderMoreProcessing=!1),e.$parent.renderDefer.promise.then(function(){e.$$watchers=e.$$watchers.concat(e.$parent.gridItemWatchers[e.$index])})}}]),e.value("ncGridTemplatesProperties",{templatePage:"/Common/ncGrid",topPignationTmpId:"ncGridTopPagination",bottomPignationTmpId:"ncGridBottomPagination",searchTmpId:"ncGridSearch"}),e.value("ncGridEventNames",{ncGridRenderPageBefore:"ncGridRenderPageBefore",ncGridRenderPageAfter:"ncGridRenderPageAfter",ncGridRenderMoreBefore:"ncGridRenderMoreBefore",ncGridRenderMoreAfter:"ncGridRenderMoreAfter",ncGridLoadServerChunkBefore:"ncGridLoadServerChunkBefore",ncGridLoadServerChunkAfter:"ncGridLoadServerChunkAfter",ncGridFilterApplyBefore:"ncGridFilterApplyBefore",ncGridFilterApplyAfter:"ncGridFilterApplyAfter",ncGridFilterClearBefore:"ncGridFilterClearBefore",ncGridFilterClearAfter:"ncGridFilterClearAfter",ncGridCategoriesApplyBefore:"ncGridCategoriesApplyBefore",ncGridCategoriesApplyAfter:"ncGridCategoriesApplyAfter",ncGridCategoriesClearBefore:"ncGridCategoriesClearBefore",ncGridCategoriesClearAfter:"ncGridCategoriesClearAfter",ncGridCalendarApplyBefore:"ncGridCalendarApplyBefore",ncGridCalendarApplyAfter:"ncGridCalendarApplyAfter",ncGridCalendarResetBefore:"ncGridCalendarResetBefore",ncGridCalendarResetAfter:"ncGridCalendarResetAfter",ncGridSearchBefore:"ncGridSearchBefore",ncGridSearchAfter:"ncGridSearchAfter",ncGridChangePageSizeBefore:"ncGridChangePageSizeBefore",ncGridChangePageSizeAfter:"ncGridChangePageSizeAfter",ncGridAddItemBefore:"ncGridAddItemBefore",ncGridAddItemAfter:"ncGridAddItemAfter",ncGridRemoveItemBefore:"ncGridRemoveItemBefore",ncGridRemoveItemAfter:"ncGridRemoveItemAfter",ncGridSelectItemBefore:"ncGridSelectItemBefore",ncGridSelectItemAfter:"ncGridSelectItemAfter",ncGridUnselectItemBefore:"ncGridUnselectItemBefore",ncGridUnselectItemAfter:"ncGridUnselectItemAfter",ncGridSelectPageItemsBefore:"ncGridSelectPageItemsBefore",ncGridSelectPageItemsAfter:"ncGridSelectPageItemsAfter",ncGridUnselectPageItemsBefore:"ncGridUnselectPageItemsBefore",ncGridUnselectPageItemsAfter:"ncGridUnselectPageItemsAfter",ncGridSelectAllItemsBefore:"ncGridSelectAllItemsBefore",ncGridSelectAllItemsAfter:"ncGridSelectAllItemsAfter",ncGridUnselectAllItemsBefore:"ncGridUnselectAllItemsBefore",ncGridUnselectAllItemsAfter:"ncGridUnselectAllItemsAfter",ncGridChangeOrderBefore:"ncGridChangeOrderBefore",ncGridChangeOrderAfter:"ncGridChangeOrderAfter"}),e.factory("ncGridEmitPropertyScopeSearch",[function(){return function e(t,n){return null!=t[n]?t:null!=t.$parent?e(t.$parent,n):null}}]),e.factory("ncGridTemplateService",["$q","$http","ncGridTemplatesProperties",function(e,a,i){var o=null,s={};return function(t){var n=e.defer();return null==o&&(o=e.defer(),a.get(i.templatePage).then(function(e){if(200==e.status){var t,n=m.element(e.data);for(t in n){var a=n[t];"SCRIPT"==a.nodeName&&(s[a.id]=a.innerHTML)}o.resolve(s)}else o.resolve(s)})),o.promise.then(function(e){return e||n.resolve(null),n.resolve(e[t])}),n.promise}}]),e.directive("ncTbody",["$compile",function(n){return{restrict:"A",replace:!1,scope:!1,link:function(e,t){t.attr("infinite-scroll")||(t.addClass("ng-cloak"),t.attr("infinite-scroll","$settings.mapping.renderMore()"),t.attr("infinite-scroll-immediate-check","true"),t.attr("infinite-scroll-distance","1"),t.attr("infinite-scroll-disabled","$parameters.mapping.isRenderMoreProcessing"),t.attr("data-ng-class","{'async-processing':$parameters.mapping.isLoading}"),t.append("<tr class='async-processing' data-ng-if='$parameters.mapping.isRenderMoreProcessing || !$parameters.mapping.isLoading && !$parameters.mapping.isPageFull'><td style='height:80px'></td></tr>"),n(t)(e))}}}])}),angular.module("reCAPTCHA",[]).provider("reCAPTCHA",function(){var o=null,s={},r=this;this.setPublicKey=function(e){o=e},this.setOptions=function(e){s=e},this._createScript=function(e,t){var n=e.createElement("script");n.type="text/javascript",n.async=!0,n.src="~/assets/js/recaptcha_ajax.js",n.onreadystatechange=function(){"complete"==this.readyState&&t()},n.onload=t,e.getElementsByTagName("body")[0].appendChild(n)},this.$get=["$q","$rootScope","$window","$document",function(e,t,n,a){var i=e.defer();return n.Recaptcha?i.resolve():r._createScript(a[0],i.resolve),{create:function(e,t){if(!o)throw new Error("Please provide your PublicKey via setPublicKey");s.callback=t,i.promise.then(function(){n.Recaptcha.create(o,e,s)})},setPublicKey:function(e){o=e},response:function(){return n.Recaptcha.get_response()},challenge:function(){return n.Recaptcha.get_challenge()},reload:function(){return n.Recaptcha.reload()},destroy:function(){n.Recaptcha&&n.Recaptcha.destroy()}}}]}).directive("ncRecaptcha",["reCAPTCHA","$compile",function(i,o){return{restrict:"A",require:"ngModel",scope:{ngModel:"="},link:function(t,e,n,a){n.name;t.clear=function(){t.ngModel={response:"",challenge:!1}},t.reload=function(){return t.clear(),i.reload()},i.create(e[0],function(){t.clear(),t.$watch(function(){return i.challenge()},function(e){t.ngModel.challenge=e}),o(angular.element(document.querySelector("input#recaptcha_response_field")).attr("ng-required","true"))(t),o(angular.element(document.querySelector("input#recaptcha_response_field")).attr("ng-model","ngModel.response"))(t),o(angular.element(document.querySelector("a#recaptcha_reload_btn")).attr("ng-click","reload()"))(t)}),t.$on("$destroy",i.destroy)}}}]),app.config(["reCAPTCHAProvider",function(e){e.setOptions({theme:"clean"})}]);var ncUiModule=angular.module("ncUiModule",["ncCache","ui.select2"]);ncUiModule.value("ncCountriesDefaultValues",{text:"Please select",country:"US",isrequired:!0,reqvalidationmsg:"Country is required",url:"/UiUtils/GetCountries",name:"selectdrpdownname",id:"selectdrpdownid"}),ncUiModule.controller("ncCountriesDropDownCtrl",["$scope",function(t){t.init=function(e){t.defaultCountryForDropDown=e}}]),ncUiModule.directive("ncCountriesDropDown",["$compile","ncCountriesListService",function(e,n){return{restrict:"E",replace:!0,scope:{country:"=",text:"@"},template:"<select ui-select2 ng-model='country'><option ng-repeat='cntry in countrieslist.CountriesList' value='{{cntry.ISOCountryCode}}'>{{cntry.CountryName}}</option></select>",link:function(t){n().then(function(e){if(null==e)throw"Error: Getting data is missed.";t.countrieslist=e[0].Result})}}}]),ncUiModule.directive("ncPhoneNumberDropDown",["$compile","ncCountriesListService",function(e,n){return{restrict:"E",replace:!0,scope:{phonenumber:"=",text:"@"},template:'<select class="coreuiselect"  ui-select2 ng-model="phonenumber"><option ng-repeat="cntry in countrieslist.CountriesList" value="{{cntry.CountryCode}}">+{{cntry.CountryCode}}</option></select>',link:function(t){n().then(function(e){if(null==e)throw"Error: Getting data is missed.";t.countrieslist=e[0].Result})}}}]),ncUiModule.factory("ncCountriesListService",["$q","$http","ncCountriesDefaultValues",function(e,n,a){var i=null,o={};return function(){var t=e.defer();return null==i&&(i=e.defer(),n.get(a.url).then(function(e){200==e.status&&(o=angular.element(e.data)),i.resolve(o)},function(e){alert("Hi - error!"+e)})),i.promise.then(function(e){return e||t.resolve(null),t.resolve(e)}),t.promise}}]),function(e,t){"use strict";if("function"!=typeof define||!define.amd)return t(e);define(["angular"],t)}(angular||null,function(e){var t=e.module("ncWizard",[]);t.controller("ncWizardCtrl",["$scope","ncWizardService",function(e,t){e.ncWizardService=t}]),t.factory("ncWizardService",[function(){var t=1;return{steps:[],canMoveNext:function(){return t<this.steps.length},canMoveBack:function(){return 1!=t},moveNext:function(){this.canMoveNext()&&this.moveTo(t+1)},moveBack:function(){this.canMoveBack()&&this.moveTo(t-1)},getCurrentStep:function(){return this.steps[t-1]},getStep:function(e){return this.steps[e-1]},getCurrentStepIndex:function(){return t},moveTo:function(e){t=e},initStep:function(e,t,n,a){var i={stepIndex:this.steps.length+1,title:e,description:t,cssclass:n,stepScope:a};return this.steps.push(i),i},incrementSteps:function(e){var t=!1;for(index=0;index<this.steps.length;index++)this.steps[index].description==e.description&&(t=!0);t||this.steps.push(e)}}}]),t.directive("ncWizardStep",["ncWizardService",function(i){return{restrict:"E",replace:!0,scope:!0,transclude:!0,template:'<div data-ng-show="ncWizardService.getCurrentStepIndex() == $stepInfo.stepIndex"><div class="row normal-vertical-spacing lb-steps" data-ng-if="showHeader"> <div class="{{$stepInfo.cssclass}}"><a ng-click="ncWizardService.moveBack()" href="" data-ng-if="ncWizardService.steps[$stepInfo.stepIndex-2]!=null" data-ng-bind="\'< Step \'+ncWizardService.steps[$stepInfo.stepIndex-2].stepIndex+\': \'+ncWizardService.steps[$stepInfo.stepIndex-2].description"> CSR</a><span data-ng-bind="\'\'+$stepInfo.stepIndex+\'/\'+ ncWizardService.steps.length"></span><h1 class="section-title" data-ng-if="$stepInfo.title!=null" data-ng-bind="$stepInfo.title"></h1><h2 data-ng-if="$stepInfo.description!=null" data-ng-bind="$stepInfo.description"></h2></div><div data-ng-if="$isUseAddressBook==true" class="medium-5 columns"><p class="medium-text-right"><a href="#address-book" ng_click = "openChooseContactModalPopUp()" class="edit-link open-modal">Use Address Book Contact</a></p></div></div><div class="row" data-ng-if="showHeader"><hr></div> <ng-transclude></ng-transclude></div>',link:function(e,t,n,a){null!=n.stepindex?(e.$stepInfo={stepIndex:n.stepindex,title:n.title,description:n.description,cssclass:n.cssclass},i.incrementSteps(e.$stepInfo)):e.$stepInfo=i.initStep(n.title,n.description,n.cssclass),"true"==n.isuseaddressbooklink&&(e.$isUseAddressBook=!0),e.showHeader=null!=n.title||null!=n.description}}}])}),app.service("ngRepeatTimeTracker",[function(){this.start=function(){console.time("ngRepeatTimeTracker")},this.stop=function(){console.timeEnd("ngRepeatTimeTracker")}}]),app.directive("timeTrack",["ngRepeatTimeTracker",function(a){return function(e,t,n){e.$last&&a.stop()}}]),app.factory("pageHelper",["$rootScope","$filter",function(e,a){function t(){function e(e){return{name:e.name,value:e.value,className:e.className,isActive:e.value==t.value,isLoading:e.value==a.value,isLocked:e.value==i.value,isError:e.value==o.value,isSuccess:e.value==n.value,isWarning:e.value==s.value,isDisabled:e.value==i.value||e.value==a.value}}var t={name:"Active",value:0,className:""},n={name:"Success",value:1,className:"async-success"},a={name:"Loading",value:2,className:"async-processing"},i={name:"Locked",value:3,className:"async-locked"},o={name:"Error",value:4,className:"async-error"},s={name:"Warning",value:5,className:"async-warning"};return{Active:e(t),Loading:e(a),Locked:e(i),Error:e(o),Success:e(n),Warning:e(s),AutoChangeAfter:3e3}}return{Date:{dateFromJson:function(e,t){if(null==e&&"string"!==e)return null;var n=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*))(?:Z|(\+|-)([\d|:]*))?$/.exec(e);if(n)return t?this.convertToEst(new Date(e)):new Date(e);if(n=/^\/Date\((d|-|.*)\)[\/|\\]$/.exec(e)){var a=n[1].split(/[-+,.]/);return t?this.convertToEst(new Date(a[0]?+a[0]:0-a[1])):new Date(a[0]?+a[0]:0-a[1])}return t?this.convertToEst(e):new Date(e)},diffDays:function(e,t){if(null==e||null==t)return null;var n=t.getTime()-e.getTime();return Math.ceil(n/864e5)},diffHours:function(e,t){if(null==e||null==t)return null;var n=t.getTime()-e.getTime();return Math.ceil(n/36e5)},convertToEst:function(e){var t=new Date(e),n=t.getTimezoneOffset();t.setMinutes(t.getMinutes()+n);var a=t;return a.setHours(a.getHours()-(this.isDaylightSavings()?4:3)),a},isDaylightSavings:function(){var e,t,n;return(new Date).getTimezoneOffset()<(e=new Date,t=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),6,1),Math.max(t.getTimezoneOffset(),n.getTimezoneOffset()))},getESTDate:function(){return this.convertToEst(new Date)},toEstTime:function(e){return a("date")(this.convertToEst(e),"hh:mm a")},toEstDate:function(e){return a("date")(this.convertToEst(e),"MMM d, yyyy")},toLocaleTime:function(e){return a("date")(e,"hh:mm a")},toLocaleDate:function(e){return a("date")(e,"MMM d, yyyy")}},AsyncStatus:t(),AsyncStateBehavior:function(n){var a={};(n.instance=this).model=n.model,this.asyncStatus=function(e,t){if(null==t&&(t={}),null==e)return a;if(e.value!=a.value){if(null==n["on"+(a=e).name])throw"Set status '"+e.name+"' without the described behavior in 'on"+e.name+"'";null!=this.activeNotification&&null!=this.activeNotification.destroy&&0!=e.value&&this.activeNotification.destroy(t),n["on"+e.name](t)}},this.messages={loading:n.loadingMsg,success:n.successMsg,errorg:n.errorgMsg,warning:n.warningMsg},this.activeNotification={},n.constructor()},Calculation:{getPercent:function(e,t){return e/t*100},getDataSize:function(e){function t(e,t){return parseFloat(e)||0==e||"0"==e?parseInt(e)==e||t?parseInt(e):parseFloat(e).toFixed(2):NaN}var n=e/1073741824,a=e/1048576,i=e/1024;return{Bytes:e,Gb:t(n),Mb:t(a,!0),Kb:i,AdjustedSize:t(1<=n?t(n):1<=a?t(a,!0):1<=i?i:e),AdjustedName:1<=n?"GB":1<=a?"MB":1<=i?"KB":"Bytes"}},formatMoney:function(e,t,n){return a("currency")(e,t,n)}},Rendering:{ngModelOptions:{timeout:{debounce:50},onBlur:{updateOn:"default blur",debounce:{default:300,blur:0}}}},Validation:{characters:n,password:function(e){return e=null==e?"":e.toString(),{passwordSpaceExist:l(e.indexOf(" ")<0,""),passwordInvalidCharacter:l(null,""),minLength:l(6<=e.length,6),maxLength:l(e.length<=32,32)}},namecheapPassword:function(e){return e=null==e?"":e.toString(),{passwordInvalidCharacter:l(null,""),minLength:l(1<=e.length,1),maxLength:l(e.length<=100,100)}},number:function(e,t,n,a){var i,o=!0,s=!0,r=!1,c=!0;return isNaN(e)||(r=!0,i=Number(e),(c=1!=a||parseInt(i)==i)&&(o=t<=i,s=i<=n)),{min:l(o,t),max:l(s,n),number:l(r),onlyInteger:l(c)}},passwordComplexityScore:function(e){if(null==e)return 0;var t=0;return 6<(e=e.toString()).length&&t++,e.match(/[a-z]/)&&e.match(/[A-Z]/)&&t++,e.match(/\d+/)&&t++,e.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)&&t++,12<e.length&&t++,t},mailboxAliasNameCharacters:function(n){n=null==n?"":n.toString();return{invalidCharacter:function(){if(""==n)return!0;var e="",t=n.match(/[!,@,#,$,%,^,&,*,(,),=,|,\\,?,/,",',:,;,\[,\],<,>,+ ]/);return null!=t&&(e=" "==t[0][t[0].length-1]?"space":t[0][t[0].length-1]),l(null==t,e)}(),inputLatinLattersNumbersInLowerCase:function(){if(""==n)return!0;return l(/^[a-z0-9+-_]+$/gi.test(n))}(),minLength:l(0<=n.length,0),maxLength:l(n.length<=64,64),upperCase:l(n==n.toLowerCase())}},ip4:function(e){e=null==e?"":e.toString();return{invalidCharacter:n(e,null,/^[0-9.]+$/gi,!0),ip4Format:l(/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/gi.test(e))}},ip6:function(e){e=null==e?"":e.toString();return l(/^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*/gi.test(e))},email:function(e){e=null==e?"":e.toString();return l(/^[A-Za-z0-9\.\-_\+]+@((?=[A-Za-z0-9-]{1,63}\.)(xn--+)?[A-Za-z0-9]+(-[A-Za-z0-9]+)*\.)(([A-Za-z]{2,63}\.)*)(([A-Za-z]{2,63}))$/.test(e))},emailUnicode:function(e){e=null==e?"":e.toString();var t=XRegExp("^[A-Za-z0-9\\.\\-_\\+\\p{L}]+@[A-Za-z0-9\\-\\p{L}]*(\\.[a-zA-Z0-9]+)*?\\.[A-Za-z0-9]{2,63}$").test(e);return l(t)},domainNoTld:function(e){var t=XRegExp("^[a-zA-Z0-9\\-\\+\\p{L}]+$").test(e);return l(t)},domainWithTld:function(e){var t=XRegExp("^[a-zA-Z0-9\\-\\+\\p{L}]+(\\.[a-zA-Z]{1,})+$").test(e);return l(t)},login:function(e){e=null==e?"":e.toString();return l(/^[a-zA-Z0-9]+$/.test(e))},fqdn:function(e){e=null==e?"":e.toString();return l(/^(?=.{1,254}$)((?=[a-z0-9-]{1,63}\.)(xn--+)?[a-z0-9]+(-[a-z0-9]+)*\.){2,}[a-z]{2,63}$/.test(e))},emailForwarder:function(e){e=null==e?"":e.toString();return l(/^[a-zA-Z0-9.\-_]*$/.test(e))},url:function(e){e=null==e?"":e.toString();return l(/^[a-zA-Z0-9.\-_\/?%&=:]*$/.test(e))},lettersAndDigitsOnly:function(e){e=null==e?"":e.toString();return l(/^[a-zA-Z0-9]*$/.test(e))},digitsOnly:function(e){e=null==e?"":e.toString();return l(/^[0-9]*$/.test(e))},host:function(e){e=null==e?"":e.toString();return l(/^[a-zA-Z0-9][a-zA-Z0-9\-]*$/.test(e))},personalDNSHost:function(e){e=null==e?"":e.toString();return l(/^[a-zA-Z0-9.][a-zA-Z0-9.\-]*$/.test(e))}}};function l(e,t){return{isValid:e,arg:t}}function n(e,t,n,a){e=null==e?"":e.toString();var i,o="";return null!=t?(null!=(i=e.matchExpr(t))&&(o=" "!=i[0][i[0].length-1]||a?i[0][i[0].length-1]:"space"),l(null==i,o)):null!=n?l(n.test(e)):void 0}}]).filter("stringFormat",["sanitizeHtmlService",function(p){return function(e,t,n){return t&&t.length&&e?(null==n&&(n=!0),function(e,t,n,a){for(var i="",o=0;;){var s=t.indexOf("{",o),r=t.indexOf("}",o);if(s<0&&r<0){i+=t.slice(o);break}if(0<r&&(r<s||s<0)){if("}"!==t.charAt(r+1))throw new Error("format stringFormatBraceMismatch");i+=t.slice(o,r+1),o=r+2}else if(i+=t.slice(o,s),o=s+1,"{"!==t.charAt(o)){if(r<0)throw new Error("format stringFormatBraceMismatch");var c=t.substring(o,r),l=c.indexOf(":"),d=parseInt(l<0?c:c.substring(0,l),10);if(isNaN(d))throw new Error("format stringFormatInvalid");var u=l<0?"":c.substring(l+1),m=n[d];null==m&&(m=""),a&&(m=p(m)),m.toFormattedString?i+=m.toFormattedString(u):e&&m.localeFormat?i+=m.localeFormat(u):m.format?i+=m.format(u):i+=m.toString(),o=r+1}else i+="{",o++}return i}(!1,e,t,n)):e}}]).filter("propertyFilter",function(){return function(e,t,o){var i=t;if(!angular.isArray(e))return[];var s=[];function r(e,t){for(var n=e.split(".");0<n.length;){var a=n.shift();if(void 0===t[a]&&(t[a]={}),-1!=a.indexOf("[")&&-1!=a.indexOf("]")){if(!(t=t[a.substring(0,a.indexOf("["))]))return"";t=t[Number(a.substring(a.indexOf("[")+1,a.indexOf("]")))]}else t=t[a]}return t}var c=[];return angular.isArray(t)?(c=t,e.forEach(function(a){var i=0;c.forEach(function(e){var t,n=function(e,t,n){var a=e.indexOf("("),i=e.indexOf(")");if(-1<a&&-1<i){var o=e.slice(0,a);if(t[o]){var s=e.slice(a+1,i);return t[o](s,n)}}return null}(e.propertyName,a,e.propertyValue);null!=n?1==n&&i++:null!=(t=r(e.propertyName,a))&&t.toString()==e.propertyValue.toString()&&i++}),(1==o&&0<i||i==c.length)&&s.push(a)})):(c=Object.keys(t),e.forEach(function(n){var a=0;c.forEach(function(e){var t=r(e,n);null!=t&&null!=i[e]&&t.toString()==i[e].toString()&&a++}),(1==o&&0<a||a==c.length)&&s.push(n)})),s}}).filter("stringEntryFilter",function(){return function(e,l){var d=[];return angular.isArray(e)?e.forEach(function(e){for(var t=!1,n=Object.keys(l),a=0;a<n.length;a++){var i=n[a],o=l[i].toLowerCase(),s=i.split(".");if(1<s.length){for(var r=e,c=0;c<s.length;c++)r=r[s[c]];if(-1!==r.toString().toLowerCase().indexOf(o)){t=!0;break}}else if(-1!==e[i].toString().toLowerCase().indexOf(o)){t=!0;break}}t&&d.push(e)}):d=e,d}}).filter("highlightFilter",["$sce","sanitizeHtmlService",function(i,o){return function(t,e){if("."==e&&(e="\\."),e&&t){var n="______o_span",a="______c_span";e=e.replace(/(\(|\)|\+|\*|\+|\?)/,"\\$1"),t=t.replace(new RegExp("("+e+")","gi"),n+"$1"+a);try{return t=o(t).replace(new RegExp("("+n+")","g"),'<span class="highlighted">').replace(new RegExp("("+a+")","g"),"</span>"),i.getTrustedHtml(t)}catch(e){return o(t)}}return o(t)}}]).factory("forEachPromice",["$q","$timeout",function(n,u){return function(i,o,e){var s=n.defer(),r=e;null==r&&(r=500),r>i.length&&(r=i.length);for(var c=i.length/r,l=0,d=[],t=0;t<c;t++){!function(a){u(function(){for(var e=a*r,t=0;t<r&&!(e+t>i.length);t++){var n=o(i[t+e],t+e,i);null==n||"function"==typeof n?d.push(i[t+e]):d.push(n)}c==++l&&s.resolve(d)},5)}(t)}return s.promise}}]).factory("forEachChunk",["$q",function(l){return function(e,n,t){for(var a=angular.copy(e),i=[],o=t||3,s=0,r=a.length;s<r;s+=o)i.push(a.slice(s,s+o));var c=0;!function e(){var t;c<i.length&&(t=[],i[c].forEach(function(e){t.push(n(e))}),c++,l.all(t).then(function(){e()}))}()}}]),app.factory("promiceQueue",["$q",function(r){return function(){var a=[],t=!1,n=this,i=function(){if(1!=t){var e=n.back();if(e){if(t=!0,null==e.callBackFnArg&&(e.callBackFnArg=[]),!Array.isArray(e.callBackFnArg))return void console.error((e.callBackFn.name?e.callBackFn.name+": ":"")+"call back function arguments is not Array");e.callBackFnArg.push(e.defer),function(e,t){(e="function"==typeof e?e:window[e]).apply(this,t||[])}(e.callBackFn,e.callBackFnArg),e.defer.promise.then(function(){t=!1,n.pop(),i()})}}};this.push=function(e,t){var n=r.defer();return a.unshift({defer:n,callBackFn:e,callBackFnArg:t}),i(),n.promise},this.pop=function(){return a.pop()},this.back=function(){return a[a.length-1]},this.size=function(){return a.length},this.clear=function(){return a=[]},this.autoWrap=function(s){var e=this;return function(){var a=this,i=Array.prototype.slice.call(arguments),o=r.defer();return e.push(function(e){function t(){e.resolve()}var n=s.apply(a,i);n&&"function"==typeof n.then?n.then(t,t).then(function(){o.resolve.apply(o,arguments)},function(){o.reject.apply(o,arguments)}):t()},[]),o.promise}}}}]),angular.module("ui.select2",[]).value("uiSelect2Config",{}).directive("uiSelect2",["uiSelect2Config","$timeout",function(e,m){var p={};return e&&angular.extend(p,e),{require:"ngModel",priority:1,compile:function(e,n){var l,t,a,d=e.is("select"),u=angular.isDefined(n.multiple);return e.is("select")&&(t=e.find("optgroup[ng-repeat], optgroup[data-ng-repeat], option[ng-repeat], option[data-ng-repeat]")).length&&(a=t.attr("ng-repeat")||t.attr("data-ng-repeat"),l=jQuery.trim(a.split("|")[0]).split(" ").pop()),function(a,i,o,s){function r(e){var n;return c.simple_tags?(n=[],angular.forEach(e,function(e,t){n.push(e.id)})):n=e,n}var t,c=angular.extend({},p,a.$eval(o.uiSelect2));d?(delete c.multiple,delete c.initSelection):u&&(c.multiple=!0),s&&(a.$watch(n.ngModel,function(e,t){e&&e!==t&&s.$render()},!0),s.$render=function(){var e,t,n;d?i.select2("val",s.$viewValue):c.multiple?(s.$isEmpty=function(e){return!e||0===e.length},e=s.$viewValue,angular.isString(e)&&(e=e.split(",")),i.select2("data",(n=[],(t=e)&&(c.simple_tags?(n=[],angular.forEach(t,function(e,t){n.push({id:e,text:e})})):n=t),n)),c.sortable&&i.select2("container").find("ul.select2-choices").sortable({containment:"parent",start:function(){i.select2("onSortStart")},update:function(){i.select2("onSortEnd"),i.trigger("change")}})):angular.isObject(s.$viewValue)?i.select2("data",s.$viewValue):s.$viewValue?i.select2("val",s.$viewValue):i.select2("data",null)},l&&a.$watch(l,function(e,t,n){angular.equals(e,t)||m(function(){i.select2("val",s.$viewValue),s.$render(),e&&!t&&s.$setPristine&&s.$setPristine(!0)})}),s.$parsers.push(function(e){return i.prev().toggleClass("ng-invalid",!s.$valid).toggleClass("ng-valid",s.$valid).toggleClass("ng-invalid-required",!s.$valid).toggleClass("ng-valid-required",s.$valid).toggleClass("ng-dirty",s.$dirty).toggleClass("ng-pristine",s.$pristine),e}),d||(i.bind("change",function(e){e.stopImmediatePropagation(),a.$$phase||a.$root.$$phase||a.$apply(function(){s.$setViewValue(r(i.select2("data")))})}),c.initSelection&&(t=c.initSelection,c.initSelection=function(e,n){t(e,function(e){var t=s.$pristine;s.$setViewValue(r(e)),n(e),t&&s.$setPristine(),i.prev().toggleClass("ng-pristine",s.$pristine)})}))),i.bind("$destroy",function(){i.select2("destroy")}),o.$observe("disabled",function(e){i.select2("enable",!e)}),o.$observe("readonly",function(e){i.select2("readonly",!!e)}),o.$observe("style",function(e){i.select2("style",e)}),a.$watch(o.uiSelect2,function(e,t){var n;e!=t&&(n=angular.extend({},p,a.$eval(o.uiSelect2)),i.select2(n))},!0),o.ngMultiple&&a.$watch(o.ngMultiple,function(e){o.$set("multiple",!!e),i.select2(c)});i.select2(c),i.select2("data",s.$modelValue),i.hide(),s.$render(),m(function(){var e;i.show(),i.select2(c),c.initSelection||d||(e=s.$pristine,s.$pristine=!1,s.$setViewValue(r(i.select2("data"))),e&&s.$setPristine(),i.prev().toggleClass("ng-pristine",s.$pristine))})}}}}]),app.service("bulkHelper",["$log","$q",function(i,o){var s=3;return{waterfall:r,waterfallAnPulse:function(e,n,a,t){return r(e,function(t){return n(t).then(function(e){try{if(e.hasOwnProperty("Result")||e.hasOwnProperty("Error")){if(!0===e.Error)return t;a(t,e.Result)}else a(t,e)}catch(e){i.error("Pricing: cannot process price updating",e)}return t})},t)}};function r(e,t,n){if(!e||0===e.length)return o.when();var a=e[0];return n=n||s,t(a).then(function(){if(0<e.length)return r(e.slice(1),t,n)},function(){if(0<e.length&&0<n)return r(e,t,n-1)})}}]),app.service("cartService",["httpRepository","$rootScope","$q","ncCollection","promiceQueue",function(n,e,t,a,i){"use strict";var o=new i,s=(document.querySelector.bind(document),"CARD_CHANGES_APPLIED"),r={Domain:"DOMAINS",WhoisGuard:"WHOISGUARD",PremiumDns:"PREMIUMDNS"};return{maxRenewChunkLength:20,cardHasBeenChangedEvent:s,itemTypes:r,notifyCardChanged:function(){e.$broadcast(s)},renewDomains:o.autoWrap(function(e,t){return l(e,function(e){return{DomainName:e.DomainName,IsWgOn:e.WhoisGuardInfo.IsEnabled,IsPremiumDnsOn:e.PremiumDnsInfo.IsEnabled}},n.cart.domainsRenew,t)}),renewDomain:function(e){return this.renewDomains([e])},renewProduct:function(e){return this.renewProducts([e])},renewProducts:o.autoWrap(function(e,t){return l(e,function(e){return{DomainName:e.DomainName,ProductId:e.ProductId,ProductInfoType:e.ProductInfoType,ProductName:e.ProductName}},n.cart.productsRenew,t)}),getCartItems:function(){return n.cart.getItems().then(function(e){return e&&e.Result&&e.Result.Items||[]})},getDomainByName:function(e,t){return c(e,function(e){return e.Name===t&&d(e)===r.Domain})},getProductById:function(e,t){return null==t?null:c(e,function(e){return e.CurrentSubscriptionId===t})},getAllItemsByDomainName:function(e,t,n){return n=n||[],e.filter(function(e){return e.Name===t&&(0===n.length||-1<n.indexOf(d(e)))})}};function c(e,t){for(var n=e.length,a=0;a<n;a++)if(t(e[a]))return e[a];return null}function l(e,o,s,r){var t=a.chunk(e,20),c=!1;return function n(e,a,i){var t=e.map(o);return s(t).then(function(e){if(!c){if(1<a.length&&angular.isFunction(r))try{r({result:e,domains:a[i]},l)}catch(e){console.error("cartService: Failed to notify chunk processing.",e)}var t=i+1;return t<a.length?n(a[t],a,t):void 0}})}(t[0],t,0);function l(){c=!0}}function d(e){return e.ProductType}}]),app.factory("dashboardRepository",["httpService",function(i){return{dashboardInfo:{BulkModificationCancel:function(e,t){return i.Post("/dashboard/Cancel/",{batchid:e,type:t})},getBulkModificationsList:function(){return i.Get("/dashboard/GetBulkModifications/")},getBulkModificationsDetailsList:function(e){return i.Post("/dashboard/BulkModificationDetailsList/",{gridState:e})},BulkModificationsGetDetails:function(e,t,n,a){return i.Post("/dashboard/BulkModificationsGetDetails/",{gridState:e,batchid:t,param:n,domainname:a})},disableNotificationForUser:function(e){return i.Post("/dashboard/disableNotificationForUser/",{notificationKey:e})}}}}]),app.factory("httpHelper",[function(){function n(e,t,n){var a,i,o=document.createElement("form");for(a in o.setAttribute("method",e),o.setAttribute("action",t),n){n.hasOwnProperty(a)&&((i=document.createElement("input")).setAttribute("type","hidden"),i.setAttribute("name",a),i.setAttribute("value",n[a]),o.appendChild(i))}document.body.appendChild(o),ncCompliance.checkAndAddToken(o),o.submit()}return{Get:function(e,t){return n("GET",e,t)},Post:function(e,t){return n("POST",e,t)}}}]),app.factory("httpRepository",["httpService","httpHelper","urlConfiguration",function(d,n,e){return{privateEmail:{getLightMailboxModel:function(e){return{SubscriptionId:e.SubscriptionId,IsCatchAll:e.IsCatchAll,MailboxName:e.MailboxName,Owner:e.Owner,UserLocked:e.UserLocked,AutoLocked:e.AutoLocked,AdminLocked:e.AdminLocked,Pending:e.Pending}},getSubscription:function(e){return d.Get("/Domains/PrivateEmail/GetSubscription",{subscriptionId:e})},getMailboxes:function(e){return d.Get("/Domains/PrivateEmail/GetSubscriptionMailboxes",{subscriptionId:e})},addMailbox:function(e,t){return d.Post("/Domains/PrivateEmail/AddMailbox",{name:e.name+"@"+t.DomainName,password:e.password,quota:e.quotaMB(),subscriptionId:e.subscriptionId,defaultMailQuota:e.defaultMailQuota})},turnOnMailbox:function(e){return d.Post("/Domains/PrivateEmail/TurnOnMailbox",{model:this.getLightMailboxModel(e)})},turnOffMailbox:function(e){return d.Post("/Domains/PrivateEmail/TurnOffMailbox",{model:this.getLightMailboxModel(e)})},deleteMailbox:function(e){return d.Post("/Domains/PrivateEmail/DeleteMailbox",{model:this.getLightMailboxModel(e)})},mailboxChangePassword:function(e,t,n){return d.Post("/Domains/PrivateEmail/SubscriptionMailboxChangePassword",{model:this.getLightMailboxModel(e),newPassword:t,ncPassword:n})},changeAutoRenew:function(e,t){return d.Post("/Domains/PrivateEmail/ChangeAutoRenew",{subscriptionId:e,enabled:t})},changeAntiSpoofFilter:function(e,t){return d.Post("/Domains/PrivateEmail/ChangeAntiSpoofFilter",{domain:e,enabled:t})},changeDKim:function(e,t){return d.Post("/Domains/PrivateEmail/ChangeDKim",{domain:e,disabled:t})},catchAllMailbox:function(e,t){return d.Post("/Domains/PrivateEmail/CatchAllMailbox",{domainName:e,mailboxName:t})},clearCatchAllMailbox:function(e,t){return d.Post("/Domains/PrivateEmail/ClearCatchAllMailbox",{domainName:e,mailboxName:t})},editStorage:function(e,t,n){return d.Post("/Domains/PrivateEmail/EditStorageMailbox",{subscriptionId:e,mailboxName:t,quota:n})},getAliases:function(e,t){return d.Get("/Domains/PrivateEmail/"+e+"/"+t+"/GetAliases",{})},addAlias:function(e,t,n){return d.Post("/Domains/PrivateEmail/EditAliases/AddAlias",{subscriptionId:e,mailboxname:t,aliasName:n})},removeAlias:function(e,t,n){return d.Post("/Domains/PrivateEmail/EditAliases/RemoveAlias",{subscriptionId:e,mailboxname:t,aliasName:n})},editAlias:function(e,t,n,a){return d.Post("/Domains/PrivateEmail/EditAlias",{subscriptionId:e,mailboxname:t,oldAliasName:n,newAliasName:a})},getAvailableSubscriptionPlans:function(e){return d.Get("/Domains/PrivateEmail/"+e+"/GetAvailableSubscriptionPlans",{})},upgradeSubscription:function(e,t,n,a){return d.Post("/Domains/PrivateEmail/UpgradeSubscription",{subscriptionId:e,newPlanName:t,oldPlanName:n,userDefaultPaymentType:a})}},dashboardMessage:{getMessages:function(e){return d.Post("/dashboard/messages/messagelist/get",{gridState:e})},resendMessage:function(e){return d.Get("/dashboard/messages/resendMessage/"+e,{})},markMessagesAsRead:function(e,t){return d.Post("/dashboard/messages/markMessagesAsRead/",{referenceIds:e,subject:t})},markMessagesAsUnread:function(e,t){return d.Post("/dashboard/messages/markMessagesAsUnread/",{referenceIds:e,subject:t})},saveMessages:function(e,t){return d.Post("/dashboard/messages/saveMessagesList/",{referenceIds:e,subject:t})},removeMessages:function(e,t){return d.Post("/dashboard/messages/removeMessagesList/",{referenceIds:e,subject:t})}},apiAccess:{get:function(){return d.Get("/Profile/Tools/ApiAccess/Get")},getWhitelistedIPs:function(){return d.Get("/Profile/Tools/ApiAccess/WhitelistedIPs/Get")},turnOnApiAccess:function(e){return d.Post("/Profile/Tools/ApiAccess/TurnOn",{password:e})},turnOffApiAccess:function(e){return d.Post("/Profile/Tools/ApiAccess/TurnOff",{password:e})},resetApiKey:function(e){return d.Post("/Profile/Tools/ApiAccess/ResetApiKey",{password:e})},addWhiteIP:function(e){return d.Post("/Profile/Tools/ApiAccess/AddWhiteIP",{model:e,password:e.password})},editWhiteIP:function(e,t){return d.Post("/Profile/Tools/ApiAccess/EditWhiteIP",{oldModel:e,model:t,password:t.password})},removeWhiteIP:function(e,t){return d.Post("/Profile/Tools/ApiAccess/RemoveWhiteIP",{model:e,password:t})},getIpGeoLocation:function(e){return d.Get("/Profile/Tools/ApiAccess/GetGeo?ip="+e)}},affiliate:{getStatus:function(){return d.Get("/Profile/Tools/Affiliate/Get")},getInfo:function(){return d.Get("/Profile/Tools/Affiliate/Info")},getBanners:function(){return d.Get("/Profile/Tools/Affiliate/Banners")},turnOn:function(e){return d.Post("/Profile/Tools/Affiliate/TurnOn",{password:e})},turnOff:function(e){return d.Post("/Profile/Tools/Affiliate/TurnOff",{password:e})}},common:{checkUser:function(e){return d.Post("/Common/CheckUser",{password:e})}},category:{get:function(){return d.Get("/Profile/Tools/CategoriesList/Get")},addCategory:function(e){return d.Post("/Profile/Tools/Categories/AddCategory",{categoryName:e})},editCategory:function(e,t){return d.Post("/Profile/Tools/Categories/EditCategory",{categoryName:e,categoryNameNew:t})},deleteCategory:function(e,t){return d.Post("/Profile/Tools/Categories/RemoveCategory",{categoryToDel:e,categoryNew:t})},updateContact:function(e,t){return d.Post("/Domains/BulkUpdateContact",{viewModel1:JSON.parse(e),ExtendAttributeInfo:JSON.parse(t)})},updateSingleContact:function(e,t){return d.Post("/Domains/SingleDomainContact",{model:JSON.parse(e),ExtendAttributeInfo:JSON.parse(t)})}},onepager:{getList:function(){return d.Get("/ProductList/OnepagerSubscriptions/Get")},setAutoRenew:function(e,t){return d.Post("/ProductList/OnepagerSubscriptionAutoRenew/Set",{subscriptionId:e,setAutorenew:t})},getLoginUrl:function(e){return d.Get("/ProductList/OnepagerGetLoginUrl/Get",{subscriptionId:e})},renewAddToCart:function(e,t){return n.Post(e,{bulkproductdetails:t})}},notifications:{getInfo:function(){return d.Get("/Profile/Tools/Notifications/Get")},switchOptions:function(e,t){return d.Post("/Profile/Tools/Notifications/Switch",{isEnabled:e,notificationtype:t})},switchNews:function(e){return d.Post("/Profile/Tools/Notifications/Switch",{model:e})}},domainListAction:{autoRenewList:function(e,t,n,a,i,o,s){return d.Post("/Domains/DomainList/BulkModifyList",{DomainNames:e,paramKey:t,paramValue:n,serviceType:a,BulkActionType:i,isEmailNotifyEnabled_YN:o,additionalInfo:s})},ReceiveEppCode:function(e,t,n,a,i,o,s,r,c,l){return d.Post("/Domains/DomainList/ReceiveEppCode",{domainNames:e,rlockParam:t,paramKey:n,paramValue:a,serviceType:i,BulkActionType:o,IsEmailChecked:s,IsSupportRegLock:r,IsEppRequired:c,IsOwner:l})},verifyContacts:function(e,t,n,a,i,o){return d.Post("/Domains/DomainList/BulkModifyList",{DomainNames:e,paramKey:t,paramValue:n,serviceType:a,BulkActionType:i,isEmailNotifyEnabled_YN:o})},AutoRenewBulkAction:function(e){return d.Post("/Domains/DomainList/GetServiceDetails",{domainList:e})},VerifyContactsBulkAction:function(e){return d.Post("/Domains/DomainList/GetVerifiedDomains",{domainList:e})},DomainLockBulkAction:function(e){return d.Post("/Domains/DomainList/GetDomainLockDetails",{domainList:e})},authorizeDNS:function(e,t){return d.Post("/Domains/AuthorizeFreeDNS",{email:e,domain:t})},renewExpiringAddToCart:function(e,t,n){return d.Post(n,{Domains:e,Products:t})},getFreeDnsAuthorizationEmailList:function(e){return d.Post("/Domains/GetEmailToAuthorizeFreeDNS",{domainName:e})},getAuthorizationTxtKey:function(e,t){return d.Post("/Domains/GetAuthorizationTxtKey",{domainName:e,hostName:t})},setTxtAuthorizationFlow:function(e,t){return d.Post("/Domains/SetTxtAuthorizationFlow",{domainName:e,hostName:t})},setEmailAuthorizationFlow:function(e,t){return d.Post("/Domains/SetEmailAuthorizationFlow",{domainName:e,hostName:t})}},dnsSettings:{getInfo:function(){return d.Get("/Profile/Tools/DnsSettings/Get")},save:function(e){return d.Post("/Profile/Tools/DnsSettings/Save",{model:e})}},domainInfo:{GetUSRegistrantNexusList:function(){return d.Get("/Domains/LoadUSRegistrantNexusList",{})},GetUSRegistrantNexusCountryCodeList:function(){return d.Get("/Domains/LoadUSRegistrantNexusCountryCodeList",{})},GetRegistrantPurposeList:function(){return d.Get("/Domains/LoadUSRegistrantPurposeList",{})},GetCanadaRegistrantLanguage:function(){return d.Get("/Domains/LoadCanadaRegistrantLanguage",{})},LoadCanadaRegistrantContactList:function(){return d.Get("/Domains/LoadCanadaRegistrantContactList",{})},GetAsiaLegalEntityType:function(){return d.Get("/Domains/LoadAsiaLegalEntityType",{})},GetAsiaIdentFormType:function(){return d.Get("/Domains/LoadAsiaIdentFormType",{})},GetAsiaContactTypes:function(){return d.Get("/Domains/LoadAsiaContactTypes",{})},GetAsiaCountryCodes:function(){return d.Get("/Domains/LoadAsiaCountryCodes",{})},LoadUkRegistrantContactList:function(e){return d.Get("/Domains/LoadUkRegistrantContactList",{tld:e})},LoadUkRegistrantWhois:function(){return d.Get("/Domains/LoadUkRegistrantWhois",{})},LoadExtendedAttributesList:function(e){return d.Post("/Domains/GetExtendedAttributesList",{DomainNames:e})},updateContact:function(e,t){return d.Post("/Domains/BulkUpdateContact",{viewModel1:JSON.parse(e),ExtendAttributeInfo:JSON.parse(t)})},updateSingleContact:function(e,t){return d.Post("/Domains/SingleDomainContact",{model:JSON.parse(e),ExtendAttributeInfo:JSON.parse(t)})}},UserAddressInfo:{GetUserAddressDetails:function(){return d.Post("/Domains/GetAddressDetails",{})}},domainList:{getDomainList:function(e,t){return null!=t&&"undefined"!=t||(t="false"),d.Post("/Domains/GetDomainList",{gridStateModel:e,isOverViewPage:t})},getCategories:function(){return d.Get("/Domains/DomainList/DomainCategoryList")},allotCategories:function(e,t){return d.Post("/Domains/DomainList/DomainCategoryAllot",{domainname:e,category:t})},createCategories:function(e,t){return d.Post("/Domains/DomainList/Category/Create",{domainName:e,categoryName:t})},removeCategories:function(e,t){return d.Post("/Domains/DomainList/Category/Remove",{domainName:e,categoryId:t})},IsContactChangeBlocked:function(){return d.Get("/Domains/DomainList/IsContactChangeBlocked")},contactsUpdateBulkAction:function(e){return n.Post("/Domains/DomainList/ContactsUpdateBulk",{domainList:e})},whoIsGuardBulkAction:function(e){return n.Post("/domains/domainlist/whoisguardbulkaction",{domainList:e})},dnsHostBulkAction:function(e){return n.Post("/domains/domainlist/bulksetdnshost",{domainList:e})},whoIsGuardBulkActionSuccess:function(e,t){return n.Post("/domains/domainlist",{model:e,bulkActionType:t})},domainListBulkAction:function(e,t,n,a,i,o){return d.Post("/Domains/DomainList/BulkModifyList",{DomainNames:e,paramKey:n,paramValue:a,serviceType:t,BulkActionType:i,isEmailNotifyEnabled_YN:o})},goToDomainList:function(){return window.location="/domains/domainlist"},RenewExpiringBulkAction:function(e,t){return n.Post("/Domains/DomainList/RenewExpiring",{domainList:e,domainSelectionType:t})},domainWhoIsAutoRenew:function(e,t,n,a){return d.Post("/Domains/ChangeDomainAndWGAutoRenew",{autoRenewFor:e,domainName:t,isDomainAutoRenew:n,isWGAutoRenew:a})},whoisguardbulkaddtocart:function(e){return n.Post("/Domains/domainlist/whoisguardbulkaddtocart",{domainList:e})},SyncDomainList:function(){return d.Post("/Domains/domainlist/SyncDomainList")},CheckDomainStatus:function(e){return d.Get("/Domains/domainlist/CheckDomainStatus",{batchId:e})},hostingIsAutoRenew:function(e,t){return d.Post("/Domains/SetHostingAutoRenew",{serviceId:e,isHostingAutoRenew:t})},CheckSyncDomainList:function(){return d.Get("/Domains/domainlist/CheckSyncDomainList")},EmailForwardingBulkaction:function(e){return n.Post("/domains/domainlist/emailforwardingbulkaction",{domainList:e})},getTransferDetails:function(e,t){return d.Post("/Domains/DomainList/GetTransferDetails",{domainName:e,modelIndexPosition:t})},getDomainsOnly:function(e){return d.Post("/Domains/GetDomainsOnly",{gridStateModel:e})},setPremiumDnsAutoRenew:function(e,t){return d.Post("/Domains/DomainDetails/PremiumDnsSetAutoRenew",{subscriptionId:e,autoRenew:t})},dismissDomainCrossSell:function(){return d.Post("/Domains/DismissDomainCrossSell",{})}},expiringList:{getDomains:function(e){return d.Get("/ExpiringSoon/GetExpiringList",e)},getProductsList:function(e){return d.Get("/ExpiringSoon/GetExpiringProductsList",e)},getExpirationsSummary:function(){return d.Get("/api/v1/ncpl/expiringsoon/getexpiringitemcount")},domainTransfer:function(e,t,n,a){return d.Post(e,{domainName:t,eppCode:n,enableTransfermate:a,ProxyDomain:a},!0)}},userContacts:{getDefaultAdmin:function(){return d.Get("/Profile/Tools/DefaultAdminContact/Get")},getProfile:function(){return d.Get("/Profile/Tools/ProfileContact/Get")},getDefault:function(){return d.Get("/Profile/Tools/DefaultContact/Get")},getCustomList:function(){return d.Get("/Profile/Tools/CustomContacts/Get")},getCustomContactInfo:function(e){return d.Get("/Profile/Tools/CustomContact/Get/"+e)},getDomainContactsSettings:function(){return d.Get("/Profile/Tools/DomainContactsSettings/Get")},getUserAddContactModel:function(){return d.Get("/Profile/Tools/AddNewCustomContactGet")},addNewCustomContact:function(e){return e.organization=e.companyName,e.streetAddress=e.address1,e.zip=e.zipCode,d.Post("/Profile/Tools/AddNewCustomContact",{model:e})},editCustomContact:function(e){return e.organization=e.companyName,e.streetAddress=e.address1,e.zip=e.zipCode,d.Post("/Profile/Tools/EditCustomContact",{model:e})},saveDomainContactsSettings:function(e){return d.Post("/Profile/Tools/DomainContactsSettings/Save",{model:e})}},extendedAttributes:{getAttributes:function(){return d.Get("/Profile/Tools/ExtendedAttributes/Get")}},sslCertificates:{getList:function(){return d.Get("/ProductList/SslCertificates/Get")}},domainTransfer:{authorizeTransfer:function(e,t,n){return d.Post("/Domains/TransferInAuthorize",{transferId:e,authCode:t,domainName:n})},resendEmail:function(e){return d.Post("/Domains/TransferResendEmail",{transferId:e})},refreshTransferStatus:function(e,t){return d.Post("/Domains/RefreshTransferStatus",{transferId:e,domainName:t})}},domainDns:{getHostRecordList:function(e,t){return d.Post("/Domains/Dns/GetHostRecordList",{gridStateModel:e,domainName:t})},addHostRecord:function(e,t,n){return d.Post("/Domains/Dns/SaveHostRecord",{model:e,domainName:t,isAddNewProcess:n})},parkingPageAddHostRecord:function(e){return d.Post("/Domains/Dns/ParkingPageCreateHostRecord",{domainName:e})},editHostRecord:function(e,t){return d.Post("/Domains/Dns/EditHostRecord",{hostID:e,domainName:t})},getDisableDDNSHostRecord:function(e){return d.Post("/Domains/Dns/GetDisabledDDNSRecordList",{domainName:e})},enableDDNSHostRecord:function(e,t){return d.Post("/Domains/Dns/EnabledDDNSRecord",{hostId:e,domainName:t})},getNameServers:function(e){return d.Post("/Domains/Dns/GetNameServer",{domainName:e})},setNameServers:function(e,t,n){return d.Post("/Domains/DomainDetails/SetNameServers",{nameServersList:e,dnsType:t,domainName:n})},getDynamicRecords:function(e,t){return d.Post("/Domains/Dns/GetDynamicDNS",{domainName:e,isForceSync:t})},resetDnsPassword:function(e){return d.Post("/Domains/Dns/ResetDNSPassword",{domainName:e})},RemoveARecord:function(e,t,n,a){return d.Post("/Domains/Dns/RemoveARecord",{removeStatus:e,hostId:t,domainName:n,recordType:a})},getEmailForwardingDefaultList:function(e,t){return d.Post("/Domains/Dns/GetEmailForwardingDefaultList",{gridStateModel:e,domainName:t})},turningOnOrOffHostRecords:function(e,t,n){return d.Post("/Domains/Dns/SetHostStatus",{hostId:e,isActive:t,domainName:n})},removeHostRecord:function(e,t,n){return d.Post("/Domains/Dns/RemoveHostRecord",{hostId:e,recordType:t,domainName:n})},parkingPageRemoveHostRecord:function(e,t){return d.Post("/Domains/Dns/ParkingPageRemoveHostRecord",{hostId:e,domainName:t})},getInfoList:function(e,t,n){return d.Post("/Domains/Dns/GetInfoResult",{gridStateModel:e,domainName:t,searchKey:n})},NSBulkActionDelete:function(e,t){return d.Post("/Domains/Dns/BulkDelete",{domainName:e,nameServers:t})},getNameServerInfo:function(e,t){return d.Post("/Domains/Dns/NammeServerGetInfo",{domainName:e,nameServer:t})},updateNameServerInfo:function(e,t,n,a){return d.Post("/Domains/Dns/NameServerUpdate",{domainName:e,nameServer:t,oldIp:n,newIp:a})},createNameserver:function(e,t,n){return d.Post("/Domains/Dns/AddNameservers/Create",{domainname:e,host:t,ip:n})},getDomainAdvancedDNSDetails:function(e){return d.Get("/Domains/Dns/GetDomainAdvancedDNSDetails",{domainName:e})},setEmailType:function(e,t,n){return d.Post("/Domains/Dns/SetEmailType",{domainName:e,emailType:t,hostRecordList:JSON.parse(n)})},NameServerDelete:function(e,t){return d.Post("/Domains/Dns/NameServerDelete",{domainName:e,nameServers:t})},turnOffDns:function(e){return d.Post("/Domains/Dns/DynamicDNSDisable",{domainName:e})},turnOnDns:function(e){return d.Post("/Domains/Dns/DynamicDNSEnable",{domainName:e})},loadHostCount:function(e){return d.Post("/Domains/Dns/GetHostRecordLimit",{domainName:e})},getEmailSettingInfo:function(e){return d.Post("/Domains/Dns/GetEmailSettingInfo",{domainName:e})},removeDnsSecRecords:function(e,t,n){return d.Post("/Domains/Dns/RemoveDnsSecRecords",{domainName:e,isHosted:t,recordsToDel:n})}},emailRedirect:{getEmailForwarders:function(e,t){return d.Post("/Domains/GetDomainEmailForwarderDetails",{gridStateModel:e,domainName:t})},addForwarder:function(e,t,n){return d.Post("/Domains/AddForwarder",{domainName:e,mailBox:t,forwardTo:n})},editForwarder:function(e,t,n,a,i,o){return d.Post("/Domains/EditForwarder",{domainName:e,mailBoxId:t,mailBox:n,forwardTo:a,oldMailBox:i,oldForwardTo:o})},removeForwarder:function(e){return d.Post("/Domains/DeleteForwarder",{model:e})},setBulkDnsType:function(e){return d.Post("/Domains/SetBulkDnsType",{domainNames:e})},setBulkEmailType:function(e){return d.Post("/Domains/SetBulkEmailType",{domainNames:e})},setBulkEmailRedirect:function(e,t,n){return d.Post("/Domains/SetBulkEmailRedirect",{domainNames:e,forwarderNames:t,destinationEmails:n})},saveBulkEmailForwarders:function(e,t,n,a){return d.Post("/Domains/domainlist/Emailforwardingbulkactiondone",{selectedDomains:e,mailboxNames:t,forwardToList:n,EmailForwardingConformation:a})}},domainDetails:{changeForwardedEmailAddress:function(e,t,n){return d.Post("/Domains/DomainDetails/ChangeForwardedEmailAddress",{domainName:e,slotId:t,forwardedEmailAddressType:n})},setEmailRefreshDuration:function(e,t,n){return d.Post("/Domains/DomainDetails/SetEmailRefreshDuration",{domainName:e,slotId:t,duration:n})},changeWhoIsGuardEmailAddress:function(e,t){return d.Post("/Domains/DomainDetails/ChangeWhoIsGuardEmailAddress",{domainName:e,slotId:t})},getDomainDetails:function(e){return d.Get("/Domains/DomainDetails/GetDomainDetails",{domainName:e})},getDomainDetailsTabOverView:function(e){return d.Get("/Domains/DomainDetails/GetDomainDetailsTabOverView",{domainName:e})},getWhoisDetails:function(e){return d.Get("/Domains/DomainDetails/GetWhoisDetails",{domainName:e})},setWhoisGuardStatustoSwitchOnorOff:function(e,t,n,a,i){return d.Post("/Domains/DomainDetails/SetWhoIsGuardStatus",{domainName:e,whoisguardId:t,whoisguardEnabled:n,forwardedToEmail:a,forwardedEmailType:i})},resendNotificationEmail:function(e){return d.Post("/Domains/DomainDetails/ResendNotification",{domainName:e})},getUrlForwardingInfo:function(e){return d.Get("/Domains/DomainDetails/GetUrlForwardingInfo",{domainName:e})},resolveConflictChangeDns:function(e,t,n){return d.Post("/Domains/DomainDetails/ResolveConflictChangeDns",{domainName:e,isUsingCustomMXRecords:t,isUsingCustomDNS:n})},resolveConflictSetEmailType:function(e,t){return d.Post("/Domains/DomainDetails/ResolveConflictSetEmailType",{domainName:e,emailType:t})},getEmailForwardingInfo:function(e){return d.Get("/Domains/DomainDetails/GetEmailForwardingInfo",{domainName:e})},IsManagerHasRightsToPerformThisAction:function(e,t){return d.Post("/Domains/DomainDetails/CheckManagerRights",{domainName:e,editCapabilityType:t})},GetContactFreeze:function(e){return d.Post("/Domains/DomainDetails/GetContactFreeze",{domainName:e})}},domainAppsDetails:{getDomainAppsDetails:function(e){return d.Get("/Domains/DomainDetails/GetAppsDetails",{domainName:e})}},password:{reset:function(e,t,n){return d.Post("/ResetPassword/Reset",{resetType:e,resetKey:t,captchaResponse:n})},verifyReCaptcha:function(e,t){return d.Post("/ResetPassword/VerifyCatcha",{challenge:e,response:t})},showCaptcha:function(){return d.Post("/ResetPassword/ShowCatcha")}},domainSetBulkDns:{bulkDnsSetDomainDnsHost:function(e,t,n,a,i,o){var s={};if(s.MailSettingType=i.MailSettingType,s.MailsettingRecords=[],null!=i.MailsettingRecords)for(indexValue=0;indexValue<i.MailsettingRecords.length;indexValue++){var r={};r.RecordName=i.MailsettingRecords[indexValue].RecordName,r.HostName=i.MailsettingRecords[indexValue].HostName.toLowerCase(),null!=i.MailsettingRecords[indexValue].MailServer&&(r.MailServer=i.MailsettingRecords[indexValue].MailServer.toLowerCase()),r.Priority=i.MailsettingRecords[indexValue].Priority,r.TTL=i.MailsettingRecords[indexValue].TTL,r.Target=i.MailsettingRecords[indexValue].Target,s.MailsettingRecords.push(r)}JSON.stringify(i);return d.Post("/Domains/domainlist/bulksetdnshostsubmit",{domainList:e,optionSelected:t,dnsServerConfiguration:n,hostRecords:a,mailSettings:s,isEmailNotifyEnabled:o})}},domainAdvancedDNS:{getAdvancedDnsInfo:function(e,t){return d.Get("/Domains/dns/GetAdvancedDnsInfo",{domainName:e,fillTransferInfo:t})},getDefaultEmailProviderRecords:function(){return d.Get("/Domains/dns/GetDefaultEmailProviderRecords")},removeDomainDnsRecord:function(e,t,n){return d.Post("/Domains/dns/RemoveDomainDnsRecord",{hostId:e,recordType:t,domainName:n})},addOrUpdateHostRecord:function(e,t){return d.Post("/Domains/dns/AddOrUpdateHostRecord",{model:t,domainName:e})},getAdvancedDnsRecordTemplatePath:"/Domains/dns/GetAdvancedDnsRecordTemplate",getActiveDnsTemplates:function(e){return d.Get("/Domains/dns/GetActiveDnsTemplates?domainName="+e)},nameServerAdd:function(e){return d.Post("/Domains/dns/AddNameservers/Create",{model:e})},updateDnsSecRecord:function(e,t,n,a){return d.Post("/Domains/Dns/UpdateDnsSecRecord",{domainName:e,isHosted:t,oldRecord:n,newRecord:a})},addDnsSecRecords:function(e,t,n){return d.Post("/Domains/dns/AddDnsSecRecords",{domainName:e,isHosted:t,recordsToAdd:n})},removeDomainDnsSecRecords:function(e,t,n){return d.Post("/Domains/dns/RemoveDnsSecRecords",{domainName:e,isHosted:t,recordsToDel:n})},enableDomainDnsSec:function(e,t){return d.Post("/Domains/dns/EnableDnsSec",{domainName:e,isEnable:t})},getDnsSecRecords:function(e,t){return d.Post("/Domains/dns/GetDnsSecRecords",{domainName:e,isHosted:t})},applyDnsTemplate:function(e,t){return d.Post("/Domains/dns/ApplyDnsTemplate",{domainName:e,templateKey:t})},nameServerSearch:function(e,t,n){return d.Post("/Domains/dns/GetInfoResult",{gridStateModel:e,domainName:t,searchKey:n})},nameServerUpdate:function(e,t,n,a){return d.Post("/Domains/dns/NameServerUpdate",{domainName:e,nameServer:t,oldIp:n,newIp:a})},nameServerDelete:function(e,t){return d.Post("/Domains/dns/NameServerDelete",{domainName:e,Nameservers:t})},turnOffDns:function(e){return d.Post("/Domains/Dns/DynamicDNSDisable",{domainName:e})},turnOnDns:function(e){return d.Post("/Domains/Dns/DynamicDNSEnable",{domainName:e})},getDynamicRecords:function(e){return d.Post("/Domains/Dns/GetDynamicDNS",{domainName:e,isForceSync:!1})},resetDnsPassword:function(e){return d.Post("/Domains/Dns/ResetDNSPassword",{domainName:e})},updateEmailType:function(e,t,n){return d.Post("/Domains/Dns/UpdateEmailType",{domainName:e,emailType:t,hostRecordList:n})},getAdvancedDNSAddUpdateRecordModal:"/Domains/Dns/GetAdvancedDNSAddUpdateRecordModal",getAdvancedDNSDnsSecAddUpdateRecordModal:"/Domains/Dns/GetAdvancedDNSDnsSecAddUpdateRecordModal",getAdvancedDNSUpdatePersonalDnsServerModal:"/Domains/Dns/GetAdvancedDNSUpdatePersonalDnsServerModal",addOrUpdateDomainRedirectRecord:function(e,t,n,a){return d.Post("/Domains/dns/AddOrUpdateDomainRedirectRecord",{domainName:e,hostId:t,sourceURl:n,destinationURL:a})},deleteParkingRecords:function(e,t){return d.Post("/Domains/Dns/DeleteParkingRecords",{domainName:e,recordTypes:t})}},cart:{getItems:function(){return d.Get("/ShoppingCart")},domainsRenew:function(e){return d.Post("/ShoppingCart/RenewDomains",{Domains:e})},productsRenew:function(e){return d.Post("/ShoppingCart/RenewProducts",{Products:e})}},pricing:{getHostingRenewPrice:function(e){return d.Get("/Prices/getHostingRenewPrice",{packageId:e})},getPremiumDomainPrice:function(e){return d.Get("/Prices/GetPremiumDomainRenewPrice",{domainName:e})}}}}]),app.factory("httpService",["$http","$q","$cookies",function(l,d,e){return{Get:function(e,t){return n="GET",a=e,i=t,o=d.defer(),l("GET"==n?{method:n,url:a,params:i}:{method:n,url:a,data:i}).success(function(e,t,n,a){o.resolve(e)}).error(function(e,t,n,a){var i={Msg:500==t?"Internal Server Error":"",Result:null,Error:!0,ErrorStatus:t};o.resolve(i)}),o.promise;var n,a,i,o},Post:function(e,t,n){return a="POST",i=e,o=t,s=n,r=d.defer(),null!=(c=ncCompliance.getToket())&&c.value&&(l.defaults.headers.common[c.tokenName]=c.value),l({method:a,url:i,data:o,contentType:"application/json; charset=utf-8",withCredentials:s}).success(function(e,t,n,a){r.resolve(e)}).error(function(e,t,n,a){var i={Msg:500==t?"Internal Server Error":"",Result:null,Error:!0,ErrorStatus:t};r.resolve(i)}),r.promise;var a,i,o,s,r,c}}}]),app.service("ncCollection",[function(){return{chunk:function(e,t){t=Math.max(t,0);var n=e?e.length:0;if(!n||t<1)return[];var a=0,i=t,o=0,s=Array(Math.ceil(n/t));for(;a<n;)i=a+t,s[o++]=Array.prototype.slice.call(e,a,i),a=i;return s}}}]),app.service("ncLocation",[function(){"use strict";return{getHash:function(){var e=window.location;return e.hash&&e.hash.replace(/^#\//,"")},setHash:function(e){window.location.hash="#/"+e}}}]),app.factory("ncTableParser",[function(){var r,a,c=function(e){for(var t=r[e[0]],n={},a=1;a<t.length;a++)if(null!=e[a]){var i=t[a];if(i.Element&&"object"==i.Element.Type){n[i.Field]=[];for(var o=0;o<e[a].length;o++)n[i.Field].push(c(e[a][o]))}else if("bool"==i.Type)n[i.Field]=1==e[a];else if("dic"==i.Type)if(n[i.Field]={},"object"!=i.valueOf.Type)for(var s=0;s<e[a].length;s++)n[i.Field][e[a][s][0]]=e[a][s][1];else for(s=0;s<e[a].length;s++)n[i.Field][e[a][s][0]]=c(e[a][s][1]);else if("array"==i.Type){n[i.Field]=[];for(o=0;o<e[a].length;o++)n[i.Field].push(e[a][o])}else n[i.Field]=e[a]}return n};return function(e){a=e.Data,r=e.Metadata;for(var t=[],n=0;n<a.length;n++)t.push(c(a[n]));return t}}]),app.factory("notificationService",["$rootScope","$location","$window",function(s,n,e){var r={success:1e4,error:2e4};return{notificationTimeLine:r,instance:function(){function e(t,i){return{add:function(e,n){null==n.isAutoHide&&(n.isAutoHide=!0),null==n.hasClose&&(n.hasClose=!0);var a={type:t,msg:e,isAutoHide:n.isAutoHide,hasClose:n.hasClose,senderScope:n.senderScope,setNewText:function(e){this.msg=e,angular.element("#"+this.notificationId).text(this.msg)},destroy:function(e){var t=i.indexOf(this);-1!=t&&i.splice(t,1),null!=n.onDestroyed&&n.onDestroyed(e),a=null},close:function(e){n.disableForUser&&n.disableForUser(),this.destroy(e)},notificationId:(new Date).getTime()};return i.push(a),s.$$phase||s.$apply(),1!=n.isAutoHide||t!=o.success&&t!=o.warning||t==o.loading||t==o.info||setTimeout(function(){s.$apply(function(){null!=a&&a.destroy()})},r.success),1==n.isAutoHide&&t==o.error&&setTimeout(function(){s.$apply(function(){null!=a&&a.destroy()})},r.error),a}}}var o={success:"success",warning:"warning",error:"error",loading:"loading",info:"info"},n={stuckNotifications:[],alerts:[]};return{alerts:{items:n.alerts,addLoading:e(o.loading,n.alerts).add,addWarning:e(o.warning,n.alerts).add,addSuccess:e(o.success,n.alerts).add,addError:e(o.error,n.alerts).add,addInfo:e(o.info,n.alerts).add,clear:function(){n.alerts.forEach(function(e,t){n.alerts.splice(t,1)}),s.$$phase||s.$apply()}},stuckNotifications:{items:n.stuckNotifications,addLoading:e(o.loading,n.stuckNotifications).add,addWarning:e(o.warning,n.stuckNotifications).add,addSuccess:e(o.success,n.stuckNotifications).add,addError:e(o.error,n.stuckNotifications).add,addInfo:e(o.info,n.stuckNotifications).add,clear:function(){n.stuckNotifications.forEach(function(e,t){n.stuckNotifications.splice(t,1)}),s.$$phase||s.$apply()}},type:o}},getUrlNotificationKey:function(){var e,t=function(e){e=e.split("+").join(" ");for(var t,n={},a=/[?&]?([^=]+)=([^&]*)/g;t=a.exec(e);)n[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return n}(document.location.search);return t.notificationKey&&history&&history.replaceState&&(e=function(e,t){var n=t.split("?")[0],a=[],i=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==i){for(var o=(a=i.split("&")).length-1;0<=o;--o)a[o].split("=")[0]===e&&a.splice(o,1);0<a.length&&(n+="?"+a.join("&"))}return n}("notificationKey",n.$$absUrl),n.$$absUrl=e,n.replace(),history.replaceState(null,"","")),t.notificationKey}}}]),app.service("popupWindow",["$modal","sslRepository","$window","$location",function(o,e,i,s){var t={isError:!1,Message:"",action:"",symantecCertType:""};function n(){i.localStorage.removeItem("isError"),i.localStorage.removeItem("Message"),i.localStorage.removeItem("action"),i.localStorage.removeItem("certType")}return{openPopupWindow:function(t,n,a,i){e.sslInfo.GetEquivalentComodoCertificateDetails(t.certificateType,t.validYears,t.sansQty).then(function(e){o.open({templateUrl:"/Domains/SSL/EquivalentComodoForSymantec",controller:"EquivalentComodoForSymantecCtrl",size:"lg",backdrop:"static",resolve:{symantecCertDetails:function(){return t},comodoDetails:function(){return e},actionName:function(){return n},symantecSunsetDate:function(){return a},siteServerNameUrl:function(){return i}}})})},replaceOrRefund:function(e,t,n){i.localStorage.setItem("isError",e.Error),i.localStorage.setItem("Message",e.Msg),i.localStorage.setItem("action",t),i.localStorage.setItem("certType",n)},replaceOrRefundResult:function(){return t.isError=i.localStorage.getItem("isError"),t.Message=i.localStorage.getItem("Message"),t.action=i.localStorage.getItem("action"),t.symantecCertType=i.localStorage.getItem("certType"),n(),t},redirectToPage:function(){var e=s.absUrl().split("/"),t=e[e.length-2],n=5<e.length?e[5]:e[e.length-1],a=e[e.length-1];""==e[e.length-1]&&(t=e[e.length-3],a=e[e.length-2]),"PRODUCTPAGE"!=n.toUpperCase()?"DOMAINLIST"==a.toUpperCase()?i.location.href="/domains/domainlist/":"APPS"==a.toUpperCase()?i.location.href="/domains/domaincontrolpanel/"+t+"/"+a:"SSLCERTIFICATES"==a.toUpperCase()?i.location.href="/productList/sslcertificates":"PRODUCTS"==a.toUpperCase()?i.location.href="/domains/expiringlist/#/products":i.location.href="/dashboard":i.location.href="/domains/ssl/productpage/"+e[6]+"/"+t+"/"+a},clear:n}}]),app.service("pricing",["httpRepository","bulkHelper",function(n,a){return{loadHostingRenewPrices:function(e,t){return a.waterfallAnPulse(e,function(e){return n.pricing.getHostingRenewPrice(e)},t)},loadPremiumDomainPrices:function(e,t){return a.waterfallAnPulse(e,function(e){return n.pricing.getPremiumDomainPrice(e)},t)}}}]),app.factory("sanitizeHtmlService",[function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return function(e){return String(e).replace(/[&<>"'\/]/g,function(e){return t[e]})}}]),app.factory("sellDomainRepository",["httpService",function(a){return{sellDomainInfo:{getSellDomainInfo:function(e){return a.Post("/domains/GetSellDomainInfo/",{mplistingid:e})},insertSellDomainInfo:function(e){return null!=e.SelectedCategory&&"[object Array]"===Object.prototype.toString.call(e.SelectedCategory)&&(e.SelectedCategory=e.SelectedCategory.join(",")),e.IsEditMode?a.Post("/domains/EditDomainOnMarketplaceListing/",{model:e}):a.Post("/domains/AddDomainToMarketplaceListing/",{model:e})},CancelMarketplace:function(e,t,n){return a.Post("/domains/DeleteDomainFromMarketplaceListing/",{password:e,listingId:t,domainName:n})}}}}]),app.factory("sslRepository",["httpService",function(o){return{sslInfo:{getSSLInfoSectionModelJSON:function(e,t){var n,a,i,o,s={};return s.UserName=e.UserName,s.Message=e.Message,s.ProviderName=e.ProviderName,s.Status=e.Status,s.CertificateId=e.CertificateId,s.CertificateType=e.CertificateType,s.CSR=e.CSR,s.APIParameterValue=e.APIParameterValue,s.ProviderChannel=e.ProviderChannel,s.OverRideProductName=e.OverRideProductName,s.MinYears=e.MinYears,s.MaxYears=e.MaxYears,s.IsDCVStepRequired=e.IsDCVStepRequired,s.ValidationType=e.ValidationType,s.IsDCVStepReadOnly=e.IsDCVStepReadOnly,s.ExpirationDateTime=e.ExpirationDateTime,s.IssuedDateTime=e.IssuedDateTime,s.Webserver=e.Webserver,s.ApproverEmail=e.PrimaryDomainDetail.ValidationValue,s.IsReseller=e.IsReseller,s.IsRenewalOrder=e.IsRenewalOrder,s.SSlType=e.SSlType,s.IsWildCard=e.IsWildCard,s.OrderId=e.OrderId,s.Years=e.Years,s.DnsNames=e.DnsNames,s.IsSan=e.IsSan,s.SanCount=e.SanCount,s.DnsApproverEmails=e.DnsApproverEmails,s.IsSanActivationWithSubDomainsOnly=e.IsSanActivationWithSubDomainsOnly,s.IsSanReissueEditWithSubDomainOnly=e.IsSanReissueEditWithSubDomainOnly,s.IsSanReissueRemoveAllowed=e.IsSanReissueRemoveAllowed,"VALIDATECSR"==t&&(s.PrimaryDomainDetail={},s.PrimaryDomainDetail.CommonName=e.PrimaryDomainDetail.CommonName,s.PrimaryDomainDetail.DomainName=e.PrimaryDomainDetail.DomainName,s.PrimaryDomainDetail.ValidationType=e.PrimaryDomainDetail.ValidationType,s.PrimaryDomainDetail.ValidationValue=e.PrimaryDomainDetail.ValidationValue),"VALIDATECSR"!=t&&(null!=e.SanDomainsDetail&&null!=e.SanDomainsDetail&&e.IsSan?(s.IsHttpDCVUsed=e.IsHttpDCVUsed,s.IsDNSDCVUsed=e.IsDNSDCVUsed):(s.IsHttpDCVUsed=e.PrimaryDomainDetail.IsHttpDCVUsed,s.IsDNSDCVUsed=e.PrimaryDomainDetail.IsDNSDCVUsed),null!=e.AdminContactDetails&&(n={},n=e.AdminContactDetails,s.AdminContactDetails=n),null!=e.TechContactDetails&&(a={},a=e.TechContactDetails,s.TechContactDetails=a),o={},o=e.CompanyContactDetails,s.CompanyContactDetails=o,e.IsCallbackContactDetailsRequired&&(i={},i=e.CallbackContactDetails,s.CallbackContactDetails=i)),s},getDNSNames:function(e){var t="",n="";if(null!=e.SanDomainsDetail&&null!=e.SanDomainsDetail)for(var a=0;a<e.SanDomainsDetail.length;a++)null!=e.SanDomainsDetail[a]&&(""==t?t=e.SanDomainsDetail[a].CommonName:""!=e.SanDomainsDetail[a].CommonName&&(t=t+","+e.SanDomainsDetail[a].CommonName),""==n?""!=e.SanDomainsDetail[a].ValidationValue&&null!=e.SanDomainsDetail[a].ValidationValue&&null!=e.SanDomainsDetail[a].ValidationValue&&(n=e.SanDomainsDetail[a].ValidationValue):""!=e.SanDomainsDetail[a].ValidationValue&&null!=e.SanDomainsDetail[a].ValidationValue&&null!=e.SanDomainsDetail[a].ValidationValue&&(n=n+","+e.SanDomainsDetail[a].ValidationValue));return[t,n]},ParseCsr:function(e,t,n,a){return o.Post("/Domains/SSL/ParseCsr",{csr:e,certificateType:t,httpDCValidation:n,dnsDCValidation:a})},GetCountryName:function(e){return o.Post("/Domains/SSL/GetCountryName",{countryCode:e})},GetApproverEmailList:function(e,t,n){return o.Post("/Domains/SSL/GetApproverEmailList",{domainName:e,certificateType:t,sanIndex:n})},ValidateCsr:function(e){var t=this.getSSLInfoSectionModelJSON(e,"VALIDATECSR"),n=this.getDNSNames(e);return t.DnsNames=n[0],o.Post("/Domains/SSL/ValidateCSR",{model:t})},ActivateCertificate:function(e){var t,n,a,i=this.getSSLInfoSectionModelJSON(e,"ACTIVATION");return e.IsDCVStepRequired&&(n=(t=this.getDNSNames(e))[0],a=t[1],i.DnsNames=n,i.DnsApproverEmails=a),o.Post("/Domains/SSL/Confirmation",i)},GetNamecheapPrimaryContactDetails:function(){return o.Post("/Domains/SSL/GetNamecheapPrimaryContactDetails",{})},GetAddressInformation:function(){return o.Post("/Domains/SSL/GetAddressInformation",{})},RedirectProductPageJSON:function(e,t){return o.Get("/Domains/SSL/RedirectProductPageJSON/"+e,{successMessage:t})},ChangeDCVMethodError:function(e,t){return o.Get("/Domains/SSL/ChangeDCVMethodError/"+e+"/",{errorMsg:t})},ChangeDCVMethod:function(e){var t=parseInt(e.CertificateId),n=this.getDNSNames(e),a=n[0],i=n[1],i=""!=a&&null!=a&&""!=i&&null!=i?(a=e.PrimaryDomainDetail.CommonName+","+a,e.PrimaryDomainDetail.ValidationValue+","+i):(a=e.PrimaryDomainDetail.CommonName,e.PrimaryDomainDetail.ValidationValue);return o.Post("/Domains/SSL/ChangeDCVMethod/Confirmation/",{certificateId:t,dnsNames:a,dnsDCVMethods:i})},ValidateDCVStep:function(e){var t=JSON.stringify(e);JSON.stringify(e.SanDomainsDetail);return o.Post("/Domains/SSL/ValidateDcvStep/",{model:JSON.parse(t),activationType:""})},ProductPage:function(e){return o.Post("/Domains/SSL/ProductPage/"+e)},ValidateDomainInfo:function(e){return o.Post("/Domains/SSL/ValidateDomainInfo",{domainName:e})},GetEquivalentComodoCertificateDetails:function(e,t,n){return o.Get("/Domains/SSL/GetEquivalentComodoCertificateDetails/",{certificateType:e,year:t,sanCount:n})},ReplaceEquivalentComodoCertificateForSymantec:function(e,t,n,a){return o.Post("/Domains/SSL/ReplaceEquivalentComodoCertificateForSymantec/",{comodoCertType:e,year:t,symantecCertificateId:n,noOfSans:a})},GetRefundForSymantecCertificate:function(e){return o.Post("/Domains/SSL/GetRefundForSymantecCertificate/",{symantecCertificateId:e})}}}}]),app.factory("$templateCache",["$cacheFactory","$http","$injector","$q",function(e,o,s,t){function r(e){for(var t=0;t<l.length;t++)if(l[t].url==e)return l[t];return null}var c=e("templates"),l=[];return{remove:function(e){var t=r(e);null!=t&&l.slice(l.indexOf(t),1),c.remove(e)},get:function(t,e){var n=c.get(t);if(n)return n;var a=null==e?t:e,i=r(a);return null==i&&((i={}).promise=o.get(a).then(function(e){return s.get("$compile")(e.data),e}),i.url=a,l.push(i)),i.promise.then(function(e){return{status:e.status,fromCache:c.get(t),data:e.data,statusText:e.statusText,headers:e.headers}})},put:function(e,t){c.put(e,t)}}}]),app.service("tooltipService",["ncTooltipSettings","$timeout","$compile",function(o,e,s){return{renderOnDemand:function(n,a,e){var i=e.closest("div.responsive-tooltip");function t(){var e,t=i.find("[rel]").attr("rel");!t||(e=angular.element(document.getElementById(t.replace("toggle","tip"))))&&a.$evalAsync(function(){e.empty().append(n),s(e)(a),i.find("[rel]").attr("rendered",!0),i.children(".tooltip-toggle").trigger("mouseover")})}i.mouseenter(function(){if(i.find("[rel]").attr("rendered"))return;i.responsiveTooltip(o),setTimeout(t)})}}}]),app.service("urlConfiguration",function(){var n=this;angular.extend(n,{batchAddToCardUrl:"",cmsSiteUrl:""}),n.configureUrls=function(e){for(var t in e)e.hasOwnProperty(t)&&(null==n[t]&&console.warn('urlConfiguration does not contain key "'+t+'"'),n[t]=e[t])}}),app.controller("ChooseContactModalCtrl",["$scope","$modalInstance","httpRepository","pageHelper","$timeout","notificationService","$filter","$document",function(n,e,a,i,t,o,s,r){$("#maincontent").length&&$("#maincontent").removeClass("disabled-content async-processing"),n.cancelClick=function(){console.log("Dismiss Modal with model : "+n.modalpopupcontrollerValue),e.close("")},n.addressListItemsArray=0,n.IsItemChosen=!1,n.IsLoadingCompleted=!1,n.loadingNotification=new o.instance,n.SaveChanges=function(){null!=n.selectedaddress?n.frmEditAddonDomain.$invalid||e.close(n.selectedAddressList):n.IsItemChosen=!1},n.selectedaddress="Primary Address",n.BindAddressNameInDropdown=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;n.IsItemChosen=!0,n.loadingNotification.alerts.clear(),t.activeNotification=n.loadingNotification.stuckNotifications.addLoading("<B>Loading Addressess.</B> Please wait..",!1),a.UserAddressInfo.GetUserAddressDetails().then(function(e){t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},onSuccess:function(e){n.addressListItemsArray=[],n.addressListItemsArray.push(e.Result.PrimaryAddressDetails);for(var t=0;t<e.Result.AlternativeAddressDetails.length;t++)n.addressListItemsArray.push(e.Result.AlternativeAddressDetails[t]);n.IsLoadingCompleted=!0,this.instance.asyncStatus(i.AsyncStatus.Active)},onActive:function(e){}}),n.selectedAddressList={FirstName:"",LastName:"",Organization:"",Address1:"",Address2:"",Country:"",Phone:"",PhoneExt:"",Fax:"",FaxExt:"",EmailAddress:"",StateProvince:"",City:"",PostalCode:"",JobTitle:""},n.DisplayFirstName="",n.DisplayLastName="",n.DisplayOrganization="",n.DisplayAddress1="",n.DisplayAddress2="",n.DisplayCountry="",n.DisplayPhone="",n.DisplayPhoneExt="",n.DisplayFax="",n.DisplayFaxExt="",n.DisplayEmailAddress="",n.DisplayStateProvince="",n.DisplayCity="",n.DisplayPostalCode="",n.DisplayCityStatePostalCode="",n.addressChange=function(e){for(var t=0;t<n.addressListItemsArray.length;t++)if(n.addressListItemsArray[t].AddressName.trim()==e.trim()){""!=n.addressListItemsArray[t].Address.FirstName&&null!=n.addressListItemsArray[t].Address.FirstName&&null!=n.addressListItemsArray[t].Address.FirstName?n.DisplayFirstName=n.addressListItemsArray[t].Address.FirstName.trim():n.DisplayFirstName="",""!=n.addressListItemsArray[t].Address.LastName&&null!=n.addressListItemsArray[t].Address.LastName&&null!=n.addressListItemsArray[t].Address.LastName?n.DisplayLastName=n.addressListItemsArray[t].Address.LastName.trim():n.DisplayLastName="",""!=n.addressListItemsArray[t].Address.Organization&&null!=n.addressListItemsArray[t].Address.Organization&&null!=n.addressListItemsArray[t].Address.Organization?n.DisplayOrganization=n.addressListItemsArray[t].Address.Organization.trim():n.DisplayOrganization="",""!=n.addressListItemsArray[t].Address.Address1&&null!=n.addressListItemsArray[t].Address.Address1&&null!=n.addressListItemsArray[t].Address.Address1?n.DisplayAddress1=n.addressListItemsArray[t].Address.Address1.trim():n.DisplayAddress1="",""!=n.addressListItemsArray[t].Address.Address2&&null!=n.addressListItemsArray[t].Address.Address2&&null!=n.addressListItemsArray[t].Address.Address2?n.DisplayAddress2=n.addressListItemsArray[t].Address.Address2.trim():n.DisplayAddress2="",""!=n.addressListItemsArray[t].Address.Country&&null!=n.addressListItemsArray[t].Address.Country&&null!=n.addressListItemsArray[t].Address.Country?n.DisplayCountry=n.addressListItemsArray[t].Address.Country.trim():n.DisplayCountry="",""!=n.addressListItemsArray[t].Address.Phone&&null!=n.addressListItemsArray[t].Address.Phone&&null!=n.addressListItemsArray[t].Address.Phone?n.DisplayPhone=n.addressListItemsArray[t].Address.Phone.trim():n.DisplayPhone="",""!=n.addressListItemsArray[t].Address.PhoneExt&&null!=n.addressListItemsArray[t].Address.PhoneExt&&null!=n.addressListItemsArray[t].Address.PhoneExt?n.DisplayPhoneExt=n.addressListItemsArray[t].Address.PhoneExt.trim():n.DisplayPhoneExt="",""!=n.addressListItemsArray[t].Address.Fax&&null!=n.addressListItemsArray[t].Address.Fax&&null!=n.addressListItemsArray[t].Address.Fax?n.DisplayFax=n.addressListItemsArray[t].Address.Fax.trim():n.DisplayFax="",""!=n.addressListItemsArray[t].Address.FaxExt&&null!=n.addressListItemsArray[t].Address.FaxExt&&null!=n.addressListItemsArray[t].Address.FaxExt?n.DisplayFaxExt=n.addressListItemsArray[t].Address.FaxExt.trim():n.DisplayFaxExt="",""!=n.addressListItemsArray[t].Address.EmailAddress&&null!=n.addressListItemsArray[t].Address.EmailAddress&&null!=n.addressListItemsArray[t].Address.EmailAddress?n.DisplayEmailAddress=n.addressListItemsArray[t].Address.EmailAddress.trim():n.DisplayEmailAddress="",""!=n.addressListItemsArray[t].Address.StateProvince&&null!=n.addressListItemsArray[t].Address.StateProvince&&null!=n.addressListItemsArray[t].Address.StateProvince?n.DisplayStateProvince=n.addressListItemsArray[t].Address.StateProvince.trim():n.DisplayStateProvince="",""!=n.addressListItemsArray[t].Address.City&&null!=n.addressListItemsArray[t].Address.City&&null!=n.addressListItemsArray[t].Address.City?n.DisplayCity=n.addressListItemsArray[t].Address.City.trim():n.DisplayCity="",""!=n.addressListItemsArray[t].Address.PostalCode&&null!=n.addressListItemsArray[t].Address.PostalCode&&null!=n.addressListItemsArray[t].Address.PostalCode?n.DisplayPostalCode=n.addressListItemsArray[t].Address.PostalCode.trim():n.DisplayPostalCode="",""!=n.DisplayStateProvince&&""!=n.DisplayPostalCode?n.DisplayCityStatePostalCode=n.DisplayCity+", "+n.DisplayStateProvince+", "+n.DisplayPostalCode:""!=n.DisplayStateProvince&&""==n.DisplayPostalCode?n.DisplayCityStatePostalCode=n.DisplayCity+", "+n.DisplayStateProvince:""==n.DisplayStateProvince&&""!=n.DisplayPostalCode?n.DisplayCityStatePostalCode=n.DisplayCity+", "+n.DisplayPostalCode:n.DisplayCityStatePostalCode=n.DisplayCity,$.ajax({type:"GET",contentType:"application/json; charset=utf-8",cache:!1,async:!1,url:"/domains/GetFormattedPhoneAndFax",data:{CountryCode:encodeURI(n.DisplayCountry),Fax:encodeURI(n.DisplayFax),FaxExt:encodeURI(n.DisplayFaxExt),Phone:encodeURI(n.DisplayPhone),PhoneExt:encodeURI(n.DisplayPhoneExt)},success:function(e){n.DisplayPhone=e.split("~")[0],n.DisplayFax=e.split("~")[1],n.DisplayCountry=e.split("~")[2]},error:function(e){alert("Error:"+e)}}),n.selectedAddressList={FirstName:n.addressListItemsArray[t].Address.FirstName,LastName:n.addressListItemsArray[t].Address.LastName,Organization:n.addressListItemsArray[t].Address.Organization,Address1:n.addressListItemsArray[t].Address.Address1,Address2:n.addressListItemsArray[t].Address.Address2,Country:n.addressListItemsArray[t].Address.Country,Phone:n.addressListItemsArray[t].Address.Phone,PhoneExt:n.addressListItemsArray[t].Address.PhoneExt,Fax:n.addressListItemsArray[t].Address.Fax,FaxExt:n.addressListItemsArray[t].Address.FaxExt,EmailAddress:n.addressListItemsArray[t].Address.EmailAddress,StateProvince:n.addressListItemsArray[t].Address.StateProvince,City:n.addressListItemsArray[t].Address.City,PostalCode:n.addressListItemsArray[t].Address.PostalCode,JobTitle:n.addressListItemsArray[t].Address.JobTitle};break}}}]),app.controller("ChooseExtendedAttributeCtrl",["$scope","$modalInstance","httpRepository","pageHelper","$timeout","notificationService","$filter","$document","sectionViewModal",function(t,e,n,a,i,o,s,r,c){t.NoSearchOption={minimumResultsForSearch:-1},t.pageNotification=new o.instance,t.DomainContactsSingleViewModel=c,t.DomainContactsSingleViewModel.DomainContactSectionViewModel=c.ContactDetails,t.DomainContactSectionViewModel=c.ContactDetails,t.ShowLoadPanel=!1,t.cancelClick=function(){console.log("Dismiss Modal with model : "+t.modalpopupcontrollerValue),e.close("cancel")};var l=t.DomainContactsSingleViewModel.DomainName,d=t.DomainContactsSingleViewModel.DomainName.indexOf(".");function u(e){t.ukCompanyIDVisible="LTD"==e||"PLC"==e||"LLP"==e||"RCHAR"==e||"SCH"==e;-1!=="[IND][FIND]".indexOf("["+e+"]")?t.ukWhoisVisible=!0:t.ukWhoisVisible=!1}t.Tld=l.substr(d+1),t.IsItemChosen=!1,t.IsLoadingCompleted=!1,t.loadingNotification=new o.instance,t.selectedExtendedAttribute={},t.ExtendedAttribute={XXXExtendedAttributesInfo:{MemberId:"",Resolving:""},CAExtendedAttributesInfo:{CIRAWhois:"",CIRALanguage:"",CIRAType:""},USExtendedAttributesInfo:{RegistrantNexus:"",RegistrantNexusCountry:"",RegistrantPurpose:""},TelExtendedAttributesInfo:{WhoisType:"",IsPublish:!0},NUExtendedAttributesInfo:{OrgNo:"",VatNo:""},UkExtendedAttributesInfo:{UKLegalType:"",Registeredfor:"",CompanyID:"",RegOptOut:""},COUKExtendedAttributesInfo:{UKLegalType:"",Registeredfor:"",CompanyID:"",RegOptOut:""},MEUKExtendedAttributesInfo:{UKLegalType:"",Registeredfor:"",CompanyID:"",RegOptOut:""},ORGUKExtendedAttributesInfo:{UKLegalType:"",Registeredfor:"",CompanyID:"",RegOptOut:""}},t.SaveChanges=function(){null!=t.selectedExtendedAttribute?t.ctrlFrmPopUpExtended.frmEditExtendedAttribute.$invalid||(t.ShowLoadPanel=!0,n.domainInfo.updateSingleContact(JSON.stringify(t.DomainContactsSingleViewModel),JSON.stringify(t.ExtendedAttribute)).then(function(e){e.Error?(t.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!0}),t.ShowLoadPanel=!1):(t.ShowLoadPanel=!1,window.location.href="/Domains/DomainControlPanel/"+t.DomainContactsSingleViewModel.DomainName+"/domain")})):t.IsItemChosen=!1},t.asiaDetailDivVisible=!1,t.asiaOtherLegalTypeVisible=!1,t.asiaOtherIdentFormVisible=!1,t.ukWhoisVisible=!1,t.ukCompanyIDVisible=!1,t.usNexusCountryVisible=!1,t.caCiraWhoisVisible=!1,"uk"==t.Tld?(t.ExtendedAttribute.UkExtendedAttributesInfo=t.DomainContactSectionViewModel.ExtendedAttributesInfo,t.ukRegistrantContactList=new a.AsyncStateBehavior({constructor:function(){var t=this.instance;n.domainInfo.LoadUkRegistrantContactList("uk").then(function(e){t.asyncStatus(0==e.Error?a.AsyncStatus.Success:a.AsyncStatus.Error,e)})},onSuccess:function(e){t.ukRegistrantContactList=e.Result},onError:function(e){}}),u(t.ExtendedAttribute.UkExtendedAttributesInfo.UKLegalType)):"co.uk"==t.Tld?(t.ExtendedAttribute.COUKExtendedAttributesInfo=t.DomainContactSectionViewModel.ExtendedAttributesInfo,t.coukRegistrantContactList=new a.AsyncStateBehavior({constructor:function(){var t=this.instance;n.domainInfo.LoadUkRegistrantContactList("couk").then(function(e){t.asyncStatus(0==e.Error?a.AsyncStatus.Success:a.AsyncStatus.Error,e)})},onSuccess:function(e){t.coukRegistrantContactList=e.Result},onError:function(e){}}),u(t.ExtendedAttribute.COUKExtendedAttributesInfo.UKLegalType)):"me.uk"==t.Tld?(t.ExtendedAttribute.MEUKExtendedAttributesInfo=t.DomainContactSectionViewModel.ExtendedAttributesInfo,t.meukRegistrantContactList=new a.AsyncStateBehavior({constructor:function(){var t=this.instance;n.domainInfo.LoadUkRegistrantContactList("meuk").then(function(e){t.asyncStatus(0==e.Error?a.AsyncStatus.Success:a.AsyncStatus.Error,e)})},onSuccess:function(e){t.meukRegistrantContactList=e.Result},onError:function(e){}}),u(t.ExtendedAttribute.MEUKExtendedAttributesInfo.UKLegalType)):"org.uk"==t.Tld?(t.ExtendedAttribute.ORGUKExtendedAttributesInfo=t.DomainContactSectionViewModel.ExtendedAttributesInfo,t.orgukRegistrantContactList=new a.AsyncStateBehavior({constructor:function(){var t=this.instance;n.domainInfo.LoadUkRegistrantContactList("orguk").then(function(e){t.asyncStatus(0==e.Error?a.AsyncStatus.Success:a.AsyncStatus.Error,e)})},onSuccess:function(e){t.orgukRegistrantContactList=e.Result},onError:function(e){}}),u(t.ExtendedAttribute.ORGUKExtendedAttributesInfo.UKLegalType)):"tel"==t.Tld?(t.ExtendedAttribute.TelExtendedAttributesInfo=t.DomainContactSectionViewModel.ExtendedAttributesInfo,t.telWhoisType={Natural:"Natural",Legal:"Legal"}):"ca"==t.Tld?(t.ExtendedAttribute.CAExtendedAttributesInfo=t.DomainContactSectionViewModel.ExtendedAttributesInfo,t.caRegistrantContactList=new a.AsyncStateBehavior({constructor:function(){var t=this.instance;n.domainInfo.LoadCanadaRegistrantContactList().then(function(e){t.asyncStatus(0==e.Error?a.AsyncStatus.Success:a.AsyncStatus.Error,e)})},onSuccess:function(e){t.caRegistrantContactList=e.Result},onError:function(e){}}),t.caLanguagetList=new a.AsyncStateBehavior({constructor:function(){var t=this.instance;n.domainInfo.GetCanadaRegistrantLanguage().then(function(e){t.asyncStatus(0==e.Error?a.AsyncStatus.Success:a.AsyncStatus.Error,e)})},onSuccess:function(e){t.caLanguagetList=e.Result},onError:function(e){}}),t.caCiraWhois=[{name:"No",value:"Full"},{name:"Yes",value:"Private"}],-1!=="[CCT][RES][ABO][LGR]".indexOf("["+t.ExtendedAttribute.CAExtendedAttributesInfo.CIRAType+"]")?t.caCiraWhoisVisible=!0:t.caCiraWhoisVisible=!1):"us"==t.Tld?(t.ExtendedAttribute.USExtendedAttributesInfo=t.DomainContactSectionViewModel.ExtendedAttributesInfo,t.usRegistrantNexusList=new a.AsyncStateBehavior({constructor:function(){var t=this.instance;n.domainInfo.GetUSRegistrantNexusList().then(function(e){t.asyncStatus(0==e.Error?a.AsyncStatus.Success:a.AsyncStatus.Error,e)})},onSuccess:function(e){t.usRegistrantNexusList=e.Result},onError:function(e){e.Result}}),t.usRegistrantNexusCountryList=new a.AsyncStateBehavior({constructor:function(){var t=this.instance;n.domainInfo.GetUSRegistrantNexusCountryCodeList().then(function(e){t.asyncStatus(0==e.Error?a.AsyncStatus.Success:a.AsyncStatus.Error,e)})},onSuccess:function(e){t.usRegistrantNexusCountryList=e.Result},onError:function(e){}}),t.usRegistrantPurposeList=new a.AsyncStateBehavior({constructor:function(){var t=this.instance;n.domainInfo.GetRegistrantPurposeList().then(function(e){t.asyncStatus(0==e.Error?a.AsyncStatus.Success:a.AsyncStatus.Error,e)})},onSuccess:function(e){t.usRegistrantPurposeList=e.Result},onError:function(e){}}),-1!=="[C31][C32]".indexOf("["+t.ExtendedAttribute.USExtendedAttributesInfo.RegistrantNexus+"]")?t.usNexusCountryVisible=!0:t.usNexusCountryVisible=!1):"xxx"==t.Tld&&(t.ExtendedAttribute.XXXExtendedAttributesInfo=t.DomainContactSectionViewModel.ExtendedAttributesInfo),t.ukWhois=[{name:"No",value:"n"},{name:"Yes",value:"y"}],t.asiaContactTypes=[{name:"CED",value:"CED"},{name:"CEA",value:"CEA"}],t.TelContactTypeChange=function(e){"Natural"!==e&&(t.ExtendedAttribute.TelExtendedAttributesInfo.IsPublish=!0)},t.AsiaContactTypeChange=function(e){t.asiaDetailDivVisible="CED"==e},t.AsiaLegalTypeChange=function(e){t.asiaOtherLegalTypeVisible="Other"==e},t.AsiaIdentFormChange=function(e){t.asiaOtherIdentFormVisible="Other"==e},t.UKLegalTypeChange=function(e){ukLegalType=e.UKLegalType,"LTD"!=ukLegalType&&"PLC"!=ukLegalType&&"LLP"!=ukLegalType&&"RCHAR"!=ukLegalType&&"SCH"!=ukLegalType?(t.ukCompanyIDVisible=!1,e.CompanyID=null):t.ukCompanyIDVisible=!0;-1!=="[IND][FIND]".indexOf("["+ukLegalType+"]")?t.ukWhoisVisible=!0:t.ukWhoisVisible=!1},t.CALegalTypeChange=function(e){-1!=="[CCT][RES][ABO][LGR]".indexOf("["+e+"]")?(t.caCiraWhoisVisible=!0,t.ExtendedAttribute.CAExtendedAttributesInfo.CIRAWhois=t.caCiraWhois[1].value):(t.caCiraWhoisVisible=!1,t.ExtendedAttribute.CAExtendedAttributesInfo.CIRAWhois=t.caCiraWhois[0].value)},t.USNexusChange=function(e){-1!=="[C31][C32]".indexOf("["+e+"]")?t.usNexusCountryVisible=!0:t.usNexusCountryVisible=!1}}]),app.controller("configurationController",["urlConfiguration",function(t){angular.extend(this,{configUrls:function(e){t.configureUrls(e)}})}]),app.controller("confirmNmPasswordCtrl",["$scope","$modalInstance","$document","modalTitle","modalIntro","confirmFn","pageHelper","notificationService","alertMsgs",function(i,n,e,t,a,o,s,r,c){i.modalTitle=t,i.modalIntro=a,i.pageHelper=s,i.startAutoFocus=!0;var l=ErrorMessageRes;i.$watch("nmPassword",function(e,t){if(e!==t){var n,a=s.Validation.namecheapPassword(e);for(n in a)i.confirmNmPasswordForm.nmPassword["errorMsg_"+n]=a[n].arg,i.confirmNmPasswordForm.nmPassword.$setValidity(n,a[n].isValid);i.confirmNmPasswordForm.nmPassword.$setValidity("invalidPassword",!0)}}),i.modalBehavior=new s.AsyncStateBehavior({constructor:function(){var e=this.instance;if(e.activeNotification=new r.instance,e.cancel=function(){n.dismiss("cancel")},e.confirm=function(){i.confirmNmPasswordForm.$valid?(e.asyncStatus(s.AsyncStatus.Loading),o(i.nmPassword,i.modalBehavior)):(angular.forEach(i.confirmNmPasswordForm.$error.required,function(e){e.$setDirty()}),e.showErrors=!0,msg=l.error_FormIsNotValid,e.activeNotification.alerts.clear(),e.activeNotification.alerts.addError(msg,{hasClose:!0,isAutoHide:!0}),e.asyncStatus(s.AsyncStatus.Active))},null!=c){e.showErrors=!0;for(var t=0;t<c.length;t++)e.activeNotification.alerts.items.push(c[t])}e.asyncStatus(s.AsyncStatus.Active)},onSuccess:function(e){var t=this.instance;t.showErrors=!1,n.close("yes"),t.asyncStatus(s.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance.showErrors=!1},onError:function(e){var t=this.instance;if(t.activeNotification.alerts.clear(),null!=e.Errors[0])switch(e.Errors[0].ErrorFullCode){case 1011109:i.confirmNmPasswordForm.nmPassword.$setValidity("invalidPassword",!1);break;case 1017411:i.confirmNmPasswordForm.nmPassword.$setValidity("lockedAccount",!1);break;default:t.showErrors=!0,t.activeNotification.alerts.clear(),t.activeNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}else t.showErrors=!0,t.activeNotification.alerts.clear(),t.activeNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!0});t.asyncStatus(s.AsyncStatus.Active)}}),e.bind("keydown",function(e){27!==e.which||i.modalBehavior.asyncStatus().isDisabled||i.modalBehavior.cancel()}),e.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!i.modalBehavior.asyncStatus().isDisabled&&i.modalBehavior.cancel()})}]),app.controller("dnsTemplatePromptCtrl",["$scope","$modalInstance","$document","modalTitle","modalContent","modalChosenTemplate",function(t,e,n,a,i,o){t.modalTitle=a,t.modalContent=i,t.modalChosenTemplate=o;var s=!(t.startAutoFocus=!0);t.onYes=function(){s||(s=!0,e.close("yes"))},t.onCancel=function(){e.dismiss("cancel")},n.bind("keydown",function(e){27===e.which&&t.onCancel()}),n.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&t.onCancel()})}]),app.controller("promptRemoveModalCtrl",["$scope","$modalInstance","$document","modalTitle","modalContent",function(t,e,n,a,i){t.modalTitle=a,t.modalContent=i,t.startAutoFocus=!0,t.onYes=function(){e.close("yes")},t.onCancel=function(){e.dismiss("cancel")},n.bind("keydown",function(e){27===e.which&&t.onCancel()}),n.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&t.onCancel()})}]),app.controller("WizardContactContoller",["$scope","$rootScope","httpRepository","$cookies","$cookieStore","$filter","$modal","$location","notificationService","pageHelper","$timeout","$attrs",function(f,e,t,n,a,i,o,s,r,c,l,d){f.regcontact={FirstName:"",LastName:"",CompanyName:"",JobTitle:"",Address:"",Address1:"",City:"",StateProvince:"",ZIPPostalCode:"",Country:f.CountryCode,PhoneCode:"",PhoneNumber:"",PhoneNumberExt:"",PhoneExtCheckBox:!1,FaxCode:"",FaxNumber:"",EmailAddress:"",EmailExtension:"",CheckUseNamecheapContacts:!1},f.admcontact={FirstName:"",LastName:"",CompanyName:"",JobTitle:"",Address:"",Address1:"",City:"",StateProvince:"",ZIPPostalCode:"",Country:f.CountryCode,PhoneCode:"",PhoneNumber:"",PhoneNumberExt:"",PhoneExtCheckBox:!1,FaxCode:"",FaxNumber:"",EmailAddress:"",EmailExtension:"",CheckUseBillingAndTechAddress:!1},f.teccontact={FirstName:"",LastName:"",CompanyName:"",JobTitle:"",Address:"",Address1:"",City:"",StateProvince:"",ZIPPostalCode:"",Country:f.CountryCode,PhoneCode:"",PhoneNumber:"",PhoneNumberExt:"",PhoneExtCheckBox:!1,FaxCode:"",FaxNumber:"",EmailAddress:"",EmailExtension:"",CheckUseNamecheapContacts:!1},f.billcontact={FirstName:"",LastName:"",CompanyName:"",JobTitle:"",Address:"",Address1:"",City:"",StateProvince:"",ZIPPostalCode:"",Country:f.CountryCode,PhoneCode:"",PhoneNumber:"",PhoneNumberExt:"",PhoneExtCheckBox:!1,FaxCode:"",FaxNumber:"",Email:"",EmailExtension:"",CheckUseNamecheapContacts:!1},f.IsChooseContactModalPopUp=!1,f.openChooseContactModalPopUp=function(p){var e;f.IsChooseContactModalPopUp||((e=o.open({templateUrl:"/Domains/ChooseAddressContact/",controller:"ChooseContactModalCtrl",size:"lg",backdrop:"static"})).result.then(function(e){var t,n,a,i,o,s,r,c,l,d,u,m;f.IsChooseContactModalPopUp=!1,""!=e&&("Registrant"==p&&(f.regcontact.FirstName=e.FirstName,f.regcontact.LastName=e.LastName,f.regcontact.CompanyName=e.Organization,f.regcontact.JobTitle=e.JobTitle,f.regcontact.AddressLine1=e.Address1,f.regcontact.AddressLine2=e.Address2,f.regcontact.City=e.City,f.regcontact.StateProvince=e.StateProvince,f.regcontact.ZIPPostalCode=e.PostalCode,(t=$('form[name="ctrlfrmreg.frmdomainregistrantcontacts"] select#Country')).length&&(t.select2("val",e.Country),f.Country=e.Country),-1!=e.Phone.indexOf(".")&&(f.regcontact.PhoneNumber=e.Phone.split(".")[1]),f.regcontact.PhoneNumberExt=e.PhoneExt,-1!=e.Fax.indexOf(".")&&(f.regcontact.FaxNumber=e.Fax.split(".")[1]),""!=e.PhoneExt&&(f.regcontact.PhoneExtCheckBox=!0,$("#PhSectionRegistrant").length&&$("#PhSectionRegistrant").addClass("has-extension"),$("#PhSectionRegistrantMin").length&&$("#PhSectionRegistrantMin").addClass("has-extension")),f.regcontact.Email=e.EmailAddress,(n=$('form[name="ctrlfrmreg.frmdomainregistrantcontacts"] select#PhoneCode')).length&&-1!=e.Phone.indexOf(".")&&(n.select2("val",e.Phone.split(".")[0].replace(/\+/g,"")),f.regcontact.PhoneCode=e.Phone.split(".")[0].replace(/\+/g,"")),(a=$('form[name="ctrlfrmreg.frmdomainregistrantcontacts"] select#FaxCode')).length&&-1!=e.Fax.indexOf(".")&&(a.select2("val",e.Fax.split(".")[0].replace(/\+/g,"")),f.regcontact.FaxCode=e.Fax.split(".")[0].replace(/\+/g,""))),"Admin"==p&&(f.admcontact.FirstName=e.FirstName,f.admcontact.LastName=e.LastName,f.admcontact.CompanyName=e.Organization,f.admcontact.JobTitle=e.JobTitle,f.admcontact.AddressLine1=e.Address1,f.admcontact.AddressLine2=e.Address2,f.admcontact.City=e.City,f.admcontact.StateProvince=e.StateProvince,f.admcontact.ZIPPostalCode=e.PostalCode,(i=$('form[name="ctrladmin.frmdomainadmincontacts"] select#Country')).length&&(i.select2("val",e.Country),f.Country=e.Country),-1!=e.Phone.indexOf(".")&&(f.admcontact.PhoneNumber=e.Phone.split(".")[1]),f.admcontact.PhoneNumberExt=e.PhoneExt,-1!=e.Fax.indexOf(".")&&(f.admcontact.FaxNumber=e.Fax.split(".")[1]),""!=e.PhoneExt&&(f.admcontact.PhoneExtCheckBox=!0,$("#PhSectionMax").length&&$("#PhSectionMax").addClass("has-extension"),$("#PhSectionMin").length&&$("#PhSectionMin").addClass("has-extension")),f.admcontact.Email=e.EmailAddress,(o=$('form[name="ctrladmin.frmdomainadmincontacts"] select#PhoneCode')).length&&-1!=e.Phone.indexOf(".")&&(o.select2("val",e.Phone.split(".")[0].replace(/\+/g,"")),f.admcontact.PhoneCode=e.Phone.split(".")[0].replace(/\+/g,"")),(s=$('form[name="ctrladmin.frmdomainadmincontacts"] select#FaxCode')).length&&-1!=e.Fax.indexOf(".")&&(s.select2("val",e.Fax.split(".")[0].replace(/\+/g,"")),f.admcontact.FaxCode=e.Fax.split(".")[0].replace(/\+/g,""))),"Tech"==p&&(f.teccontact.FirstName=e.FirstName,f.teccontact.LastName=e.LastName,f.teccontact.CompanyName=e.Organization,f.teccontact.JobTitle=e.JobTitle,f.teccontact.AddressLine1=e.Address1,f.teccontact.AddressLine2=e.Address2,f.teccontact.City=e.City,f.teccontact.StateProvince=e.StateProvince,f.teccontact.ZIPPostalCode=e.PostalCode,(r=$('form[name="ctrlfrmtechnical.frmdomaintechnicalcontacts"] select#Country')).length&&(r.select2("val",e.Country),f.Country=e.Country),-1!=e.Phone.indexOf(".")&&(f.teccontact.PhoneNumber=e.Phone.split(".")[1]),f.teccontact.PhoneNumberExt=e.PhoneExt,-1!=e.Fax.indexOf(".")&&(f.teccontact.FaxNumber=e.Fax.split(".")[1]),""!=e.PhoneExt&&(f.teccontact.PhoneExtCheckBox=!0,$("#PhSectionTechnical").length&&$("#PhSectionTechnical").addClass("has-extension"),$("#PhSectionTechMin").length&&$("#PhSectionTechMin").addClass("has-extension")),f.teccontact.Email=e.EmailAddress,(c=$('form[name="ctrlfrmtechnical.frmdomaintechnicalcontacts"] select#PhoneCode')).length&&-1!=e.Phone.indexOf(".")&&(c.select2("val",e.Phone.split(".")[0].replace(/\+/g,"")),f.teccontact.PhoneCode=e.Phone.split(".")[0].replace(/\+/g,"")),(l=$('form[name="ctrlfrmtechnical.frmdomaintechnicalcontacts"] select#FaxCode')).length&&-1!=e.Fax.indexOf(".")&&(l.select2("val",e.Fax.split(".")[0].replace(/\+/g,"")),f.teccontact.FaxCode=e.Fax.split(".")[0].replace(/\+/g,""))),"Billing"==p&&(f.billcontact.FirstName=e.FirstName,f.billcontact.LastName=e.LastName,f.billcontact.CompanyName=e.Organization,f.billcontact.JobTitle=e.JobTitle,f.billcontact.AddressLine1=e.Address1,f.billcontact.AddressLine2=e.Address2,f.billcontact.City=e.City,f.billcontact.StateProvince=e.StateProvince,f.billcontact.ZIPPostalCode=e.PostalCode,(d=$('form[name="ctrlfrmbilling.frmdomainbillingcontacts"] select#Country')).length&&(d.select2("val",e.Country),f.Country=e.Country),-1!=e.Phone.indexOf(".")&&(f.billcontact.PhoneNumber=e.Phone.split(".")[1]),f.billcontact.PhoneNumberExt=e.PhoneExt,-1!=e.Fax.indexOf(".")&&(f.billcontact.FaxNumber=e.Fax.split(".")[1]),""!=e.PhoneExt&&(f.billcontact.PhoneExtCheckBox=!0,$("#PhSectionBilling").length&&$("#PhSectionBilling").addClass("has-extension"),$("#PhSectionBillingMin").length&&$("#PhSectionBillingMin").addClass("has-extension")),f.billcontact.Email=e.EmailAddress,(u=$('form[name="ctrlfrmbilling.frmdomainbillingcontacts"] select#PhoneCode')).length&&-1!=e.Phone.indexOf(".")&&(u.select2("val",e.Phone.split(".")[0].replace(/\+/g,"")),f.billcontact.PhoneCode=e.Phone.split(".")[0].replace(/\+/g,"")),(m=$('form[name="ctrlfrmbilling.frmdomainbillingcontacts"] select#FaxCode')).length&&-1!=e.Fax.indexOf(".")&&(m.select2("val",e.Fax.split(".")[0].replace(/\+/g,"")),f.billcontact.FaxCode=e.Fax.split(".")[0].replace(/\+/g,""))))}),e.opened.then(function(e){f.IsChooseContactModalPopUp=!0}))}}]),app.controller("bulkModificationListCtrl",["$scope","$rootScope","dashboardRepository","$filter","$modal","notificationService","pageHelper","$q","ncGridParams","$sce","ncGridEventNames","forEachPromice",function(r,e,c,t,o,n,l,a,s,d,u,m){r.pageHelper=l,r.pageNotification=new n.instance,r.BulkModifications={},r.pageBehavior=new l.AsyncStateBehavior({constructor:function(){var o=this.instance;o.showLoadPanel=!0,o.showContent=!1,o.pageNgGridSettings=new s,o.pageNgGridSettings.parameters.mapping.serverChunkSize=200,o.pageNgGridSettings.settings.getData=function(i,e){o.filterStatusPropertyNames=[],c.dashboardInfo.getBulkModificationsDetailsList(e).then(function(e){for(var t=0;t<e.Result.Data.length;t++){e.Result.Data[t].chbId="chbId"+t,e.Result.Data[t].IsHiddenOrCancel=!1;for(var n=0;n<e.Result.Data.length;n++){var a="Result.Data."+n+".Status";-1==o.filterStatusPropertyNames.indexOf(a)&&o.filterStatusPropertyNames.push(a)}}i.resolve(e.Result),o.showLoadPanel=!1,o.showContent=!0})},o.statusList=[{header:"Waiting",propertyname:"Status",propertyvalue:"WAITING"},{header:"In Progress",propertyname:"Status",propertyvalue:"INPROGRESS"},{header:"Partially Failed",propertyname:"Status",propertyvalue:"PARTIALLYFAILED"},{header:"Failed",propertyname:"Status",propertyvalue:"FAILED"},{header:"Completed",propertyname:"Status",propertyvalue:"COMPLETED"},{header:"Partially Completed",propertyname:"Status",propertyvalue:"PARTIALLYCOMPLETED"}],o.actionList=[{header:"DNS/Host Records",propertyname:"Type",propertyvalue:"DNS/HOST RECORDS"},{header:"Domain Lock",propertyname:"Type",propertyvalue:"DOMAIN LOCK"},{header:"Domain Contacts",propertyname:"Type",propertyvalue:"DOMAIN CONTACTS"},{header:"Domain Privacy",propertyname:"Type",propertyvalue:"WHOISGUARD"},{header:"Edit Auto-Renewal",propertyname:"Type",propertyvalue:"EDIT AUTO-RENEWAL"},{header:"Verify Domain Contacts",propertyname:"Type",propertyvalue:"VERIFY DOMAIN CONTACTS"}],o.pageNgGridSettings.settings.reload()},onSuccess:function(e){this.instance.asyncStatus(l.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=r.pageNotification.stuckNotifications.addError(e.msg,{hasClose:!0,isAutoHide:!0})}}),r.pageAction=new l.AsyncStateBehavior({constructor:function(){var a=this.instance,o="",s=!1;a.Click=function(n,e,t){"cancel"==t?(o="Canceling the bulk action...",a.asyncStatus(l.AsyncStatus.Loading,o),c.dashboardInfo.BulkModificationCancel(n,"bulkModifyPage").then(function(e){if(1==e.Error)r.BulkModifications={},s=!1,a.asyncStatus(l.AsyncStatus.Error,{msg:e.Msg});else if(null!=e.Result){if(s=!0,1==e.Result.IsCancel){var t=$.grep(r.pageBehavior.pageNgGridSettings.parameters.storage.requestData,function(e,t){return e.BatchId==n});for(i=0;i<t.length;i++)t[i].IsHiddenOrCancel=!0}a.asyncStatus(l.AsyncStatus.Success,{msg:e.Msg})}else r.BulkModificationsCount=0,s=!0,a.asyncStatus(l.AsyncStatus.Success,{msg:e.Msg});a.asyncStatus(1==s?l.AsyncStatus.Success:l.AsyncStatus.Error,{Message:e.Msg})})):"hide"==t&&(o="Hiding the bulk action...",a.asyncStatus(l.AsyncStatus.Loading,o),c.dashboardInfo.BulkModificationHide(n,e,"bulkModifyPage").then(function(e){if(1==e.Error)r.BulkModifications={},s=!1,a.asyncStatus(l.AsyncStatus.Error,{msg:e.Msg});else if(null!=e.Result){if(s=!0,1==e.Result.IsHide){var t=$.grep(r.pageBehavior.pageNgGridSettings.parameters.storage.requestData,function(e,t){return e.BatchId==n});for(i=0;i<t.length;i++)t[i].IsHiddenOrCancel=!0}a.asyncStatus(l.AsyncStatus.Success,{msg:e.Msg})}else r.BulkModificationsCount=0,s=!0,a.asyncStatus(l.AsyncStatus.Success,{msg:e.Msg});a.asyncStatus(1==s?l.AsyncStatus.Success:l.AsyncStatus.Error,{Message:e.Msg})}))}},onSuccess:function(e){var t=this.instance;"getModel"==e.sender&&(t.showContent=!0,t.model=e.Result,t.pageNgGridSettings.settings.reload()),r.pageNotification.alerts.clear(),t.activeNotification=r.pageNotification.stuckNotifications.addSuccess(e.msg,{hasClose:!0,isAutoHide:!0})},onActive:function(e){this.instance.asyncStatus(l.AsyncStatus.Active)},onLoading:function(e){var t=this.instance;r.pageNotification.alerts.clear(),t.activeNotification=r.pageNotification.stuckNotifications.addLoading("<B>"+e+"</B> Please wait.",!1),t.isDisabled=!0,t.showError=!1},onLocked:function(e){this.instance},onError:function(e){this.instance.activeNotification=r.pageNotification.stuckNotifications.addError(e.msg,{hasClose:!0,isAutoHide:!0})}}),r.openBulkModificationsDetailsPage=function(e,t){t=t.replace(/[^a-zA-Z]/g,"").replace(/\s/g,"");window.location.href="/dashboard/BulkModifyDetails/"+e+"/"+t+"/fromBulkModify"},r.IsCancelMessageModalPopUpOpened=!1,r.openCancelMessageModalPopUp=function(t,n,a){var e;r.IsCancelMessageModalPopUpOpened||((e=o.open({templateUrl:"/Domains/SSL/Common/PromptRemove",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return"Cancel Bulk Domain"},modalContent:function(){return"Are you sure want to cancel this batch domain?"}}})).result.then(function(e){r.IsCancelMessageModalPopUpOpened=!1,"yes"==e&&r.pageAction.Click(t,n,a)},function(){r.IsCancelMessageModalPopUpOpened=!1,e=null}),e.opened.then(function(){r.IsCancelMessageModalPopUpOpened=!0}))}}]),app.controller("bulkModifyDetailsCtrl",["$scope","$rootScope","dashboardRepository","$cookies","$cookieStore","$filter","$modal","$location","notificationService","pageHelper","$timeout","$attrs","ncGridParams",function(v,e,t,n,a,i,o,s,r,S,c,l,d){v.isChecked=!1,v.returnPath={},this.initialize=function(e){v.pageBehavior.Load(e),v.returnPath=e.ReturnPath},e.closeLightbox=function(){"fromDashboard"==v.returnPath?window.location.href="/Dashboard/Index":window.location.href="/Dashboard/BulkModifications"},String.prototype.similar=function(e){return-1!==this.indexOf(e)},String.prototype.startsWith=function(e){return 0===this.indexOf(e)},v.pageBehavior=new S.AsyncStateBehavior({constructor:function(){var h=this.instance;h.showLoadPanel=!0,h.showContent=!1,v.BulkModifications={},v.BulkModifyDomains={},v.BulkModifyBatchDetails={},v.RegistrantContacts=[],v.AdministrativeContacts=[],v.AuxBillingContacts=[],v.TechContacts=[],v.DnsNameServerDetails={NameServerType:"",Records:[]};var g=0;h.Load=function(e){v.batchId=e.BatchId,"DOMAINLOCK"==e.Type?v.type="LockAction":"EDITAUTORENEWAL"==e.Type?v.type="autorenewoptions":"VERIFYDOMAINCONTACTS"==e.Type?v.type="ResendVerification":"WHOISGUARD"==e.Type?v.type="WGStatus":"DOMAINCONTACTS"==e.Type?v.type="DOMAINCONTACTS":"DNSHOSTRECORDS"==e.Type&&(v.type="DNSHOSTRECORDS"),h.pageNgGridSettings=new d,h.pageNgGridSettings.parameters.search.serchPropertyNames=["DomainName"],h.pageNgGridSettings.parameters.mapping.serverChunkSize=1e3,h.pageNgGridSettings.settings.getData=function(f,e){t.dashboardInfo.BulkModificationsGetDetails(e,v.batchId,v.type).then(function(e){if(null!=e.Result){if(null!=e.Result.BulkModificationSection&&0<e.Result.BulkModificationSection.length&&(v.BulkModifications=e.Result.BulkModificationSection),null!=e.Result.BulkModificationDetails&&0<e.Result.BulkModificationDetails.length&&(v.BulkModifyDomains=e.Result.BulkModificationDetails),null!=e.Result.MultipleModificationDetails&&0<e.Result.MultipleModificationDetails.length){v.BulkModifyBatchDetails=e.Result.MultipleModificationDetails;for(var t=0;t<e.Result.MultipleModificationDetails.length;t++)if("DOMAINCONTACTS"==v.type&&(1==v.BulkModifyBatchDetails[t].param.startsWith("Admin")?"AdminFirstName"==v.BulkModifyBatchDetails[t].param?v.AdministrativeContacts[0]=v.BulkModifyBatchDetails[t].paramValue:"AdminLastName"==v.BulkModifyBatchDetails[t].param?v.AdministrativeContacts[1]=v.BulkModifyBatchDetails[t].paramValue:"AdminOrganizationName"==v.BulkModifyBatchDetails[t].param?v.AdministrativeContacts[2]=v.BulkModifyBatchDetails[t].paramValue:"AdminAddress1"==v.BulkModifyBatchDetails[t].param?v.AdministrativeContacts[3]=v.BulkModifyBatchDetails[t].paramValue:"AdminCity"==v.BulkModifyBatchDetails[t].param?v.AdministrativeContacts[4]=v.BulkModifyBatchDetails[t].paramValue:"AdminStateProvince"==v.BulkModifyBatchDetails[t].param?v.AdministrativeContacts[5]=v.BulkModifyBatchDetails[t].paramValue:"AdminPostalCode"==v.BulkModifyBatchDetails[t].param?v.AdministrativeContacts[6]=v.BulkModifyBatchDetails[t].paramValue:"AdminCountry"==v.BulkModifyBatchDetails[t].param?v.AdministrativeContacts[7]=v.BulkModifyBatchDetails[t].paramValue:"AdminPhonePrefix"==v.BulkModifyBatchDetails[t].param?v.AdministrativeContacts[8]="("+v.BulkModifyBatchDetails[t].paramValue+")":"AdminPhoneOnly"==v.BulkModifyBatchDetails[t].param?v.AdministrativeContacts[9]=v.BulkModifyBatchDetails[t].paramValue:"AdminPhoneExt"==v.BulkModifyBatchDetails[t].param?v.AdministrativeContacts[10]=v.BulkModifyBatchDetails[t].paramValue:"AdminFaxPrefix"==v.BulkModifyBatchDetails[t].param?v.AdministrativeContacts[11]="("+v.BulkModifyBatchDetails[t].paramValue+")":"AdminFaxOnly"==v.BulkModifyBatchDetails[t].param?v.AdministrativeContacts[12]=v.BulkModifyBatchDetails[t].paramValue:"AdminFaxExt"==v.BulkModifyBatchDetails[t].param?v.AdministrativeContacts[13]=v.BulkModifyBatchDetails[t].paramValue:"AdminEmailAddress"==v.BulkModifyBatchDetails[t].param&&(v.AdministrativeContacts[14]=v.BulkModifyBatchDetails[t].paramValue):1==v.BulkModifyBatchDetails[t].param.startsWith("Registrant")?"RegistrantFirstName"==v.BulkModifyBatchDetails[t].param?v.RegistrantContacts[0]=v.BulkModifyBatchDetails[t].paramValue:"RegistrantLastName"==v.BulkModifyBatchDetails[t].param?v.RegistrantContacts[1]=v.BulkModifyBatchDetails[t].paramValue:"RegistrantOrganizationName"==v.BulkModifyBatchDetails[t].param?v.RegistrantContacts[2]=v.BulkModifyBatchDetails[t].paramValue:"RegistrantAddress1"==v.BulkModifyBatchDetails[t].param?v.RegistrantContacts[3]=v.BulkModifyBatchDetails[t].paramValue:"RegistrantCity"==v.BulkModifyBatchDetails[t].param?v.RegistrantContacts[4]=v.BulkModifyBatchDetails[t].paramValue:"RegistrantStateProvince"==v.BulkModifyBatchDetails[t].param?v.RegistrantContacts[5]=v.BulkModifyBatchDetails[t].paramValue:"RegistrantPostalCode"==v.BulkModifyBatchDetails[t].param?v.RegistrantContacts[6]=v.BulkModifyBatchDetails[t].paramValue:"RegistrantCountry"==v.BulkModifyBatchDetails[t].param?v.RegistrantContacts[7]=v.BulkModifyBatchDetails[t].paramValue:"RegistrantPhonePrefix"==v.BulkModifyBatchDetails[t].param?v.RegistrantContacts[8]="("+v.BulkModifyBatchDetails[t].paramValue+")":"RegistrantPhoneOnly"==v.BulkModifyBatchDetails[t].param?v.RegistrantContacts[9]=v.BulkModifyBatchDetails[t].paramValue:"RegistrantPhoneExt"==v.BulkModifyBatchDetails[t].param?v.RegistrantContacts[10]=v.BulkModifyBatchDetails[t].paramValue:"RegistrantFaxPrefix"==v.BulkModifyBatchDetails[t].param?v.RegistrantContacts[11]="("+v.BulkModifyBatchDetails[t].paramValue+")":"RegistrantFaxOnly"==v.BulkModifyBatchDetails[t].param?v.RegistrantContacts[12]=v.BulkModifyBatchDetails[t].paramValue:"RegistrantFaxExt"==v.BulkModifyBatchDetails[t].param?v.RegistrantContacts[13]=v.BulkModifyBatchDetails[t].paramValue:"RegistrantEmailAddress"==v.BulkModifyBatchDetails[t].param&&(v.RegistrantContacts[14]=v.BulkModifyBatchDetails[t].paramValue):1==v.BulkModifyBatchDetails[t].param.startsWith("AuxBilling")?"AuxBillingFirstName"==v.BulkModifyBatchDetails[t].param?v.AuxBillingContacts[0]=v.BulkModifyBatchDetails[t].paramValue:"AuxBillingLastName"==v.BulkModifyBatchDetails[t].param?v.AuxBillingContacts[1]=v.BulkModifyBatchDetails[t].paramValue:"AuxBillingOrganizationName"==v.BulkModifyBatchDetails[t].param?v.AuxBillingContacts[2]=v.BulkModifyBatchDetails[t].paramValue:"AuxBillingAddress1"==v.BulkModifyBatchDetails[t].param?v.AuxBillingContacts[3]=v.BulkModifyBatchDetails[t].paramValue:"AuxBillingCity"==v.BulkModifyBatchDetails[t].param?v.AuxBillingContacts[4]=v.BulkModifyBatchDetails[t].paramValue:"AuxBillingStateProvince"==v.BulkModifyBatchDetails[t].param?v.AuxBillingContacts[5]=v.BulkModifyBatchDetails[t].paramValue:"AuxBillingPostalCode"==v.BulkModifyBatchDetails[t].param?v.AuxBillingContacts[6]=v.BulkModifyBatchDetails[t].paramValue:"AuxBillingCountry"==v.BulkModifyBatchDetails[t].param?v.AuxBillingContacts[7]=v.BulkModifyBatchDetails[t].paramValue:"AuxBillingPhonePrefix"==v.BulkModifyBatchDetails[t].param?v.AuxBillingContacts[8]="("+v.BulkModifyBatchDetails[t].paramValue+")":"AuxBillingPhoneOnly"==v.BulkModifyBatchDetails[t].param?v.AuxBillingContacts[9]=v.BulkModifyBatchDetails[t].paramValue:"AuxBillingPhoneExt"==v.BulkModifyBatchDetails[t].param?v.AuxBillingContacts[10]=v.BulkModifyBatchDetails[t].paramValue:"AuxBillingFaxPrefix"==v.BulkModifyBatchDetails[t].param?v.AuxBillingContacts[11]="("+v.BulkModifyBatchDetails[t].paramValue+")":"AuxBillingFaxOnly"==v.BulkModifyBatchDetails[t].param?v.AuxBillingContacts[12]=v.BulkModifyBatchDetails[t].paramValue:"AuxBillingFaxExt"==v.BulkModifyBatchDetails[t].param?v.AuxBillingContacts[13]=v.BulkModifyBatchDetails[t].paramValue:"AuxBillingEmailAddress"==v.BulkModifyBatchDetails[t].param&&(v.AuxBillingContacts[14]=v.BulkModifyBatchDetails[t].paramValue):1==v.BulkModifyBatchDetails[t].param.startsWith("Tech")&&("TechFirstName"==v.BulkModifyBatchDetails[t].param?v.TechContacts[0]=v.BulkModifyBatchDetails[t].paramValue:"TechLastName"==v.BulkModifyBatchDetails[t].param?v.TechContacts[1]=v.BulkModifyBatchDetails[t].paramValue:"TechOrganizationName"==v.BulkModifyBatchDetails[t].param?v.TechContacts[2]=v.BulkModifyBatchDetails[t].paramValue:"TechAddress1"==v.BulkModifyBatchDetails[t].param?v.TechContacts[3]=v.BulkModifyBatchDetails[t].paramValue:"TechCity"==v.BulkModifyBatchDetails[t].param?v.TechContacts[4]=v.BulkModifyBatchDetails[t].paramValue:"TechStateProvince"==v.BulkModifyBatchDetails[t].param?v.TechContacts[5]=v.BulkModifyBatchDetails[t].paramValue:"TechPostalCode"==v.BulkModifyBatchDetails[t].param?v.TechContacts[6]=v.BulkModifyBatchDetails[t].paramValue:"TechCountry"==v.BulkModifyBatchDetails[t].param?v.TechContacts[7]=v.BulkModifyBatchDetails[t].paramValue:"TechPhonePrefix"==v.BulkModifyBatchDetails[t].param?v.TechContacts[8]="("+v.BulkModifyBatchDetails[t].paramValue+")":"TechPhoneOnly"==v.BulkModifyBatchDetails[t].param?v.TechContacts[9]=v.BulkModifyBatchDetails[t].paramValue:"TechPhoneExt"==v.BulkModifyBatchDetails[t].param?v.TechContacts[10]=v.BulkModifyBatchDetails[t].paramValue:"TechFaxPrefix"==v.BulkModifyBatchDetails[t].param?v.TechContacts[11]="("+v.BulkModifyBatchDetails[t].paramValue+")":"TechFaxOnly"==v.BulkModifyBatchDetails[t].param?v.TechContacts[12]=v.BulkModifyBatchDetails[t].paramValue:"TechFaxExt"==v.BulkModifyBatchDetails[t].param?v.TechContacts[13]=v.BulkModifyBatchDetails[t].paramValue:"TechEmailAddress"==v.BulkModifyBatchDetails[t].param&&(v.TechContacts[14]=v.BulkModifyBatchDetails[t].paramValue))),"DNSHOSTRECORDS"==v.type){var n=[];v.combinedParams=[[],[]];var a=0,i={},o=1,s=[];v.BulkModifyBatchDetails[t].paramValue==v.BulkModifyBatchDetails[t].NameServerType||"DEFAULT"==v.BulkModifyBatchDetails[t].NameServerType&&"DEFAULTWITHCOPY"==v.BulkModifyBatchDetails[t].paramValue?(v.DnsNameServerDetails.NameServerType="Namecheap "+v.BulkModifyBatchDetails[t].NameServerType.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),"DEFAULT"==v.BulkModifyBatchDetails[t].paramValue||"DEFAULTWITHCOPY"==v.BulkModifyBatchDetails[t].paramValue?v.DnsNameServerDetails.Records=v.BulkModifyBatchDetails[t].DefaultNameServers:"BACKUP"==v.BulkModifyBatchDetails[t].paramValue&&(v.DnsNameServerDetails.Records=v.BulkModifyBatchDetails[t].BackupNameServers)):1==v.BulkModifyBatchDetails[t].param.toUpperCase().startsWith("NS")&&(1==v.BulkModifyBatchDetails[t].paramValue.similar(v.BulkModifyBatchDetails[t].SharedNameServers[t])?v.DnsNameServerDetails.NameServerType="Namecheap Web Hosting DNS":v.DnsNameServerDetails.NameServerType="Custom",v.DnsNameServerDetails.Records[g]=v.BulkModifyBatchDetails[t].paramValue,g++);for(var r=0;r<v.BulkModifyBatchDetails.length;r++)v.combinedParams[0][a]=v.BulkModifyBatchDetails[r].param,v.combinedParams[1][a]=v.BulkModifyBatchDetails[r].paramValue,a++;for(var c,l,d,u,m=0;m<v.combinedParams[0].length;m++){v.combinedParams[0][m]=="FriendlyName"+o?(i.FriendlyName=v.combinedParams[1][m],c=i.FriendlyName):v.combinedParams[0][m]=="RecordType"+o?(i.RecordType=v.combinedParams[1][m],l=i.RecordType):v.combinedParams[0][m]=="HostName"+o?(i.HostName=v.combinedParams[1][m],d=i.HostName):v.combinedParams[0][m]=="Address"+o?(i.Address=v.combinedParams[1][m],u=i.Address):"MAIL"==v.combinedParams[0][m]?"NONE"==v.combinedParams[1][m]||"1048"==v.combinedParams[1][m]?s="NONE":"1051"==v.combinedParams[1][m]||"FWD"==v.combinedParams[1][m]?s="EMAIL FORWARDING":"1054"==v.combinedParams[1][m]||"MX"==v.combinedParams[1][m]?s="MX":"1105"==v.combinedParams[1][m]||"MXE"==v.combinedParams[1][m]?s="MXE":"OX"==v.combinedParams[1][m]&&(s="PRIVATE EMAIL"):"LEAVE"==v.combinedParams[0][m]&&(s=v.combinedParams[0][m]),null!=c&&null!=l&&null!=d&&null!=u&&(n.push(i),u=d=l=c=void 0,o++,i={})}}}v.DnsHostDetails={Values:n,Mail:s}}var p={};p.Data=e.Result.BulkModificationDetails,f.resolve(p),h.pageNgGridSettings.parameters.mapping.isLazyLoading=!1,h.pageNgGridSettings.parameters.storage.totalServerItemsCount=e.Result.BulkModificationDetails.length,h.asyncStatus(S.AsyncStatus.Active)})},h.pageNgGridSettings.settings.reload()}},onSuccess:function(e){this.instance.asyncStatus(S.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=v.pageNotification.stuckNotifications.addError(e.msg,{hasClose:!0,isAutoHide:!0})}})}]),app.controller("dashboardinfoctrl",["$scope","$rootScope","dashboardRepository","$cookies","$cookieStore","$filter","$modal","$location","notificationService","pageHelper","$timeout","$attrs","$window","popupWindow",function(o,e,s,t,n,a,i,r,c,l,d,u,m,p){o.pageHelper=l,o.pageNotification=new c.instance,o.alertNotification=new c.instance,o.BulkModifications={},o.UserInformation={},o.alertPageFrom="dashboard",o.SymantecSunsetMasterKey=SymantecSunsetMasterKey,o.SymantecSunsetDate=new Date(SymantecSunsetDate),o.SymantecSunsetDate=o.SymantecSunsetDate.setDate(o.SymantecSunsetDate.getDate()+1),o.currentDate=new Date,o.SSLInfoRes=SSLInfoRes;var f=o.SSLInfoRes.static_ErrorMessage_SymantecSunset,h=o.SSLInfoRes.static_InsufficentFundsErrorMsg;o.pageAction=new l.AsyncStateBehavior({constructor:function(){var a=this.instance,i=!1;a.Click=function(e,t,n){"cancel"==n&&(a.asyncStatus(l.AsyncStatus.Loading,"Canceling the bulk action..."),s.dashboardInfo.BulkModificationCancel(e).then(function(e){1==e.Error?(o.BulkModifications={},i=!1,a.asyncStatus(l.AsyncStatus.Error,{msg:e.Msg})):(i=(null!=e.Result&&null!=e.Result.BulkModificationSection&&0<e.Result.BulkModificationSection.length?(o.BulkModifications=e.Result.BulkModificationSection,o.BulkModificationsCount=e.Result.BulkModificationSection[0].TotalBatchCount):o.BulkModificationsCount=0,!0),a.asyncStatus(l.AsyncStatus.Success,{msg:e.Msg})),a.asyncStatus(1==i?l.AsyncStatus.Success:l.AsyncStatus.Error,{Message:e.Msg})}))}},onSuccess:function(e){var t=this.instance;"getModel"==e.sender&&(t.showContent=!0,t.model=e.Result,t.pageNgGridSettings.settings.reload()),o.pageNotification.alerts.clear(),t.activeNotification=o.pageNotification.stuckNotifications.addSuccess(e.msg,{hasClose:!0,isAutoHide:!0})},onActive:function(e){this.instance.asyncStatus(l.AsyncStatus.Active)},onLoading:function(e){var t=this.instance;o.pageNotification.alerts.clear(),t.activeNotification=o.pageNotification.stuckNotifications.addLoading("<B>"+e+"</B> Please wait.",!1),t.isDisabled=!0,t.showError=!1},onLocked:function(e){this.instance},onError:function(e){this.instance.activeNotification=o.pageNotification.stuckNotifications.addError(e.msg,{hasClose:!0,isAutoHide:!0})}}),o.IsCancelMessageModalPopUpOpened=!1,o.openCancelMessageModalPopUp=function(t,n,a){var e;o.IsCancelMessageModalPopUpOpened||((e=i.open({templateUrl:"/Domains/SSL/Common/PromptRemove",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return"Cancel Bulk Domain"},modalContent:function(){return"Are you sure want to cancel this batch domain?"}}})).result.then(function(e){o.IsCancelMessageModalPopUpOpened=!1,"yes"==e&&o.pageAction.Click(t,n,a)},function(){o.IsCancelMessageModalPopUpOpened=!1,e=null}),e.opened.then(function(){o.IsCancelMessageModalPopUpOpened=!0}))},o.openBulkModificationsDetailsPage=function(e,t){t=t.replace(/[^a-zA-Z]/g,"").replace(/\s/g,"");window.location.href="/dashboard/BulkModifyDetails/"+e+"/"+t+"/fromDashboard"},o.pageBehavior=new l.AsyncStateBehavior({constructor:function(){var e,t,n,a=this.instance;a.showLoadPanel=!0,a.showContent=!1,s.dashboardInfo.getBulkModificationsList().then(function(e){if(null!=e.Result&&null!=e.Result.BulkModificationSection&&0<e.Result.BulkModificationSection.length?(o.BulkModificationsCount=e.Result.BulkModificationSection[0].TotalBatchCount,o.BulkModifications=e.Result.BulkModificationSection):$("div#DomainListGrid").removeClass("add-margin-top-64"),null!=e.Result&&null!=e.Result.UserInfoModel&&(o.UserInformation=e.Result.UserInfoModel),null!=e.Result&&null!=e.Result.DashboardMessages){o.DashboardMessages=e.Result.DashboardMessages;for(var t,n=0;n<o.DashboardMessages.length;n++){-1<["SysMessage","OneTouchInvitation"].indexOf(o.DashboardMessages[n].Key)&&""!=o.DashboardMessages[n].Message_Body&&("Targeted"==o.DashboardMessages[n].Message_Type||"message"==o.DashboardMessages[n].Message_Type||"info"==o.DashboardMessages[n].Message_Type?(t=o.DashboardMessages[n].Key,o.pageNotification.alerts.addInfo(o.DashboardMessages[n].Message_Body,{hasClose:!0,isAutoHide:!1,disableForUser:"OneTouchInvitation"===o.DashboardMessages[n].Key?function(){s.dashboardInfo.disableNotificationForUser(t)}:void 0})):"System"==o.DashboardMessages[n].Message_Type||"warn"==o.DashboardMessages[n].Message_Type||"sitedown"==o.DashboardMessages[n].Message_Type?o.pageNotification.alerts.addWarning(o.DashboardMessages[n].Message_Body,{hasClose:!0,isAutoHide:!1}):"MassMarket"!=o.DashboardMessages[n].Message_Type&&"promo"!=o.DashboardMessages[n].Message_Type||o.pageNotification.alerts.addSuccess(o.DashboardMessages[n].Message_Body,{hasClose:!0,isAutoHide:!1}))}}}),a.asyncStatus(l.AsyncStatus.Success),1==o.SymantecSunsetMasterKey&&o.currentDate>o.SymantecSunsetDate&&0<m.localStorage.length&&(null!=(e=p.replaceOrRefundResult()).isError&&("false"===e.isError?"replace"==e.action?(t=o.SSLInfoRes.static_Replace_SuccessMessage,o.pageNotification.stuckNotifications.addSuccess(t,{hasClose:!0,isAutoHide:!0})):(n=o.SSLInfoRes.static_Refund_SuccessMessage,o.pageNotification.stuckNotifications.addSuccess(n.replace("{0}",e.symantecCertType),{hasClose:!0,isAutoHide:!0})):(-1<e.Message.indexOf("INSUFFICIENTFUNDS")?1:0)?o.pageNotification.stuckNotifications.addError(h.replace("{0}",ServerName),{hasClose:!0,isAutoHide:!1}):o.pageNotification.stuckNotifications.addError(f,{hasClose:!0,isAutoHide:!0})))},onSuccess:function(e){this.instance.asyncStatus(l.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=o.pageNotification.stuckNotifications.addError(e.msg,{hasClose:!0,isAutoHide:!0})}})}]),app.controller("dashboardMessageListCtrl",["$scope","httpRepository","pageHelper","notificationService","$filter","ncGridParams","$modal","$rootScope","$timeout","ncGridEventNames","forEachPromice",function(c,o,l,e,t,n,s,a,r,d,u){c.pageHelper=l,c.pageNotification=new e.instance,c.actionPerforming="loading",c.initialize=function(e){c.Resource=e.Resources,null!=e.MessageType&&null!=e.Message&&("alert"==e.MessageType.toLowerCase()?c.pageNotification.alerts.addWarning(e.Message,{hasClose:!0,isAutoHide:!1}):"success"==e.MessageType.toLowerCase()?c.pageNotification.alerts.addSuccess(e.Message,{hasClose:!0,isAutoHide:!1}):"error"==e.MessageType.toLowerCase()&&c.pageNotification.alerts.addError(e.Message,{hasClose:!0,isAutoHide:!1}))},c.bulkActionHandler=function(e){var t=[],n=c.pageBehavior.pageNgGridSettings.parameters.selection.selectedItems,a=0;for(i=0;i<n.length;i++)t[a]=n[i].model.ReferenceId,a++;c.pageAction.Click(t.join(","),e,!0)},c.uncheckCheckBoxes=function(){c.pageBehavior.pageNgGridSettings.parameters.selection.selectedItems=[];var e=c.pageBehavior.pageNgGridSettings.parameters.storage.requestData;for(i=0;i<e.length;i++)1==e[i].$ncColumnSelected&&(e[i].$ncColumnSelected=!1);$("div#chb_selectAllMessages").find('input[type="checkbox"]').removeAttr("checked")},c.pageAction=new l.AsyncStateBehavior({constructor:function(){var r=this.instance,n="";r.Click=function(a,e,s,t){"read"==e?(n=c.Resource.LoadingReadMessage,r.asyncStatus(l.AsyncStatus.Loading,n),o.dashboardMessage.readMessage(a,t).then(function(e){if(1==e.Result.IsSuccess)for(var t=c.pageBehavior.pageNgGridSettings.parameters.storage.requestData,n=0;n<t.length;n++)t[n].model.ReferenceId==a&&(t[n].model.IsRead=!0);r.asyncStatus(l.AsyncStatus.Active)})):"resend"==e?(n=c.Resource.LoadingResendMessage,r.asyncStatus(l.AsyncStatus.Loading),o.dashboardMessage.resendMessages(a,t).then(function(e){e.Result})):"markAsRead"==e?(n=1==s?c.Resource.LoadingMultipleRead:c.Resource.LoadingSingleRead,r.asyncStatus(l.AsyncStatus.Loading,n),o.dashboardMessage.markMessagesAsRead(a,t).then(function(e){var t=e.Result;if(null!=t.ReferenceId&&"undefined"!=t.ReferenceId){var n=t.ReferenceId.split(",");if(1==t.IsSuccess){for(var a=c.pageBehavior.pageNgGridSettings.parameters.storage.requestData,i=0;i<a.length;i++)0<=n.indexOf(a[i].model.ReferenceId.toString())&&(a[i].model.IsRead=!0);1==s&&c.uncheckCheckBoxes()}}r.asyncStatus(1==t.IsSuccess?l.AsyncStatus.Success:l.AsyncStatus.Error,{Message:t.Message})})):"markAsUnread"==e?(n=1==s?c.Resource.LoadingMultipleUnread:c.Resource.LoadingSingleUnread,r.asyncStatus(l.AsyncStatus.Loading,n),o.dashboardMessage.markMessagesAsUnread(a,t).then(function(e){var t=e.Result;if(null!=t.ReferenceId&&"undefined"!=t.ReferenceId){var n=t.ReferenceId.split(",");if(1==t.IsSuccess){for(var a=c.pageBehavior.pageNgGridSettings.parameters.storage.requestData,i=0;i<a.length;i++)0<=n.indexOf(a[i].model.ReferenceId.toString())&&(a[i].model.IsRead=!1);1==s&&c.uncheckCheckBoxes()}}r.asyncStatus(1==t.IsSuccess?l.AsyncStatus.Success:l.AsyncStatus.Error,{Message:t.Message})})):"save"==e?(n=1==s?c.Resource.LoadingSaveMultiple:c.Resource.LoadingSaveSingle,r.asyncStatus(l.AsyncStatus.Loading,n),o.dashboardMessage.saveMessages(a,t).then(function(e){var t=e.Result;if(null!=t.ReferenceId&&"undefined"!=t.ReferenceId){var n=t.ReferenceId.split(",");if(1==t.IsSuccess){for(var a=c.pageBehavior.pageNgGridSettings.parameters.storage.requestData,i=0;i<a.length;i++)0<=n.indexOf(a[i].model.ReferenceId.toString())&&(a[i].model.IsSaved=!0);1==s&&c.uncheckCheckBoxes()}}r.asyncStatus(1==t.IsSuccess?l.AsyncStatus.Success:l.AsyncStatus.Error,{Message:t.Message})})):"remove"==e&&(n=1==s?c.Resource.LoadingRemoveMultiple:c.Resource.LoadingRemoveSingle,r.asyncStatus(l.AsyncStatus.Loading,n),o.dashboardMessage.removeMessages(a,t).then(function(e){var t=e.Result;if(null!=t.ReferenceId&&"undefined"!=t.ReferenceId){var n=t.ReferenceId.split(",");if(1==t.IsSuccess){for(var a=c.pageBehavior.pageNgGridSettings.parameters.storage.requestData,i=0,o=0;i<a.length+o&&o<n.length;i++)0<=n.indexOf(a[i-o].model.ReferenceId.toString())&&(c.pageBehavior.pageNgGridSettings.settings.actions.removeItem(a[i-o]),o++);0==c.pageBehavior.pageNgGridSettings.parameters.storage.pageData.length&&(c.pageBehavior.pageNgGridSettings.settings.pagination.setNextPage(),c.pageBehavior.pageNgGridSettings.settings.pagination.setPreviousPage()),1==s&&c.uncheckCheckBoxes()}}r.asyncStatus(1==t.IsSuccess?l.AsyncStatus.Success:l.AsyncStatus.Error,{Message:t.Message,sender:"getModal",Result:c.pageBehavior})}))}},onSuccess:function(e){var t=this.instance;"getModel"==e.sender&&(t.showContent=!0,t.model=e.Result,t.pageNgGridSettings.settings.reload()),c.pageNotification.alerts.clear(),t.activeNotification=c.pageNotification.stuckNotifications.addSuccess(e.Message,{hasClose:!0,isAutoHide:!0})},onActive:function(e){this.instance.asyncStatus(l.AsyncStatus.Active)},onLoading:function(e){var t=this.instance;c.pageNotification.alerts.clear(),t.activeNotification=c.pageNotification.stuckNotifications.addLoading("<B>"+e+"</B> Please wait.",!1),t.isDisabled=!0,t.showError=!1},onLocked:function(e){this.instance},onError:function(e){this.instance.activeNotification=c.pageNotification.stuckNotifications.addError(e.Message,{hasClose:!0,isAutoHide:!0})}}),c.IsRemoveMessageModalPopUpOpened=!1,c.openRemoveMessageModalPopUp=function(t,n,a){var e;c.IsRemoveMessageModalPopUpOpened||((e=s.open({templateUrl:"/Domains/SSL/Common/PromptRemove",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return 1==n?c.Resource.RemoveMultipleTitle:c.Resource.RemoveSingleTitle},modalContent:function(){return 1==n?c.Resource.RemoveMultiplePrompt:c.Resource.RemoveSinglePrompt}}})).result.then(function(e){"yes"==e&&(1==n?c.bulkActionHandler("remove"):c.pageAction.Click(t,"remove",!1,a))},function(){c.IsRemoveMessageModalPopUpOpened=!1,e=null}),e.opened.then(function(){c.IsRemoveMessageModalPopUpOpened=!0}))},c.pageBehavior=new l.AsyncStateBehavior({constructor:function(){var a=this.instance;a.showLoadPanel=!0,a.showContent=!1,a.model=null,a.calendarStartDate=new Date,a.calendarEndDate=new Date,a.StateList=[{header:MessagesRes.static_Read,propertyname:"model.IsRead",propertyvalue:!0},{header:MessagesRes.static_Unread,propertyname:"model.IsRead",propertyvalue:!1},{header:MessagesRes.static_Saved,propertyname:"model.IsSaved",propertyvalue:!0}],a.pageNgGridSettings=new n,a.pageNgGridSettings.parameters.search.serchPropertyNames=["model.Subject","model.CreatedDate","model.DateDisplay"],a.pageNgGridSettings.settings.getData=function(n,e){o.dashboardMessage.getMessages(e).then(function(t){var e={};null!=t.Result&&null!=t.Result.Messages&&0<t.Result.Messages.length?e.Data=t.Result.Messages:e.Data=[],a.pageNgGridSettings.parameters.mapping.serverChunkSize=t.Result.PageSize,0<e.Data.length&&(a.pageNgGridSettings.parameters.storage.lastModelId=e.Data[e.Data.length-1].ReferenceId);null!=e.Data&&e.Data.length;1==t.Result.IsGetAllMessages&&(a.pageNgGridSettings.parameters.mapping.isLazyLoading=!1),e.Data.length<a.pageNgGridSettings.parameters.mapping.serverChunkSize&&(a.pageNgGridSettings.parameters.mapping.isLazyLoading=!1),u(e.Data,function(e,t){return e.chbId="chbId"+t,n=e,new l.AsyncStateBehavior({constructor:function(){var e=this.instance;function t(e){return e<10?"0"+e:e}e.model=n,1==e.model.IsRead?e.model.MessageState=0:e.model.MessageState=1,e.model.IsSaved&&(e.model.MessageState=2),e.model.CreatedDate=l.Date.dateFromJson(e.model.CreatedDate),e.model.DateDisplay=l.Date.toLocaleDate(e.model.CreatedDate),e.model.DateSortValue=""+e.model.CreatedDate.getFullYear()+e.model.CreatedDate.getMonth()+e.model.CreatedDate.getDate()+t(e.model.CreatedDate.getHours())+t(e.model.CreatedDate.getMinutes())+t(e.model.CreatedDate.getSeconds()),e.asyncStatus(l.AsyncStatus.Success)},onSuccess:function(e){this.instance.asyncStatus(l.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=c.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}});var n},500).then(function(e){n.resolve({Data:e,TotalServerItemsCount:t.Result.TotalMessages})}),a.model=a.pageNgGridSettings.parameters.storage.requestData})},a.pageNgGridSettings.parameters.mapping.serverChunkSize=200,a.pageNgGridSettings.parameters.mapping.isLazyLoading=!0,a.pageNgGridSettings.settings.reload(),a.asyncStatus(l.AsyncStatus.Success),a.pageNgGridSettings.eventListener.then(function(e){e.$on(d.ncGridRenderMoreBefore,function(e,t){c.actionPerforming="loaded"}),e.$on(d.ncGridRenderMoreAfter,function(e,t){c.actionPerforming="loaded"}),e.$on(d.ncGridLoadServerChunkBefore,function(e,t){c.actionPerforming="loaded"}),e.$on(d.ncGridLoadServerChunkAfter,function(e,t){c.actionPerforming="loaded"}),e.$on(d.ncGridFilterApplyBefore,function(e,t){c.actionPerforming="filter"}),e.$on(d.ncGridFilterApplyAfter,function(e,t){c.actionPerforming="filter"}),e.$on(d.ncGridFilterClearBefore,function(e,t){c.actionPerforming="loaded"}),e.$on(d.ncGridFilterClearAfter,function(e,t){c.actionPerforming="loaded"}),e.$on(d.ncGridCalendarApplyBefore,function(e,t){c.actionPerforming="time"}),e.$on(d.ncGridCalendarApplyAfter,function(e,t){c.actionPerforming="time"}),e.$on(d.ncGridCalendarResetBefore,function(e,t){c.actionPerforming="loaded"}),e.$on(d.ncGridCalendarResetAfter,function(e,t){c.actionPerforming="loaded"}),e.$on(d.ncGridSearchBefore,function(e,t){c.actionPerforming="search"}),e.$on(d.ncGridSearchAfter,function(e,t){c.actionPerforming="search"})})},onSuccess:function(e){this.instance.asyncStatus(l.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=c.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}})}]),app.controller("domainBulkEmailRedirectActionCtrl",["$scope","$rootScope","$modalInstance","httpRepository","$filter","notificationService","pageHelper","$q","ncGridParams","$sce","domainName","mailBoxName","mailBoxId","forwardTo","action","title","index",function(n,e,t,a,i,o,s,r,c,l,d,u,m,p,f,h,g){n.cancelClick=function(){t.close("")},n.title=h,n.index=g,n.DomainParams=[],n.oldDestination=p,n.oldMailBoxName=u,n.domainName=d,n.mailBoxId=m,n.forwardTo=p,n.mailBoxName=u,n.action=f,n.MailBoxNameValidity=!1,n.DestinationEmailValidity=!1,n.MailBoxName_RequiredValidity=!1,n.DestinationEmail_RequiredValidity=!1,n.SaveChanges=new s.AsyncStateBehavior({constructor:function(){this.instance.onClick=function(){""==n.mailBoxName.trim()?n.MailBoxName_RequiredValidity=!0:n.MailBoxName_RequiredValidity=!1,""==n.forwardTo.trim()?n.DestinationEmail_RequiredValidity=!0:n.DestinationEmail_RequiredValidity=!1,"add"!=n.action||""==n.mailBoxName.trim()||""==n.forwardTo.trim()||n.DestinationEmailValidity||n.MailBoxNameValidity?"edit"!=n.action||""==n.mailBoxName.trim()||""==n.forwardTo.trim()||n.DestinationEmailValidity||n.MailBoxNameValidity||(n.oldDestination.replace(/ /g,"")!=n.forwardTo.replace(/ /g,"")||n.oldMailBoxName.replace(/ /g,"")!=n.mailBoxName.replace(/ /g,"")?n.DomainParams={Call:"Success",SameEntryFlag:"",domainName:n.domainName,mailBoxId:n.mailBoxId,forwardTo:n.forwardTo,mailBoxName:n.mailBoxName,oldMailBoxName:n.oldMailBoxName,oldDestination:n.oldDestination,index:n.index}:n.DomainParams={Call:"Error",SameEntryFlag:"SameEntry",domainName:n.domainName,mailBoxId:n.mailBoxId,forwardTo:n.forwardTo,mailBoxName:n.mailBoxName,index:n.index},t.close(n.DomainParams)):(n.DomainParams={Call:"Success",SameEntryFlag:"",domainName:n.domainName,mailBoxId:n.mailBoxId,forwardTo:n.forwardTo,mailBoxName:n.mailBoxName,oldMailBoxName:n.oldMailBoxName,oldDestination:n.oldDestination,index:n.index},t.close(n.DomainParams))}}});var v=/^[0-9A-Za-z-_.]+$/;n.$watch("mailBoxName",function(e,t){e!=t&&(""==e.trim()?(n.MailBoxName_RequiredValidity=!0,n.MailBoxNameValidity=!1):n.MailBoxName_RequiredValidity=!1,""!=e&&(v.test(e)?n.MailBoxNameValidity=!1:(n.MailBoxNameValidity=!0,n.MailBoxName_RequiredValidity=!1)))},!0),n.$watch("forwardTo",function(e,t){e!=t&&(""==e.trim()?(n.DestinationEmail_RequiredValidity=!0,n.DestinationEmailValidity=!1):n.DestinationEmail_RequiredValidity=!1,""!=e&&(n.ValidateEmail(e)?n.DestinationEmailValidity=!1:(n.DestinationEmailValidity=!0,n.DestinationEmail_RequiredValidity=!1)))},!0),n.ValidateEmail=function(e){var t,n,a,i=nc_Val_EmailPatternForAddForwarder,o=0,s=!0,r=e.split("@")[1];return null==r||-1!=(t=r.indexOf("."))&&(n=r.substr(t+1,r.length-t),a=nc_Val_AlphaAndDot,""!=n&&(s=!!n.match(a))),null!=e&&(0!=i.test(e.trim())&&s||(o+=1)),0==o},n.ShowPostLoader=function(){$(".opac").delay(25).queue(function(){$(this).addClass("page-load").css({"text-align":"left",padding:"0em",opacity:"0.5","background-position":"center 2.5em"})})}}]),app.controller("domainBulkEmailRedirectActionforCatchAllCtrl",["$scope","$rootScope","$modalInstance","httpRepository","$filter","notificationService","pageHelper","$q","ncGridParams","$sce","domainName","mailBoxName","mailBoxId","forwardTo","action","title","index",function(n,e,t,a,i,o,s,r,c,l,d,u,m,p,f,h,g){n.cancelClick=function(){t.close("")},n.title=h,n.index=g,n.DomainParams=[],n.oldDestination=p,n.oldMailBoxName=u,n.domainName=d,n.mailBoxId=m,n.forwardTo=p,n.mailBoxName=u,n.action=f,n.DestinationEmailValidity=!1,n.DestinationEmail_RequiredValidity=!1,n.SaveChanges=new s.AsyncStateBehavior({constructor:function(){this.instance.onClick=function(){""==n.forwardTo.trim()?n.DestinationEmail_RequiredValidity=!0:n.DestinationEmail_RequiredValidity=!1,"add"!=n.action||""==n.forwardTo.trim()||n.DestinationEmailValidity?"edit"!=n.action||""==n.forwardTo.trim()||n.DestinationEmailValidity||(n.oldDestination.replace(/ /g,"")!=n.forwardTo.replace(/ /g,"")?(","==n.forwardTo.charAt(n.forwardTo.length-1)&&(n.forwardTo=n.forwardTo.substr(0,n.forwardTo.length-1)),n.DomainParams={Call:"Success",SameEntryFlag:"",domainName:n.domainName,mailBoxId:n.mailBoxId,forwardTo:n.forwardTo,mailBoxName:"*",oldMailBoxName:n.oldMailBoxName,oldDestination:n.oldDestination,index:n.index}):n.DomainParams={Call:"Error",SameEntryFlag:"SameEntry",domainName:n.domainName,mailBoxId:n.mailBoxId,forwardTo:n.forwardTo,mailBoxName:"*",index:n.index},t.close(n.DomainParams)):(","==n.forwardTo.charAt(n.forwardTo.length-1)&&(n.forwardTo=n.forwardTo.substr(0,n.forwardTo.length-1)),n.DomainParams={Call:"Success",SameEntryFlag:"",domainName:n.domainName,mailBoxId:n.mailBoxId,forwardTo:n.forwardTo,mailBoxName:"*",oldMailBoxName:n.oldMailBoxName,oldDestination:n.oldDestination,index:n.index},t.close(n.DomainParams))}}}),n.$watch("forwardTo",function(e,t){e!=t&&(""==e.trim()?(n.DestinationEmail_RequiredValidity=!0,n.DestinationEmailValidity=!1):n.DestinationEmail_RequiredValidity=!1,""!=e&&(n.ValidateEmail(e)?n.DestinationEmailValidity=!1:(n.DestinationEmailValidity=!0,n.DestinationEmail_RequiredValidity=!1)))},!0),n.ValidateEmail=function(e){var t,n,a,i=nc_Val_EmailPatternForAddForwarder,o=0,s=!0,r=e.split("@")[1];return null==r||-1!=(t=r.indexOf("."))&&(n=r.substr(t+1,r.length-t),a=nc_Val_AlphaAndDot,""!=n&&(s=!!n.match(a))),null!=e&&(0!=i.test(e.trim())&&s||(o+=1)),0==o},n.ShowPostLoader=function(){$(".opac").delay(25).queue(function(){$(this).addClass("page-load").css({"text-align":"left",padding:"0em",opacity:"0.5","background-position":"center 2.5em"})})}}]),app.controller("domainEmailRedirectActionCtrl",["$scope","$rootScope","$modalInstance","httpRepository","$filter","notificationService","pageHelper","$q","ncGridParams","$sce","domainName","mailBoxName","mailBoxId","forwardTo","action","title","index",function(n,e,a,i,t,o,s,r,c,l,d,u,m,p,f,h,g){n.cancelClick=function(){a.close("")},n.title=h,n.index=g,n.DomainParams=[],n.oldDestination=p,n.oldMailBoxName=u,n.domainName=d,n.mailBoxId=m,n.forwardTo=p,n.mailBoxName=u,n.action=f,n.MailBoxNameValidity=!1,n.DestinationEmailValidity=!1,n.MailBoxName_RequiredValidity=!1,n.DestinationEmail_RequiredValidity=!1,n.SaveChanges=new s.AsyncStateBehavior({constructor:function(){var t=this.instance;t.onClick=function(){""==n.mailBoxName.trim()?n.MailBoxName_RequiredValidity=!0:n.MailBoxName_RequiredValidity=!1,""==n.forwardTo.trim()?n.DestinationEmail_RequiredValidity=!0:n.DestinationEmail_RequiredValidity=!1,"add"!=n.action||""==n.mailBoxName.trim()||""==n.forwardTo.trim()||n.DestinationEmailValidity||n.MailBoxNameValidity?"edit"!=n.action||""==n.mailBoxName.trim()||""==n.forwardTo.trim()||n.DestinationEmailValidity||n.MailBoxNameValidity||(n.oldDestination.replace(/ /g,"")!=n.forwardTo.replace(/ /g,"")||n.oldMailBoxName.replace(/ /g,"")!=n.mailBoxName.replace(/ /g,"")?(n.ShowPostLoader(),i.emailRedirect.editForwarder(n.domainName,n.mailBoxId,n.mailBoxName.replace(/ /g,""),n.forwardTo.replace(/ /g,""),n.oldMailBoxName.replace(/ /g,""),n.oldDestination.replace(/ /g,"")).then(function(e){t.asyncStatus(0==e.Error?s.AsyncStatus.Success:s.AsyncStatus.Error,e)})):(n.DomainParams={Call:"Error",SameEntryFlag:"SameEntry",domainName:n.domainName,mailBoxId:n.mailBoxId,forwardTo:n.forwardTo,mailBoxName:n.mailBoxName,index:n.index,errMesg:""},a.close(n.DomainParams))):(n.ShowPostLoader(),i.emailRedirect.addForwarder(n.domainName,n.mailBoxName.replace(/ /g,""),n.forwardTo.replace(/ /g,"")).then(function(e){t.asyncStatus(0==e.Error?s.AsyncStatus.Success:s.AsyncStatus.Error,e)}))}},onSuccess:function(e){this.instance.asyncStatus(s.AsyncStatus.Active),"NORIGHTS"!=e.Msg?(n.DomainParams={Call:"Success",SameEntryFlag:"",domainName:n.domainName,mailBoxId:n.mailBoxId,forwardTo:n.forwardTo,mailBoxName:n.mailBoxName,oldMailBoxName:n.oldMailBoxName,oldDestination:n.oldDestination,index:n.index,errMesg:""},a.close(n.DomainParams)):a.close(e.Msg)},onActive:function(){},onError:function(e){this.instance.asyncStatus(s.AsyncStatus.Active),n.DomainParams={Call:"Error",SameEntryFlag:"",domainName:n.domainName,mailBoxId:n.mailBoxId,forwardTo:n.forwardTo,mailBoxName:n.mailBoxName,oldMailBoxName:n.oldMailBoxName,oldDestination:n.oldDestination,index:n.index,errMesg:e.Msg},a.close(n.DomainParams)}});var v=/^[0-9A-Za-z-_.]+$/;n.$watch("mailBoxName",function(e,t){e!=t&&(""==e.trim()?(n.MailBoxName_RequiredValidity=!0,n.MailBoxNameValidity=!1):n.MailBoxName_RequiredValidity=!1,""!=e&&(v.test(e)?n.MailBoxNameValidity=!1:(n.MailBoxNameValidity=!0,n.MailBoxName_RequiredValidity=!1)))},!0),n.$watch("forwardTo",function(e,t){e!=t&&(""==e.trim()?(n.DestinationEmail_RequiredValidity=!0,n.DestinationEmailValidity=!1):n.DestinationEmail_RequiredValidity=!1,""!=e&&(n.ValidateEmail(e)?n.DestinationEmailValidity=!1:(n.DestinationEmailValidity=!0,n.DestinationEmail_RequiredValidity=!1)))},!0),n.ValidateEmail=function(e){var t,n,a,i=nc_Val_EmailPatternForAddForwarder,o=0,s=!0,r=e.split("@")[1];return null==r||-1!=(t=r.indexOf("."))&&(n=r.substr(t+1,r.length-t),a=nc_Val_AlphaAndDot,""!=n&&(s=!!n.match(a))),null!=e&&(0!=i.test(e.trim())&&s||(o+=1)),0==o},n.ShowPostLoader=function(){$(".opac").delay(25).queue(function(){$(this).addClass("page-load").css({"text-align":"left",padding:"0em",opacity:"0.5","background-position":"center 2.5em"})})}}]),app.controller("domainEmailRedirectActionforCatchAllCtrl",["$scope","$rootScope","$modalInstance","httpRepository","$filter","notificationService","pageHelper","$q","ncGridParams","$sce","domainName","mailBoxName","mailBoxId","forwardTo","action","title","index",function(i,e,n,a,t,o,s,r,c,l,d,u,m,p,f,h,g){i.cancelClick=function(){n.close("")},i.title=h,i.index=g,i.DomainParams=[],i.oldDestination=p,i.oldMailBoxName=u,i.domainName=d,i.mailBoxId=m,i.forwardTo=p,i.mailBoxName=u,i.action=f,i.DestinationEmailValidity=!1,i.DestinationEmail_RequiredValidity=!1,i.SaveChanges=new s.AsyncStateBehavior({constructor:function(){var t=this.instance;t.onClick=function(){""==i.forwardTo.trim()?i.DestinationEmail_RequiredValidity=!0:i.DestinationEmail_RequiredValidity=!1,"add"!=i.action||""==i.forwardTo.trim()||i.DestinationEmailValidity?"edit"!=i.action||""==i.forwardTo.trim()||i.DestinationEmailValidity||(i.oldDestination.replace(/ /g,"")!=i.forwardTo.replace(/ /g,"")?(i.ShowPostLoader(),","==i.forwardTo.charAt(i.forwardTo.length-1)&&(i.forwardTo=i.forwardTo.substr(0,i.forwardTo.length-1)),a.emailRedirect.editForwarder(i.domainName,i.mailBoxId,i.mailBoxName.replace(/ /g,""),i.forwardTo.replace(/ /g,""),i.oldMailBoxName.replace(/ /g,""),i.oldDestination.replace(/ /g,"")).then(function(e){t.asyncStatus(0==e.Error?s.AsyncStatus.Success:s.AsyncStatus.Error,e)})):(i.DomainParams={Call:"Error",SameEntryFlag:"SameEntry",domainName:i.domainName,mailBoxId:i.mailBoxId,forwardTo:i.forwardTo,mailBoxName:"*",index:i.index,errMesg:""},n.close(i.DomainParams))):(i.ShowPostLoader(),","==i.forwardTo.charAt(i.forwardTo.length-1)&&(i.forwardTo=i.forwardTo.substr(0,i.forwardTo.length-1)),a.emailRedirect.addForwarder(i.domainName,i.mailBoxName.replace(/ /g,""),i.forwardTo.replace(/ /g,"")).then(function(e){t.asyncStatus(0==e.Error?s.AsyncStatus.Success:s.AsyncStatus.Error,e)}))}},onSuccess:function(e){this.instance.asyncStatus(s.AsyncStatus.Active),i.DomainParams={Call:"Success",SameEntryFlag:"",domainName:i.domainName,mailBoxId:i.mailBoxId,forwardTo:i.forwardTo,mailBoxName:"*",oldMailBoxName:i.oldMailBoxName,oldDestination:i.oldDestination,index:i.index,errMesg:""},n.close(i.DomainParams)},onActive:function(){},onError:function(e){this.instance.asyncStatus(s.AsyncStatus.Active),i.DomainParams={Call:"Error",SameEntryFlag:"",domainName:i.domainName,mailBoxId:i.mailBoxId,forwardTo:i.forwardTo,mailBoxName:"*",oldMailBoxName:i.oldMailBoxName,oldDestination:i.oldDestination,index:i.index,errMesg:e.Msg},n.close(i.DomainParams)}}),i.$watch("forwardTo",function(e,t){if(e!=t){for(var n=e.trim().split(","),a=0;a<n.length;a++)if(""!=n[a].trim()){if(!i.ValidateEmail(n[a].trim())){i.DestinationEmailValidity=!0,i.DestinationEmail_RequiredValidity=!1;break}i.DestinationEmailValidity=!1}""==e.trim()?(i.DestinationEmail_RequiredValidity=!0,i.DestinationEmailValidity=!1):i.DestinationEmail_RequiredValidity=!1}},!0),i.ValidateEmail=function(e){var t,n,a,i=nc_Val_EmailPatternForAddForwarder,o=0,s=!0,r=e.split("@")[1];return null==r||-1!=(t=r.indexOf("."))&&(n=r.substr(t+1,r.length-t),a=nc_Val_AlphaAndDot,""!=n&&(s=!!n.match(a))),null!=e&&(0!=i.test(e.trim())&&s||(o+=1)),0==o},i.ShowPostLoader=function(){$(".opac").delay(25).queue(function(){$(this).addClass("page-load").css({"text-align":"left",padding:"0em",opacity:"0.5","background-position":"center 2.5em"})})}}]),app.controller("domainEmailRedirectCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","$location","notificationService","pageHelper","$q","ncGridParams","$sce","ncGridEventNames",function(f,e,h,t,r,n,a,g,o,s,c,l){f.DomainsInfo=DomainInfoRes,f.pageHelper=g,f.pageNotification=new a.instance,f.domainEmailRedirectnotificationAlertArguments={hasClose:!0,isAutoHide:!0},f.UrlSplits=n.absUrl().split("/"),f.domainName=f.UrlSplits[f.UrlSplits.length-2],f.pageFrom=f.UrlSplits[f.UrlSplits.length-1],f.SelectedDomainNames="",f.SelectedmailBoxNames="",f.SelectedmailBoxIds="",f.UsedForwarders=0,f.AvailableForwarders=0,f.CatchAllFlag=!1,f.HideSelectAllCheckBox=!1,f.Used=0,f.Total=0,f.HideHorizontalLine=!1,f.ShowCatchAllButton=!1,f.pageBehavior=new g.AsyncStateBehavior({constructor:function(){var i=this.instance;i.showLoadPanel=!0,i.showContent=!1,i.model=null,i.pageNgGridSettings=new s,i.pageNgGridSettings.parameters.search.serchPropertyNames=["MailboxName","ForwardTo"],i.pageNgGridSettings.settings.getData=function(a,e){i.filterStatusPropertyNames=[],i.filterFlagsPropertyNames=[],h.emailRedirect.getEmailForwarders(e,f.domainName).then(function(e){var t;if(i.DNSProviderType=e.Result.DNSProviderType,"CUSTOM"==i.DNSProviderType.toUpperCase())return!(window.location.href="/Domains/DomainList/");if(i.UsedForwarders=e.Result.UsedForwarders,i.AvailableForwarders=e.Result.AvailableForwarders,i.RegularsForwarders=e.Result.RegularsForwarders,i.CatchAllForwarders=e.Result.CatchAllForwarders,i.DomainName=e.Result.DomainName,f.UsedForwarders=e.Result.UsedForwarders,f.AvailableForwarders=e.Result.AvailableForwarders,i.ShowActionButtons=e.Result.UsedForwarders<e.Result.AvailableForwarders,i.ShowCatchAll=e.Result.CatchAllForwarders<1,f.CatchAllFlag=!(e.Result.CatchAllForwarders<1),f.ShowCatchAllButton=!(0<e.Result.CatchAllForwarders),f.HideSelectAllCheckBox=e.Result.UsedForwarders<2,(0==i.UsedForwarders||1<i.UsedForwarders)&&(f.HideHorizontalLine=!0,1<i.CatchAllForwarders&&i.RegularsForwarders<1&&(f.HideHorizontalLine=!1)),"Free DNS"==i.DNSProviderType&&f.pageNotification.alerts.addWarning(f.DomainsInfo.site_Alert_ForUsingFreeDns+' <a href="/Domains/DomainControlPanel/'+f.domainName+'/advancedns">Manage DNS ></a>',{hasClose:!0,isAutoHide:!1}),null!=e.Result&&null!=e.Result.Data){""!=e.Msg&&null!=e.Msg&&null!=e.Msg&&f.pageNotification.stuckNotifications.addSuccess(e.Msg,f.domainEmailRedirectnotificationAlertArguments),t=e.Result.Data.length;for(var n=0;n<t;n++)e.Result.Data[n].chbId="chbId"+n;i.pageNgGridSettings.parameters.mapping.isLazyLoading=i.pageNgGridSettings.parameters.mapping.serverChunkSize<=e.Result.Data.length,a.resolve(e.Result),i.model=i.pageNgGridSettings.parameters.storage.requestData,f.updateListTitle(f.UsedForwarders,f.AvailableForwarders)}else f.pageNotification.stuckNotifications.addError(e.Msg,f.domainEmailRedirectnotificationAlertArguments)})},i.pageNgGridSettings.settings.reload(),i.asyncStatus(g.AsyncStatus.Success)},onSuccess:function(e){this.instance.asyncStatus(g.AsyncStatus.Active),f.showLoadPanel=!1},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){this.instance.showLoadPanel=!1,f.pageNotification.stuckNotifications.addError(e.Msg,f.domainEmailRedirectnotificationAlertArguments)}}),f.IsChooseEmailRedirectListingModalPopUpOpened=!1,f.openChooseEmailRedirectListingModalPopUp=function(e,t,n,a,i){f.SelectedDomainNames=e,f.SelectedmailBoxIds=t,f.SelectedmailBoxNames=n;var o;f.IsChooseEmailRedirectListingModalPopUpOpened||((o=r.open({templateUrl:"/Domains/SSL/Common/PromptRemove",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return f.DomainsInfo.static_Modal_Title_RemoveForwarder},modalContent:function(){if("multiremove"==i.toLocaleLowerCase())return f.DomainsInfo.static_MultiRemovePromptIntro}}})).result.then(function(e){var t,n;f.IsChooseEmailRedirectListingModalPopUpOpened=!1,"yes"==e&&"multiremove"==i.toLowerCase()&&(t=f.SelectedDomainNames,n=f.pageBehavior.pageNgGridSettings.parameters.selection.selectedItems,f.pageAction.Click(t,"","","",n,i,!0))},function(){f.IsChooseEmailRedirectListingModalPopUpOpened=!1,o=null}),o.opened.then(function(){f.IsChooseEmailRedirectListingModalPopUpOpened=!0}))},f.pageAction=new g.AsyncStateBehavior({constructor:function(){var p=this.instance;p.Click=function(o,e,s,r,t,c,l){var n,a=[],d=[],u=[];if("multiremove"==c||"remove"==c){if(p.asyncStatus(g.AsyncStatus.Loading,""),"multiremove"==c)for(var m=0;m<t.length;m++)a.push({MailboxId:t[m].MailboxId.replace(/ /g,""),MailboxName:t[m].MailboxName.replace(/ /g,""),ForwardTo:t[m].ForwardTo.replace(/ /g,"")}),d[m]=t[m].MailboxName.replace(/ /g,""),u[m]=t[m].ForwardTo.replace(/ /g,"");else if("remove"==c)if(a.push({MailboxId:e.replace(/ /g,""),MailboxName:s.replace(/ /g,""),ForwardTo:r.replace(/ /g,"")}),-1<s.indexOf("*"))for(u=r.split(","),m=0;m<u.length;m++)d[m]="*";else d[0]=s.replace(/ /g,""),u[0]=r.replace(/ /g,"");n={DomainName:o,Forwarders:a},h.emailRedirect.removeForwarder(n).then(function(e){if(0==e.Error){if(e.Result){var t="",n=0,a=f.pageBehavior.pageNgGridSettings.parameters.storage.requestData;if(1<d.length)for(m=0;m<d.length;m++){"*"==d[m]?(t=a.filter(function(e){return e.MailboxName.replace(/ /g,"")==d[m].replace(/ /g,"")}),n="remove"==c?1:u[m].split(",").length):t=a.filter(function(e){return e.MailboxName.replace(/ /g,"")==d[m].replace(/ /g,"")&&e.ForwardTo.replace(/ /g,"")==u[m].replace(/ /g,"")}),f.UsedForwarders="*"==d[m]?f.UsedForwarders-n:f.UsedForwarders-t.length;for(var i=0;i<t.length;i++)f.pageBehavior.pageNgGridSettings.settings.actions.removeItem(t[i])}else{"multiremove"==c&&(s=d[0],r=u[0]);t=a.filter(function(e){return e.MailboxName.replace(/ /g,"")==s.replace(/ /g,"")&&e.ForwardTo.replace(/ /g,"")==r.replace(/ /g,"")});"*"==s&&(n="remove"==c?1:r.split(",").length),f.UsedForwarders="*"==s?f.UsedForwarders-n:f.UsedForwarders-t.length;for(i=0;i<t.length;i++)f.pageBehavior.pageNgGridSettings.settings.actions.removeItem(t[i])}}1==l&&f.uncheckCheckBoxes(),f.updateListTitle(f.UsedForwarders,f.AvailableForwarders),f.pageNotification.stuckNotifications.clear(),p.asyncStatus(g.AsyncStatus.Success,{DomainName:o,ForwarderName:d,Message:e.Msg})}else 1==l&&f.uncheckCheckBoxes(),f.pageNotification.stuckNotifications.clear(),p.asyncStatus(g.AsyncStatus.Error,{DomainName:o,ForwarderName:d,Message:e.Msg})})}}},onSuccess:function(e){f.pageNotification.stuckNotifications.clear();this.instance;var t=!1,n="";if(1<e.ForwarderName.length){var a=e.ForwarderName;for(i=0;i<a.length;i++)"Catch-All"==(n="*"!=a[i]?a[i]+"@"+e.DomainName:"Catch-All")&&(f.CatchAllFlag=!1),"Catch-All"==n?t||(t=!0,f.pageNotification.stuckNotifications.addSuccess(f.DomainsInfo.success_Contextual_EmailRedirectForwarderRemove.replace("{Forwarder}",n),f.domainEmailRedirectnotificationAlertArguments)):f.pageNotification.stuckNotifications.addSuccess(f.DomainsInfo.success_Contextual_EmailRedirectForwarderRemove.replace("{Forwarder}",n),f.domainEmailRedirectnotificationAlertArguments)}else"Catch-All"==(n="*"!=(n=e.ForwarderName[0])?n+"@"+e.DomainName:"Catch-All")&&(f.CatchAllFlag=!1,f.ShowCatchAllButton=!0),f.pageNotification.stuckNotifications.addSuccess(f.DomainsInfo.success_Contextual_EmailRedirectForwarderRemove.replace("{Forwarder}",n),f.domainEmailRedirectnotificationAlertArguments);1==f.UsedForwarders&&(f.HideSelectAllCheckBox=!0),0==f.UsedForwarders||1<f.UsedForwarders?(f.HideHorizontalLine=!0,1<f.CatchAllForwarders&&f.RegularsForwarders<1&&(f.HideHorizontalLine=!1)):f.HideHorizontalLine=!1},onActive:function(e){this.instance.asyncStatus(g.AsyncStatus.Active)},onLoading:function(e){var t=this.instance;f.pageNotification.stuckNotifications.addLoading("Please wait.",!1),t.isDisabled=!0,t.showError=!1},onLocked:function(e){this.instance},onError:function(e){this.instance;f.pageNotification.stuckNotifications.clear(),f.pageNotification.stuckNotifications.addError(f.DomainsInfo.error_Contextual_EmailRedirectForwarderRemove,f.domainEmailRedirectnotificationAlertArguments)}}),f.IsForwarderModalOpened=!1,f.openForwarderModal=function(n,a,i,o,s){h.domainDetails.IsManagerHasRightsToPerformThisAction(f.domainName,"eforward").then(function(e){var t;e?f.IsForwarderModalOpened||((t=r.open({templateUrl:"/Domains/ForwarderModalPopup",controller:"domainEmailRedirectActionCtrl",size:"lg",backdrop:"static",resolve:{domainName:function(){return f.domainName},mailBoxName:function(){return a},mailBoxId:function(){return o},forwardTo:function(){return i},action:function(){return n},title:function(){return"add"==n?title=f.DomainsInfo.static_Modal_Title_AddForwarder:"edit"==n&&(title=f.DomainsInfo.static_Modal_Title_EditForwarder),title},index:function(){return s}}})).result.then(function(e){f.IsForwarderModalOpened=!1;var t;this.instance;null!=e&&null!=e&&""!=e&&("Success"==e.Call?(t="","add"==n?(f.AddItemInGrid(e),t=f.DomainsInfo.success_Contextual_AddForwarder.replace("{Forwarder}",e.mailBoxName+"@"+f.domainName)):"edit"==n&&(f.UpdateItemInGrid(e),t=f.DomainsInfo.success_Contextual_EditForwarder.replace("{Forwarder}",e.oldMailBoxName+"@"+f.domainName)),f.pageNotification.stuckNotifications.addSuccess(t,f.domainEmailRedirectnotificationAlertArguments)):"Error"==e.Call&&("SameEntry"!=e.SameEntryFlag?f.pageNotification.stuckNotifications.addError(e.errMesg,f.domainEmailRedirectnotificationAlertArguments):f.pageNotification.stuckNotifications.addWarning("Forwarder cannot be duplicated.",f.domainEmailRedirectnotificationAlertArguments)))}),t.opened.then(function(e){f.IsForwarderModalOpened=!0})):f.pageNotification.stuckNotifications.addError("User has no rights to perform this action",{hasClose:!0,isAutoHide:!0})})},f.IsForwarderModalCatchAllOpened=!1,f.openForwarderModalCatchAll=function(n,a,i,o,s){h.domainDetails.IsManagerHasRightsToPerformThisAction(f.domainName,"eforward").then(function(e){var t;e?f.IsForwarderModalCatchAllOpened||((t=r.open({templateUrl:"/Domains/ForwarderModalCatchAllPopup",controller:"domainEmailRedirectActionforCatchAllCtrl",size:"lg",backdrop:"static",resolve:{domainName:function(){return f.domainName},mailBoxName:function(){return a},mailBoxId:function(){return o},forwardTo:function(){return i},action:function(){return n},title:function(){return"add"==n?title=f.DomainsInfo.static_Modal_Title_AddCatchAll:"edit"==n&&(title=f.DomainsInfo.static_Modal_Title_EditCatchAll),title},index:function(){return s}}})).result.then(function(e){f.IsForwarderModalCatchAllOpened=!1;var t;this.instance;null!=e&&null!=e&&""!=e&&("Success"==e.Call?(f.CatchAllFlag=!0,t="","add"==n?(f.AddItemInGrid(e),t=f.DomainsInfo.success_Contextual_AddCatchAll):"edit"==n&&(f.UpdateItemInGrid(e),t=f.DomainsInfo.success_Contextual_EditCatchAll),f.pageNotification.stuckNotifications.addSuccess(t,f.domainEmailRedirectnotificationAlertArguments)):"Error"==e.Call&&("add"==n?f.pageNotification.stuckNotifications.addError(e.errMesg,f.domainEmailRedirectnotificationAlertArguments):"edit"==n&&("SameEntry"!=e.SameEntryFlag?f.pageNotification.stuckNotifications.addError(e.errMesg,f.domainEmailRedirectnotificationAlertArguments):f.pageNotification.stuckNotifications.addWarning("Forwarder cannot be duplicated.",f.domainEmailRedirectnotificationAlertArguments))))}),t.opened.then(function(e){f.IsForwarderModalCatchAllOpened=!0})):f.pageNotification.stuckNotifications.addError("User has no rights to perform this action",{hasClose:!0,isAutoHide:!0})})},f.AddItemInGrid=function(e){var t,n,a=f.pageBehavior.pageNgGridSettings.parameters.storage.requestData;0<a.length?((t=angular.copy(a[0])).chbId="chbId"+a.length,t.MailboxId=e.mailBoxId,t.MailboxName=e.mailBoxName,t.ForwardTo=e.forwardTo,f.pageBehavior.pageNgGridSettings.settings.actions.addNewItem(t),n=e.forwardTo.split(","),f.UsedForwarders=f.UsedForwarders+n.length,f.updateListTitle(f.UsedForwarders,f.AvailableForwarders),f.HideSelectAllCheckBox=!1,1<f.UsedForwarders&&(f.HideHorizontalLine=!0),"*"==e.mailBoxName&&(f.ShowCatchAllButton=!1)):setTimeout(function(){location.reload()},1e3),f.uncheckCheckBoxes()},f.UpdateItemInGrid=function(e){var t,n;"*"==e.mailBoxName&&(t=e.oldDestination.split(",").length,n=e.forwardTo.split(",").length,f.Used=n<t?f.Used-(t-n):f.Used+(n-t),f.updateListTitle(f.Used,f.Total)),f.pageBehavior.pageNgGridSettings.parameters.storage.pageData[e.index].MailboxName=e.mailBoxName,f.pageBehavior.pageNgGridSettings.parameters.storage.pageData[e.index].ForwardTo=e.forwardTo,f.uncheckCheckBoxes()},f.uncheckCheckBoxes=function(){f.pageBehavior.pageNgGridSettings.parameters.selection.selectedItems=[];var e=f.pageBehavior.pageNgGridSettings.parameters.storage.requestData;for(i=0;i<e.length;i++)1==e[i].$ncColumnSelected&&(e[i].$ncColumnSelected=!1);$("div#chb_selectAllForwarders").find('input[type="checkbox"]').removeAttr("checked")},f.updateListTitle=function(e,t){f.UsedForwarders=e,f.Used=e,f.Total=t,0==e&&(f.CatchAllFlag=!1,f.ShowCatchAllButton=!0,f.ShowActionButtons=!0)},e.closeLightbox=function(){"domaindetails"==f.pageFrom?window.location.href="/Domains/DomainControlPanel/"+f.domainName+"/domain/":window.location.href="/Domains/DomainList/"}}]),app.controller("domainParkingPageActionCtrl",["$scope","$rootScope","$modalInstance","httpRepository","$filter","notificationService","pageHelper","$q","ncGridParams","$sce","domainName","showParkingPageInfoAboutDnsUpdate","showParkingPageInfoAboutServiceUpdate","ParkingPagehostIDsList","TempParkingPagehostIDsList","hostIDsListToBeRemoved",function(n,e,t,a,i,o,s,r,c,l,d,u,m,p,f,h){n.pageHelper=s,n.pageNotification=new o.instance,n.domainName=d,n.showParkingPageInfoAboutDnsUpdate=u,n.showParkingPageInfoAboutServiceUpdate=m,n.ParkingPagehostIDsList=p,n.TempParkingPagehostIDsList=f,n.hostIDsListToBeRemoved=h;var g=""!=n.ParkingPagehostIDsList;n.ShowPostLoader=function(){$(".opac").delay(25).queue(function(){$(this).addClass("page-load").css({"text-align":"left",padding:"0em",opacity:"0.5","background-position":"center 2.5em"})})},n.checkBoxClick=function(){n.HasPassport&&(n.showCheckBoxError=!1)},n.SaveChanges=new s.AsyncStateBehavior({constructor:function(){var t=this.instance;t.Click=function(){n.HasPassport?(n.showCheckBoxError=!1,n.ShowPostLoader(),g?a.domainDns.turningOnOrOffHostRecords(n.ParkingPagehostIDsList,!0,n.domainName).then(function(e){e.Error?t.asyncStatus(s.AsyncStatus.Error,e):""!=n.hostIDsListToBeRemoved?a.domainDns.parkingPageRemoveHostRecord(n.hostIDsListToBeRemoved,n.domainName).then(function(e){t.asyncStatus(0==e.Error?s.AsyncStatus.Success:s.AsyncStatus.Error,e)}):t.asyncStatus(s.AsyncStatus.Success,e)}):a.domainDns.parkingPageAddHostRecord(n.domainName).then(function(e){e.Error?t.asyncStatus(s.AsyncStatus.Error,e):""!=n.hostIDsListToBeRemoved?a.domainDns.parkingPageRemoveHostRecord(n.hostIDsListToBeRemoved,n.domainName).then(function(e){t.asyncStatus(0==e.Error?s.AsyncStatus.Success:s.AsyncStatus.Error,e)}):t.asyncStatus(s.AsyncStatus.Success,e)})):n.showCheckBoxError=!0}},onSuccess:function(e){this.instance;n.DomainParams={Call:"Success"},t.close(n.DomainParams)},onError:function(e){this.instance;n.DomainParams={Call:"Error"},t.close(n.DomainParams)}}),n.cancelClick=function(){t.close("")}}]),app.controller("authorizeDNSCtrl",["$scope","$modalInstance","$rootScope","httpRepository","$filter","$modal","notificationService","pageHelper","$q","ncGridParams","$sce","ncGridEventNames","domainTransferInService","DomainInfo",function(i,a,e,o,t,n,s,r,c,l,d,u,m,p){i.domain=p.domainName,i.TotalEmail=p.emails,i.authFlow=p.authFlow,i.isEmailFlow=function(){return"email"==i.authFlow},i.txtRecord=p.txtRecord,i.NoSearchOption={minimumResultsForSearch:-1},i.selectedEmail="",i.isDisabled=function(){return i.isEmailFlow()&&!i.selectedEmail};var f=p.hostName;i.changeSelectedEmail=function(e){i.selectedEmail=e};function h(e,t){t.authFlow=i.authFlow;var n=t.Error?r.AsyncStatus.Error:r.AsyncStatus.Success;e.asyncStatus(n,t),a.close(t)}i.AuthorizeDNS=new r.AsyncStateBehavior({constructor:function(){var a=this.instance;a.click=function(e){var t,n;t=a,n=e,i.isEmailFlow()?o.domainListAction.authorizeDNS(n,f).then(function(e){return e.Error?r.AsyncStatus.Error:o.domainListAction.setEmailAuthorizationFlow(i.domain,f)}).then(function(e){return h(t,e)}):o.domainListAction.setTxtAuthorizationFlow(i.domain,f).then(h.bind(null,t))}},onSuccess:function(e){a.close(e)},onError:function(e){a.close(e)}}),i.cancelClick=function(){a.close()}}]),app.controller("bulkActionStepCommonCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","notificationService","pageHelper","$q","ncGridParams","$sce","ncWizardService",function(n,e,t,a,i,o,s,r,c,l,d){n.selectedDomains=0,n.selectedServices=0,n.changeSelectedDomainCount=function(e){var t=$('input[type="checkbox"][renewtype="domain"]:checked');n.selectedDomains=null!=t?t.length:0},n.changeSelectedServiceCount=function(e){var t=$('input[type="checkbox"][renewtype="service"]:checked');n.selectedServices=null!=t?t.length:0},n.changeSelectedDomainCount(),n.changeSelectedServiceCount()}]),app.controller("confirmChangeNameServerToPremiumDnsModalCtrl",["$scope","$modalInstance","pageHelper","notificationService","$document",function(t,n,a,e,i){t.modalBehavior=new a.AsyncStateBehavior({constructor:function(){var e=this.instance;e.showErrors=!1,e.create=function(){n.close(!0)},e.cancel=function(){n.dismiss("cancel")},e.asyncStatus(a.AsyncStatus.Active)},onSuccess:function(e){this.instance.asyncStatus(a.AsyncStatus.Active)},onActive:function(e){this.instance.showErrors=!1},onLoading:function(e){this.instance.showErrors=!1},onError:function(e){this.instance.showErrors=!0}}),i.bind("keydown",function(e){27!==e.which||t.modalBehavior.asyncStatus().isDisabled||n.dismiss("escape key press")}),i.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!t.modalBehavior.asyncStatus().isDisabled&&t.modalBehavior.cancel()})}]),app.controller("contactslightboxCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","$location","notificationService","pageHelper","$timeout","$attrs",function(o,e,i,t,n,a,s,r,c,l){function d(e){var t,n;null!=e&&("nu"==(t=e.Tld.toLowerCase().replace(".",""))?(o.ExtendedAttribute.NUExtendedAttributesInfo.OrgNo=e.OrgNo,o.ExtendedAttribute.NUExtendedAttributesInfo.VatNo=e.VatNo):"xxx"==t?o.ExtendedAttribute.XXXExtendedAttributesInfo.MemberId=e.MemberId:"ca"==t?(n="",o.ExtendedAttribute.CAExtendedAttributesInfo.CIRALanguage=e.CIRALanguage,o.ExtendedAttribute.CAExtendedAttributesInfo.CIRAType=e.CIRAType,o.ExtendedAttribute.CAExtendedAttributesInfo.CiraAgreementValue="Y",n="CCT"!=o.ExtendedAttribute.CAExtendedAttributesInfo.CIRAWhois&&"RES"!=o.ExtendedAttribute.CAExtendedAttributesInfo.CIRAWhois&&"ABO"!=o.ExtendedAttribute.CAExtendedAttributesInfo.CIRAWhois&&"LGR"!=o.ExtendedAttribute.CAExtendedAttributesInfo.CIRAWhois?"Full":e.CIRAWhois,o.ExtendedAttribute.CAExtendedAttributesInfo.CIRAWhois=n):"us"==t?(o.ExtendedAttribute.USExtendedAttributesInfo.RegistrantNexus=e.RegistrantNexus,o.ExtendedAttribute.USExtendedAttributesInfo.RegistrantNexusCountry=e.RegistrantNexusCountry,o.ExtendedAttribute.USExtendedAttributesInfo.RegistrantPurpose=e.RegistrantPurpose):"uk"==t?(o.ExtendedAttribute.UkExtendedAttributesInfo.UKLegalType=e.UKLegalType,o.ExtendedAttribute.UkExtendedAttributesInfo.CompanyID=e.CompanyID,o.ExtendedAttribute.UkExtendedAttributesInfo.UKRegisteredfor=e.Registeredfor,o.ExtendedAttribute.UkExtendedAttributesInfo.UKRegOptOut=e.RegOptOut):"couk"==t?(o.ExtendedAttribute.COUKExtendedAttributesInfo.UKLegalType=e.UKLegalType,o.ExtendedAttribute.COUKExtendedAttributesInfo.CompanyID=e.CompanyID,o.ExtendedAttribute.COUKExtendedAttributesInfo.Registeredfor=e.Registeredfor,o.ExtendedAttribute.COUKExtendedAttributesInfo.RegOptOut=e.RegOptOut):"meuk"==t?(o.ExtendedAttribute.MEUKExtendedAttributesInfo.UKLegalType=e.UKLegalType,o.ExtendedAttribute.MEUKExtendedAttributesInfo.CompanyID=e.CompanyID,o.ExtendedAttribute.MEUKExtendedAttributesInfo.Registeredfor=e.Registeredfor,o.ExtendedAttribute.MEUKExtendedAttributesInfo.RegOptOut=e.RegOptOut):"orguk"==t?(o.ExtendedAttribute.ORGUKExtendedAttributesInfo.UKLegalType=e.UKLegalType,o.ExtendedAttribute.ORGUKExtendedAttributesInfo.CompanyID=e.CompanyID,o.ExtendedAttribute.ORGUKExtendedAttributesInfo.Registeredfor=e.Registeredfor,o.ExtendedAttribute.ORGUKExtendedAttributesInfo.RegOptOut=e.RegOptOut):"tel"==t&&(o.ExtendedAttribute.TelExtendedAttributesInfo.WhoisType=e.WhoisType,o.ExtendedAttribute.TelExtendedAttributesInfo.IsPublish=e.IsPublish))}o.ctrlfrmcontactedit={},o.copyApply={},o.company=!1,o.emailpattern=nc_Val_EmailPattern,e.closeLightbox=function(){window.location.href="/Domains/DomainControlPanel/"+o.DomainContactsOverviewModel.DomainName+"/domain"},this.initialize=function(e){var t,n;o.DomainContactsOverviewModel=e,o.dmncontact=e.ContactDetails,null!=o.dmncontact&&(t=o.dmncontact.PhoneOnly,n=o.dmncontact.FaxOnly,o.dmncontact.Phone=t,o.dmncontact.Fax=n,o.dmncontact.PhoneCode=o.dmncontact.PhonePrefix.replace("+",""),null==o.dmncontact.FaxPrefix||""==o.dmncontact.FaxPrefix?o.dmncontact.FaxExt="1":o.dmncontact.FaxExt=o.dmncontact.FaxPrefix.replace("+",""),""!=o.dmncontact.PhoneExt&&(o.dmncontact.PhoneNumberExt=o.dmncontact.PhonePrefix,o.dmncontact.PhoneExtCheckBox=!0,$(".phone.phonefax").addClass("has-extension")),(null!=o.dmncontact.JobTitle&&""!=o.dmncontact.JobTitle||null!=o.dmncontact.Organization&&""!=o.dmncontact.Organization)&&(o.dmncontact.company=!0,$(".show-hide-checkbox").addClass("expanded"))),o.ExtendedAttribute={XXXExtendedAttributesInfo:{MemberId:"",Resolving:""},CAExtendedAttributesInfo:{CIRAWhois:"",CIRALanguage:"",CIRAType:""},USExtendedAttributesInfo:{},NUExtendedAttributesInfo:{OrgNo:"",VatNo:""},UkExtendedAttributesInfo:{UKLegalType:"",Registeredfor:"",CompanyID:"",RegOptOut:""},COUKExtendedAttributesInfo:{UKLegalType:"",Registeredfor:"",CompanyID:"",RegOptOut:""},MEUKExtendedAttributesInfo:{UKLegalType:"",Registeredfor:"",CompanyID:"",RegOptOut:""},ORGUKExtendedAttributesInfo:{UKLegalType:"",Registeredfor:"",CompanyID:"",RegOptOut:""},TelExtendedAttributesInfo:{WhoisType:"",IsPublish:!0}},o.ExtendedAttribute.USExtendedAttributesInfo={RegistrantNexus:"",RegistrantNexusCountry:"",RegistrantPurpose:""},o.caCiraWhoisVisible=!1,o.usNexusCountryVisible=!1},o.ZipCodeValidation=function(e,t){var n="",n="us"==(e=e.toLowerCase())?nc_Val_US_PostalCodeRegex:"ca"==e?nc_Val_CA_PostalCodeRegex:"gb"==e?nc_Val_GB_PostalCodeRegex:"nl"==e?nc_Val_NL_PostalCodeRegex:"br"==e?nc_Val_BR_PostalCodeRegex:"jp"==e?nc_Val_JP_PostalCodeRegex:nc_Val_PostalCodeRegex;return!!t.match(n)},null!=o.ctrlfrmcontactedit.frmdomaineditcontacts&&null!=o.ctrlfrmcontactedit.frmdomaineditcontacts.DomainContactCountry&&o.ctrlfrmcontactedit.frmdomaineditcontacts.DomainContactCountry.$setValidity("contactCountryrequired",!0),o.$watch("dmncontact.PhoneCode",function(e,t){e!==t&&null!=o.ctrlfrmcontactedit.frmdomaineditcontacts&&null!=o.ctrlfrmcontactedit.frmdomaineditcontacts.PhoneCode&&(""==e&&""!=o.dmncontact.DomainContactPhone?o.ctrlfrmcontactedit.frmdomaineditcontacts.PhoneCode.$setValidity("contactPhoneCodeRequired",!1):o.ctrlfrmcontactedit.frmdomaineditcontacts.PhoneCode.$setValidity("contactPhoneCodeRequired",!0))}),o.$watch("dmncontact.FaxExt",function(e,t){e!==t&&null!=o.ctrlfrmcontactedit.frmdomaineditcontacts&&null!=o.ctrlfrmcontactedit.frmdomaineditcontacts.FaxCode&&(""==e&&""!=o.dmncontact.FaxNumber?o.ctrlfrmcontactedit.frmdomaineditcontacts.FaxCode.$setValidity("contactFaxCodeRequired",!1):o.ctrlfrmcontactedit.frmdomaineditcontacts.FaxCode.$setValidity("contactFaxCodeRequired",!0))}),o.$watch("dmncontact.Country",function(e,t){e!==t&&null!=o.ctrlfrmcontactedit.frmdomaineditcontacts&&null!=o.ctrlfrmcontactedit.frmdomaineditcontacts.DomainContactCountry&&(o.ctrlfrmcontactedit.frmdomaineditcontacts.DomainContactCountry.$setValidity("contactCountryrequired",!0),""==e?(o.ctrlfrmcontactedit.frmdomaineditcontacts.DomainContactCountry.$setValidity("contactCountryrequired",!1),o.ctrlfrmcontactedit.frmdomaineditcontacts.ZIPPostalCode.$setValidity("invalidzipcode",!0),o.ctrlfrmcontactedit.frmdomaineditcontacts.StateProvince.$setValidity("invalidstate",!0)):(o.ZipCodeValidation(e,o.dmncontact.PostalCode)?o.ctrlfrmcontactedit.frmdomaineditcontacts.ZIPPostalCode.$setValidity("invalidzipcode",!0):o.ctrlfrmcontactedit.frmdomaineditcontacts.ZIPPostalCode.$setValidity("invalidzipcode",!1),""!=o.dmncontact.StateProvince&&(o.dmncontact.StateProvince=o.GetStateCode(o.ctrlfrmcontactedit.frmdomaineditcontacts.StateProvince,e,o.dmncontact.StateProvince))))}),o.GetStateCode=function(e,t,n){var a={US:{states:{AL:["AL","Alabama"],AK:["AK","Alaska"],AZ:["AZ","Arizona"],AR:["AR","Arkansas"],CA:["CA","California"],CO:["CO","Colorado"],CT:["CT","Connecticut"],DE:["DE","Delaware"],FL:["FL","Florida"],GA:["GA","Georgia"],HI:["HI","Hawaii"],ID:["ID","Idaho"],IL:["IL","Illinois"],IN:["IN","Indiana"],IA:["IA","Iowa"],KS:["KS","Kansas"],KY:["KY","Kentucky"],LA:["LA","Louisiana"],ME:["ME","Maine"],MD:["MD","Maryland"],MA:["MA","Massachetts"],MI:["MI","Michigan"],MN:["MN","Minnesota"],MS:["MS","Mississippi"],MO:["MO","Missouri"],MT:["MT","Montana"],NE:["NE","Nebraska"],NV:["NV","Nevada"],NH:["NH","New Hampshire"],NJ:["NJ","New Jersey"],NM:["NM","New Mexico"],NY:["NY","New York"],NC:["NC","North Carolina"],ND:["ND","North Dakota"],OH:["OH","Ohio"],OK:["OK","Oklahoma"],OR:["OR","Oregon"],PA:["PA","Pennsylvania"],RI:["RI","Rhode Island"],SC:["SC","South Carolina"],SD:["SD","South Dakota"],TN:["TN","Tennessee"],TX:["TX","Texas"],UT:["UT","Utah"],VT:["VT","Vermont"],VA:["VA","Virginia"],WA:["WA","Washington"],WV:["WV","West Virginia"],WI:["WI","Wisconsin"],WY:["WY","Wyoming"],DC:["DC","Washington, D.C","Washington D.C","Washington DC","Washington, DC"],AS:["AS","American Samoa"],UM:["UM","Minor Outlying Islands"],MP:["MP","Northern Mariana Islands"],PR:["PR","Puerto Rico"],VI:["VI","Virgin Islands"],GU:["GU","Guam"],FM:["FM","Federated States of Micronesia"],MH:["MH","Marshall Islands"],PW:["PW","Palau"],AE:["AE","Armed Forces Europe"],AP:["AP","Armed Forces Pacific"],AA:["AA","Armed Forces Americas"]}},CA:{states:{AB:["AB","Alberta"],BC:["BC","British Columbia"],MB:["MB","Manitoba"],NB:["NB","New Brunswick"],NL:["NL","Newfoundland & Labrador"],NS:["NS","Nova Scotia"],ON:["ON","Ontario"],PE:["PE","Prince Edward Island"],QC:["QC","Quebec"],SK:["SK","Saskatchewan"],NT:["NT","Northwest Territories"],NU:["NU","Nunavut"],YT:["YT","Yukon"]}}}[t=t];if(null==a)return e.$setValidity("invalidstate",!0),n;validateState=!0;var i,o,s=a.states;s[n];for(o in s)for(var r in s[o])if("sortOn"!=r&&(i=s[o][r].replace(/[^a-zA-Z0-9]/g,"").toLowerCase(),n.toLowerCase()===i))return e.$setValidity("invalidstate",!0),e.$setViewValue(o),e.$render(),o;return e.$setValidity("invalidstate",!1),e.$setViewValue(n),e.$render(),n},o.IsChooseContactModalPopUpOpened=!1,o.openChooseContactModalPopUp=function(i){var e;o.IsChooseContactModalPopUpOpened||((e=n.open({templateUrl:"/Domains/ChooseAddressContact/",controller:"ChooseContactModalCtrl",size:"lg",backdrop:"static"})).result.then(function(e){var t,n,a;o.IsChooseContactModalPopUpOpened=!1,""!=e&&"Single"==i&&(o.dmncontact.FirstName=e.FirstName,o.dmncontact.LastName=e.LastName,o.dmncontact.Organization=e.Organization,o.dmncontact.JobTitle=e.JobTitle,o.dmncontact.Address1=e.Address1,o.dmncontact.Address2=e.Address2,o.dmncontact.City=e.City,o.dmncontact.StateProvince=e.StateProvince,o.dmncontact.PostalCode=e.PostalCode,(t=$('form[name="ctrlfrmcontactedit.frmdomaineditcontacts"] select#DomainContactCountry')).length&&(t.select2("val",e.Country),o.dmncontact.Country=e.Country),-1!=e.Phone.indexOf(".")&&(o.dmncontact.Phone=e.Phone.split(".")[1]),o.dmncontact.PhoneNumberExt=e.PhoneExt,-1!=e.Fax.indexOf(".")&&(o.dmncontact.Fax=e.Fax.split(".")[1]),""!=e.PhoneExt&&(o.dmncontact.PhoneExt=e.PhoneExt,o.dmncontact.PhoneExtCheckBox=!0),o.dmncontact.EmailAddress=e.EmailAddress,(n=$('form[name="ctrlfrmcontactedit.frmdomaineditcontacts"] select#DomainContactPhone')).length&&-1!=e.Phone.indexOf(".")&&(n.select2("val",e.Phone.split(".")[0].replace(/\+/g,"")),o.dmncontact.PhoneCode=e.Phone.split(".")[0].replace(/\+/g,"")),(a=$('form[name="ctrlfrmcontactedit.frmdomaineditcontacts"] select#FaxNumber')).length&&-1!=e.Fax.indexOf(".")&&(a.select2("val",e.Fax.split(".")[0].replace(/\+/g,"")),o.dmncontact.FaxExt=e.Fax.split(".")[0].replace(/\+/g,"")))}),e.opened.then(function(e){o.IsChooseContactModalPopUpOpened=!0}))},$(".scrolltotop").click(function(){$("html, body").animate({scrollTop:0},800)}),o.$watchCollection(function(){if(o.ctrlfrmcontactedit.frmdomaineditcontacts)return o.ctrlfrmcontactedit.frmdomaineditcontacts},function(){o.ctrlfrmcontactedit.frmdomaineditcontacts&&1==o.ctrlfrmcontactedit.frmdomaineditcontacts.$invalid&&(o.MoveNextClicked=!1)},!0),o.singleClear=function(){o.dmncontact.company||(o.dmncontact.Organization="",o.dmncontact.JobTitle="")},o.IsChooseExtendedAttributeModalPopUp=!1,o.openChooseExtendedAttributeModalPopUp=function(e){var t;o.IsChooseExtendedAttributeModalPopUp||((t=n.open({templateUrl:"/Domains/ChooseExtendedModal/",controller:"ChooseExtendedAttributeCtrl",size:"lg",backdrop:"static",resolve:{sectionViewModal:function(){return o.DomainContactsOverviewModel}}})).result.then(function(e){o.IsChooseExtendedAttributeModalPopUp=!1,"cancel"!=e&&(o.DomainContactsOverviewModel.ContactModificationType="Others",d(e),o.savecontactdetails("Others"))}),t.opened.then(function(){o.IsChooseExtendedAttributeModalPopUp=!0}))},o.savecontactdetails=function(t){var e=!1;$("#errorDisplaySingleContacts").hide(),"Others"==o.DomainContactsOverviewModel.ContactModificationType?e=!0:(e=o.ctrlfrmcontactedit.frmdomaineditcontacts.$valid,d(o.DomainContactsOverviewModel.DomainContactSectionViewModel.ExtendedAttributesInfo));var n,a=o.DomainContactsOverviewModel;e?(o.MoveNextClicked=!0,a.ContactDetails=o.dmncontact,a.UpdateRegistrantContact=o.copyApply.isRegistrant,a.UpdateAdminContact=o.copyApply.isAdmin,a.UpdateTechnicalContact=o.copyApply.isTec,a.UpdateBillingContact=o.copyApply.isBill,a.ExtendedAttributesInfo=o.ExtendedAttribute,n=o.ExtendedAttribute,$(".loader").addClass("page-load").css({"text-align":"left",padding:"0em",opacity:"0.5","background-position":"center 4.5em"}),i.domainInfo.updateSingleContact(JSON.stringify(a),JSON.stringify(n)).then(function(e){1==e.Error?($("#errorDisplaySingleContacts").show(),$(".loader").removeClass("page-load").css({"text-align":"left",padding:"0em",opacity:"0.9"}),o.contactEditErrMsg=e.Msg):-1!=t.indexOf("~")&&"dcp"==t.split("~")[0]&&(window.location.href="/domains/domaincontrolpanel/"+t.split("~")[1]+"/domain")})):($("div.site-msg.has-close.error").show(),$("#errorDisplaySingleContacts").hide())}}]),app.controller("contactslightboxWizardCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","notificationService","pageHelper","$q","ncGridParams","$sce","ncWizardService",function(g,e,v,t,n,a,i,o,s,r,S){function y(){g.notificationLoader=new i.AsyncStateBehavior({constructor:function(){var e=this.instance;g.IsItemChosen=!0,g.loadingNotification.alerts.clear(),e.activeNotification=g.loadingNotification.stuckNotifications.addLoading("<B>Loading.</B> Please wait..",!1),e.asyncStatus(i.AsyncStatus.Success)},onSuccess:function(){g.IsLoadingCompleted=!0,this.instance.asyncStatus(i.AsyncStatus.Active)},onActive:function(){}})}g.MoveNextClicked=!1,g.forminvalid=!0,g.confirm=!1,g.IsLoadingCompleted=!1,g.loadingNotification=new a.instance,g.NextButtonText="Next",g.IsNextButton=!1,g.NoSearchOption={minimumResultsForSearch:-1},g.statepattern=nc_Val_StateRegex,g.postalcodepattern=nc_Val_PostalCodeRegex,g.emailpattern=nc_Val_EmailPattern,this.initialize=function(e){g.DomainContactsViewModel=e,g.SelectedDomainList=[],g.ExtendedAttribute={XXXExtendedAttributesInfo:{MemberId:"",Resolving:""},CAExtendedAttributesInfo:{CIRAWhois:"",CIRALanguage:"",CIRAType:""},USExtendedAttributesInfo:{},AsiaExtendedAttributesInfo:{ContactType:"",LegalEntityType:"",IdentForm:"",CcLocality:"",LocalityCity:"",LocalitySp:"",IdentNumber:"",OtherLegalType:"",OtherIdentForm:""},NUExtendedAttributesInfo:{OrgNo:"",VatNo:""},UkExtendedAttributesInfo:{UKLegalType:"",Registeredfor:"",CompanyID:"",RegOptOut:""},COUKExtendedAttributesInfo:{UKLegalType:"",Registeredfor:"",CompanyID:"",RegOptOut:""},MEUKExtendedAttributesInfo:{UKLegalType:"",Registeredfor:"",CompanyID:"",RegOptOut:""},ORGUKExtendedAttributesInfo:{UKLegalType:"",Registeredfor:"",CompanyID:"",RegOptOut:""}},g.ExtendedAttribute.USExtendedAttributesInfo={RegistrantNexus:"",RegistrantNexusCountry:"",RegistrantPurpose:""},g.ExtendedAttribute.CAExtendedAttributesInfo.CIRAWhois=g.caCiraWhois[0].value,g.ExtendedAttribute.AsiaExtendedAttributesInfo.ContactType=g.asiaContactTypes[1].value,g.caCiraWhoisVisible=!1,g.usNexusCountryVisible=!1,g.ukCompanyIDVisible=!1,g.ukWhoisVisible=!1,g.coukCompanyIDVisible=!1,g.coukWhoisVisible=!1,g.meukCompanyIDVisible=!1,g.meukWhoisVisible=!1,g.orgukCompanyIDVisible=!1,g.orgukWhoisVisible=!1},g.set=function(e){g.selectedDomains=e},g.selectedDomains=0,g.change=function(e){e?g.selectedDomains++:g.selectedDomains--},g.regcontact={Organization:"",JobTitle:"",FirstName:"",LastName:"",Address1:"",Address2:"",City:"",StateProvince:"",StateProvinceChoice:"",PostalCode:"",Country:"US",Phone:"",PhoneExt:"",Fax:"",EmailAddress:"",FaxExt:"",Description:"",Hint:"",username:"",DefaultYN:"",PhoneCode:"1",FaxCode:"1"},g.admcontact={Organization:"",JobTitle:"",FirstName:"",LastName:"",Address1:"",Address2:"",City:"",StateProvince:"",StateProvinceChoice:"",PostalCode:"",Country:"US",Phone:"",PhoneExt:"",Fax:"",EmailAddress:"",FaxExt:"",Description:"",Hint:"",username:"",DefaultYN:"",PhoneCode:"1",FaxCode:"1"},g.teccontact={Organization:"",JobTitle:"",FirstName:"",LastName:"",Address1:"",Address2:"",City:"",StateProvince:"",StateProvinceChoice:"",PostalCode:"",Country:"US",Phone:"",PhoneExt:"",Fax:"",EmailAddress:"",FaxExt:"",Description:"",Hint:"",username:"",DefaultYN:"",PhoneCode:"1",FaxCode:"1"},g.billcontact={Organization:"",JobTitle:"",FirstName:"",LastName:"",Address1:"",Address2:"",City:"",StateProvince:"",StateProvinceChoice:"",PostalCode:"",Country:"US",Phone:"",PhoneExt:"",Fax:"",EmailAddress:"",FaxExt:"",Description:"",Hint:"",username:"",DefaultYN:"",PhoneCode:"1",FaxCode:"1"},g.copyApply={isRegtoAdmin:!1,isAdmintoTec:!1,isTectoBill:!1},g.ctrlfrmreg={},g.ctrladmin={},g.ctrlfrmtechnical={},g.ctrlfrmbilling={},g.ctrlfrmextended={},g.step1={},g.ctrladmin.hasGermanDomain=!1,g.pageHelper=i,g.pageNotification=new a.instance,e.closeLightbox=function(){window.location.href="/Domains/DomainList"},g.SampleDropdownItems=[],g.ErrorMessageOnSameViewClick=function(){g.pageNotification.alerts.addError("This is a test error message on same view.",g.sslnotificationAlertArguments),g.pageNotification.stuckNotifications.addError("This is a test error message on same view.",{hasClose:!0,isAutoHide:!0})},g.SuccessMessageOnSameViewClick=function(){g.pageNotification.alerts.addSuccess("This is a test success message on same view.",g.sslnotificationAlertArguments),g.pageNotification.stuckNotifications.addSuccess("This is a test success message on same view.",{hasClose:!0,isAutoHide:!0})},g.SuccessMessageOnParentViewClick=function(){v.uaTeamAngularExamplesRepository.saveSubPage().then(function(e){e.Result.Data.isRedirect&&(window.location.href=e.Result.Data.redirectUrl)})},g.getNextStepInfo=function(){return S.getStep(S.getCurrentStepIndex()+1)},g.getPrevStepInfo=function(){return S.getStep(S.getCurrentStepIndex()-1)},$(".scrolltotop").click(function(){$("html, body").animate({scrollTop:0},800)}),g.usRegistrantNexusList=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;v.domainInfo.GetUSRegistrantNexusList().then(function(e){t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},onSuccess:function(e){g.usRegistrantNexusList=e.Result},onError:function(e){e.Result}}),g.usRegistrantNexusCountryList=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;v.domainInfo.GetUSRegistrantNexusCountryCodeList().then(function(e){t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},onSuccess:function(e){g.usRegistrantNexusCountryList=e.Result},onError:function(e){}}),g.usRegistrantPurposeList=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;v.domainInfo.GetRegistrantPurposeList().then(function(e){t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},onSuccess:function(e){g.usRegistrantPurposeList=e.Result},onError:function(e){}}),g.caRegistrantContactList=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;v.domainInfo.LoadCanadaRegistrantContactList().then(function(e){t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},onSuccess:function(e){g.caRegistrantContactList=e.Result},onError:function(e){}}),g.caLanguagetList=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;v.domainInfo.GetCanadaRegistrantLanguage().then(function(e){t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},onSuccess:function(e){g.caLanguagetList=e.Result},onError:function(e){}}),g.caCiraWhois=[{name:"No",value:"Full"},{name:"Yes",value:"Private"}],g.asiaLegalEntityTypeList=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;v.domainInfo.GetAsiaLegalEntityType().then(function(e){t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},onSuccess:function(e){g.asiaLegalEntityTypeList=e.Result},onError:function(e){}}),g.asiaIdentFormTypeList=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;v.domainInfo.GetAsiaIdentFormType().then(function(e){t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},onSuccess:function(e){g.asiaIdentFormTypeList=e.Result},onError:function(e){}}),g.asiaContyCodeList=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;v.domainInfo.GetAsiaCountryCodes().then(function(e){t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},onSuccess:function(e){g.asiaContyCodeList=e.Result},onError:function(e){}}),g.asiaContactTypes=[{name:"CED",value:"CED"},{name:"CEA",value:"CEA"}],g.ukRegistrantContactList=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;v.domainInfo.LoadUkRegistrantContactList("uk").then(function(e){t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},onSuccess:function(e){g.ukRegistrantContactList=e.Result},onError:function(e){}}),g.coukRegistrantContactList=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;v.domainInfo.LoadUkRegistrantContactList("couk").then(function(e){t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},onSuccess:function(e){g.coukRegistrantContactList=e.Result},onError:function(e){}}),g.meukRegistrantContactList=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;v.domainInfo.LoadUkRegistrantContactList("meuk").then(function(e){t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},onSuccess:function(e){g.meukRegistrantContactList=e.Result},onError:function(e){}}),g.orgukRegistrantContactList=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;v.domainInfo.LoadUkRegistrantContactList("orguk").then(function(e){t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},onSuccess:function(e){g.orgukRegistrantContactList=e.Result},onError:function(e){}}),g.ukWhois=[{name:"No",value:"n"},{name:"Yes",value:"y"}],g.AsiaContactTypeChange=function(e){g.asiaDetailDivVisible="CED"==e},g.AsiaLegalTypeChange=function(e){g.asiaOtherLegalTypeVisible="Other"==e},g.AsiaIdentFormChange=function(e){g.asiaOtherIdentFormVisible="Other"==e},g.CALegalTypeChange=function(e){-1!=="[CCT][RES][ABO][LGR]".indexOf("["+e+"]")?g.caCiraWhoisVisible=!0:g.caCiraWhoisVisible=!1},g.USNexusChange=function(e){-1!=="[C31][C32]".indexOf("["+e+"]")?g.usNexusCountryVisible=!0:g.usNexusCountryVisible=!1},g.UKLegalTypeChange=function(e){g.ukCompanyIDVisible="LTD"==e||"PLC"==e||"LLP"==e||"RCHAR"==e||"SCH"==e;-1!=="[IND][FIND]".indexOf("["+e+"]")?g.ukWhoisVisible=!0:g.ukWhoisVisible=!1},g.COUKLegalTypeChange=function(e){g.coukCompanyIDVisible="LTD"==e||"PLC"==e||"LLP"==e||"RCHAR"==e||"SCH"==e;-1!=="[IND][FIND]".indexOf("["+e+"]")?g.coukWhoisVisible=!0:g.coukWhoisVisible=!1},g.MEUKLegalTypeChange=function(e){g.meukCompanyIDVisible="LTD"==e||"PLC"==e||"LLP"==e||"RCHAR"==e||"SCH"==e;-1!=="[IND][FIND]".indexOf("["+e+"]")?g.meukWhoisVisible=!0:g.meukWhoisVisible=!1},g.ORGUKLegalTypeChange=function(e){g.orgukCompanyIDVisible="LTD"==e||"PLC"==e||"LLP"==e||"RCHAR"==e||"SCH"==e;-1!=="[IND][FIND]".indexOf("["+e+"]")?g.orgukWhoisVisible=!0:g.orgukWhoisVisible=!1},g.loadingNotification=new a.instance,g.show=!1,g.regshow=!1,g.admshow=!1,g.techshow=!1,g.billshow=!1,g.companyName=!1,g.jobTitle=!1,g.regClear=function(){g.regcontact.company||(g.regcontact.Organization="",g.regcontact.JobTitle="",g.regshow=!1),g.regcontact.company&&(g.regshow=!0)},g.admClear=function(){g.admcontact.company||(g.admcontact.Organization="",g.admcontact.JobTitle="",g.admshow=!1),g.admcontact.company&&(g.admshow=!0)},g.techClear=function(){g.teccontact.company||(g.teccontact.Organization="",g.teccontact.JobTitle="",g.techshow=!1),g.teccontact.company&&(g.techshow=!0)},g.billClear=function(){g.billcontact.company&&(g.billcontact.Organization="",g.billcontact.JobTitle="",g.billshow=!1),g.billcontact.company&&(g.billshow=!0)},g.$watchCollection(function(){if(!g.regcontact.company)return!g.regcontact.company},function(){g.regcontact.company&&(g.regcompanyName=!1,g.regjobTitle=!1,g.regshow=!0)},!0),g.regPhnExt=!1,g.$watchCollection(function(){if(!g.regcontact.PhoneExtCheckBox)return!g.regcontact.PhoneExtCheckBox},function(){g.regcontact.PhoneExtCheckBox&&(g.regPhnExt=!1)},!0),g.regcompanyName=!1,g.regjobTitle=!1,g.$watchCollection(function(){if(g.regcontact.Organization)return g.regcontact.Organization},function(){0==$("#CompanyName").val().length&&(g.regcompanyName=!0)},!0),g.$watchCollection(function(){if(g.regcontact.JobTitle)return g.regcontact.JobTitle},function(){0==$("#JobTitle").val().length&&(g.regjobTitle=!0)},!0),g.$watchCollection(function(){if(!g.admcontact.company)return!g.admcontact.company},function(){g.admcontact.company&&(g.admcompanyName=!1,g.admjobTitle=!1,g.admshow=!0)},!0),g.admPhnExt=!1,g.$watchCollection(function(){if(!g.admcontact.PhoneExtCheckBox)return!g.admcontact.PhoneExtCheckBox},function(){g.admcontact.PhoneExtCheckBox&&(g.admPhnExt=!1)},!0),g.admcompanyName=!1,g.admjobTitle=!1,g.$watchCollection(function(){if(g.admcontact.Organization)return g.admcontact.Organization},function(){0==$("#CompanyName").val().length&&(g.admcompanyName=!0)},!0),g.$watchCollection(function(){if(g.admcontact.JobTitle)return g.admcontact.JobTitle},function(){0==$("#JobTitle").val().length&&(g.admjobTitle=!0)},!0),g.$watchCollection(function(){if(!g.teccontact.company)return!g.teccontact.company},function(){g.teccontact.company&&(g.techcompanyName=!1,g.techjobTitle=!1,g.techshow=!0)},!0),g.techPhnExt=!1,g.$watchCollection(function(){if(!g.teccontact.PhoneExtCheckBox)return!g.teccontact.PhoneExtCheckBox},function(){g.teccontact.PhoneExtCheckBox&&(g.techPhnExt=!1)},!0),g.techcompanyName=!1,g.techjobTitle=!1,g.$watchCollection(function(){if(g.teccontact.Organization)return g.teccontact.Organization},function(){0==$("#CompanyName").val().length&&(g.techcompanyName=!0)},!0),g.$watchCollection(function(){if(g.regcontact.JobTitle)return g.regcontact.JobTitle},function(){0==$("#JobTitle").val().length&&(g.techjobTitle=!0)},!0),g.$watchCollection(function(){if(!g.billcontact.company)return!g.billcontact.company},function(){g.billcontact.company&&(g.billcompanyName=!1,g.billjobTitle=!1,g.billshow=!0)},!0),g.billPhnExt=!1,g.$watchCollection(function(){if(!g.billcontact.PhoneExtCheckBox)return!g.billcontact.PhoneExtCheckBox},function(){g.billcontact.PhoneExtCheckBox&&(g.regPhnExt=!1)},!0),g.billcompanyName=!1,g.billjobTitle=!1,g.$watchCollection(function(){if(g.billcontact.Organization)return g.billcontact.Organization},function(){0==$("#CompanyName").val().length&&(g.billcompanyName=!0)},!0),g.$watchCollection(function(){if(g.billcontact.JobTitle)return g.billcontact.JobTitle},function(){0==$("#JobTitle").val().length&&(g.billjobTitle=!0)},!0),g.$watchCollection(function(){if(g.selectedDomains&&$("input:checkbox[name=confirmselecteddomains]:checked"))return g.selectedDomains&&$("input:checkbox[name=confirmselecteddomains]:checked")},function(){0!=g.selectedDomains&&0!=$("input:checkbox[name=confirmselecteddomains]:checked").length||(g.MoveNextClicked=!1)},!0),g.$watchCollection(function(){if(g.ctrlfrmreg.frmdomainregistrantcontacts)return g.ctrlfrmreg.frmdomainregistrantcontacts},function(){g.ctrlfrmreg.frmdomainregistrantcontacts&&1==g.ctrlfrmreg.frmdomainregistrantcontacts.$invalid&&(g.MoveNextClicked=!1)},!0),g.$watchCollection(function(){if(g.ctrladmin.frmdomainadmincontacts)return g.ctrladmin.frmdomainadmincontacts},function(){g.ctrladmin.frmdomainadmincontacts&&1==g.ctrladmin.frmdomainadmincontacts.$invalid&&(g.MoveNextClicked=!1)},!0),g.$watchCollection(function(){if(g.ctrlfrmtechnical.frmdomaintechnicalcontacts)return g.ctrlfrmtechnical.frmdomaintechnicalcontacts},function(){g.ctrlfrmtechnical.frmdomaintechnicalcontacts&&1==g.ctrlfrmtechnical.frmdomaintechnicalcontacts.$invalid&&(g.MoveNextClicked=!1)},!0),g.$watchCollection(function(){if(g.ctrlfrmbilling.frmdomainbillingcontacts)return g.ctrlfrmbilling.frmdomainbillingcontacts},function(){g.ctrlfrmbilling.frmdomainbillingcontacts&&1==g.ctrlfrmbilling.frmdomainbillingcontacts.$invalid&&(g.MoveNextClicked=!1)},!0),S.moveBack=function(){var e=S.getCurrentStepIndex()-1;2==e&&g.regshow&&(g.regshow=!0),3==e&&g.admshow&&(g.admshow=!0),4==e&&g.techshow&&(g.techshow=!0),5==e&&g.billshow&&(g.billshow=!0),this.canMoveBack()&&this.moveTo(e)},g.Next=function(){g.regcompanyName=!0,g.regjobTitle=!0,g.admcompanyName=!0,g.admjobTitle=!0,g.techcompanyName=!0,g.techjobTitle=!0,g.billcompanyName=!0,g.billjobTitle=!0,g.contactinvalid=!1;var e=S.getCurrentStepIndex(),t=null!=g.ctrlfrmreg.frmdomainregistrantcontacts&&g.ctrlfrmreg.frmdomainregistrantcontacts.$valid,n=null!=g.ctrladmin.frmdomainadmincontacts&&g.ctrladmin.frmdomainadmincontacts.$valid,a=null!=g.ctrlfrmtechnical.frmdomaintechnicalcontacts&&g.ctrlfrmtechnical.frmdomaintechnicalcontacts.$valid,i=null!=g.ctrlfrmbilling.frmdomainbillingcontacts&&g.ctrlfrmbilling.frmdomainbillingcontacts.$valid,o=(null!=g.ctrlfrmextended.frmExtendedAttribute&&g.ctrlfrmextended.frmExtendedAttribute.$valid,""),s="",r=!1,c=!0;g.regcontact.company&&g.copyApply.isRegtoAdmin&&(g.admshow=!0),g.admcontact.company&&g.copyApply.isAdmintoTec&&(g.techshow=!0),g.teccontact.company&&g.copyApply.isTectoBill&&(g.billshow=!0);var l=g.DomainContactsViewModel;switch(e){case 1:y();if(g.contactinvalid=!1,g.SelectedDomainList=[],0==$("input:checkbox[name=selecteddomains]:checked").length||0==$("input:checkbox[name=confirmselecteddomains]:checked").length)return void $("div.site-msg.has-close.list.error").show();$("input:checkbox[name=selecteddomains]:checked").each(function(){var e={};e.DomainName=$(this).attr("id");var t=e.DomainName.indexOf(".");e.tld=e.DomainName.substr(t+1),"de"==e.tld&&$("div.site-msg.de.info").show(),"xxx"==e.tld||"us"==e.tld||"ca"==e.tld||"asia"==e.tld||"uk"==e.tld||"co.uk"==e.tld||"me.uk"==e.tld||"org.uk"==e.tld?r=!0:c=!1;var n=!1,a=g.SelectedDomainList;for(p=0;p<a.length;p++)a[p].tld==e.tld&&(n=!0);s=s+$(this).attr("id")+",",n||(g.SelectedDomainList.push(e),o=o+$(this).attr("id")+",")});var d=g.DomainContactsViewModel.BulkModificationStep1ViewModel,u=s.split(",");for(key in d){for(var m=!1,p=0;p<u.length;p++){d[key].DomainName;d.hasOwnProperty(key)&&d[key].DomainName==u[p]&&(m=!0)}m||"sortOn"==key||delete d[key]}g.jsonTldProperties=d,1==r?5==S.steps.length&&(S.steps.length=S.steps.length+1):6==S.steps.length&&(S.steps.length=S.steps.length-1),g.MoveNextClicked=!1,S.moveNext();break;case 2:y();if(g.contactinvalid=!1,t)return l.DomainContactSectionView.RegistrantContactDetails=g.regcontact,S.moveNext(),g.MoveNextClicked=!1,g.copyApply.isRegtoAdmin&&(angular.copy(g.regcontact,g.admcontact),l.DomainContactSectionView.AdminContactDetails=g.admcontact,S.moveNext()),g.copyApply.isAdmintoTec&&(angular.copy(g.regcontact,g.teccontact),g.copyApply.isRegtoAdmin&&(l.DomainContactSectionView.TechContactDetails=g.teccontact,S.moveNext())),void(g.copyApply.isTectoBill&&(angular.copy(g.regcontact,g.billcontact),g.copyApply.isRegtoAdmin&&g.copyApply.isAdmintoTec&&(l.DomainContactSectionView.BillingContactDetails=g.billcontact),S.moveNext()));$("div.site-msg.has-close.reg.error").show();var f=g.ctrlfrmreg.frmdomainregistrantcontacts.$error;angular.forEach(f.required,function(e){e.$invalid&&(e.$name,$("input[name="+e.$name+"]").focus())});f=g.ctrlfrmreg.frmdomainregistrantcontacts.$error;angular.forEach(f.pattern,function(e){e.$invalid&&(e.$name,$("input[name="+e.$name+"]").focus())});break;case 3:y();if(g.contactinvalid=!1,n)return l.DomainContactSectionView.AdminContactDetails=g.admcontact,S.moveNext(),g.MoveNextClicked=!1,g.copyApply.isAdmintoTec&&(angular.copy(g.admcontact,g.teccontact),l.DomainContactSectionView.TechContactDetails=g.teccontact,S.moveNext()),void(g.copyApply.isTectoBill&&(angular.copy(g.admcontact,g.billcontact),g.copyApply.isAdmintoTec&&(l.DomainContactSectionView.BillingContactDetails=g.billcontact),S.moveNext()));$("div.site-msg.has-close.adm.error").show();f=g.ctrladmin.frmdomainadmincontacts.$error;angular.forEach(f.required,function(e){e.$invalid&&(e.$name,$("input[name="+e.$name+"]").focus())});f=g.ctrladmin.frmdomainadmincontacts.$error;angular.forEach(f.pattern,function(e){e.$invalid&&(e.$name,$("input[name="+e.$name+"]").focus())});break;case 4:y();if(g.contactinvalid=!1,a)return l.DomainContactSectionView.TechContactDetails=g.teccontact,S.moveNext(),g.MoveNextClicked=!1,$("input:checkbox[name=selecteddomains]:checked").each(function(){var e={};e.DomainName=$(this).attr("id");var t=e.DomainName.indexOf(".");e.tld=e.DomainName.substr(t+1),"xxx"==e.tld||"us"==e.tld||"ca"==e.tld||"asia"==e.tld||"uk"==e.tld||"co.uk"==e.tld||"me.uk"==e.tld||"org.uk"==e.tld?(r=!0,g.IsNextButton=!0):c=!1}),void(0==r&&0==c&&g.copyApply.isTectoBill&&(angular.copy(g.teccontact,g.billcontact),l.DomainContactSectionView.BillingContactDetails=g.billcontact,S.moveNext()));$("div.site-msg.has-close.tec.error").show();f=g.ctrlfrmtechnical.frmdomaintechnicalcontacts.$error;angular.forEach(f.required,function(e){e.$invalid&&(e.$name,$("input[name="+e.$name+"]").focus())});f=g.ctrlfrmtechnical.frmdomaintechnicalcontacts.$error;angular.forEach(f.pattern,function(e){e.$invalid&&(e.$name,$("input[name="+e.$name+"]").focus())});break;case 5:y();if(g.contactinvalid=!1,i){var h=!1;l.DomainContactSectionView.BillingContactDetails=g.billcontact,S.moveNext(),g.MoveNextClicked=!1;for(p=0;p<g.SelectedDomainList.length;p++)-1!=="[XXX][CA][US][ASIA][UK][CO.UK][ME.UK][ORG.UK]".indexOf("["+g.SelectedDomainList[p].tld.toUpperCase()+"]")?h=g.ValidateTld=!0:g.ValidateTld=!1;if(h)return;g.DomainContactsViewModel.BulkModificationStep1ViewModel=g.jsonTldProperties;return(l=g.DomainContactsViewModel).ExtendedAttributeList=g.ExtendedAttribute,v.domainInfo.updateContact(JSON.stringify(l),JSON.stringify("")).then(function(e){var t=e;if(!t.isRedirect)return g.contactinvalid=!0,g.errorMsg=t.Msg,void(g.ctrlfrmbilling.frmdomainbillingcontacts.$invalid=!0);window.location.href=t.redirectUrl}),!1}$("div.site-msg.has-close.bill.error").show();f=g.ctrlfrmbilling.frmdomainbillingcontacts.$error;angular.forEach(f.required,function(e){e.$invalid&&(e.$name,$("input[name="+e.$name+"]").focus())});f=g.ctrlfrmbilling.frmdomainbillingcontacts.$error;angular.forEach(f.pattern,function(e){e.$invalid&&(e.$name,$("input[name="+e.$name+"]").focus())});break;default:return}},g.openChooseExtendedAttributeModalPopUp=function(t){n.open({templateUrl:"/Domains/ChooseExtendedModal/",controller:"ChooseExtendedAttributeCtrl",size:"lg",backdrop:"static"}).result.then(function(e){"asia"==t?(g.ExtendedAttribute.AsiaExtendedAttributesInfo.ContactType=e.AsiaContactType,g.ExtendedAttribute.AsiaExtendedAttributesInfo.LegalEntityType=e.AsiaLegalEntityType,g.ExtendedAttribute.AsiaExtendedAttributesInfo.City=e.AsiaCity):"nu"==t?(g.ExtendedAttribute.NUExtendedAttributesInfo.OrgNo=e.NUOrgNo,g.ExtendedAttribute.NUExtendedAttributesInfo.VatNo=e.NUVatNo):"xxx"==t?g.ExtendedAttribute.XXXExtendedAttributesInfo.MemberId=e.XXXMemberId:"ca"==t?(g.ExtendedAttribute.CAExtendedAttributesInfo.CIRAWhois=e.CIRAWhois,g.ExtendedAttribute.CAExtendedAttributesInfo.CIRALanguage=e.CIRALanguage,g.ExtendedAttribute.CAExtendedAttributesInfo.CIRAType=e.CIRAType):"us"==t&&(g.ExtendedAttribute.USExtendedAttributesInfo.RegistrantNex=RegistrantNex,g.ExtendedAttribute.USExtendedAttributesInfo.RegistrantNexusCountry=RegistrantNexusCountry,g.ExtendedAttribute.USExtendedAttributesInfo.RegistrantPurpose=RegistrantPurpose)})},g.openChooseContactModalPopUp=function(){$("#maincontent").length&&$("#maincontent").addClass("disabled-content async-processing");var p=S.getCurrentStepIndex();n.open({templateUrl:"/Domains/ChooseAddressContact/",controller:"ChooseContactModalCtrl",size:"lg",backdrop:"static"}).result.then(function(e){var t,n,a,i,o,s,r,c,l,d,u,m;""!=e&&(2==p&&(g.regcontact.FirstName=e.FirstName,g.regcontact.LastName=e.LastName,""==e.Organization&&""==e.JobTitle||(g.show=!0,g.regcontact.company=!0),""!=e.Organization&&""!=e.JobTitle||(g.show=!1,g.regcontact.company=!1),g.regcontact.Organization=e.Organization,g.regcontact.JobTitle=e.JobTitle,g.regcontact.Address1=e.Address1,g.regcontact.Address2=e.Address2,g.regcontact.City=e.City,g.regcontact.StateProvince=e.StateProvince,g.regcontact.PostalCode=e.PostalCode,(t=$('form[name="ctrlfrmreg.frmdomainregistrantcontacts"] select#RegistrantContactCountry')).length&&(t.select2("val",e.Country),g.Country=e.Country,g.regcontact.Country=e.Country),-1!=e.Phone.indexOf(".")&&(g.regcontact.Phone=e.Phone.split(".")[1]),null!=g.regcontact.PhoneNumberExt&&(g.regcontact.PhoneNumberExt=e.PhoneExt),-1!=e.Fax.indexOf(".")&&(g.regcontact.Fax=e.Fax.split(".")[1]),""!=e.PhoneExt&&(g.regcontact.PhoneExt=e.PhoneExt,g.regcontact.PhoneExtCheckBox=!0),g.regcontact.EmailAddress=e.EmailAddress,(n=$('form[name="ctrlfrmreg.frmdomainregistrantcontacts"] select#RegistrantPhone')).length&&-1!=e.Phone.indexOf(".")&&(n.select2("val",e.Phone.split(".")[0].replace(/\+/g,"")),g.regcontact.PhoneCode=e.Phone.split(".")[0].replace(/\+/g,"")),(a=$('form[name="ctrlfrmreg.frmdomainregistrantcontacts"] select#FaxNumber')).length&&-1!=e.Fax.indexOf(".")&&(a.select2("val",e.Fax.split(".")[0].replace(/\+/g,"")),g.regcontact.FaxExt=e.Fax.split(".")[0].replace(/\+/g,""))),3==p&&(g.admcontact.FirstName=e.FirstName,g.admcontact.LastName=e.LastName,""==e.Organization&&""==e.JobTitle||(g.show=!0,g.admcontact.company=!0),""!=e.Organization&&""!=e.JobTitle||(g.show=!1,g.admcontact.company=!1),g.admcontact.Organization=e.Organization,g.admcontact.JobTitle=e.JobTitle,g.admcontact.Address1=e.Address1,g.admcontact.Address2=e.Address2,g.admcontact.City=e.City,g.admcontact.StateProvince=e.StateProvince,g.admcontact.PostalCode=e.PostalCode,(i=$('form[name="ctrladmin.frmdomainadmincontacts"] select#AdminContactCountry')).length&&(i.select2("val",e.Country),g.Country=e.Country,g.admcontact.Country=e.Country),-1!=e.Phone.indexOf(".")&&(g.admcontact.Phone=e.Phone.split(".")[1]),g.admcontact.PhoneNumberExt=e.PhoneExt,-1!=e.Fax.indexOf(".")&&(g.admcontact.Fax=e.Fax.split(".")[1]),""!=e.PhoneExt&&(g.admcontact.PhoneExt=e.PhoneExt,g.admcontact.PhoneExtCheckBox=!0),g.admcontact.EmailAddress=e.EmailAddress,(o=$('form[name="ctrladmin.frmdomainadmincontacts"] select#AdminContactPhone')).length&&-1!=e.Phone.indexOf(".")&&(o.select2("val",e.Phone.split(".")[0].replace(/\+/g,"")),g.admcontact.PhoneCode=e.Phone.split(".")[0].replace(/\+/g,"")),(s=$('form[name="ctrladmin.frmdomainadmincontacts"] select#FaxNumber')).length&&-1!=e.Fax.indexOf(".")&&(s.select2("val",e.Fax.split(".")[0].replace(/\+/g,"")),g.admcontact.FaxExt=e.Fax.split(".")[0].replace(/\+/g,""))),4==p&&(g.teccontact.FirstName=e.FirstName,g.teccontact.LastName=e.LastName,""==e.Organization&&""==e.JobTitle||(g.show=!0,g.teccontact.company=!0),""!=e.Organization&&""!=e.JobTitle||(g.show=!1,g.teccontact.company=!1),g.teccontact.Organization=e.Organization,g.teccontact.JobTitle=e.JobTitle,g.teccontact.Address1=e.Address1,g.teccontact.Address2=e.Address2,g.teccontact.City=e.City,g.teccontact.StateProvince=e.StateProvince,g.teccontact.PostalCode=e.PostalCode,(r=$('form[name="ctrlfrmtechnical.frmdomaintechnicalcontacts"] select#TechContactCountry')).length&&(r.select2("val",e.Country),g.Country=e.Country,g.teccontact.Country=e.Country),-1!=e.Phone.indexOf(".")&&(g.teccontact.Phone=e.Phone.split(".")[1]),g.teccontact.PhoneNumberExt=e.PhoneExt,-1!=e.Fax.indexOf(".")&&(g.teccontact.Fax=e.Fax.split(".")[1]),""!=e.PhoneExt&&(g.teccontact.PhoneExt=e.PhoneExt,g.teccontact.PhoneExtCheckBox=!0),g.teccontact.EmailAddress=e.EmailAddress,(c=$('form[name="ctrlfrmtechnical.frmdomaintechnicalcontacts"] select#TechContactPhone')).length&&-1!=e.Phone.indexOf(".")&&(c.select2("val",e.Phone.split(".")[0].replace(/\+/g,"")),g.teccontact.PhoneCode=e.Phone.split(".")[0].replace(/\+/g,"")),(l=$('form[name="ctrlfrmtechnical.frmdomaintechnicalcontacts"] select#FaxNumber')).length&&-1!=e.Fax.indexOf(".")&&(l.select2("val",e.Fax.split(".")[0].replace(/\+/g,"")),g.teccontact.FaxExt=e.Fax.split(".")[0].replace(/\+/g,""))),5==p&&(g.billcontact.FirstName=e.FirstName,g.billcontact.LastName=e.LastName,""==e.Organization&&""==e.JobTitle||(g.show=!0,g.billcontact.company=!0),""!=e.Organization&&""!=e.JobTitle||(g.show=!1,g.billcontact.company=!1),g.billcontact.Organization=e.Organization,g.billcontact.JobTitle=e.JobTitle,g.billcontact.Address1=e.Address1,g.billcontact.Address2=e.Address2,g.billcontact.City=e.City,g.billcontact.StateProvince=e.StateProvince,g.billcontact.PostalCode=e.PostalCode,(d=$('form[name="ctrlfrmbilling.frmdomainbillingcontacts"] select#BillingContactCountry')).length&&(d.select2("val",e.Country),g.Country=e.Country,g.billcontact.Country=e.Country),-1!=e.Phone.indexOf(".")&&(g.billcontact.Phone=e.Phone.split(".")[1]),g.billcontact.PhoneNumberExt=e.PhoneExt,-1!=e.Fax.indexOf(".")&&(g.billcontact.Fax=e.Fax.split(".")[1]),""!=e.PhoneExt&&(g.billcontact.PhoneExt=e.PhoneExt,g.billcontact.PhoneExtCheckBox=!0),g.billcontact.EmailAddress=e.EmailAddress,(u=$('form[name="ctrlfrmbilling.frmdomainbillingcontacts"] select#BillingContactPhone')).length&&-1!=e.Phone.indexOf(".")&&(u.select2("val",e.Phone.split(".")[0].replace(/\+/g,"")),g.billcontact.PhoneCode=e.Phone.split(".")[0].replace(/\+/g,"")),(m=$('form[name="ctrlfrmbilling.frmdomainbillingcontacts"] select#FaxNumber')).length&&-1!=e.Fax.indexOf(".")&&(m.select2("val",e.Fax.split(".")[0].replace(/\+/g,"")),g.billcontact.FaxExt=e.Fax.split(".")[0].replace(/\+/g,""))))})},g.convertToUpperCasePostalCode=function(e){null!=g.regcontact.Country&&"CA"!=g.regcontact.Country.toUpperCase()&&"registrantcontact"==e&&(g.regcontact.PostalCode=g.regcontact.PostalCode.toUpperCase()),null!=g.admcontact.Country&&"CA"!=g.admcontact.Country.toUpperCase()&&"admincontact"==e&&(g.admcontact.PostalCode=g.admcontact.PostalCode.toUpperCase()),null!=g.teccontact.Country&&"CA"!=g.teccontact.Country.toUpperCase()&&"technicalcontact"==e&&(g.teccontact.PostalCode=g.teccontact.PostalCode.toUpperCase()),null!=g.billcontact.Country&&"CA"!=g.billcontact.Country.toUpperCase()&&"billingcontact"==e&&(g.billcontact.PostalCode=g.billcontact.PostalCode.toUpperCase())},g.$watch("regcontact.PhoneCode",function(e,t){e!==t&&null!=g.ctrlfrmreg.frmdomainregistrantcontacts&&null!=g.ctrlfrmreg.frmdomainregistrantcontacts.PhoneCode&&(""==e&&""!=g.regcontact.RegistrantPhone?g.ctrlfrmreg.frmdomainregistrantcontacts.PhoneCode.$setValidity("regContactPhoneCodeRequired",!1):g.ctrlfrmreg.frmdomainregistrantcontacts.PhoneCode.$setValidity("regContactPhoneCodeRequired",!0))}),g.$watch("regcontact.FaxExt",function(e,t){e!==t&&null!=g.ctrlfrmreg.frmdomainregistrantcontacts&&null!=g.ctrlfrmreg.frmdomainregistrantcontacts.FaxExt&&(""==e&&""!=g.regcontact.FaxNumber?g.ctrlfrmreg.frmdomainregistrantcontacts.FaxExt.$setValidity("regContactFaxCodeRequired",!1):g.ctrlfrmreg.frmdomainregistrantcontacts.FaxExt.$setValidity("regContactFaxCodeRequired",!0))}),g.$watch("regcontact.Country",function(e,t){e!==t&&null!=g.ctrlfrmreg.frmdomainregistrantcontacts&&null!=g.ctrlfrmreg.frmdomainregistrantcontacts.RegistrantContactCountry&&(g.ctrlfrmreg.frmdomainregistrantcontacts.RegistrantContactCountry.$setValidity("regContactCountryrequired",!0),""==e?(g.ctrlfrmreg.frmdomainregistrantcontacts.RegistrantContactCountry.$setValidity("regContactCountryrequired",!1),g.ctrlfrmreg.frmdomainregistrantcontacts.ZIPPostalCode.$setValidity("invalidzipcode",!0),g.ctrlfrmreg.frmdomainregistrantcontacts.StateProvince.$setValidity("invalidstate",!0)):(g.ZipCodeValidation(e,g.regcontact.PostalCode)?g.ctrlfrmreg.frmdomainregistrantcontacts.ZIPPostalCode.$setValidity("invalidzipcode",!0):g.ctrlfrmreg.frmdomainregistrantcontacts.ZIPPostalCode.$setValidity("invalidzipcode",!1),""!=g.regcontact.StateProvince&&(g.regcontact.StateProvince=g.GetStateCode(g.ctrlfrmreg.frmdomainregistrantcontacts.StateProvince,e,g.regcontact.StateProvince))))}),g.$watch("admcontact.PhoneCode",function(e,t){e!==t&&null!=g.ctrladmin.frmdomainadmincontacts&&null!=g.ctrladmin.frmdomainadmincontacts.PhoneCode&&(""==e&&""!=g.admcontact.PhoneNumber?g.ctrladmin.frmdomainadmincontacts.PhoneCode.$setValidity("admContactPhoneCodeRequired",!1):g.ctrladmin.frmdomainadmincontacts.PhoneCode.$setValidity("admContactPhoneCodeRequired",!0))}),g.$watch("admcontact.FaxExt",function(e,t){e!==t&&null!=g.ctrladmin.frmdomainadmincontacts&&null!=g.ctrladmin.frmdomainadmincontacts.FaxExt&&(""==e&&""!=g.admcontact.FaxNumber?g.ctrladmin.frmdomainadmincontacts.FaxExt.$setValidity("admContactFaxCodeRequired",!1):g.ctrladmin.frmdomainadmincontacts.FaxExt.$setValidity("admContactFaxCodeRequired",!0))}),g.$watch("admcontact.Country",function(e,t){e!==t&&null!=g.ctrladmin.frmdomainadmincontacts&&null!=g.ctrladmin.frmdomainadmincontacts.AdminContactCountry&&(g.ctrladmin.frmdomainadmincontacts.AdminContactCountry.$setValidity("admContactCountryrequired",!0),""==e?(g.ctrladmin.frmdomainadmincontacts.AdminContactCountry.$setValidity("admContactCountryrequired",!1),g.ctrladmin.frmdomainadmincontacts.ZIPPostalCode.$setValidity("invalidzipcode",!0),g.ctrladmin.frmdomainadmincontacts.StateProvince.$setValidity("invalidstate",!0)):(g.ZipCodeValidation(e,g.admcontact.PostalCode)?g.ctrladmin.frmdomainadmincontacts.ZIPPostalCode.$setValidity("invalidzipcode",!0):g.ctrladmin.frmdomainadmincontacts.ZIPPostalCode.$setValidity("invalidzipcode",!1),""!=g.admcontact.StateProvince&&(g.admcontact.StateProvince=g.GetStateCode(g.ctrladmin.frmdomainadmincontacts.StateProvince,e,g.admcontact.StateProvince))))}),g.$watch("teccontact.PhoneCode",function(e,t){e!==t&&null!=g.ctrlfrmtechnical.frmdomaintechnicalcontacts&&null!=g.ctrlfrmtechnical.frmdomaintechnicalcontacts.PhoneCode&&(""==e&&""!=g.teccontact.PhoneNumber?g.ctrlfrmtechnical.frmdomaintechnicalcontacts.PhoneCode.$setValidity("tecContactPhoneCodeRequired",!1):g.ctrlfrmtechnical.frmdomaintechnicalcontacts.PhoneCode.$setValidity("tecContactPhoneCodeRequired",!0))}),g.$watch("teccontact.FaxExt",function(e,t){e!==t&&null!=g.ctrlfrmtechnical.frmdomaintechnicalcontacts&&null!=g.ctrlfrmtechnical.frmdomaintechnicalcontacts.FaxExt&&(""==e&&""!=g.teccontact.FaxNumber?g.ctrlfrmtechnical.frmdomaintechnicalcontacts.FaxExt.$setValidity("tecContactFaxCodeRequired",!1):g.ctrlfrmtechnical.frmdomaintechnicalcontacts.FaxExt.$setValidity("tecContactFaxCodeRequired",!0))}),g.$watch("teccontact.Country",function(e,t){e!==t&&null!=g.ctrlfrmtechnical.frmdomaintechnicalcontacts&&null!=g.ctrlfrmtechnical.frmdomaintechnicalcontacts.TechContactCountry&&(g.ctrlfrmtechnical.frmdomaintechnicalcontacts.TechContactCountry.$setValidity("tecContactCountryrequired",!0),""==e?(g.ctrlfrmtechnical.frmdomaintechnicalcontacts.TechContactCountry.$setValidity("tecContactCountryrequired",!1),g.ctrlfrmtechnical.frmdomaintechnicalcontacts.ZIPPostalCode.$setValidity("invalidzipcode",!0),g.ctrlfrmtechnical.frmdomaintechnicalcontacts.StateProvince.$setValidity("invalidstate",!0)):(g.ZipCodeValidation(e,g.teccontact.PostalCode)?g.ctrlfrmtechnical.frmdomaintechnicalcontacts.ZIPPostalCode.$setValidity("invalidzipcode",!0):g.ctrlfrmtechnical.frmdomaintechnicalcontacts.ZIPPostalCode.$setValidity("invalidzipcode",!1),""!=g.teccontact.StateProvince&&(g.teccontact.StateProvince=g.GetStateCode(g.ctrlfrmtechnical.frmdomaintechnicalcontacts.StateProvince,e,g.teccontact.StateProvince))))}),g.$watch("billcontact.PhoneCode",function(e,t){e!==t&&null!=g.ctrlfrmbilling.frmdomainbillingcontacts&&null!=g.ctrlfrmbilling.frmdomainbillingcontacts.PhoneCode&&(""==e&&""!=g.billcontact.PhoneNumber?g.ctrlfrmbilling.frmdomainbillingcontacts.PhoneCode.$setValidity("billingContactPhoneCodeRequired",!1):g.ctrlfrmbilling.frmdomainbillingcontacts.PhoneCode.$setValidity("billingContactPhoneCodeRequired",!0))}),g.$watch("billcontact.FaxExt",function(e,t){e!==t&&null!=g.ctrlfrmbilling.frmdomainbillingcontacts&&null!=g.ctrlfrmbilling.frmdomainbillingcontacts.FaxExt&&(""==e&&""!=g.billcontact.FaxNumber?g.ctrlfrmbilling.frmdomainbillingcontacts.FaxExt.$setValidity("billingContactFaxCodeRequired",!1):g.ctrlfrmbilling.frmdomainbillingcontacts.FaxExt.$setValidity("billingContactFaxCodeRequired",!0))}),g.$watch("billcontact.Country",function(e,t){e!==t&&null!=g.ctrlfrmbilling.frmdomainbillingcontacts&&null!=g.ctrlfrmbilling.frmdomainbillingcontacts.BillingContactCountry&&(g.ctrlfrmbilling.frmdomainbillingcontacts.BillingContactCountry.$setValidity("billingContactCountryrequired",!0),""==e?(g.ctrlfrmbilling.frmdomainbillingcontacts.BillingContactCountry.$setValidity("billingContactCountryrequired",!1),g.ctrlfrmbilling.frmdomainbillingcontacts.ZIPPostalCode.$setValidity("invalidzipcode",!0),g.ctrlfrmbilling.frmdomainbillingcontacts.StateProvince.$setValidity("invalidstate",!0)):(g.ZipCodeValidation(e,g.billcontact.PostalCode)?g.ctrlfrmbilling.frmdomainbillingcontacts.ZIPPostalCode.$setValidity("invalidzipcode",!0):g.ctrlfrmbilling.frmdomainbillingcontacts.ZIPPostalCode.$setValidity("invalidzipcode",!1),""!=g.billcontact.StateProvince&&(g.billcontact.StateProvince=g.GetStateCode(g.ctrlfrmbilling.frmdomainbillingcontacts.StateProvince,e,g.billcontact.StateProvince))))}),g.ZipCodeValidation=function(e,t){var n="",n="us"==(e=e.toLowerCase())?nc_Val_US_PostalCodeRegex:"ca"==e?nc_Val_CA_PostalCodeRegex:"gb"==e?nc_Val_GB_PostalCodeRegex:"nl"==e?nc_Val_NL_PostalCodeRegex:"br"==e?nc_Val_BR_PostalCodeRegex:"jp"==e?nc_Val_JP_PostalCodeRegex:nc_Val_PostalCodeRegex;return!!t.match(n)},g.GetStateCode=function(e,t,n){var a={US:{states:{AL:["AL","Alabama"],AK:["AK","Alaska"],AZ:["AZ","Arizona"],AR:["AR","Arkansas"],CA:["CA","California"],CO:["CO","Colorado"],CT:["CT","Connecticut"],DE:["DE","Delaware"],FL:["FL","Florida"],GA:["GA","Georgia"],HI:["HI","Hawaii"],ID:["ID","Idaho"],IL:["IL","Illinois"],IN:["IN","Indiana"],IA:["IA","Iowa"],KS:["KS","Kansas"],KY:["KY","Kentucky"],LA:["LA","Louisiana"],ME:["ME","Maine"],MD:["MD","Maryland"],MA:["MA","Massachetts"],MI:["MI","Michigan"],MN:["MN","Minnesota"],MS:["MS","Mississippi"],MO:["MO","Missouri"],MT:["MT","Montana"],NE:["NE","Nebraska"],NV:["NV","Nevada"],NH:["NH","New Hampshire"],NJ:["NJ","New Jersey"],NM:["NM","New Mexico"],NY:["NY","New York"],NC:["NC","North Carolina"],ND:["ND","North Dakota"],OH:["OH","Ohio"],OK:["OK","Oklahoma"],OR:["OR","Oregon"],PA:["PA","Pennsylvania"],RI:["RI","Rhode Island"],SC:["SC","South Carolina"],SD:["SD","South Dakota"],TN:["TN","Tennessee"],TX:["TX","Texas"],UT:["UT","Utah"],VT:["VT","Vermont"],VA:["VA","Virginia"],WA:["WA","Washington"],WV:["WV","West Virginia"],WI:["WI","Wisconsin"],WY:["WY","Wyoming"],DC:["DC","Washington, D.C","Washington D.C","Washington DC","Washington, DC"],AS:["AS","American Samoa"],UM:["UM","Minor Outlying Islands"],MP:["MP","Northern Mariana Islands"],PR:["PR","Puerto Rico"],VI:["VI","Virgin Islands"],GU:["GU","Guam"],FM:["FM","Federated States of Micronesia"],MH:["MH","Marshall Islands"],PW:["PW","Palau"],AE:["AE","Armed Forces Europe"],AP:["AP","Armed Forces Pacific"],AA:["AA","Armed Forces Americas"]}},CA:{states:{AB:["AB","Alberta"],BC:["BC","British Columbia"],MB:["MB","Manitoba"],NB:["NB","New Brunswick"],NL:["NL","Newfoundland & Labrador"],NS:["NS","Nova Scotia"],ON:["ON","Ontario"],PE:["PE","Prince Edward Island"],QC:["QC","Quebec"],SK:["SK","Saskatchewan"],NT:["NT","Northwest Territories"],NU:["NU","Nunavut"],YT:["YT","Yukon"]}}}[t=t];if(null==a)return e.$setValidity("invalidstate",!0),n;validateState=!0;var i,o,s=a.states;s[n];for(o in s)for(var r in s[o])if("sortOn"!=r&&(i=s[o][r].replace(/[^a-zA-Z0-9]/g,"").toLowerCase(),n.toLowerCase()===i))return e.$setValidity("invalidstate",!0),e.$setViewValue(o),e.$render(),o;return e.$setValidity("invalidstate",!1),e.$setViewValue(n),e.$render(),n},g.savecontactdetails=function(){var e=g.ctrlfrmcontactedit.frmdomaineditcontacts.$valid,t=g.DomainContactsSingleViewModel;e?(t.ContactDetails=g.dmncontact,t.UpdateRegistrantContact=g.copyApply.isRegistrant,t.UpdateAdminContact=g.copyApply.isAdmin,t.UpdateTechnicalContact=g.copyApply.isTec,t.UpdateBillingContact=g.copyApply.isBill,v.domainInfo.updateSingleContact(JSON.stringify(t)).then(function(e){window.location.href="/Domains/DomainList"})):$("#errorDisplayParentDivSingle").show()},g.SaveClick=function(){var e,t;g.ctrlfrmextended.frmExtendedAttribute.$valid&&(e=g.DomainContactsViewModel,t=g.ExtendedAttribute,e.ExtendedAttributeList=g.ExtendedAttribute,v.domainInfo.updateContact(JSON.stringify(e),JSON.stringify(t)).then(function(e){var t=e;if(e.Error&&($("div.site-msg.has-close.error.alert").show(),g.errormessage=e.Msg),!(t=e).isRedirect)return $("div.site-msg.has-close.error.alert").show(),g.errormessage=t.Msg,void(g.ctrlfrmbilling.frmdomainbillingcontacts.$invalid=!0);window.location.href=t.redirectUrl}))}}]),app.controller("domainAppsCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","notificationService","pageHelper","$q","ncGridParams","$sce","ncGridEventNames","popupWindow","sslRepository","$window",function(c,e,l,t,d,n,u,s,r,a,o,m,p,f){c.CMSWebAddToCartURL="",c.LoginToWebMailUrl="",c.SiteServerNameUrl="",c.DomainInfoRes=DomainInfoRes,c.SSLInfoRes=SSLInfoRes,c.SymantecSunsetMasterKey=SymantecSunsetMasterKey,c.SymantecSunsetDate=new Date(SymantecSunsetDate),c.SymantecSunsetDate=c.SymantecSunsetDate.setDate(c.SymantecSunsetDate.getDate()+1),c.currentDate=new Date,c.ServerName=ServerName;var h=c.SSLInfoRes.static_ErrorMessage_SymantecSunset,g=c.SSLInfoRes.static_InsufficentFundsErrorMsg;this.initialize=function(o,e,t,n,a){c.CMSWebAddToCartURL=e,c.LoginToWebMailUrl=t,c.SiteServerNameUrl=n,c.SymantecSunsetDateWithFormat=a,""!=o&&(c.pageBehavior=new u.AsyncStateBehavior({constructor:function(){var e,t,n,i=this.instance;i.showLoadPanel=!0,i.showContent=!1,i.model=null,i.pageNgGridSettings=new r,i.pageNgGridSettings.parameters.search.serchPropertyNames=["ProductTypeString","Name","ExpirationDate","ProductStatusString"],i.pageNgGridSettings.settings.getData=function(a,e){i.filterStatusPropertyNames=[],i.filterFlagsPropertyNames=[],l.domainAppsDetails.getDomainAppsDetails(o).then(function(e){var t;if(null!=e.Result&&null!=e.Result.Data){for(""!=e.Msg&&(i.activeNotification=c.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0})),index=0;index<e.Result.Data.length;index++)null!=e.Result.Data[index].ProductTypeString&&"DOMAIN"!=e.Result.Data[0].ProductTypeString||e.Result.Data.splice(index,1);e.Result.Data=c.AssignCssClassForFields(e.Result.Data),t=e.Result.Data.length;for(var n=0;n<t;n++)e.Result.Data[n].chbId="chbId"+n,e.Result.Data[n]=c.GetActionsUrl(e.Result.Data[n]),e.Result.Data[n].buttonCount=e.Result.Data[n].Actions.length;i.pageNgGridSettings.parameters.mapping.isLazyLoading=!1,a.resolve(e.Result),c.IsDomainLocked=e.Result.IsDomainLocked}else i.activeNotification=c.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})})},i.pageNgGridSettings.settings.reload(),i.model=i.pageNgGridSettings.parameters.storage.requestData,i.statusList=[{header:"Active",propertyname:"ProductStatusString",propertyvalue:"Active"},{header:"Alert",propertyname:"ProductStatusString",propertyvalue:"Alert"},{header:"Grace",propertyname:"ProductStatusString",propertyvalue:"Grace"},{header:"Expired",propertyname:"ProductStatusString",propertyvalue:"Expired"}],i.flagsList=[{header:"Trial",propertyname:"IsTrial",propertyvalue:!0},{header:"Blocked",propertyname:i.filterFlagsPropertyNames,propertyvalue:"AlertBlocked"}],i.othersList=[{header:"New",propertyname:"IsNew",propertyvalue:!0}],i.asyncStatus(u.AsyncStatus.Success),1==c.SymantecSunsetMasterKey&&c.currentDate>c.SymantecSunsetDate&&0<f.localStorage.length&&(null!=(e=m.replaceOrRefundResult()).isError&&("false"===e.isError?"replace"==e.action?(t=c.SSLInfoRes.static_Replace_SuccessMessage,c.pageNotification.stuckNotifications.addSuccess(t,{hasClose:!0,isAutoHide:!0})):(n=c.SSLInfoRes.static_Refund_SuccessMessage,c.pageNotification.stuckNotifications.addSuccess(n.replace("{0}",e.symantecCertType),{hasClose:!0,isAutoHide:!0})):(-1<e.Message.indexOf("INSUFFICIENTFUNDS")?1:0)?c.pageNotification.stuckNotifications.addError(g.replace("{0}",c.ServerName),{hasClose:!0,isAutoHide:!1}):c.pageNotification.stuckNotifications.addError(h,{hasClose:!0,isAutoHide:!0})))},onSuccess:function(e){this.instance.asyncStatus(u.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=c.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}))},c.pageHelper=u,c.pageNotification=new n.instance,c.sslnotificationAlertArguments={isAutoHide:!0,hasClose:!0},c.AssignCssClassForFields=function(e){if(null!=e&&null!=e)for(indexService=0;indexService<e.length;indexService++)e[indexService].ExpirationDate=u.Date.dateFromJson(e[indexService].ExpirationDate),e[indexService].CssClass="",e[indexService].SpanCssClass="",null!=e[indexService].ProductTypeString&&null!=e[indexService].ProductTypeString&&""!=e[indexService].ProductTypeString&&("HOSTING"==e[indexService].ProductTypeString.toUpperCase()?e[indexService].CssClass="icon-hosting":"PRIVATEEMAIL"==e[indexService].ProductTypeString.toUpperCase()?e[indexService].CssClass="icon-email":"SSL"==e[indexService].ProductTypeString.toUpperCase()?null!=e[indexService].ProviderName&&null!=e[indexService].ProviderName&&"COMODO"==e[indexService].ProviderName?(e[indexService].CssClass="strong icon-ssl-comodo","PositiveSSL FREE"==e[indexService].Name&&(e[indexService].Name="PositiveSSL",e[indexService].IsPromo=!0)):null!=e[indexService].ProviderName&&null!=e[indexService].ProviderName&&"GEOTRUST"==e[indexService].ProviderName?e[indexService].CssClass="strong icon-ssl-geotrust":null!=e[indexService].ProviderName&&null!=e[indexService].ProviderName&&"THAWTE"==e[indexService].ProviderName?e[indexService].CssClass="strong icon-ssl-thawte":e[indexService].CssClass="strong icon-ssl-symantec":"MAILCHIMP"==e[indexService].ProductTypeString.toUpperCase()?e[indexService].CssClass="strong icon-mailchimp":"GOOGLE"==e[indexService].ProductTypeString.toUpperCase()?e[indexService].CssClass="strong icon-google":"FREEDNS"==e[indexService].ProductTypeString.toUpperCase()&&("ACTIVE"==e[indexService].ProductStatusString.toUpperCase()?e[indexService].CssClass="icon-subdomain-freedns-active":e[indexService].CssClass="icon-subdomain-freedns-inactive")),null!=e[indexService].ProductStatusString&&null!=e[indexService].ProductStatusString&&""!=e[indexService].ProductStatusString&&(e[indexService].SpanCssClass=c.GetCssClassForStatus(e[indexService].ProductStatusString,e[indexService]));return e},c.GetCssClassForStatus=function(e,t){var n="";return t.ProducStatusDisplayString="","ACTIVE"==e.toUpperCase()||"ACTIVETRIAL"==e.toUpperCase()?(n="ok",t.ProducStatusDisplayString="ACTIVE"):"EXPIRED"==e.toUpperCase()?(n="danger",t.ProducStatusDisplayString="EXPIRED"):"ALERT"==e.toUpperCase()||"ALERTTRIAL"==e.toUpperCase()?(n="alert",t.ProducStatusDisplayString="ALERT"):"GRACE"==e.toUpperCase()?(t.ProducStatusDisplayString="GRACE",n="grace"):"ALERTBLOCKED"==e.toUpperCase()&&(t.ProducStatusDisplayString="ALERT",n="alert"),n},c.FeatureNotEmplemented=function(){c.pageNotification.stuckNotifications.addSuccess("This feature is not implemented",{hasClose:!0,isAutoHide:!0})},c.autoRenewClick=new u.AsyncStateBehavior({constructor:function(){var i=this.instance;i.domainWhoIsAutoRenew=function(e,t,n,a){i.asyncStatus(u.AsyncStatus.Loading),l.domainList.domainWhoIsAutoRenew(e,t,n,a).then(function(e){i.asyncStatus(0==e.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,e)})},i.serviceAutoRenew=function(t){i.asyncStatus(u.AsyncStatus.Loading),null!=t&&"PRIVATEEMAIL"==t.ProductTypeString?l.privateEmail.changeAutoRenew(t.ProductId,t.IsAutoRenew).then(function(e){e.Error&&(t.IsAutoRenew=!t.IsAutoRenew),i.asyncStatus(0==e.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,e)}):null!=t&&"HOSTING"==t.ProductTypeString&&l.domainList.hostingIsAutoRenew(t.ProductId,t.IsAutoRenew).then(function(e){e.Error&&(t.IsAutoRenew=!t.IsAutoRenew),i.asyncStatus(0==e.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,e)})}},onSuccess:function(e){this.instance.asyncStatus(u.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance.activeNotification=c.pageNotification.stuckNotifications.addLoading("Loading...",!1)},onLocked:function(e){this.instance},onError:function(e){c.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),c.RemoveAutoRenew=function(e){for(actionindex=0;actionindex<e.length;actionindex++)"Auto-Renew"==e[actionindex].DisplayText&&e.splice(actionindex,1)},c.GetActionsUrl=function(e){return e.ManageUrl="#",e.RenewUrl="#",e.BuyLicenceUrl="#",e.LoginToWebMailUrl="#",e.BuyNewUrl="#",e.ActivateUrl="#",e.RemoveUrl="#","SSL"==e.ProductTypeString.toUpperCase()?(e.ManageUrl="/Domains/SSL/ProductPage/"+e.ProductId,e.RenewUrl=c.CMSWebAddToCartURL+"producttype=ssl&action=renew&cids="+e.ProductId,e.BuyLicenceUrl="",e.BuyNewUrl=c.SiteServerNameUrl+"security/ssl-certificates.aspx",e.ActivateUrl="/Domains/SSL/Activate/"+e.ProductId):"PRIVATEEMAIL"==e.ProductTypeString.toUpperCase()?(e.ManageUrl="/Domains/PrivateEmail/"+e.ProductId,e.RenewUrl=c.CMSWebAddToCartURL+"subID="+e.ProductId+"&Action=renew&ProductType=oxhosting",e.BuyLicenceUrl=c.CMSWebAddToCartURL+"subID="+e.ProductId+"&Action=renew&ProductType=oxhosting&OrderAutoConfirm=False&BillingCycle=1",e.LoginToWebMailUrl=c.LoginToWebMailUrl):"HOSTING"==e.ProductTypeString.toUpperCase()?(e.ManageUrl="/Domains/hosting/details/"+e.ProductId,e.RenewUrl=c.CMSWebAddToCartURL+"package_id="+e.ProductId+"&Action=renew&ProductType=hosting",e.BuyLicenceUrl=""):"FREEDNS"==e.ProductTypeString.toUpperCase()&&(e.ManageUrl="/Domains/Domaincontrolpanel/"+e.Name+"/advdns/"),e},c.ShowRenew=!1,c.ShowRenewButtonExceptForFreeDns=function(){c.ShowRenew=!1;var e=c.pageBehavior.pageNgGridSettings.parameters.selection.selectedItems;for(i=0;i<e.length;i++)if(null!=e[i]&&("HOSTING"==e[i].ProductTypeString.toUpperCase()||"SSL"==e[i].ProductTypeString.toUpperCase()||"PRIVATEEMAIL"==e[i].ProductTypeString.toUpperCase())){c.ShowRenew=!0;break}},c.GetBulkRenewUrl=function(){var e=c.pageBehavior.pageNgGridSettings.parameters.selection.selectedItems,t=c.CMSWebAddToCartURL+"bulkproductdetails=";for(i=0;i<e.length;i++)null!=e[i]&&("HOSTING"==e[i].ProductTypeString.toUpperCase()?e[i].ProductId&&0<e[i].ProductId&&"alertblocked"!==e[i].ProductStatusString.toLowerCase()&&(t+=e[i].ProductId+":hosting,"):"SSL"==e[i].ProductTypeString.toUpperCase()?t+=e[i].ProductId+":ssl,":"PRIVATEEMAIL"==e[i].ProductTypeString.toUpperCase()&&(t+=e[i].ProductId+":oxhosting,"));t=""!=t?t.slice(0,-1):"",window.location.href=t},c.action=function(e,t){if(null!=e||null!=t)return"RENEW"!=t.toUpperCase()&&"BUY NEW"!=t.toUpperCase()&&"LEARN MORE"!=t.toUpperCase()||"#"!=e.Actions[0].DestinationURL?void("AUTHORIZE FREEDNS"==t.toUpperCase()?c.openAuthorizeFreeDNSModalPopUp.onClick(e):"REDIRECT DOMAIN"==t.toUpperCase()?(splitParams=e.split(","),l.domainDetails.IsManagerHasRightsToPerformThisAction(splitParams[0],splitParams[1]).then(function(e){e?new u.AsyncStateBehavior({constructor:function(){var a=this.instance;a.asyncStatus(u.AsyncStatus.Loading),l.domainDetails.getUrlForwardingInfo(splitParams[0]).then(function(e){a.asyncStatus(0==e.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,e);var t,n=JSON.parse(e.Result);e.Error||null==n||(n.IsShowManageButton?(t="/Domains/dns/managehostrecords/"+splitParams[0]+"/domainlist",window.location.href=t):n.IsShowSetupButton?c.AddRecords(splitParams[0],"addRedirect",0,"URL",n):n.IsShowEditButton&&c.AddRecords(splitParams[0],"editRedirect",n.HostId,"URL",n))})},onSuccess:function(e){this.instance},onActive:function(e){this.instance},onLoading:function(e){this.instance.activeNotification=c.pageNotification.stuckNotifications.addLoading("Loading...",!1)},onLocked:function(e){this.instance},onError:function(e){c.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}):c.pageNotification.stuckNotifications.addError("'User has no rights to perform this action",{hasClose:!0,isAutoHide:!0})})):"REDIRECT EMAIL"==t.toUpperCase()?(splitParams=e.split(","),l.domainDetails.IsManagerHasRightsToPerformThisAction(splitParams[0],splitParams[1]).then(function(e){e?new u.AsyncStateBehavior({constructor:function(){var n=this.instance;n.asyncStatus(u.AsyncStatus.Loading),l.domainDetails.getEmailForwardingInfo(splitParams[0]).then(function(e){n.asyncStatus(0==e.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,e);var t=e.Result;e.Error||null==t||c.openResolveConflictRedirectEmailModalPopUp(splitParams[0],JSON.parse(t))})},onSuccess:function(e){this.instance.asyncStatus(u.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance.activeNotification=c.pageNotification.stuckNotifications.addLoading("Loading...",!1)},onLocked:function(e){this.instance},onError:function(e){c.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}):c.pageNotification.stuckNotifications.addError("'User has no rights to perform this action",{hasClose:!0,isAutoHide:!0})})):"REMOVE"==t.toUpperCase()&&(splitParams=e.split(","),c.RemoveSSlCertificateConfirmation(splitParams[0],splitParams[1]))):(c.symantecCertDetails={certificateId:e.ProductId,certificateType:e.Name,validYears:e.ValidYears,sansQty:e.sansQty},"LEARN MORE"==t.toUpperCase()&&(t="activate"),void m.openPopupWindow(c.symantecCertDetails,t.toLowerCase(),c.SymantecSunsetDateWithFormat,c.SiteServerNameUrl))},c.IsRemoveSSlCertificateConfirmationOpened=!1,c.RemoveSSlCertificateConfirmation=function(t,e){var n;c.IsRemoveSSlCertificateConfirmationOpened||((n=d.open({templateUrl:"/Common/PromptRemove",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return c.SSLInfoRes.static_RemoveHeading.replace("{0}",e)},modalContent:function(){return"Once an SSL certificate has been removed, it cannot be accessed again. Are you sure you want to remove this SSL certificate?"}}})).result.then(function(e){c.IsRemoveSSlCertificateConfirmationOpened=!1,"yes"==e&&function(e,t){if(void 0===t&&t)t={};else try{t=JSON.parse(t)}catch(e){t={}}t._NcCompliance=$.cookie("_NcCompliance"),function(e,t,n,a){var i=document.createElement("form");i.target=a||"_self";i.method=t,i.action=e,n&&Object.keys(n).forEach(function(e){var t=document.createElement("input");t.type="hidden",t.name=e,t.setAttribute("value",n[e]),i.appendChild(t)});document.body.appendChild(i),i.submit()}(e,"POST",t)}("/domains/ssl/remove/"+t+"/"+t+"/DOMAINLIST")},function(){c.IsRemoveSSlCertificateConfirmationOpened=!1,n=null}),n.opened.then(function(){c.IsRemoveSSlCertificateConfirmationOpened=!0}))},c.ResolveConflictRedirectEmailModalPopUp=!1,c.openResolveConflictRedirectEmailModalPopUp=function(e,t){var n;t.IsUsingPrivateEmail||t.IsUsingNamecheapHosting||"Custom"==t.DnsType||"NONE"!=t.EmailType&&"FWD"!=t.EmailType?c.ResolveConflictRedirectEmailModalPopUp||((n=d.open({templateUrl:"/Domains/DomainDetails/ResolveConflictRedirectEmailModal",controller:"domainResolveConflictRedirectEmailCtrl",size:"lg",backdrop:"static",resolve:{RedirectEmailViewModel:function(){return t},DomainName:function(){return e}}})).result.then(function(e){c.ResolveConflictRedirectEmailModalPopUp=!1,null!=e&&""!=e&&(this.instance,c.pageNotification.stuckNotifications.addError(e,{hasClose:!0,isAutoHide:!0}))}),n.opened.then(function(){c.ResolveConflictRedirectEmailModalPopUp=!0})):"NONE"!=t.EmailType&&"FWD"!=t.EmailType||c.RedirectToManagePage(e,t.EmailType)},c.RedirectToManagePage=function(e,t){var n="/Domains/RedirectEmailList/"+e+"/domainlist";"NONE"==t?l.domainDetails.resolveConflictSetEmailType(e,t).then(function(e){0==e.Error&&(window.location.href=n)}):"FWD"==t&&(window.location.href=n)},c.IsAddDnsPopUpOpened=!1,c.AddRecords=function(n,a,i,o,s){var r=a,s=s;l.domainDetails.IsManagerHasRightsToPerformThisAction(n,"hosts").then(function(e){var t;c.IsAddDnsPopUpOpened||((t=d.open({templateUrl:"/Domains/Dns/AdvancedDNSAddRecordsModel/",controller:"addDnsRecords",size:"lg",backdrop:"static",resolve:{openModelParameter:function(){return c.pageTypeParam=null!=a?a:"addNew"},domainName:function(){return n},hostingID:function(){return c.hostRecordID=null!=i?i:0},hostRecordType:function(){return c.editHostRecordType=null!=i?o:""},pageModelClass:function(){return""!=s&&null!=s?s:s=0},domainType:function(){return c.isSubDomain}}})).result.then(function(e){c.IsAddDnsPopUpOpened=!1,null!=e&&("AddDDNS"==r||"EditDDNS"==r?new u.AsyncStateBehavior({constructor:function(){var t=this.instance;t.activeNotification=c.pageNotification.stuckNotifications.addLoading("Please wait.",!0),l.domainDns.getDynamicRecords(n,c.isSubDomain,!0).then(function(e){e.Error?($("div.site-msg.has-close.error.alert").show(),c.errormessage=e.Msg,t.asyncStatus(u.AsyncStatus.Error,e)):(c.ddnsHostRecords=e.Result.HostInfo,t.asyncStatus(u.AsyncStatus.Success,e))})},onSuccess:function(){c.pageNotification.alerts.clear()},onError:function(){c.pageNotification.alerts.clear()}}):"addNew"==r?c.LoadAdvancedDNSView():"edit"==r||"manageAddNew"==r?window.location.href="/domains/dns/managehostrecords/"+n+"/"+c.pageFrom:"addRedirect"!=r&&"editRedirect"!=r||(e.isResultSuccess&&!e.isCancel?c.pageNotification.stuckNotifications.addSuccess(c.DomainInfoRes.success_Site_RedirectDomain,{hasClose:!0,isAutoHide:!0}):e.isResultSuccess||e.isCancel||c.pageNotification.stuckNotifications.addError(c.DomainInfoRes.error_Site_RedirectDomain,{hasClose:!0,isAutoHide:!0})))}),t.opened.then(function(e){c.IsAddDnsPopUpOpened=!0}))})},c.IsAuthorizeFreeDNSModalPopUpOpened=!1,c.openAuthorizeFreeDNSModalPopUp=new u.AsyncStateBehavior({constructor:function(){this.instance.onClick=function(e){var t=c.$parent.DomainName,n=c.pageBehavior.pageNgGridSettings.parameters.storage.pageData;var a,i=(a=e,n.filter(function(e){return e.Name===a})[0]),o={domainName:t,authFlow:i.ShowTxtAuthHint?"txt":"email",hostName:e};c.GetFreeDnsAuthorizationEmailList=new u.AsyncStateBehavior({constructor:function(){var n=this.instance;s.all({emails:l.domainListAction.getFreeDnsAuthorizationEmailList(o.hostName),txtRecord:l.domainListAction.getAuthorizationTxtKey(o.domainName,o.hostName)}).then(function(e){var t=e.emails.Error||e.txtRecord.Error?u.AsyncStatus.Error:u.AsyncStatus.Success;n.asyncStatus(t,e)})},onSuccess:function(e){var t,a=this.instance;o.emails=e.emails.Result,o.txtRecord=e.txtRecord.Result.AuthorizationTxtKey,c.IsAuthorizeFreeDNSModalPopUpOpened||((t=d.open({templateUrl:"/Domains/AuthorizeFreeDNS",controller:"authorizeDNSCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{DomainInfo:function(){return o}}})).result.then(function(e){var t,n;c.IsAuthorizeFreeDNSModalPopUpOpened=!1,e&&e.Msg&&"Success"==e.Msg&&("txt"==e.authFlow?(t="Authorization via TXT record was initiated successfully",i.ShowTxtAuthHint=!0,i.TxtAuthKey=o.txtRecord):(t=c.DomainInfoRes.success_Site_FreeDnsAuthEmailSavedSuccessMessage,i.ShowTxtAuthHint=!1),a.activeNotification=c.pageNotification.stuckNotifications.addSuccess(t,{hasClose:!0,isAutoHide:!0})),e&&e.Msg&&"Error"==e.Msg&&(n=c.DomainInfoRes.error_Site_FreeDnsAuthEmailSavedErrorMessage,a.activeNotification=c.pageNotification.stuckNotifications.addError(n,{hasClose:!0,isAutoHide:!0}))}),t.opened.then(function(){c.IsAuthorizeFreeDNSModalPopUpOpened=!0}))},onError:function(){var e=this.instance,t=c.DomainInfoRes.error_Site_FreeDnsAuthEmailRetrieveFailed;e.activeNotification=c.pageNotification.stuckNotifications.addError(t,{hasClose:!0,isAutoHide:!0})}})}}})}]),app.controller("domainBulkChangeOwnershipCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","notificationService","pageHelper","ncWizardService","$cookieStore",function(i,n,e,a,t,o,s,r,c){i.pageHelper=s,i.changeOwnership=DomainBulkChangeOwnershipRes,i.errorMessageRes=ErrorMessageRes,i.pageNotification=new o.instance,i.$watch("pageBehavior.BulkDomainPushStep2Model.UserFromPassword",function(e,t){if(e!==t){var n,a=s.Validation.password(e);for(n in a)i.changeDomainOwnershipForm.changeDomainOwnershipForm.password["errorMsg_"+n]=a[n].arg,i.changeDomainOwnershipForm.changeDomainOwnershipForm.password.$setValidity(n,a[n].isValid)}}),n.closeLightbox=function(){window.location.href="/Domains"},i.pageBehavior=new s.AsyncStateBehavior({constructor:function(){var t=this.instance;t.wizardService=r,t.activeNotification=i.pageNotification,t.NoSearchOption={minimumResultsForSearch:-1},t.BulkDomainPushStep2Model={Domains:[],UserTo:"",UserFromPassword:"",SendNotification:!0},t.typeOfDomainContacts=[{value:"NewOwnerContacts",label:i.changeOwnership.label_NewOwner_Placeholder},{value:"KeepExistingContacts",label:i.changeOwnership.label_KeepExistingContact}],t.setFormScope=function(e){i.changeDomainOwnershipForm=e},t.initModel=function(e){t.asyncStatus(null!=e?s.AsyncStatus.Success:s.AsyncStatus.Error,{sender:"getModel",Result:e})},t.updatePanelTitle=function(){0==t.BulkDomainPushStep2Model.Domains.length?t.panelTitle=i.changeOwnership.label_wizard_EmptySelectedList:1==t.BulkDomainPushStep2Model.Domains.length?t.panelTitle=i.changeOwnership.label_wizard_OneSelectedItem:t.panelTitle=a("stringFormat")(i.changeOwnership.label_wizard_SelectedItemsCount,[t.BulkDomainPushStep2Model.Domains.length])},t.moveDomains=function(){i.changeDomainOwnershipForm.changeDomainOwnershipForm.$valid?(t.BulkDomainPushStep2Model.UseContactsType||(t.BulkDomainPushStep2Model.UseContactsType=t.typeOfDomainContacts[0].value),e.domainInfo.MoveDomainsToAnotherOwner(JSON.stringify(t.BulkDomainPushStep2Model)).then(function(e){0==e.Error?(t.asyncStatus(s.AsyncStatus.Success),c.put("SuccessMessage",i.changeOwnership.notification_Success_Message),n.closeLightbox()):t.asyncStatus(s.AsyncStatus.Error,e)})):angular.forEach(i.changeDomainOwnershipForm.changeDomainOwnershipForm.$error.required,function(e){e.$setDirty()})},t.updatePanelTitle(),t.asyncStatus(s.AsyncStatus.Success)},onSuccess:function(e){var t=this.instance;if("getModel"==e.sender){t.model=e.Result;for(var n=0;n<e.Result.Domains.length;n++)e.Result.Domains[n]=function(e,a){return new s.AsyncStateBehavior({constructor:function(){var n=this.instance;n.model=e,n.isSelected=!1,n.onSelectChange=function(){n.model.IsSelected?a.BulkDomainPushStep2Model.Domains.push(n.model.DomainName):a.BulkDomainPushStep2Model.Domains.forEach(function(e,t){e===n.model.DomainName&&a.BulkDomainPushStep2Model.Domains.splice(t,1)}),a.updatePanelTitle()}},onSuccess:function(){this.instance.asyncStatus(s.AsyncStatus.Active)}})}(e.Result.Domains[n],t)}t.asyncStatus(s.AsyncStatus.Active)},onActive:function(){var e=this.instance;e.showLoadPanel=!1,e.showContent=!0},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=i.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}})}]),app.controller("domainBulkDNSHostCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","notificationService","pageHelper","$q","ncGridParams","$sce","ncWizardService",function(h,n,a,e,t,o,g,s,r,c,v){h.pageHelper=g,h.step1Notification=new o.instance,h.step2Notification=new o.instance,h.step3Notification=new o.instance,h.step4Notification=new o.instance,h.pageNotification=new o.instance,h.OptionSelectionFromStep2="",h.ErrorMsgRes=ErrorMessageRes,h.EmailForwardingProviders=[],h.PrivateEmailMxProviders=[],h.PrivateEmailTxtProviders=[],h.PrivateEmailCNAMEProviders=[],h.GmailProviders=[],h.OverwriteSelection=3,h.CommonButtonTextRes=CommonButtonTextRes,h.Step2ButtonName=h.CommonButtonTextRes.static_SaveChanges,h.Step3ButtonName=h.CommonButtonTextRes.static_SaveChanges,h.Step4ButtonName=h.CommonButtonTextRes.static_SaveChanges,this.initialize=function(e){for(h.Model=e.Model,h.Messages=e.Messages,h.SelectedDomainList=[],providerIndex=0;providerIndex<h.Model.EmailProviders.length;providerIndex++)"FWD"==h.Model.EmailProviders[providerIndex].ProviderSubType.toUpperCase()?h.EmailForwardingProviders.unshift(h.Model.EmailProviders[providerIndex]):"PRIVATEEMAIL"==h.Model.EmailProviders[providerIndex].ProviderSubType.toUpperCase()?"MX"==h.Model.EmailProviders[providerIndex].RecordType.toUpperCase()?h.PrivateEmailMxProviders.unshift(h.Model.EmailProviders[providerIndex]):"TXT"==h.Model.EmailProviders[providerIndex].RecordType.toUpperCase()?h.PrivateEmailTxtProviders.unshift(h.Model.EmailProviders[providerIndex]):"CNAME"==h.Model.EmailProviders[providerIndex].RecordType.toUpperCase()&&h.PrivateEmailCNAMEProviders.unshift(h.Model.EmailProviders[providerIndex]):"GMAIL"==h.Model.EmailProviders[providerIndex].ProviderSubType.toUpperCase()&&h.GmailProviders.unshift(h.Model.EmailProviders[providerIndex])},h.CancelBulkAction=n.closeLightbox=function(){window.location.href="/Domains/DomainList"},h.onCheckIp=function(e,t){if(null!=e){var n=!0;if(null!=e.recordType&&"A"==e.recordType.toUpperCase()){if(null!=e&&""!=e.target&&null!=e.target){var a=g.Validation.ip4(e.target);for(i in a)n=a[i].isValid}e.valIp=n}else if(null!=e.recordType&&"AAAA"==e.recordType.toUpperCase()){null!=e&&""!=e.target&&null!=e.target&&(n=g.Validation.ip6(e.target).isValid),e.valIp=n}else if(null!=t&&"MXE"==t.toUpperCase()){if(null!=e&&""!=e.Target&&null!=e.Target){var i,a=g.Validation.ip4(e.Target);for(i in a)n=a[i].isValid}e.valIp=n}else e.valIp=!0}},h.AssignOverwriteSelection=function(e,t,n){e&&t&&"KeepExistingDNS"!=h.ServerTypeSelected?h.OverwriteSelection=1:e&&!t&&"KeepExistingDNS"!=h.ServerTypeSelected?h.OverwriteSelection=2:n&&"KeepExistingDNS"!=h.ServerTypeSelected||"NamecheapsharedHosting"==h.ServerTypeSelected||"Custom"==h.ServerTypeSelected?h.OverwriteSelection=3:e&&t&&"KeepExistingDNS"==h.ServerTypeSelected?h.OverwriteSelection=4:e&&!t&&"KeepExistingDNS"==h.ServerTypeSelected?h.OverwriteSelection=5:!e&&t&&"KeepExistingDNS"==h.ServerTypeSelected?h.OverwriteSelection=6:!e&&t&&"KeepExistingDNS"!=h.ServerTypeSelected&&(h.OverwriteSelection=7)},h.ChangeButtonName=function(){4==v.steps.length?(h.Step2ButtonName=h.CommonButtonTextRes.static_Next,h.Step3ButtonName=h.CommonButtonTextRes.static_Next,h.Step4ButtonName=h.CommonButtonTextRes.static_SaveChanges):3==v.steps.length?(h.Step2ButtonName=h.CommonButtonTextRes.static_Next,h.Step3ButtonName=h.CommonButtonTextRes.static_SaveChanges):2==v.steps.length&&("KeepExistingDNS"!=h.ServerTypeSelected?h.Step2ButtonName=h.CommonButtonTextRes.static_SaveChanges:h.Step2ButtonName=h.CommonButtonTextRes.static_Next)},h.pageAction=new g.AsyncStateBehavior({constructor:function(){var e=this.instance;e.CurrentStep="step1";e.SendConfirmationMail=!1,e.CheckToProceed=!1,e.OverwriteSelection=0,e.ServerTypeSelected="NamecheapDefault",e.leaveHostRecords=!1,e.updateHostRecords=!1,e.updateMailSettings=!1,e.leaveHostRecordsBackup=!1,e.updateHostRecordsBackup=!1,e.updateMailSettingsBackup=!1,e.IwantLeaveHostRecordsClick=function(){if(e.leaveHostRecords)for(e.updateHostRecords=!1,e.updateMailSettings=!1,wzleaveHostRecords=0;wzleaveHostRecords<v.steps.length;wzleaveHostRecords++)"Host Records options"!=v.steps[wzleaveHostRecords].description&&"Mail Settings"!=v.steps[wzleaveHostRecords].description||(v.steps.splice(wzleaveHostRecords,1),--wzleaveHostRecords);h.ChangeButtonName(),h.AssignOverwriteSelection(e.updateHostRecords,e.updateMailSettings,e.leaveHostRecords)},e.IWantToUpdateHostRecords=function(){if(!e.updateHostRecords)for(wzIndex=0;wzIndex<v.steps.length;wzIndex++)"Host Records options"==v.steps[wzIndex].description&&v.steps.splice(wzIndex,1);h.ChangeButtonName(),h.AssignOverwriteSelection(e.updateHostRecords,e.updateMailSettings,e.leaveHostRecords)},e.IWantToUpdateMailSettings=function(){if(!e.updateMailSettings)for(wizardIndex=0;wizardIndex<v.steps.length;wizardIndex++)"Mail Settings"==v.steps[wizardIndex].description&&v.steps.splice(wizardIndex,1);h.ChangeButtonName(),h.AssignOverwriteSelection(e.updateHostRecords,e.updateMailSettings,e.leaveHostRecords)},e.Step1Action=function(){var s=0,r=0,c=0,l=0,d=0,u=0,m=0,p=0,f=0;h.step1Notification.alerts.clear(),h.SelectedDomainList=[],e.IsDisableHostOptions=!1,1==e.CheckToProceed&&($("input:checkbox[name=selecteddomains]:checked").each(function(){var e={};e.DomainName=$(this).attr("id");var t=$(this).attr("item-value");e.Props=null!=t?JSON.parse(t):null,null==e.Props.NameServerType&&(e.Props.NameServerType="NONE"),null==e.Props.IsOwner&&(e.Props.IsOwner=!1),null==e.Props.HasEditDNS&&(e.Props.HasEditDNS=!1),null==e.Props.HasEditHost&&(e.Props.HasEditHost=!1);var n=e.DomainName.indexOf(".");e.tld=e.DomainName.substr(n+1);var a=!1,o=h.SelectedDomainList;for(i=0;i<o.length;i++)o[i].DomainName==e.DomainName&&(a=!0);a||(h.SelectedDomainList.push(e),"DEFAULT"==e.Props.NameServerType&&(s+=1),"BACKUP"==e.Props.NameServerType&&(r+=1),"SHAREDHOSTING"==e.Props.NameServerType&&(c+=1),"CUSTOM"==e.Props.NameServerType&&(l+=1),"FREEDNS"==e.Props.NameServerType&&(d+=1),"NONE"==e.Props.NameServerType&&(u+=1),e.Props.IsOwner&&(f+=1),e.Props.HasEditDNS&&(p+=1),e.Props.HasEditHost&&(m+=1))}),s+r+c+l+u==0&&0<d?(e.IsDisableDnsOptions=!0,e.ServerTypeSelected="KeepExistingDNS",e.IsDisableHostMailOnlyOption=!1):s+r+d+u==0&&0<c+l?(e.IsDisableDnsOptions=!1,e.ServerTypeSelected="NamecheapDefault",e.IsDisableHostMailOnlyOption=!0):(e.IsDisableDnsOptions=!1,e.ServerTypeSelected="NamecheapDefault",e.IsDisableHostMailOnlyOption=!1),0==f&&(0==p&&0<m&&(e.IsDisableDnsOptions=!0,e.IsDisableHostCheckBoxes=!1,e.IsDisableHostMailOnlyOption=!1,e.ServerTypeSelected="KeepExistingDNS"),0<p&&0==m&&(e.IsDisableDnsOptions=!1,e.IsDisableHostCheckBoxes=!0,e.IsDisableHostMailOnlyOption=!0,e.ServerTypeSelected="NamecheapDefault")),0<h.SelectedDomainList.length?(e.asyncStatus(g.AsyncStatus.Active),v.moveNext()):(0==h.SelectedDomainList.length?h.step1Notification.alerts.addError(h.Messages.SelectAtleastOneDomainToProceed,{hasClose:!0,isAutoHide:!0}):h.step1Notification.alerts.addError(h.Messages.CannotProceedToSetp2,{hasClose:!0,isAutoHide:!0}),$("html, body").animate({scrollTop:$('div[link="step1Notification"]').offset().top-20},200)))},e.Step2Action=function(){for(h.domainList="",domainIndex=0;domainIndex<h.SelectedDomainList.length;domainIndex++)""==h.domainList?h.domainList=h.SelectedDomainList[domainIndex].DomainName:h.domainList=h.domainList+","+h.SelectedDomainList[domainIndex].DomainName;h.DnsServerTypeConfiguration={},"NamecheapDefault"==h.ServerTypeSelected?(h.DnsServerTypeConfiguration.ServerType="DEFAULT",h.DnsServerTypeConfiguration.Records=h.Model.DefaultNameServers):"NamecheapBackUp"==h.ServerTypeSelected?(h.DnsServerTypeConfiguration.ServerType="BACKUP",h.DnsServerTypeConfiguration.Records=h.Model.BackupNameServers):"NamecheapsharedHosting"==h.ServerTypeSelected?(h.DnsServerTypeConfiguration.ServerType="SHAREDHOSTING",h.DnsServerTypeConfiguration.Records=h.Model.SharedNameServers):"Custom"==h.ServerTypeSelected?(h.DnsServerTypeConfiguration.ServerType="CUSTOM",h.DnsServerTypeConfiguration.Records=h.CustomDnsRecords):(h.DnsServerTypeConfiguration.ServerType="NONE",h.DnsServerTypeConfiguration.Records=[]),2<v.steps.length?(angular.forEach(h.frmOverwriteDnsHostRecords.$error.required,function(e){e.$dirty=!0}),h.frmOverwriteDnsHostRecords.$invalid?(h.step2Notification.alerts.clear(),h.step2Notification.alerts.addError(h.ErrorMsgRes.error_Site_SummaryMessage,{isAutoHide:!0,hasClose:!0}),n.scroolToElement($('[link="step2Notification"]'),100)):v.moveNext()):(angular.forEach(h.frmOverwriteDnsHostRecords.$error.required,function(e){e.$dirty=!0}),h.frmOverwriteDnsHostRecords.$invalid?(h.step2Notification.alerts.clear(),h.step2Notification.alerts.addError(h.ErrorMsgRes.error_Site_SummaryMessage,{isAutoHide:!0,hasClose:!0}),n.scroolToElement($('[link="step2Notification"]'),100)):(e.CurrentStep="step2",e.asyncStatus(g.AsyncStatus.Loading),h.MailSettingsConfiguration.MailSettingType="Leave",a.domainSetBulkDns.bulkDnsSetDomainDnsHost(h.domainList,h.OverwriteSelection,h.DnsServerTypeConfiguration,h.HostRecords,h.MailSettingsConfiguration,h.pageAction.SendConfirmationMail).then(function(e){e.Error?(h.step2Notification.alerts.clear(),h.step2Notification.alerts.addError(e.Msg,{isAutoHide:!0,hasClose:!0}),n.scroolToElement($('[link="step2Notification"]'),100)):window.location.href="/domains/domainlist/"})))},e.Step3Action=function(){var t;3<v.steps.length?(angular.forEach(h.frmOverwriteDnsHostRecords.$error.required,function(e){e.$dirty=!0}),t=!0,h.HostRecords.some(function(e){if(0==e.valIp)return!(t=!1)}),h.frmOverwriteDnsHostRecords.$invalid||0==t?(h.step3Notification.alerts.clear(),h.step3Notification.alerts.addError(h.ErrorMsgRes.error_Site_SummaryMessage,{isAutoHide:!0,hasClose:!0}),n.scroolToElement($('[link="step3Notification"]'),100)):v.moveNext()):(h.SaveChangesClicked=!0,angular.forEach(h.frmOverwriteDnsHostRecords.$error.required,function(e){e.$dirty=!0}),t=!0,h.HostRecords.some(function(e){if(0==e.valIp)return!(t=!1)}),h.frmOverwriteDnsHostRecords.$invalid||0==t?(h.step3Notification.alerts.clear(),h.step3Notification.alerts.addError(h.ErrorMsgRes.error_Site_SummaryMessage,{isAutoHide:!0,hasClose:!0}),n.scroolToElement($('[link="step3Notification"]'),100)):(e.CurrentStep="step3",h.MailSettingsConfiguration.MailSettingType="Leave",e.asyncStatus(g.AsyncStatus.Loading),a.domainSetBulkDns.bulkDnsSetDomainDnsHost(h.domainList,h.OverwriteSelection,h.DnsServerTypeConfiguration,h.HostRecords,h.MailSettingsConfiguration,h.pageAction.SendConfirmationMail).then(function(e){e.Error?(h.step3Notification.alerts.clear(),h.step3Notification.alerts.addError(e.Msg,{isAutoHide:!0,hasClose:!0}),n.scroolToElement($('[link="step3Notification"]'),100)):window.location.href="/domains/domainlist/"})))},e.Step4Action=function(){h.SaveChangesClicked=!0,angular.forEach(h.frmOverwriteDnsHostRecords.$error.required,function(e){e.$dirty=!0});var t=!0;t&&null!=h.MailSettingsConfiguration&&null!=h.MailSettingsConfiguration.MailsettingRecords&&0<h.MailSettingsConfiguration.MailsettingRecords.length&&h.MailSettingsConfiguration.MailsettingRecords.some(function(e){if(0==e.valIp)return!(t=!1)}),h.frmOverwriteDnsHostRecords.$invalid||0==t?(h.step3Notification.alerts.clear(),h.step3Notification.alerts.addError(h.ErrorMsgRes.error_Site_SummaryMessage,{isAutoHide:!0,hasClose:!0}),n.scroolToElement($('[link="step4Notification"]'),100)):(e.CurrentStep="step4",e.asyncStatus(g.AsyncStatus.Loading),null==h.MailSettingsConfiguration.MailsettingRecords&&(h.MailSettingsConfiguration.MailSettingType="None"),a.domainSetBulkDns.bulkDnsSetDomainDnsHost(h.domainList,h.OverwriteSelection,h.DnsServerTypeConfiguration,h.HostRecords,h.MailSettingsConfiguration,h.pageAction.SendConfirmationMail).then(function(e){e.Error?(h.step4Notification.alerts.clear(),h.step4Notification.alerts.addError(e.Msg,{isAutoHide:!0,hasClose:!0}),n.scroolToElement($('[link="step4Notification"]'),100)):window.location.href="/domains/domainlist/"}))}},onSuccess:function(){this.instance},onActive:function(e){var t=this.instance;h.pageNotification.alerts.clear(),t.asyncStatus(g.AsyncStatus.Active)},onLoading:function(e){var t=this.instance;h.pageNotification.alerts.clear(),"step4"==t.CurrentStep?t.activeNotification=h.step4Notification.stuckNotifications.addLoading("<B>Processing...</B> Please wait.",!1):"step3"==t.CurrentStep?t.activeNotification=h.step3Notification.stuckNotifications.addLoading("<B>Processing...</B> Please wait.",!1):"step2"==t.CurrentStep&&(t.activeNotification=h.step2Notification.stuckNotifications.addLoading("<B>Processing...</B> Please wait.",!1)),t.isDisabled=!0,t.showError=!1},onLocked:function(e){this.instance},onWarning:function(e){var t=this.instance;h.pageNotification.alerts.clear(),t.activeNotification=h.pageNotification.stuckNotifications.addWarning("<B>"+e+"</B>",{hasClose:!0,isAutoHide:!0}),t.isDisabled=!1,t.showError=!1},onError:function(e){this.instance.activeNotification=h.pageNotification.stuckNotifications.addError(e.Message,{hasClose:!0,isAutoHide:!0})}}),n.closeLightbox=function(){window.location.href="/Domains/DomainList"},h.getTimes=function(e){return new Array(e)},h.ServerTypeSelected="NamecheapDefault",h.OverwriteSelection=0,h.TTL=[{text:"Automatic",value:"Auto"},{text:"1 minute",value:"60"},{text:"5 minutes",value:"300"},{text:"20 minutes",value:"1200"},{text:"30 minutes",value:"1800"},{text:"60 minutes",value:"3600"}],h.UrlRedirectTypes=[{text:"Unmasked",value:"Unmasked"},{text:"Masked",value:"Masked"},{text:"Permanent (301)",value:"Permanent (301)"}],h.UrlRedirectTypesWithoutPermanent301=[{text:"Masked",value:"Masked"},{text:"Unmasked",value:"Unmasked"}],h.MailSettingType="",h.AlphaNumeric=nc_Val_AlphaNumericDot,h.NameserverPattern=nc_Val_NameServerRegex,h.HostNamePatternRegex="^@$|^\\*$|^[*a-zA-Z0-9._-]+$",h.MailServerPatternRegex="^@$|^\\*$|^[*a-zA-Z0-9._-]+$",h.ServiceAndProtocolRegex=nc_Val_Protocol,h.Ipv4Regex=nc_Val_Ipv4,h.Ipv6Regex=nc_Val_Ipv6,h.HostRecords=[],h.MailSettings=[],h.MailSettingsConfiguration={},h.CustomDnsRecords=["","","","","",""],h.AddCustomDnsRecords=function(e,t){h.CustomDnsRecords[t]=e},h.ServerTypeSelection=function(e){for(h.ServerTypeSelected=e,indexHost=0;indexHost<h.HostRecords.length;indexHost++)"NamecheapsharedHosting"==e||"Custom"==e?(h.RemoveHostRecords(indexHost),--indexHost,h.RemoveMailSettings()):"NamecheapBackUp"==e&&"NS"==h.HostRecords[indexHost].recordType&&(h.RemoveHostRecords(indexHost),--indexHost);h.pageAction.leaveHostRecords=!1,h.pageAction.updateHostRecords=!1,h.pageAction.updateMailSettings=!1,v.steps.length=2,h.ChangeButtonName(),h.OverwriteSelection=0,h.AssignOverwriteSelection(h.pageAction.updateHostRecords,h.pageAction.updateMailSettings,h.pageAction.leaveHostRecords)},h.GenerateHostRecords=function(e,t){"NamecheapBackUp"==h.ServerTypeSelected&&"NS"==e||(h.hostRecords={},h.hostRecords.recordType=e,h.hostRecords.recordName="",h.hostRecords.hostName="",h.hostRecords.target="",h.hostRecords.ttl="","SRV"==e&&(h.priority="",h.weight="",h.port="",h.protocol="",h.service=""),"URL"==e&&(h.hostRecords.urlredirecttype="",h.hostRecords.TagTitle="",h.hostRecords.TagDescription="",h.hostRecords.TagKeywords="",h.hostRecords.TagURL=""),h.HostRecords.unshift(h.hostRecords))},h.RemoveHostRecords=function(e){h.HostRecords.splice(e,1)},h.NoSearchOption={minimumResultsForSearch:-1},h.ChangeDirty=function(e){h.SaveChangesClicked=!1,""==e.$viewValue||null==e.$viewValue?e.$dirty=!1:e.$dirty=!0},h.GenerateMailSettings=function(e){if(h.MailSettingsConfiguration.MailSettingType=e,"MX"==(h.MailSettingType=e))for(h.MailSettingsConfiguration.MailsettingRecords=[],mailIndex=0;mailIndex<5;mailIndex++)h.MailConfigRecords={},h.MailConfigRecords.RecordName="",h.MailConfigRecords.HostName="",h.MailConfigRecords.MailServer="",h.MailConfigRecords.Priority="",h.MailConfigRecords.TTL="",h.MailSettingsConfiguration.MailsettingRecords.unshift(h.MailConfigRecords);else"MXE"==e||"FWD"==e?(h.MailSettingsConfiguration.MailsettingRecords=[],h.MailConfigRecords={},h.MailConfigRecords.RecordName="",h.MailConfigRecords.HostName="",h.MailConfigRecords.Target="",h.MailConfigRecords.TTL="",h.MailSettingsConfiguration.MailsettingRecords.unshift(h.MailConfigRecords)):"OX"==e&&(h.MailSettingsConfiguration.MailsettingRecords=[],h.MailConfigRecords={},h.MailSettingsConfiguration.MailsettingRecords.unshift(h.MailConfigRecords))},h.RemoveMailSettings=function(){h.MailSettingType="",h.MailSettingsConfiguration={}}}]),app.controller("domainChangeFwdEmailAddress",["$scope","$modalInstance","httpRepository","pageHelper","$timeout","notificationService","$filter","$document","slotId","forwardedEmailAddressType","forwardedEmailAddress","emailIdChosen","primaryEmail","regEmail","adminEmail","billingEmail","techEmail","domainName",function(n,t,e,a,i,o,s,r,c,l,d,u,m,p,f,h,g,v){n.forwardedEmailAddressType=l,n.forwardedEmailAddressTypeforDisplay=l,n.NoSearchOption={minimumResultsForSearch:-1},n.selectedtypetext=l,n.emailIdChosen=u,n.typeOfEmail=[{value:"ACCOUNTPRIMARYEMAIL",label:"Account Primary Email",email:m},{value:"REGISTRANTEMAIL",label:"Registrant Email",email:p},{value:"ADMINISTRATIVEEMAIL",label:"Administrative Email",email:f},{value:"BILLINGEMAIL",label:"Billing Email",email:h},{value:"TECHNICALEMAIL",label:"Technical Email",email:g}],$("#ddlForwardingEmail").select2("val",l),n.typeChange=function(e){for(var t=0;t<n.typeOfEmail.length;t++)if(e==n.typeOfEmail[t].label){n.forwardedEmailAddressType=n.typeOfEmail[t].value,n.selectedtypetext=n.typeOfEmail[t].label,n.emailId=n.typeOfEmail[t].email;break}},n.typeChange(n.selectedtypetext),n.selectedtype=l,n.cancelClick=function(){t.close("")},n.SaveChanges=new a.AsyncStateBehavior({constructor:function(){var t=this.instance;t.onClick=function(){$(".opac").delay(25).queue(function(){$(this).addClass("page-load").css({"text-align":"left",padding:"0em",opacity:"0.5","background-position":"center 2.5em"})}),e.domainDetails.changeForwardedEmailAddress(v,c,n.forwardedEmailAddressType).then(function(e){t.asyncStatus(0==e.Error?a.AsyncStatus.Success:a.AsyncStatus.Error,e)})}},onSuccess:function(e){this.instance.asyncStatus(a.AsyncStatus.Active),"NORIGHTS"==e.Result?t.close(e.Result):t.close(n.selectedtypetext+"~"+n.emailId)},onActive:function(){}})}]),app.controller("domainControlPanelCtrl",["$scope","$rootScope","httpRepository","pageHelper","notificationService","$filter","$modal","$q","ncGridParams","$sce","ncGridEventNames","$window","$location","sanitizeHtmlService","dnsTemplateService",function($scope,$rootScope,httpRepository,pageHelper,notificationService,$filter,$modal,$q,ncGridParams,$sce,ncGridEventNames,$window,$location,sanitizeHtmlService,dnsTemplateService){$scope.IsGetCategoriesSuccess=!1,$scope.dataCategoryInitValues=[],$scope.pageHelper=pageHelper,$rootScope.pageNotification=new notificationService.instance,$scope.pageNotification=$rootScope.pageNotification,$scope.DomainName="",$scope.DomainInformationRes=DomainInfoRes,$scope.NoSearchOption={minimumResultsForSearch:-1},$scope.dnsTemplateService=dnsTemplateService,httpRepository.domainList.getCategories().then(function(e){if($scope.IsGetCategoriesSuccess=!0,null!=e.Result)for(i=0;i<e.Result.length;i++)$scope.CategoryItems={},$scope.CategoryItems.id=e.Result[i].CategoryId,$scope.CategoryItems.text=sanitizeHtmlService(e.Result[i].CategoryHeader),$scope.dataCategoryInitValues.push($scope.CategoryItems)}),this.initialize=function(e,t){function n(){dnsTemplateService.initTemplates($scope.DomainBasicDetails.DnsTemplates)}($scope.DomainBasicDetails=null)!=e&&($scope.DomainBasicDetails=JSON.parse(e)),null!=$scope.DomainBasicDetails&&""!=$scope.DomainBasicDetails.DomainName&&null!=$scope.DomainBasicDetails.DomainName?($scope.DomainName=$scope.DomainBasicDetails.DomainName,n()):(null!=$scope.DomainBasicDetails&&(n(),$scope.subDomainList=$scope.DomainBasicDetails.SubDomainList,$scope.selectedSubDomain=t),$scope.DomainName=t),$scope.rightsUrl="/Domains/DomainControlPanel/"+$scope.DomainName+"/rights/",$scope.dnsUrl="/Domains/DomainControlPanel/"+$scope.DomainName+"/advancedns",$scope.apsUrl="/Domains/DomainControlPanel/"+$scope.DomainName+"/apps/",$scope.domainUrl="/Domains/DomainControlPanel/"+$scope.DomainName+"/domain/",$scope.dnsUrlNew="/Domains/DomainControlPanel/"+$scope.DomainName+"/advancednsNew"},$scope.AllotCategory=function(e,t,n){$scope.CategoryCurrentAction="ALLOT",$scope.AsyncCategoryActions.AllotCategory(n[0].domainName,t)},$scope.CreateNewCategory=function(e,t,n){$scope.CategoryCurrentAction="CREATE",$scope.AsyncCategoryActions.CreateCategory(n[0].domainName,t)},$scope.RemoveCategory=function(e,t,n){$scope.CategoryCurrentAction="REMOVE",$scope.AsyncCategoryActions.RemoveCategory(n[0].domainName,e)},$scope.AsyncCategoryActions=new pageHelper.AsyncStateBehavior({constructor:function(){var n=this.instance;n.AllotCategory=function(e,t){$scope.panelFlag=!0,n.asyncStatus(pageHelper.AsyncStatus.Loading),httpRepository.domainList.allotCategories(e,t).then(function(e){n.asyncStatus(0==e.Error?pageHelper.AsyncStatus.Success:pageHelper.AsyncStatus.Error,e)})},n.CreateCategory=function(e,t){$scope.panelFlag=!0,n.asyncStatus(pageHelper.AsyncStatus.Loading),httpRepository.domainList.createCategories(e,t).then(function(e){n.asyncStatus(0==e.Error?pageHelper.AsyncStatus.Success:pageHelper.AsyncStatus.Error,e)})},n.RemoveCategory=function(e,t){$scope.panelFlag=!0,n.asyncStatus(pageHelper.AsyncStatus.Loading),httpRepository.domainList.removeCategories(e,t).then(function(e){n.asyncStatus(0==e.Error?pageHelper.AsyncStatus.Success:pageHelper.AsyncStatus.Error,e)})}},onSuccess:function(params){$scope.panelFlag=!1;var instance=this.instance;"CREATED"==params.Result[0]&&($scope.Categories={},$scope.Categories.id=params.Result[2],$scope.Categories.text=params.Result[1],$scope.dataCategoryInitValues.push($scope.Categories),initAddCategories("line1",eval($scope.dataCategoryInitValues)),$("#line1").select2("val",$scope.Categories.id)),"REMOVED"==params.Result[0]&&(initAddCategories("line1",eval($scope.dataCategoryInitValues)),$("#line1").select2("val","")),$scope.pageNotification.stuckNotifications.addSuccess(params.Msg,{hasClose:!0,isAutoHide:!0}),instance.asyncStatus(pageHelper.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){var t=this.instance;"ALLOT"==$scope.CategoryCurrentAction?t.activeNotification=$scope.pageNotification.stuckNotifications.addLoading($scope.DomainInformationRes.static_Loading_Category_Chosen,!1):"CREATE"==$scope.CategoryCurrentAction?t.activeNotification=$scope.pageNotification.stuckNotifications.addLoading($scope.DomainInformationRes.static_Loading_Category_Creation,!1):"REMOVE"==$scope.CategoryCurrentAction&&(t.activeNotification=$scope.pageNotification.stuckNotifications.addLoading($scope.DomainInformationRes.static_Loading_Category_Removal,!1))},onError:function(e){$scope.panelFlag=!1;this.instance;$scope.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})},onLocked:function(e){this.instance}}),$scope.changeDomain=function(e){$scope.selectedSubDomain=e,$scope.rightsUrl="/Domains/DomainControlPanel/"+e+"/rights/",$scope.dnsUrl="/Domains/DomainControlPanel/"+e+"/advancedns",$scope.apsUrl="/Domains/DomainControlPanel/"+e+"/apps/",$scope.domainUrl="/Domains/DomainControlPanel/"+e+"/domain/",$scope.dnsUrlNew="/Domains/DomainControlPanel/"+e+"/advancednsNew",window.location.href="/domains/domaincontrolpanel/"+e+"/domain"},$scope.pageBehavior=new pageHelper.AsyncStateBehavior({constructor:function(){this.instance},onSuccess:function(e){this.instance},onActive:function(e){this.instance},onLoading:function(e){this.instance.showLoadPanel=!0},onError:function(e){this.instance}}),$rootScope.closeLightbox=function(){""!=$scope.DomainName&&(window.location.href="/domains/domaincontrolpanel/"+$scope.DomainName+"/rights")}}]),app.controller("domainDetailsCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","notificationService","pageHelper","$q","ncGridParams","$sce","ncGridEventNames","$window","sslRepository","advansedDnsModelService","promiceQueue","domainTransferInService","dspAutoRenewService","$timeout",function(d,c,l,r,u,m,p,f,e,t,a,n,o,s,h,g,v,S){d.IsWildCardExist=!1,d.IsCatchAllExist=!1,d.pageHelper=p,d.pageNotification=new m.instance,d.redirectURLPageNotification=new m.instance,d.redirectEmailPageNotification=new m.instance,d.NoSearchOption={minimumResultsForSearch:-1},d.DomainsInfo=DomainInfoRes,d.DomainInformationRes=DomainInfoRes,d.DomainDnsValidation=DomainDnsValidation,d.ErrorMessageRes=ErrorMessageRes,d.emailpattern=nc_Val_EmailPatternForAddForwarder,d.DestinationUrlPattern=s.validationPattern.url,d.IsDomainExpired=!1,d.actionQueue=new h,d.recordState={active:"",editing:"edit",creating:"new"},d.listType={DomainRedirect:0,EmailRedirect:1},d.isPromtEditRecord=!0,d.isPromtRemoveRecord=!0;var y="";function C(n){var e=n.ncGrid;e.parameters.mapping.isLazyLoading=!1,e.parameters.storage.addNewFirst=!1,e.eventListener.then(function(e){e.$on(a.ncGridRenderPageAfter,function(e,t){n.showMoreLess&&n.showMoreLess.checkState()})}),e.settings.selection.canChangeSelection=function(e){return null!=e.savedModel&&!e.asyncStatus().isDisabled}}function A(t){return{isMore:null,isLess:null,onMore:function(){this.isMore=!1,this.isLess=!0,this.checkState()},onLess:function(){this.isMore=!0,this.isLess=!1,this.checkState()},checkState:function(){t.parameters.storage.requestData.length<=5?(this.isMore=!1,this.isLess=!1):null==this.isMore&&(this.isMore=!0);for(var e=0;e<t.parameters.storage.requestData.length;e++)-1==t.parameters.storage.requestData[e].model.HostId||e<5||this.isLess?t.parameters.storage.requestData[e].limitedDisplay=!1:t.parameters.storage.requestData[e].limitedDisplay=!0}}}function D(r,n){r.notSavedRecords=[],r.newRecords=[],r.addRecord=function(){var e=new N(null,r,n);if(r.newRecords.push(e),r.notSavedRecords.push(e),r.showMoreLess.onMore(),0<r.ncGrid.parameters.storage.pageData.length)for(var t=0;t<r.ncGrid.parameters.storage.pageData.length;t++)"Wildcard Redirect"==r.ncGrid.parameters.storage.pageData[t].recordModel.SourceUrl&&null!=r.ncGrid.parameters.storage.pageData[t].recordModel.SourceUrl?d.IsWildCardExist=!0:"Catch-All"==r.ncGrid.parameters.storage.pageData[t].recordModel.MailBox&&null!=r.ncGrid.parameters.storage.pageData[t].recordModel.MailBox&&(d.IsCatchAllExist=!0);1==n&&setTimeout(function(){$("#tbodyEmailRedirect").removeClass("async-processing")},1),0==n&&setTimeout(function(){$("#tbodyDomainRedirect").removeClass("async-processing")},1)},r.addWildCardRecord=function(){var e=new N(null,r,n,"wildcard");r.newRecords.push(e),r.notSavedRecords.push(e),r.showMoreLess.onMore(),d.CheckWildCardExist(),setTimeout(function(){$("#tbodyDomainRedirect").removeClass("async-processing")},1)},r.addCatchAllRecord=function(){var e=new N(null,r,n,"catchall");r.newRecords.push(e),r.notSavedRecords.push(e),r.showMoreLess.onMore(),d.CheckCatchAllExist(),setTimeout(function(){$("#tbodyEmailRedirect").removeClass("async-processing")},1)},r.saveRecords=function(a,e,t){if(null!=a&&0!=a.length){if("singleRecord"!=t){if(0==e&&(angular.forEach(d.frmDomainRedirect.$error.required,function(e){e.$setDirty()}),angular.forEach(d.frmDomainRedirect.$error.pattern,function(e){e.$setDirty();var t=e.$$rawModelValue;-1==t.indexOf("http://")&&-1==t.indexOf("https://")&&d.pageNotification.stuckNotifications.addError("Invalid URL address! Please include a valid protocol, such as http:// or https:// .",{hasClose:!0,isAutoHide:!0})}),d.frmDomainRedirect.$invalid))return;if(1==e&&(angular.forEach(d.frmEmailRedirect.$error.required,function(e){e.$setDirty()}),angular.forEach(d.frmEmailRedirect.$error.pattern,function(e){e.$setDirty()}),d.frmEmailRedirect.$invalid))return}if(e==d.listType.DomainRedirect){function i(t,n){l.domainAdvancedDNS.addOrUpdateDomainRedirectRecord(d.DomainName,t.recordModel.HostId,t.recordModel.SourceUrl,t.recordModel.DestinationUrl).then(function(e){e.sender=t.recordState==d.recordState.creating?"add":"update",t.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e),r.updateActionAcsses(),n.resolve()})}l.domainAdvancedDNS.deleteParkingRecords(d.DomainName,["URL"]).then(function(e){for(var t=[],n=0;n<a.length;n++){a[n].asyncStatus(p.AsyncStatus.Loading),t.push(d.actionQueue.push(i,[a[n]]))}!0===e.Result.ParkingRecordsDeleted&&0<t.length&&f.all(t).then(function(){d.reloadDomainDetailsList()})})}else if(e==d.listType.EmailRedirect){function n(t,n){t.recordState==d.recordState.creating?l.emailRedirect.addForwarder(d.DomainName,t.recordModel.MailBox,t.recordModel.ForwardTo).then(function(e){e.sender=t.recordState==d.recordState.creating?"add":"update",t.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e),"Catch-All"!=t.recordModel.MailBox||e.Error||d.redirectEmailPageNotification.stuckNotifications.addSuccess("Forwarding email has been added. It may take up to 60 minutes for this change to take effect.",{hasClose:!0,isAutoHide:!0}),r.updateActionAcsses(),n.resolve()}):t.recordState==d.recordState.editing&&l.emailRedirect.editForwarder(d.DomainName,t.editModel.MailBoxId,t.editModel.MailBox,t.editModel.ForwardTo,t.savedModel.MailBox,t.savedModel.ForwardTo).then(function(e){e.sender=t.recordState==d.recordState.creating?"add":"update",t.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e),"Catch-All"!=t.recordModel.MailBox||e.Error||d.redirectEmailPageNotification.stuckNotifications.addSuccess("Forwarding email has been added. It may take up to 60 minutes for this change to take effect.",{hasClose:!0,isAutoHide:!0}),r.updateActionAcsses(),n.resolve()})}for(var o=0;o<a.length;o++){a[o].asyncStatus(p.AsyncStatus.Loading),d.actionQueue.push(n,[a[o]])}}}},r.removeRecords=function(e,s){d.isPromtRemoveRecord=!0,null!=e&&0!=e.length?(e[0].asyncStatus(p.AsyncStatus.Loading),function(n){if(s==d.listType.DomainRedirect)l.domainAdvancedDNS.removeDomainDnsRecord(n.recordModel.HostId,"URL",d.DomainName).then(function(e){if(e.sender=e.sender="remove",n.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e),r.updateActionAcsses(),0==e.Error&&(d.IsWildCardExist=!1,0<r.ncGrid.parameters.storage.pageData.length))for(var t=0;t<r.ncGrid.parameters.storage.pageData.length;t++)"Wildcard Redirect"==r.ncGrid.parameters.storage.pageData[t].recordModel.SourceUrl&&null!=r.ncGrid.parameters.storage.pageData[t].recordModel.SourceUrl&&(d.IsWildCardExist=!0)});else if(s==d.listType.EmailRedirect){var e,t=[],a=[],o=[];if("Catch-All"==n.recordModel.MailBox&&(n.recordModel.MailBox="*"),t.push({MailboxId:n.recordModel.MailBoxId,MailboxName:n.recordModel.MailBox.replace(/ /g,""),ForwardTo:n.recordModel.ForwardTo.replace(/ /g,"")}),-1<n.recordModel.MailBox.indexOf("*"))for(o=n.recordModel.ForwardTo.split(","),i=0;i<o.length;i++)a[i]="*";else a[0]=n.recordModel.MailBox.replace(/ /g,""),o[0]=n.recordModel.ForwardTo.replace(/ /g,"");e={DomainName:d.DomainName,Forwarders:t},l.emailRedirect.removeForwarder(e).then(function(e){if(e.sender=e.sender="remove",n.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e),r.updateActionAcsses(),0==e.Error&&(d.IsCatchAllExist=!1,0<r.ncGrid.parameters.storage.pageData.length))for(var t=0;t<r.ncGrid.parameters.storage.pageData.length;t++)"Catch-All"==r.ncGrid.parameters.storage.pageData[t].recordModel.MailBox&&(d.IsCatchAllExist=!0)})}}(e[0])):r.activeNotification=d.pageNotification.stuckNotifications.addWarning(bulcIsEmpty,{hasClose:!0,isAutoHide:!0})},r.actionAcsses={canRemove:!0,canSaveAll:!0,canSaveOne:!0,canAddNew:!0,canCancel:!0},r.updateActionAcsses=function(){}}function N(n,l,a,i){return new p.AsyncStateBehavior({constructor:function(){var e,t,c=this.instance;c.recordsListBehavior=l,c.listType=a,c.model={},c.editModel={},c.recordModel=angular.copy(n),c.sourceUrlType="",null!=c.recordModel?(c.model=angular.copy(c.recordModel),c.savedModel=angular.copy(c.model),c.recordState=d.recordState.active):(a==d.listType.DomainRedirect?(c.recordModel={},e={HostId:c.recordModel.HostId=-1,SourceUrl:"",DestinationUrl:""},d.pageBehavior.overViewModel.DomainRedirects.push(e)):a==d.listType.EmailRedirect&&(c.recordModel={},t={MailBoxId:c.recordModel.MailBoxId=-1,MailBox:"",ForwardTo:""},d.pageBehavior.overViewModel.RedirectEmailDetails||(d.pageBehavior.overViewModel.RedirectEmailDetails=[]),d.pageBehavior.overViewModel.RedirectEmailDetails.push(t)),"wildcard"==i?(c.recordModel={},c.recordModel.HostId=-1,c.recordModel.DestinationUrl="",c.recordModel.SourceUrl="Wildcard Redirect",c.sourceUrlType="wildcard"):"catchall"==i&&(c.recordModel={},c.recordModel.MailBoxId=-1,c.recordModel.ForwardTo="",c.recordModel.MailBox="Catch-All",c.sourceUrlType="catchall"),c.recordState=d.recordState.creating),c.editRecord=function(e,t){e&&c.recordState!=d.recordState.active||(t&&angular.element(t.target).closest(".is-active").removeClass("is-active"),c.asyncStatus(p.AsyncStatus.Active),c.editModel=c.recordModel,c.editModel.recordModel=c.recordModel,c.recordState=d.recordState.editing,l.notSavedRecords.push(c))},c.removeFromNotSavedRecords=function(){var e=l.notSavedRecords.indexOf(c);l.notSavedRecords.splice(e,1)},c.removeFromNewRecords=function(){var e=l.newRecords.indexOf(c);l.newRecords.splice(e,1)},c.cancelRecord=function(){c.removeFromNotSavedRecords(),c.recordState==d.recordState.creating?(angular.element(".cancel.ng-scope").mouseleave(),c.removeFromNewRecords()):(c.recordModel=angular.copy(c.savedModel),c.model=angular.copy(c.recordModel),c.recordState=d.recordState.active),c.recordState==d.recordState.creating?"Wildcard Redirect"==c.recordModel.SourceUrl?d.IsWildCardExist=!1:"Catch-All"==c.recordModel.MailBox&&(d.IsCatchAllExist=!1):c.recordState==d.recordState.editing&&("Wildcard Redirect"==c.editModel.SourceUrl?d.IsWildCardExist=!0:"Catch-All"==c.editModel.MailBox&&(d.IsCatchAllExist=!0))},c.saveRecord=function(e,t){var n,a,i=!0;0==e&&(n="srcUrl"+t,a="desUrl"+t,angular.forEach(d.frmDomainRedirect.$error.required,function(e){e.$name!=n&&e.$name!=a||!e.$invalid||(e.$setDirty(),i=!1)}),angular.forEach(d.frmDomainRedirect.$error.pattern,function(e){e.$name!=n&&e.$name!=a||!e.$invalid||(e.$setDirty(),i=!1);var t=e.$$rawModelValue;-1==t.indexOf("http://")&&-1==t.indexOf("https://")&&d.pageNotification.stuckNotifications.addError("Invalid URL address! Please include a valid protocol, such as http:// or https:// .",{hasClose:!0,isAutoHide:!0})}));var o,s,r=!0;1==e&&(o="alias"+t,s="fwdto"+t,angular.forEach(d.frmEmailRedirect.$error.required,function(e){e.$name!=o&&e.$name!=s||!e.$invalid||(e.$setDirty(),r=!1)}),angular.forEach(d.frmEmailRedirect.$error.pattern,function(e){e.$name!=o&&e.$name!=s||!e.$invalid||(e.$setDirty(),r=!1)})),i&&r&&l.saveRecords([c],e,"singleRecord")},c.removeRecord=function(e,t){e&&angular.element(e.target).closest(".is-active").removeClass("is-active"),l.removeRecords([c],t)}},onSuccess:function(e){var t=this.instance;"add"==e.sender||"update"==e.sender?(t.removeFromNotSavedRecords(),t.recordState==d.recordState.creating&&t.removeFromNewRecords(),e.Result&&(0<e.Result.length&&(t.recordModel=angular.copy(e.Result[0])),t.recordState==d.recordState.creating&&("Wildcard Redirect"==t.recordModel.SourceUrl?d.IsWildCardExist=!0:"Catch-All"==t.recordModel.MailBox&&(d.IsCatchAllExist=!0)),t.model=angular.copy(t.recordModel),t.savedModel=angular.copy(t.model),t.recordState=d.recordState.active,"add"==e.sender&&l.ncGrid.settings.actions.addNewItem(t)),setTimeout(function(){t.asyncStatus(p.AsyncStatus.Active),d.$$phase||d.$apply()},m.notificationTimeLine.success)):"doNotNeedUpdate"==e.sender?(t.recordState=d.recordState.active,setTimeout(function(){t.asyncStatus(p.AsyncStatus.Active),d.$$phase||d.$apply()},m.notificationTimeLine.success)):"remove"==e.sender&&(t.removeFromNotSavedRecords(),l.ncGrid.settings.actions.removeItem(t))},onActive:function(e){this.instance},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){this.instance.activeNotification=d.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!1})}})}d.disablePromtRemoveRecord=function(){d.isPromtRemoveRecord=!1,angular.element(".prompt-tip.remove-tip").each(function(e){angular.element(e).remove()})},d.disablePromtEditRecord=function(){d.isPromtEditRecord=!1,angular.element(".prompt-tip.locked-tip").each(function(e){angular.element(e).remove()})},d.invisible=!1,d.visible=!0,d.display=!1,d.WGDetailShowHide=function(e){1==e?(d.display=!0,d.invisible=!0,d.visible=!1):(d.visible=!0,d.display=!1,d.invisible=!1)},this.initialize=function(e){d.dcpmodeldata=e,d.is3dPartyDomain=d.dcpmodeldata.IsServiceOwner&&!d.dcpmodeldata.IsNamecheapDomain||d.dcpmodeldata.IsHostedDomain,d.transferInPageBehavior.Load(e),null!=d.dcpmodeldata&&null!=d.dcpmodeldata&&(null!=d.dcpmodeldata.DomainBasicDetails.DomainName&&""!=d.dcpmodeldata.DomainBasicDetails.DomainName&&null!=d.dcpmodeldata.DomainBasicDetails.DomainName?d.DomainName=d.dcpmodeldata.DomainBasicDetails.DomainName:d.DomainName=d.dcpmodeldata.DomainBasicDetails.Domain,null!=d.dcpmodeldata.DomainTransfer&&null!=d.dcpmodeldata.DomainTransfer&&(d.isEligibleForTransferINDetail=!0,d.siteServerNameUrl=d.dcpmodeldata.DomainTransfer.SiteServerNameUrl+"domains/transfer/results.aspx?domainlist="+d.DomainName),""!=d.DomainName&&(d.pageBehavior.GetDomainDetailsTabView(d.DomainName),d.panelFlag=!1))},d.refreshToChangeAssociatedEmail=new p.AsyncStateBehavior({constructor:function(){var t=this.instance;t.onClick=function(){d.panelFlag=!0,t.asyncStatus(p.AsyncStatus.Loading),l.domainDetails.changeWhoIsGuardEmailAddress(d.DomainName,d.slotId).then(function(e){t.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e)})}},onSuccess:function(e){d.panelFlag=!1;var t=this.instance;t.asyncStatus(p.AsyncStatus.Active),null!=e&&null!=e&&""!=e&&("NORIGHTS"!=e.Result?(d.associatedEmailAddress=e.Result,t.activeNotification=d.pageNotification.stuckNotifications.addSuccess(d.DomainInformationRes.success_Alert_WhoisGuardRefreshEmail,{hasClose:!0,isAutoHide:!0})):t.activeNotification=d.pageNotification.stuckNotifications.addError("User has no rights to perform this action",{hasClose:!0,isAutoHide:!0}))},onActive:function(){},onError:function(e){d.panelFlag=!1;var t=this.instance;t.asyncStatus(p.AsyncStatus.Active),t.activeNotification=d.pageNotification.stuckNotifications.addError(d.DomainInformationRes.failure_Alert_WhoisGuardRefreshEmail,{hasClose:!0,isAutoHide:!0})},onLoading:function(e){this.instance.activeNotification=d.pageNotification.stuckNotifications.addLoading(d.DomainInformationRes.static_Loading_WhoisGuardRefreshEmail,!0)}}),d.autoRenewBehavior=new p.AsyncStateBehavior({constructor:function(){var r=this.instance;r.changeState=function(e){var a=d.model.DomainName,i=!!d.is3dPartyDomain||d.model.AutoRenew,o=null!=d.model.WGDetails.WGActiveStatus?d.model.WGDetails.WGAutoRenew:null,t=d.model.PremiumDnsDetails.IsPremiumdDNSBuyed?d.model.PremiumDnsDetails.IsAutoRenewEnabled:null,n=e.target.attributes["renew-service-type"].value,s=v(n,"WhoisGuardTurn"!=n?e.target.checked:!d.model.WGDetails.WGActiveStatus,i,o,t,a,d.is3dPartyDomain);e.target.checked=!e.target.checked,r.changeModelState=function(e){"Domain"==e?d.model.AutoRenew=!d.model.AutoRenew:"WhoisGuard"==e?d.model.WGDetails.WGAutoRenew=!d.model.WGDetails.WGAutoRenew:"PremiumDNS"==e?d.model.PremiumDnsDetails.IsAutoRenewEnabled=!d.model.PremiumDnsDetails.IsAutoRenewEnabled:"WhoisGuardTurn"==e&&(d.model.WGDetails.WGActiveStatus=!d.model.WGDetails.WGActiveStatus)},r.changeModelState(n),s.callbackAction.domain=function(t){var n=f.defer();return l.domainList.domainWhoIsAutoRenew("DOMAIN",a,t,o||!1).then(function(e){e.sender="Domain",e.Error||(i=!!d.is3dPartyDomain||t),n.resolve(!e.Error),r.asyncStatus(e.Error?p.AsyncStatus.Error:p.AsyncStatus.Success,e)}),n.promise},s.callbackAction.whoisGuardTurn=function(e){var t=f.defer();return d.IsDomainExpired?r.activeNotification=d.pageNotification.stuckNotifications.addError(d.DomainInformationRes.failure_Alert_Domain_Expired.replace("{[whoisAction]}",d.whoisAction),{hasClose:!0,isAutoHide:!0}):(d.panelFlag=!0,r.asyncStatus(p.AsyncStatus.Loading),l.domainDetails.setWhoisGuardStatustoSwitchOnorOff(d.DomainName,d.slotId,d.whoisguardEnabled,d.RegistrantContact.EmailAddress,"REGISTRANTEMAIL").then(function(e){e.sender="WhoisGuardTurn",r.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e)})),t.promise},s.callbackAction.whoisGuard=function(e){l.domainList.domainWhoIsAutoRenew("WG",a,i,e).then(function(e){e.sender="WhoisGuard",r.asyncStatus(e.Error?p.AsyncStatus.Error:p.AsyncStatus.Success,e)})},s.callbackAction.premiumDNS=function(e){l.domainList.setPremiumDnsAutoRenew(d.model.PremiumDnsDetails.Id,e).then(function(e){e.sender="PremiumDNS",d.premiumDNS.autorenewBehavior.asyncStatus(e.Error?p.AsyncStatus.Error:p.AsyncStatus.Success,e)})},s.apply()},r.asyncStatus(p.AsyncStatus.Active)},onSuccess:function(e){var t=this.instance;"WhoisGuardTurn"==e.sender?(t.asyncStatus(p.AsyncStatus.Active),null!=e&&null!=e&&""!=e&&("enabled"==e.Msg?(d.whoisguardEnabled="true",d.whoisAction="OFF",t.changeModelState(e.sender),t.activeNotification=d.pageNotification.stuckNotifications.addSuccess(d.DomainInformationRes.success_Alert_WhoisGuardOn,{hasClose:!0,isAutoHide:!0})):"disabled"==e.Msg?(d.whoisguardEnabled="false",d.whoisAction="ON",t.changeModelState(e.sender),t.activeNotification=d.pageNotification.stuckNotifications.addSuccess(d.DomainInformationRes.success_Alert_WhoisGuardOff,{hasClose:!0,isAutoHide:!0})):"NORIGHTS"==e.Msg&&(t.activeNotification=d.pageNotification.stuckNotifications.addError("User has no rights to perform this action",{hasClose:!0,isAutoHide:!0})))):(t[e.sender]&&t[e.sender].destroy&&t[e.sender].destroy(e),t.changeModelState(e.sender),t[e.sender]=d.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0}),t.asyncStatus(p.AsyncStatus.Active))},onActive:function(e){},onLoading:function(e){this.instance.activeNotification=d.pageNotification.stuckNotifications.addLoading(d.DomainInformationRes.static_Loading_WhoisGuardOnOff.replace("{[whoisAction]}",d.whoisAction),!0)},onError:function(e){var t=this.instance;"WhoisGuardTurn"==e.sender?(t.asyncStatus(p.AsyncStatus.Active),t.activeNotification=d.pageNotification.stuckNotifications.addError(d.DomainInformationRes.failure_Alert_WhoisGuardOnOff.replace("{[whoisAction]}",d.whoisAction),{hasClose:!0,isAutoHide:!0})):(t[e.sender]&&t[e.sender].destroy&&t[e.sender].destroy(e),t[e.sender]=d.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0}),t.asyncStatus(p.AsyncStatus.Active))}}),d.resendNotification=new p.AsyncStateBehavior({constructor:function(){var t=this.instance;t.onClick=function(){d.panelFlag=!0,t.asyncStatus(p.AsyncStatus.Loading),l.domainDetails.resendNotificationEmail(d.DomainName).then(function(e){t.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e)})}},onSuccess:function(e){d.panelFlag=!1;var t=this.instance;t.asyncStatus(p.AsyncStatus.Active),null!=e&&null!=e&&""!=e&&(t.activeNotification=d.pageNotification.stuckNotifications.addSuccess(d.DomainInformationRes.success_Alert_RegistrantResendNotification,{hasClose:!0,isAutoHide:!0}))},onActive:function(){},onError:function(e){d.panelFlag=!1;var t=this.instance;t.asyncStatus(p.AsyncStatus.Active),t.activeNotification=d.pageNotification.stuckNotifications.addError(d.DomainInformationRes.failure_Alert_RegistrantResendNotification,{hasClose:!0,isAutoHide:!0})},onLoading:function(e){this.instance.activeNotification=d.pageNotification.stuckNotifications.addLoading(d.DomainInformationRes.static_Loading_RegistrantResendNotification,!0)}}),d.SaveChangesToSetEmailRefreshDuration=new p.AsyncStateBehavior({constructor:function(){var t=this.instance;t.onClick=function(e){d.IsDomainExpired?d.selectedEmailUpdateDuration!=e&&S(function(){$("#autorefresh").val(d.selectedEmailUpdateDuration).change(),t.activeNotification=d.pageNotification.stuckNotifications.addError("Failed to change Automatically Refresh : The domain is expired.",{hasClose:!0,isAutoHide:!0})},100):(t.asyncStatus(p.AsyncStatus.Loading),l.domainDetails.setEmailRefreshDuration(d.DomainName,d.slotId,e).then(function(e){t.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e)}))}},onSuccess:function(e){var t=this.instance;t.asyncStatus(p.AsyncStatus.Active),"NORIGHTS"==e.Result?t.activeNotification=d.pageNotification.stuckNotifications.addError("User has no rights to perform this action",{hasClose:!0,isAutoHide:!0}):t.activeNotification=d.pageNotification.stuckNotifications.addSuccess(d.DomainInformationRes.success_Alert_WhoisGuardRefreshDuration,{hasClose:!0,isAutoHide:!0})},onActive:function(){},onError:function(){},onLoading:function(){}}),d.IsChooseExtendedAttributeModalPopUpOpened=!1,d.openChooseExtendedAttributeModalPopUp=function(){var e;d.IsChooseExtendedAttributeModalPopUpOpened||((e=u.open({templateUrl:"/Domains/ChooseExtendedModal/",controller:"ChooseExtendedAttributeCtrl",size:"lg",backdrop:"static",resolve:{sectionViewModal:function(){return d.model}}})).result.then(function(e){d.IsChooseExtendedAttributeModalPopUpOpened=!1}),e.opened.then(function(){d.IsChooseExtendedAttributeModalPopUpOpened=!0}))},d.setContactDetails=function(e){var t;null!=d.model.ContactDetails&&null!=d.model.ContactDetails.RegistrantContactDetails&&(d.RegistrantContact=d.model.ContactDetails.RegistrantContactDetails),null!=d.model.ContactDetails&&null!=d.model.ContactDetails.AdminContactDetails&&(d.AdminContact=d.model.ContactDetails.AdminContactDetails),null!=d.model.ContactDetails&&null!=d.model.ContactDetails.TechContactDetails&&(d.TechContact=d.model.ContactDetails.TechContactDetails),null!=d.model.ContactDetails&&null!=d.model.ContactDetails.BillingContactDetails&&(d.BillingContact=d.model.ContactDetails.BillingContactDetails),null!=d.model.ContactDetails&&null!=d.model.ContactDetails.ExtendedAttributesInfo&&(d.ExtendedAttributesInfo=d.model.ContactDetails.ExtendedAttributesInfo,null!=d.ExtendedAttributesInfo.CcLocality&&null!=d.ExtendedAttributesInfo&&""!=d.ExtendedAttributesInfo.CcLocality&&o.sslInfo.GetCountryName(d.ExtendedAttributesInfo.CcLocality.toUpperCase()).then(function(e){e.Error||(d.ExtendedAttributesInfo.CountryName=e)}),null!=d.ExtendedAttributesInfo.RegistrantJoDateDec&&null!=d.ExtendedAttributesInfo.RegistrantJoDatePub&&(d.ExtendedAttributesInfo.RegistrantJoDateDec=p.Date.dateFromJson(d.ExtendedAttributesInfo.RegistrantJoDateDec),d.ExtendedAttributesInfo.RegistrantJoDateDec=r("date")(new Date(d.ExtendedAttributesInfo.RegistrantJoDateDec),"MMM d, yyyy"),d.ExtendedAttributesInfo.RegistrantJoDatePub=p.Date.dateFromJson(d.ExtendedAttributesInfo.RegistrantJoDatePub),d.ExtendedAttributesInfo.RegistrantJoDatePub=r("date")(new Date(d.ExtendedAttributesInfo.RegistrantJoDatePub),"MMM d, yyyy")),null!=d.ExtendedAttributesInfo.RegistrantBirthDate&&(d.ExtendedAttributesInfo.RegistrantBirthDate=p.Date.dateFromJson(d.ExtendedAttributesInfo.RegistrantBirthDate),d.ExtendedAttributesInfo.RegistrantBirthDate=r("date")(new Date(d.ExtendedAttributesInfo.RegistrantBirthDate),"MMM d, yyyy")),null!=d.ExtendedAttributesInfo.RegistrantBirthplace&&""!=d.ExtendedAttributesInfo.RegistrantBirthplace&&(t=[],-1<d.ExtendedAttributesInfo.RegistrantBirthplace.indexOf(",")&&(t=d.ExtendedAttributesInfo.RegistrantBirthplace.split(","),d.ExtendedAttributesInfo.placeOfBirth=t[1],d.ExtendedAttributesInfo.PostalCode=t[0]),o.sslInfo.GetCountryName(d.ExtendedAttributesInfo.RegistrantBirthplace.toUpperCase()).then(function(e){e.Error||(d.ExtendedAttributesInfo.CountryName=e)})))},d.pageBehavior=new p.AsyncStateBehavior({constructor:function(){var s=this.instance;s.showLoadPanel=!0,s.asyncStatus(p.AsyncStatus.Loading),s.GetDomainDetailsTabView=function(e){l.domainDetails.getDomainDetailsTabOverView(e).then(function(e){var t,n,a,i,o;s.loading=!1,e.sender="getModel",null!=e.Result&&(d.model=JSON.parse(e.Result),t=moment(new Date($.now())),n=moment(d.model.ExpiryDateTime),a=moment(d.model.WGDetails.WGExpireDateTime),i=moment.duration(n.diff(t)).asDays(),o=moment.duration(a.diff(t)).asDays(),i<30&&0<i&&(d.model.ContextualMessage="Your domain is expiring soon."),o<30&&0<o&&(d.model.WGContextualMessage="Your Domain Privacy will expire soon."),d.model.IsNamecheapDomain&&d.setContactDetails(d.model.ContactDetails),n<t&&(d.IsDomainExpired=!0),d.slotId=d.model.WGDetails.WGSlotID,d.model.StartDateTime=r("date")(new Date(d.model.StartDateTime),"MMM d, yyyy"),d.model.ExpiryDateTime=r("date")(new Date(d.model.ExpiryDateTime),"MMM d, yyyy"),d.model.Validity=d.model.StartDateTime+" - "+d.model.ExpiryDateTime,d.model.WGDetails.WGPurchaseDateTime=r("date")(new Date(d.model.WGDetails.WGPurchaseDateTime),"MMM d, yyyy"),d.model.WGDetails.WGExpireDateTime=r("date")(new Date(d.model.WGDetails.WGExpireDateTime),"MMM d, yyyy"),d.model.WGDetails.WGValidity=d.model.WGDetails.WGPurchaseDateTime+" - "+d.model.WGDetails.WGExpireDateTime,d.associatedEmailAddress=d.model.WGDetails.WGAssociatedEmail,d.selectedEmailUpdateDuration=0==d.model.WGDetails.WGEmailChangeDuration?3:d.model.WGDetails.WGEmailChangeDuration,1==d.model.WGDetails.WGActiveStatus?(d.whoisguardEnabled="true",d.whoisAction="OFF"):0==d.model.WGDetails.WGActiveStatus?(d.whoisguardEnabled="false",d.whoisAction="ON"):(d.whoisguardEnabled="NA",d.whoisAction="NA")),s.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e)})},d.redirectDomainList={},d.redirectDomainList.ncGrid=new e,d.emailRedirectList={},d.emailRedirectList.ncGrid=new e},onSuccess:function(e){var t,n,a=this.instance;a.showLoadPanel=!1,a.overViewModel=JSON.parse(e.Result),(t=d.redirectDomainList).listType=d.listType.DomainRedirect,t.showMoreLess=A(t.ncGrid),C(t),t.ncGrid.settings.getData=function(e,t){var n=d.pageBehavior.overViewModel.DomainRedirects?d.pageBehavior.overViewModel.DomainRedirects:[],a=[];if(null!=n){for(var i=0;i<n.length;i++)"Wildcard Redirect"==n[i].SourceUrl&&(d.IsWildCardExist=!0),a.push(N(n[i],d.redirectDomainList,d.listType.DomainRedirect));e.resolve({Data:a})}},D(t,t.listType),(n=d.emailRedirectList).listType=d.listType.EmailRedirect,n.showMoreLess=A(n.ncGrid),C(n),n.ncGrid.settings.getData=function(e,t){var n=d.pageBehavior.overViewModel.RedirectEmailDetails?d.pageBehavior.overViewModel.RedirectEmailDetails:[],a=[];if(null!=n){for(var i=0;i<n.length;i++)"Catch-All"==n[i].MailBox&&(d.IsCatchAllExist=!0),a.push(N(n[i],d.emailRedirectList,d.listType.EmailRedirect));e.resolve({Data:a})}},D(n,n.listType),d.redirectDomainList.ncGrid.settings.reload(),d.emailRedirectList.ncGrid.settings.reload(),d.getNameserverDetails(a.overViewModel),d.validateSellDomainDetails(a.overViewModel),d.is3dPartyDomain&&d.premiumDNS.checkNsRecords(),d.premiumDNS.autorenewBehavior.checkDomainStatus(),d.model.IsNsChangeProhibited&&d.nsProhibit.setProhibit(d.model.NsChangeProhibitedSeconds)},onLoading:function(e){this.instance.loading=!0},onError:function(e){var t=this.instance;t.isLoading=!1,t.activeNotification=d.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1})}}),d.CheckWildCardExist=function(){if(0==d.redirectDomainList.newRecords.length)d.IsWildCardExist=!1;else for(indexWildCard=0;indexWildCard<d.redirectDomainList.newRecords.length;indexWildCard++)"wildcard"==d.redirectDomainList.newRecords[indexWildCard].sourceUrlType?d.IsWildCardExist=!0:d.IsWildCardExist=!1},d.CheckCatchAllExist=function(){if(0==d.emailRedirectList.newRecords.length)d.IsCatchAllExist=!1;else for(indexCatchAll=0;indexCatchAll<d.emailRedirectList.newRecords.length;indexCatchAll++)"catchall"==d.emailRedirectList.newRecords[indexCatchAll].sourceUrlType?d.IsCatchAllExist=!0:d.IsCatchAllExist=!1},d.reloadDomainDetailsList=function(){d.redirectDomainList.ncGrid.parameters.mapping.isLoading=!0,l.domainDetails.getDomainDetailsTabOverView(d.DomainName).then(function(e){d.redirectDomainList.ncGrid.parameters.mapping.isLoading=!1,0==e.Error&&(d.pageBehavior.overViewModel.DomainRedirects=JSON.parse(e.Result).DomainRedirects,d.redirectDomainList.ncGrid.settings.reload())})},d.getNameserverDetails=function(e){d.domainnameserverViewModel=e,d.showActionButton=!1,d.SaveNameServer=!1;var t=[];if(null==e.NameServerDetails.NameserversList||e.NameServerDetails.IsNamecheapSharedHosting)d.domainnameserverViewModel.NameServerDetails.NameserversList=[{NS:""},{NS:""}];else{for(var n=e.NameServerDetails.NameserversList.join(",").split(","),a=0;a<n.length;a++)t.push({NS:n[a]});d.domainnameserverViewModel.NameServerDetails.NameserversList=t}e.NameServerDetails.IsNamecheapSharedHosting?(y={NSid:"2",NSname:"SharedHosting"},d.selectedNameserver={id:"2",name:"SharedHosting"}):"NameCheapDefault"==e.NameServerDetails.DnsServerType||"None"==e.NameServerDetails.DnsServerType?(y={NSid:"0",NSname:"NCDefault"},d.selectedNameserver={id:"0",name:"NCDefault"}):"Custom"==e.NameServerDetails.DnsServerType?(y={NSid:"3",NSname:"custom"},d.selectedNameserver={id:"3",name:"custom"}):"Enom"==e.NameServerDetails.DnsServerType?(y={NSid:"1",NSname:"Enom"},d.selectedNameserver={id:"1",name:"Namecheap BackupDNS"}):"Premium"==e.NameServerDetails.DnsServerType&&(y={NSid:"4",NSname:"NamecheapPremiumDNS"},d.selectedNameserver={id:"4",name:"NamecheapPremiumDNS"})},d.nameServerChange=function(e){d.showActionButton=!0,1!=e&&("Custom"!=d.pageBehavior.overViewModel.NameServerDetails.DnsServerType&&(d.domainnameserverViewModel.NameServerDetails.NameserversList=[{NS:""},{NS:""}]),d.SaveNameServer=!1)},d.addMoreNameServers=function(){d.domainnameserverViewModel.NameServerDetails.NameserversList.push([{NS:""}])},d.SaveDomainNameservers=function(e){d.SaveNameServer=!0;var t,a,i,n,o=d.DomainName,s={NameServers:"",DnsServerType:""},r=null==e?d.selectedNameserver.id:e;"3"==r&&(t=0,$("#EdidNameServerfrm input[type='text']").each(function(){""!=this.value&&(t=parseInt(t)+1)})),d.nsrequired=!(1<t),(1<t||"3"!=r)&&(i=!1,"0"==(a=r)&&(s.DnsServerType="NameCheapDefault"),"1"==a&&(s.DnsServerType="Enom"),"2"==a&&(s.DnsServerType="SharedHosting"),"3"==a&&(s.DnsServerType="Custom",$("#EdidNameServerfrm input[type='text']").each(function(){""!=this.value&&(s.NameServers+=this.value+",")})),"4"==a&&(s.DnsServerType="Premium","3"==y.NSid||"2"==y.NSid?(i=!0,u.open({templateUrl:"/Domains/ConfirmChangeNameServerToPremiumDNSModal",controller:"confirmChangeNameServerToPremiumDnsModalCtrl",size:"lg",backdrop:"static",resolve:{}}).result.then(function(e){d.premiumDNS.protectionBehavior.changeState(!0),n()},function(){d.premiumDNS.protectionBehavior.asyncStatus(p.AsyncStatus.Active),d.selectedNameserver={id:y.NSid,name:y.NSname},d.showActionButton=!1,d.model.PremiumDnsDetails.IsPremiumdDNSEnabled=!1})):d.premiumDNS.protectionBehavior.changeState(!0)),n=function(){d.SetDomainNameServers=new p.AsyncStateBehavior({constructor:function(){var t=this.instance;d.nameServerLoaderPanel=!0,t.activeNotification=new m.instance,l.domainDns.setNameServers(s.NameServers,s.DnsServerType,o).then(function(e){e.Error?t.asyncStatus(p.AsyncStatus.Error,e):t.asyncStatus(p.AsyncStatus.Success,e),c.$broadcast("checkPremiumDnsState",e)})},onSuccess:function(e){var t,n;i?window.location.href="/Domains/DomainControlPanel/"+o+"/advancedns":(null!=e.Result&&d.nsProhibit.setProhibit(e.Result.NsChangeProhibitedSeconds),this.instance,d.nameServerLoaderPanel=!1,d.showActionButton=!1,y={NSid:a,NSname:s.DnsServerType},t=d.domainnameserverViewModel.NameServerDetails.NameserversList,""!=s.NameServers&&null!=s.NameServers&&(n=$.map(t,function(e){if(null!=e.NS)return{NS:void 0!==e.NS?e.NS:null}})),d.domainnameserverViewModel.NameServerDetails.NameserversList=n,"SharedHosting"==s.DnsServerType||"DNS_com"==s.DnsServerType?(d.pageBehavior.overViewModel.NameServerDetails.IsNamecheapSharedHosting=!0,d.pageBehavior.overViewModel.NameServerDetails.DnsServerType="DNS_com"):(d.pageBehavior.overViewModel.NameServerDetails.DnsServerType=s.DnsServerType,d.pageBehavior.overViewModel.NameServerDetails.IsNamecheapSharedHosting=!1),"Premium"==s.DnsServerType?d.model.PremiumDnsDetails.IsPremiumdDNSEnabled=!0:d.model.PremiumDnsDetails.IsPremiumdDNSEnabled=!1,null==d.pageBehavior.overViewModel.DomainRedirects&&null==d.pageBehavior.overViewModel.RedirectEmailDetails&&("NameCheapDefault"!=d.pageBehavior.overViewModel.NameServerDetails.DnsServerType&&"Enom"!=d.pageBehavior.overViewModel.NameServerDetails.DnsServerType||location.reload()),d.redirectDomainList.ncGrid.settings.reload(),d.emailRedirectList.ncGrid.settings.reload(),setTimeout(function(){$("#tbodyEmailRedirect").removeClass("async-processing"),$("#tbodyDomainRedirect").removeClass("async-processing")},1))},onError:function(e){d.nameServerLoaderPanel=!1,d.showActionButton=!1,d.selectedNameserver={id:y.NSid,name:y.NSname};var t=this.instance;e.Msg=d.ErrorMessageRes.error_Site_PleaseTryAgain,t.activeNotification=d.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}})},i||n())},d.CancelDomainNameServers=function(){d.selectedNameserver={id:y.NSid,name:y.NSname},"Custom"!=d.pageBehavior.overViewModel.NameServerDetails.DnsServerType&&(d.domainnameserverViewModel.NameServerDetails.NameserversList=[{NS:""},{NS:""}]),d.showActionButton=!1},d.getDaysBetweentwoDates=function(e,t){var n=e.valueOf(),a=(t.valueOf()-n)/1e3/86400;return Math.round(a-.5)},d.validateSellDomainDetails=function(e){var t,n,a;d.ListingID=0,d.ParkinghostIDsList=null==e.HostIdList?"":e.HostIdList.replace(/,\s*$/,""),d.hostIDsListToBeRemove=null==e.RemoveHostIdList?"":e.RemoveHostIdList.replace(/,\s*$/,""),null!=e.SellDomainDetails&&(d.sellDomainDetails=e.SellDomainDetails,e.ListingExpirationDate=p.Date.dateFromJson(e.SellDomainDetails.ListingExpirationDate),d.ListingID=e.SellDomainDetails.ListingID,t=new Date,n=new Date(e.ListingExpirationDate),d.selldomainDescription=n,a=d.getDaysBetweentwoDates(n,t),d.isGracePeriod=a<0&&-7<=a)},d.SellDomainInfo={},d.cancelSellDomain=function(e,t){var n=u.open({templateUrl:"/Domains/MarketPlaceListingModal/",controller:"marketplaceCancelCtrl",size:"lg",backdrop:"static",resolve:{sectionViewModal:function(){return d.SellDomainInfo.DomainName=e,d.SellDomainInfo.ListingId=t,d.SellDomainInfo}}});n.result.then(function(e){d.IsChooseMarketPlaceListingModalPopUpOpened=!1}),n.opened.then(function(){d.IsChooseMarketPlaceListingModalPopUpOpened=!0})},d.getParkingPageModal=function(e){var t=d.DomainName;"OFF"==e?(d.pageNotification.stuckNotifications.clear(),d.pageNotification.stuckNotifications.addLoading(d.DomainsInfo.static_TurningOffParkingPageLoading,!1),l.domainDns.turningOnOrOffHostRecords(d.ParkinghostIDsList,!1,t).then(function(e){e.Error?(d.pageNotification.stuckNotifications.clear(),d.pageNotification.stuckNotifications.addError(d.DomainsInfo.error_TurnedOffParkingPage,{hasClose:!0,isAutoHide:!0})):(d.pageNotification.stuckNotifications.clear(),d.pageNotification.stuckNotifications.addSuccess(d.DomainsInfo.success_TurnedOffParkingPage,{hasClose:!0,isAutoHide:!0}),d.ParkingPageStatus="OFF",d.showParkingPageTurnOnButton=!0,setTimeout(function(){location.reload()},1e3))})):"ON"==e&&u.open({templateUrl:"/Domains/ParkingPageModalPopup",controller:"domainParkingPageActionCtrl",size:"lg",backdrop:"static",resolve:{domainName:function(){return t},showParkingPageInfoAboutDnsUpdate:function(){return d.showParkingPageInfoAboutDnsUpdate},showParkingPageInfoAboutServiceUpdate:function(){return d.showParkingPageInfoAboutServiceUpdate},ParkingPagehostIDsList:function(){return d.ParkinghostIDsList},TempParkingPagehostIDsList:function(){return d.ParkinghostIDsList},hostIDsListToBeRemoved:function(){return d.hostIDsListToBeRemove}}}).result.then(function(e){null!=e&&""!=e&&(this.instance,d.pageNotification.stuckNotifications.clear(),"Success"==e.Call?(d.pageNotification.stuckNotifications.addSuccess(d.DomainsInfo.success_Site_ParkingPageTurnOn,{hasClose:!0,isAutoHide:!0}),d.ParkingPageStatus="ON",d.showParkingPageTurnOnButton=!1,setTimeout(function(){location.reload()},1e3)):"Error"==e.Call&&d.pageNotification.stuckNotifications.addError(d.DomainsInfo.error_Site_ParkingPageTurnOn,{hasClose:!0,isAutoHide:!0}))})},d.transferInPageBehavior=new p.AsyncStateBehavior({constructor:function(){var t=this.instance;t.activeNotification=new m.instance,t.asyncStatus(p.AsyncStatus.Active),t.Load=function(e){null!=e.DomainTransfer&&null!=e.DomainTransfer&&(t.authorizeTransfer=function(){t.asyncStatus(p.AsyncStatus.Loading),g.showAuthorizeTransferModal(d.DomainName,e.DomainTransfer.TransferId).then(function(e){t.asyncStatus(p.AsyncStatus.Success,{sender:"authorizeTransfer",Result:e})},function(){})},t.refreshStatus=function(){t.asyncStatus(p.AsyncStatus.Loading),l.domainTransfer.refreshTransferStatus(e.DomainTransfer.TransferId,d.DomainName).then(function(e){e.sender="refreshStatus",t.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e)})},t.resendEmail=function(){t.asyncStatus(p.AsyncStatus.Loading),l.domainTransfer.resendEmail(e.DomainTransfer.TransferId).then(function(e){e.sender="resendEmail",t.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e)})},"s_dts"==m.getUrlNotificationKey()&&d.pageNotification.stuckNotifications.addSuccess(DomainTransferRes.message_RefreshStatus_Success,{hasClose:!0,isAutoHide:!0}))}},onSuccess:function(e){var t=this.instance;null!=d.dcpmodeldata.DomainTransfer&&null!=d.dcpmodeldata.DomainTransfer&&("refreshStatus"==e.sender?e.Result.TransferStatus!=d.dcpmodeldata.DomainTransfer.TransferStatus?window.location.href=window.location.href+"?notificationKey=s_dts":t.activeNotification=d.pageNotification.stuckNotifications.addSuccess(DomainTransferRes.message_RefreshStatus_Success,{hasClose:!0,isAutoHide:!0}):"authorizeTransfer"==e.sender?(d.dcpmodeldata.DomainTransfer=e.Result,t.activeNotification=d.pageNotification.stuckNotifications.addSuccess(DomainTransferRes.message_AutorizeTransfer_Success,{hasClose:!0,isAutoHide:!0})):"resendEmail"==e.sender&&(t.activeNotification=d.pageNotification.stuckNotifications.addSuccess(DomainTransferRes.message_ResendEmail_Success,{hasClose:!0,isAutoHide:!0}))),t.asyncStatus(p.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance.showLoadPanel=!0},onError:function(e){var t=this.instance;"resendEmail"==e.sender?e.Msg=DomainTransferRes.message_ResendEmail_Error:"refreshStatus"==e.sender&&(e.Msg=DomainTransferRes.message_RefreshStatus_Error),t.activeNotification=d.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0}),t.asyncStatus(p.AsyncStatus.Active)}}),d.transferStatusType={None:0,Pending:1,Cancelled:2,QueuedForTransfer:3,AwaitingEppCode:4,AwaitingEmailConfirmation:5,Done:6,VerifyingDomainContacts:7},d.premiumDNS={protectionBehavior:new p.AsyncStateBehavior({constructor:function(){var n=this.instance;n.setProhibited=function(e){n.IsProhibited=e},n.changeState=function(e){n.asyncStatus(p.AsyncStatus.Loading),e?d.selectedNameserver=d.model.PremiumDnsDetails.IsPremiumdDNSEnabled?{id:"0",name:"NCDefault"}:{id:"4",name:"NamecheapPremiumDNS"}:d.SaveDomainNameservers(d.model.PremiumDnsDetails.IsPremiumdDNSEnabled?0:4)},c.$on("checkPremiumDnsState",function(e,t){d.selectedNameserver=d.model.PremiumDnsDetails.IsPremiumdDNSEnabled?{id:"4",name:"NamecheapPremiumDNS"}:{id:y.NSid,name:y.NSname},n.asyncStatus(t.Error?p.AsyncStatus.Error:p.AsyncStatus.Success)}),n.asyncStatus(p.AsyncStatus.Active)},onSuccess:function(e){var t=this.instance;e.Msg=d.model.PremiumDnsDetails.IsPremiumdDNSEnabled?d.DomainInformationRes.success_Alert_PremiumDnsOn:d.DomainInformationRes.success_Alert_PremiumDnsOff,t.activeNotification=d.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0}),t.asyncStatus(p.AsyncStatus.Active)},onActive:function(e){},onLoading:function(e){},onError:function(e){"4"!=d.selectedNameserver.id&&"4"!=y.NSid||(d.model.PremiumDnsDetails.IsPremiumdDNSEnabled=!d.model.PremiumDnsDetails.IsPremiumdDNSEnabled,d.selectedNameserver={id:y.NSid,name:y.NSname})}}),autorenewBehavior:new p.AsyncStateBehavior({constructor:function(){var t=this.instance;t.changeState=function(){t.asyncStatus(p.AsyncStatus.Loading),d.model.PremiumDnsDetails.IsAutoRenewEnabled=!d.model.PremiumDnsDetails.IsAutoRenewEnabled,l.domainList.setPremiumDnsAutoRenew(d.model.PremiumDnsDetails.Id,d.model.PremiumDnsDetails.IsAutoRenewEnabled).then(function(e){t.asyncStatus(e.Error?p.AsyncStatus.Error:p.AsyncStatus.Success,e)})},t.checkDomainStatus=function(){d.model.IsDomainLocked&&d.model.PremiumDnsDetails.IsAutoRenewEnabled&&l.domainList.setPremiumDnsAutoRenew(d.model.PremiumDnsDetails.Id,!1).then(function(){d.model.PremiumDnsDetails.IsAutoRenewEnabled=!1})}},onSuccess:function(e){var t=this.instance;d.model.PremiumDnsDetails.IsAutoRenewEnabled=!d.model.PremiumDnsDetails.IsAutoRenewEnabled,e.Msg=d.model.PremiumDnsDetails.IsAutoRenewEnabled?d.DomainInformationRes.success_Alert_PremiumDnsAutoRenewEnable:d.DomainInformationRes.success_Alert_PremiumDnsAutoRenewDisable,t.activeNotification=d.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0}),t.asyncStatus(p.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance.activeNotification=d.pageNotification.stuckNotifications.addLoading(d.DomainInformationRes.static_Loading_PremiumDnsRenewEnableDisable,{hasClose:!0,isAutoHide:!0})},onError:function(e){var t=this.instance;t.activeNotification=d.pageNotification.stuckNotifications.addError(d.ErrorMessageRes.error_Site_PleaseTryAgain,{hasClose:!0,isAutoHide:!0}),t.asyncStatus(p.AsyncStatus.Active)}}),hidden:!d.is3dPartyDomain&&!d.pageBehavior.IsDomainOwner&&!d.pageBehavior.IsManagerHasPremiumDnsRights,getBlockTooltip:function(){return d.model&&d.model.PremiumDnsDetails.IsPremiumdDNSBuyed?d.DomainInformationRes.tooltip_PremiumDNSTooltipBuyed:d.DomainInformationRes.tooltip_PremiumDNSTooltipNotBuyed},checkNsRecords:function(){var t;d.is3dPartyDomain&&d.model.PremiumDnsDetails.IsPremiumdDNSBuyed&&d.model.PremiumDnsDetails.IsActive&&"Premium"!=d.domainnameserverViewModel.NameServerDetails.DnsServerType&&angular.element('[data-ng-controller="domainControlPanelCtrl as dcpCtrl"]').scope().pageNotification.alerts.addWarning((t="<ul>",d.model.PremiumDnsDetails.ExpectedPremiumNsList.forEach(function(e){t+="<li>"+e+"</li>"}),t+="</ul> ",r("stringFormat")(d.DomainDnsValidation.warning_PremiumDnsNSRecordsNotValid,[t],!1)),{hasClose:!0,isAutoHide:!1}),d.is3dPartyDomain&&d.model.IsHostedDomainFailoverDns&&angular.element('[data-ng-controller="domainControlPanelCtrl as dcpCtrl"]').scope().pageNotification.alerts.addWarning("There are some issues with the addition of your domain to the PremiumDNS platform, please contact CS team for assistance.",{hasClose:!0,isAutoHide:!1})}},d.editContactBehavior=new p.AsyncStateBehavior({constructor:function(){var n=this.instance;n.activeNotification=new m.instance,n.asyncStatus(p.AsyncStatus.Active),n.editContact=function(e){function t(){function t(){window.location.href=e}n.contactFreezeInfo?n.asyncStatus(p.AsyncStatus.Success,t):(n.asyncStatus(p.AsyncStatus.Loading),l.domainDetails.GetContactFreeze(d.DomainName).then(function(e){e.Error?n.asyncStatus(p.AsyncStatus.Error,t):(n.contactFreezeInfo=JSON.parse(e.Msg),n.asyncStatus(p.AsyncStatus.Success,t))}))}d.DomainName.endsWith(".nl")?u.open({templateUrl:"/Domains/PromptModalOpen",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return"Changing the registrant for domain "+d.DomainName},modalContent:function(){return"You are about to change the registrant for your domain. By clicking Yes, the new registrant agrees with our <a href='https://www.namecheap.com/legal/' target='_blank'>Terms of Service</a> and the <a href='http://www.sidn.nl/fileadmin/downloads_en/Terms_and_Conditions/General_Terms_and_Conditions_for_.nl_Registrants.pdf' target='_blank'>General Terms and Conditions for .nl Registrants</a>."}}}).result.then(function(e){t()}):t()},n.editExtendedAttributes=function(){n.contactFreezeInfo?n.asyncStatus(p.AsyncStatus.Success,d.openChooseExtendedAttributeModalPopUp):(n.asyncStatus(p.AsyncStatus.Loading),l.domainDetails.GetContactFreeze(d.DomainName).then(function(e){e.Error?n.asyncStatus(p.AsyncStatus.Error,d.openChooseExtendedAttributeModalPopUp):(n.contactFreezeInfo=JSON.parse(e.Msg),n.asyncStatus(p.AsyncStatus.Success,d.openChooseExtendedAttributeModalPopUp))}))}},onSuccess:function(e){var t=this.instance;t.contactFreezeInfo.IsFreezed?t.activeNotification=d.pageNotification.stuckNotifications.addError(t.contactFreezeInfo.Message,{hasClose:!0,isAutoHide:!0}):e(),t.asyncStatus(p.AsyncStatus.Active)},onActive:function(e){},onLoading:function(e){this.instance.showLoadPanel=!0},onError:function(e){e(),instance.asyncStatus(p.AsyncStatus.Active)}}),d.nsProhibit={isProhibited:!1,messageObj:null,currentTotalSeconds:0,timer:null,isDestroyed:!1,setProhibit:function(e){d.nsProhibit.isDestroyed=!1,d.nsProhibit.messageObj=null,d.nsProhibit.isProhibited=!0,d.nsProhibit.currentTotalSeconds=e,this.timer=setInterval(function(){var e;null!=d.nsProhibit.messageObj||d.nsProhibit.isDestroyed||(d.nsProhibit.messageObj=d.pageNotification.stuckNotifications.addWarning("",{hasClose:!0,isAutoHide:!1,onDestroyed:function(){d.nsProhibit.messageObj=null,d.nsProhibit.isDestroyed=!0}})),null!=d.nsProhibit.messageObj&&(e=angular.element("#"+d.nsProhibit.messageObj.notificationId),d.nsProhibit.messageObj.msg="Please allow our system "+d.nsProhibit.currentTotalSeconds+" seconds before switching your nameservers again",e.text(d.nsProhibit.messageObj.msg)),d.nsProhibit.currentTotalSeconds<=0&&(d.nsProhibit.isProhibited=!1,d.nsProhibit.messageObj&&d.nsProhibit.messageObj.destroy&&d.nsProhibit.messageObj.destroy(),clearInterval(d.nsProhibit.timer),d.$apply()),d.nsProhibit.currentTotalSeconds--},1e3)}}}]),app.controller("domainListActionCtrl",["$scope","$rootScope","$modalInstance","httpRepository","$filter","notificationService","pageHelper","$q","ncGridParams","$sce","serviceName","distinctDomainServiceType","domainServiceTypes","DomainAutoRenew","WGAutoRenew","PDNSAutoRenew","actionType","domainsCount","additionalInfo","dataCategoryInitValues","commaSeperatedDomainNames","domainSelectionType","$modal",function($scope,$rootScope,$modalInstance,httpRepository,$filter,notificationService,pageHelper,$q,ncGridParams,$sce,serviceName,distinctDomainServiceType,domainServiceTypes,DomainAutoRenew,WGAutoRenew,PDNSAutoRenew,actionType,domainsCount,additionalInfo,dataCategoryInitValues,commaSeperatedDomainNames,domainSelectionType,$modal){if($scope.CategoryCurrentAction="",$scope.pageHelper=pageHelper,$scope.pageNotification=new notificationService.instance,$scope.DomainParams={},$scope.paramModel={},$scope.domainListnotificationAlertArguments={hasClose:!0,isAutoHide:!0},$scope.sslnotificationAlertArguments={isAutoHide:!0,hasClose:!0},$scope.select2Options={minimumResultsForSearch:-1},"reglock"!=actionType?$scope.serviceName=serviceName:$scope.regLockServiceName=JSON.parse(serviceName),$scope.distinctDomainServiceType=distinctDomainServiceType,$scope.domainServiceTypes=domainServiceTypes,$scope.bulkActionType=actionType,$scope.dataCategoryInitValues=dataCategoryInitValues,$scope.commaSeperatedDomainNames=commaSeperatedDomainNames,$scope.IsOwner={},$scope.domainSelectionType=domainSelectionType,$scope.paramValue="Turn On",$scope.serviceType="All Services",$scope.DomainsCount=domainsCount,$scope.DomainInfoRes=DomainInfoRes,$scope.verifyContactsIntro=1<domainsCount?$scope.DomainInfoRes.static_VerifyContactsIntroductionMultiple.replace("{0}",domainsCount):$scope.DomainInfoRes.static_VerifyContactsIntroductionSingle,$scope.AutoRenewIntro=1<domainsCount?$scope.DomainInfoRes.static_AutoRenewIntroductionMultiple:$scope.DomainInfoRes.static_AutoRenewIntroductionSingle,$scope.TransferOutIntro=function(e,t){"Lock"==e||"UnLock"==e&&!t?(0==$scope.regLockServiceName.DomainLockCount||1==$scope.regLockServiceName.DomainLockCount?$scope.DomainLockIntro=$scope.DomainInfoRes.static_DomainLockIntroductionSingle.replace("{0}",$scope.regLockServiceName.DomainLockCount):$scope.DomainLockIntro=$scope.DomainInfoRes.static_DomainLockIntroduction.replace("{0}",$scope.regLockServiceName.DomainLockCount),$scope.isEppChecked=!1):0==$scope.regLockServiceName.EppCount||1==$scope.regLockServiceName.EppCount?$scope.DomainLockIntro=$scope.DomainInfoRes.static_DomainLockIntroductionSingle.replace("{0}",$scope.regLockServiceName.EppCount):$scope.DomainLockIntro=$scope.DomainInfoRes.static_DomainLockIntroduction.replace("{0}",$scope.regLockServiceName.EppCount)},$scope.DomainLockIntro=1<domainsCount?$scope.DomainInfoRes.static_DomainLockIntroduction.replace("{0}",domainsCount):$scope.DomainInfoRes.static_DomainLockIntroductionSingle.replace("{0}",1),"reglock"==actionType){for(var checkCount=0,count=0;count<$scope.regLockServiceName.IsOwner.length;count++)1==$scope.regLockServiceName.IsOwner[count]&&($scope.IsDomainOwner=!0,checkCount++);0==checkCount&&($scope.IsDomainOwner=!1)}$scope.cancelClick=function(){$modalInstance.close()},$scope.CancelBulkAction=$rootScope.closeLightbox=function(){httpRepository.domainList.goToDomainList()},$scope.isChecked="false",$scope.isContactChecked="false",$scope.description="",$scope.AutoRenewBulkModification=new pageHelper.AsyncStateBehavior({constructor:function(){var D=this.instance,N=[],w=[],R=[];D.click=function(t,e,n){$(".opac").delay(25).queue(function(){$(this).addClass("page-load").css({"text-align":"left",padding:"0em",opacity:"0.5","background-position":"center 4.5em"})});function a(e,t){return $modal.open({templateUrl:"/Domains/PromptModalOpen",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return e},modalContent:function(){return t}}})}var i,o,s,r,c,l,d=0,u=[],m=[];if("All Services"==e)N=serviceName,w=domainServiceTypes.join(","),R=additionalInfo;else{var p,f,h,g=!1,v=[],S=[],y=!1,C=!1,A=!1;for(domainCount=0;domainCount<domainServiceTypes.length;domainCount++)domainServiceTypes[domainCount]==e&&(N[d]=serviceName[domainCount],"PrivateEmail"!=e&&"Hosting"!=e&&"PremiumDNS"!=e||(R[d]=additionalInfo[domainCount]),d++),p=DomainAutoRenew[domainCount],f=WGAutoRenew[domainCount],h=PDNSAutoRenew[domainCount],null==p||p||(g=!0),null!=p&&p&&"Turn Off"==t&&"Domains"==e?(v.push(serviceName[domainCount]),u.push("Domains"),m.push("")):null!=f&&f&&"Turn Off"==t&&"Domains"==e?(v.push(serviceName[domainCount]),u.push("WhoisGuard"),m.push(""),C=!0):null!=h&&h&&"Turn Off"==t&&"Domains"==e&&(v.push(serviceName[domainCount]),u.push("PremiumDNS"),m.push(additionalInfo[domainCount]),A=!0),domainServiceTypes[domainCount]==e?"PremiumDNS"==e||"WhoisGuard"==e?(v.push(serviceName[domainCount]),u.push("Domains"),m.push(""),v.push(serviceName[domainCount]),u.push(e),S.push(serviceName[domainCount]),"PrivateEmail"==e||"Hosting"==e||"PremiumDNS"==e?m.push(additionalInfo[domainCount]):"WhoisGuard"==e&&m.push("")):p||"Domains"!=e||"Turn On"!=t?p&&"Domains"==e&&"Turn On"==t&&m.push(""):(y=!0,v.push(serviceName[domainCount]),u.push("Domains"),m.push("")):"Turn On"==t&&(!p&&"Domains"==e||y)&&(null==f||f?null==h||h||(v.push(serviceName[domainCount]),u.push("PremiumDNS"),m.push(additionalInfo[domainCount]),A=!0):(v.push(serviceName[domainCount]),u.push("WhoisGuard"),m.push(""),C=!0));w=e}i=0<R.length?R.join(","):null,o=0<m.length?m.join(","):null,"WhoisGuard"==e||"PremiumDNS"==e||"Domains"==e?(r=s="","Turn On"==t?(s="Turn On "+e.replace("WhoisGuard","Domain Privacy")+" Auto-Renewal",C&&A?r=$scope.DomainInfoRes.prompt_Content_AutoRenew_PM1:C?r=$scope.DomainInfoRes.prompt_Content_AutoRenew_PM2:A&&(r=$scope.DomainInfoRes.prompt_Content_AutoRenew_PM3)):"Turn Off"==t&&(s="Turn Off "+e.replace("WhoisGuard","Domain Privacy")+" Auto-Renewal",C&&A?(g=!0,r=$scope.DomainInfoRes.prompt_Content_AutoRenew_PM4):C?(g=!0,r=$scope.DomainInfoRes.prompt_Content_AutoRenew_PM5):A&&(g=!0,r=$scope.DomainInfoRes.prompt_Content_AutoRenew_PM6)),null!=g&&g?($modalInstance.close($scope.DomainParams),"Domains"==e&&null!=r&&""!=r?a(s,r).result.then(function(){httpRepository.domainListAction.autoRenewList(v.join(","),"autorenewoptions",t,u.join(","),$scope.bulkActionType,n,o).then(function(e){D.asyncStatus(0==e.Error?pageHelper.AsyncStatus.Success:pageHelper.AsyncStatus.Error,e),$scope.DomainParams={params:e,renewOption:t},$modalInstance.close($scope.DomainParams)})},function(){"Turn On"==t&&httpRepository.domainListAction.autoRenewList(N.join(","),"autorenewoptions",t,w,$scope.bulkActionType,n,i).then(function(e){D.asyncStatus(0==e.Error?pageHelper.AsyncStatus.Success:pageHelper.AsyncStatus.Error,e),$scope.DomainParams={params:e,renewOption:t},$modalInstance.close($scope.DomainParams)})}):"WhoisGuard"==e?(c=[],c=$scope.distinctDomainServiceTypes(S),a(s,$scope.DomainInfoRes.prompt_Content_AutoRenew_PM7+"<br /><br />"+c.join("<br />")).result.then(function(){httpRepository.domainListAction.autoRenewList(v.join(","),"autorenewoptions",t,u.join(","),$scope.bulkActionType,n,o).then(function(e){D.asyncStatus(0==e.Error?pageHelper.AsyncStatus.Success:pageHelper.AsyncStatus.Error,e),$scope.DomainParams={params:e,renewOption:t},$modalInstance.close($scope.DomainParams)})},function(){})):"PremiumDNS"==e&&(l=[],l=$scope.distinctDomainServiceTypes(S),a(s,$scope.DomainInfoRes.prompt_Content_AutoRenew_PM8+"<br /><br />"+l.join("<br />")).result.then(function(){httpRepository.domainListAction.autoRenewList(v.join(","),"autorenewoptions",t,u.join(","),$scope.bulkActionType,n,o).then(function(e){D.asyncStatus(0==e.Error?pageHelper.AsyncStatus.Success:pageHelper.AsyncStatus.Error,e),$scope.DomainParams={params:e,renewOption:t},$modalInstance.close($scope.DomainParams)})},function(){}))):null==g||g||"Domains"!=e||"Turn Off"!=t?httpRepository.domainListAction.autoRenewList(N.join(","),"autorenewoptions",t,w,$scope.bulkActionType,n,i).then(function(e){D.asyncStatus(0==e.Error?pageHelper.AsyncStatus.Success:pageHelper.AsyncStatus.Error,e),$scope.DomainParams={params:e,renewOption:t},$modalInstance.close($scope.DomainParams)}):httpRepository.domainListAction.autoRenewList(N.join(","),"autorenewoptions",t,w,$scope.bulkActionType,n,i).then(function(e){D.asyncStatus(0==e.Error?pageHelper.AsyncStatus.Success:pageHelper.AsyncStatus.Error,e),$scope.DomainParams={params:e,renewOption:t},$modalInstance.close($scope.DomainParams)})):httpRepository.domainListAction.autoRenewList(N.join(","),"autorenewoptions",t,w,$scope.bulkActionType,n,i).then(function(e){D.asyncStatus(0==e.Error?pageHelper.AsyncStatus.Success:pageHelper.AsyncStatus.Error,e),$scope.DomainParams={params:e,renewOption:t},$modalInstance.close($scope.DomainParams)})}},onSuccess:function(e){var t=this.instance;t.showContent=!0,t.model=e.Result,$scope.pageNotification.alerts.clear()},onActive:function(e){this.instance.asyncStatus(pageHelper.AsyncStatus.Active)},onLoading:function(e){var t=this.instance;$scope.pageNotification.stuckNotifications.addLoading(t.messages.loading,{hasClose:!1,isAutoHide:!1})},onError:function(e){this.instance.activeNotification=$scope.pageNotification.stuckNotifications.addError(e.msg,{hasClose:!0,isAutoHide:!0})},onLocked:function(e){this.instance}}),$scope.dparamValue="UnLock",$scope.reasonValue="";var uniqueServiceNames=[];$scope.distinctDomainServiceNames=function(){return $.each(serviceName,function(e,t){-1===$.inArray(t,uniqueServiceNames)&&uniqueServiceNames.push(t)}),uniqueServiceNames},$scope.categoryName="",$scope.domainNames="",$scope.CreateCategory=function(e,t,n,a){$scope.CategoryCurrentAction="CREATE",$scope.AsyncCategoryActions.CreateCategory(t)},$scope.AllotCategory=function(e,t,n){$scope.CategoryCurrentAction="ALLOT",$scope.domainNames=n[0].commaSeperatedDomainNames,$scope.categoryName=t},$scope.RemoveCategory=function(e,t,n){$scope.categoryName=""},$scope.allotCategoryBulkModification=function(e){$scope.domainNames=e,$scope.categoryName.trim()&&$scope.domainNames.trim()?($scope.CategoryCurrentAction="ALLOT",$scope.AsyncCategoryActions.AllotCategory(e,$scope.categoryName)):$scope.pageNotification.stuckNotifications.clear()},$scope.AsyncCategoryActions=new pageHelper.AsyncStateBehavior({constructor:function(){var n=this.instance;n.AllotCategory=function(e,t){n.asyncStatus(pageHelper.AsyncStatus.Loading),httpRepository.domainList.allotCategories(e,t).then(function(e){n.asyncStatus(0==e.Error?pageHelper.AsyncStatus.Success:pageHelper.AsyncStatus.Error,e)})},n.CreateCategory=function(t){n.asyncStatus(pageHelper.AsyncStatus.Loading),httpRepository.domainList.createCategories(null,t).then(function(e){n.asyncStatus(0==e.Error?pageHelper.AsyncStatus.Success:pageHelper.AsyncStatus.Error,e),0==e.Error&&($scope.categoryName=t)})}},onSuccess:function(params){var instance=this.instance;"ALLOT"==$scope.CategoryCurrentAction&&($scope.DomainParams={Call:"Success",CategoryName:$scope.categoryName,Message:params.Msg,SelectedDomains:$scope.commaSeperatedDomainNames,dataCategoryInitValues:$scope.dataCategoryInitValues},$modalInstance.close($scope.DomainParams)),"CREATED"==params.Result[0]&&($scope.LasteCreatedCategoryId=params.Result[2],$scope.Categories={},$scope.Categories.id=params.Result[2],$scope.Categories.text=params.Result[1],$scope.dataCategoryInitValues.push($scope.Categories),initAddCategories("bulkAddCategories",eval($scope.dataCategoryInitValues)),$("#bulkAddCategories").select2("val",$scope.Categories.id))},onActive:function(e){this.instance},onLoading:function(e){var t=this.instance;"ALLOT"==$scope.CategoryCurrentAction?t.activeNotification=$scope.pageNotification.stuckNotifications.addLoading("Allotting Category",!1):"CREATE"==$scope.CategoryCurrentAction&&(t.activeNotification=$scope.pageNotification.stuckNotifications.addLoading("Creating Category",!1))},onError:function(e){this.instance;"ALLOT"==$scope.CategoryCurrentAction?($scope.DomainParams={Call:"Error",CategoryName:$scope.categoryName,Message:e.Msg},$modalInstance.close($scope.DomainParams)):"CREATE"==$scope.CategoryCurrentAction&&$scope.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})},onLocked:function(e){this.instance}}),$scope.IsEmailChecked=!1,$scope.isEppChecked=!1,$scope.domainLockRecvEppCode=new pageHelper.AsyncStateBehavior({constructor:function(){var c=this.instance;c.click=function(t,e,n,a,i,o){var s;$(".opac").delay(25).queue(function(){$(this).addClass("page-load").css({"text-align":"left",padding:"0em",opacity:"0.5","background-position":"center 3.2em"})}),"Lock"!=t&&("UnLock"!=t||e)?(s=$scope.regLockServiceName.TransferDomains,$scope.bulkActionType="geteppcode"):(s=$scope.regLockServiceName.TransferDomains,$scope.bulkActionType=actionType);var r=[i,n,a];httpRepository.domainListAction.ReceiveEppCode(s.join(","),t,["FutureContact","Reason","Description"],r,"Domains",$scope.bulkActionType,o,$scope.regLockServiceName.IsSupportRegLock.join(","),$scope.regLockServiceName.IsEppRequired.join(","),$scope.regLockServiceName.IsOwner.join(",")).then(function(e){c.asyncStatus(0==e.Error?pageHelper.AsyncStatus.Success:pageHelper.AsyncStatus.Error,e),$scope.DomainParams={params:e,lockOption:t,checked:o},$modalInstance.close($scope.DomainParams)})}},onSuccess:function(e){this.instance.asyncStatus(pageHelper.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance},onError:function(e){var t=this.instance;$scope.pageNotification.alerts.addError(e.Msg,$scope.sslnotificationAlertArguments),t.activeNotification=$scope.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0}),t.showContent=!0,t.model=e.Result,t.asyncStatus(pageHelper.AsyncStatus.Active)},onLocked:function(e){this.instance}}),$scope.ViewContactsBulkModification=new pageHelper.AsyncStateBehavior({constructor:function(){var t=this.instance;t.click=function(){$(".opac").delay(25).queue(function(){$(this).addClass("page-load").css({"text-align":"left",padding:"0em",opacity:"0.5","background-position":"center 2.5em"})});var e=$scope.distinctDomainServiceNames();httpRepository.domainListAction.verifyContacts(e.join(","),"ResendVerification","1","Domains",$scope.bulkActionType,"false").then(function(e){t.asyncStatus(0==e.Error?pageHelper.AsyncStatus.Success:pageHelper.AsyncStatus.Error,e)})}},onSuccess:function(e){var t=this.instance;$modalInstance.close(e.Msg),t.asyncStatus(pageHelper.AsyncStatus.Active),$scope.pageNotification.stuckNotifications.addLoading("Loading",!1)},onActive:function(e){this.instance},onLoading:function(e){this.instance},onError:function(e){var t=this.instance;$scope.pageNotification.alerts.addError(e.Msg,$scope.sslnotificationAlertArguments),t.activeNotification=$scope.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0}),t.showContent=!0,t.model=e.Result,t.asyncStatus(pageHelper.AsyncStatus.Active)},onLocked:function(e){this.instance}}),$scope.distinctDomainServiceTypes=function(e){var n=[];return $.each(e,function(e,t){-1===$.inArray(t,n)&&n.push(t)}),n}}]),app.controller("domainOnlyCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","notificationService","pageHelper","$q","ncGridParams","$sce","ncGridEventNames","$interval","$timeout",function(m,e,p,o,f,t,h,n,a,s,r,c,l){m.pageNotification=new t.instance,m.expirationDateStyle={date:0,dateGrace:1,dateDanger:2,dateAlert:3},m.DomainInfoRes=DomainInfoRes,m.SyncDomainList={},m.NoSearchOption={minimumResultsForSearch:-1},m.init=function(e){m.CmsWebAddToCartURL=e,m.CheckSyncDomainList()},m.domainSelectionType="DOMAINONLY",m.domainListnotificationAlertArguments={isAutoHide:!0,hasClose:!0},m.pageBehavior=new h.AsyncStateBehavior({constructor:function(){var i=this.instance;i.showLoadPanel=!0,i.showContent=!1,i.model=null,i.pageNgGridSettings=new a,i.pageNgGridSettings.parameters.search.serchPropertyNames=["model.DomainName","model.StatusInfo.1","model.ExpirationDateTitleValue"],i.pageNgGridSettings.parameters.mapping.renderChunkSize=100,i.pageNgGridSettings.parameters.mapping.serverChunkSize=DomainList_ChunkSize,i.pageNgGridSettings.settings.getData=function(a,e){p.domainList.getDomainsOnly(e).then(function(e){var t;if(m.model=e.Result,null!=m.model&&null!=m.model.Data){""!=e.Msg&&null!=e.Msg&&null!=e.Msg&&(i.activeNotification=m.pageNotification.alerts.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0})),t=m.model.Data.length;for(var n=0;n<t;n++)m.model.Data[n]=function(t){return new h.AsyncStateBehavior({constructor:function(){var e=this.instance;for(e.model=t,e.model.ExpireDateTime=h.Date.dateFromJson(e.model.ExpireDateTime),e.model.ExpirationDateTitleValue=e.model.ExpireDateTime?o("date")(e.model.ExpireDateTime,"MMM d, yyyy"):null,e.model.ExpirationDateSortValue=e.model.ExpireDateTime?e.model.ExpireDateTime.getTime():0,e.model.ExpirationDateCssClass="date","DateGrace"==e.model.ExpirationDateStyle&&(e.model.ExpirationDateCssClass="date grace"),"DateDanger"==e.model.ExpirationDateStyle&&(e.model.ExpirationDateCssClass="date danger"),"DateAlert"==e.model.ExpirationDateStyle&&(e.model.ExpirationDateCssClass="date alert"),index=0;index<e.model.ActionDetails.length;index++)e.model.ActionDetails[index]==m.ActionType.Manage?(e.model.ActionDetails[index]={},e.model.ActionDetails[index].DisplayText="Manage",e.model.ActionDetails[index].DestinationURL="/domains/domaincontrolpanel/"+e.model.DomainName):e.model.ActionDetails[index]==m.ActionType.Renew?(e.model.ActionDetails[index]={},e.model.ActionDetails[index].DisplayText="Renew",e.model.ActionDetails[index].DestinationURL=m.CmsWebAddToCartURL+"producttype=domains&action=renew&domainlist="+e.model.DomainName+"&from=manage"):e.model.ActionDetails[index]==m.ActionType.Reactivate?(e.model.ActionDetails[index]={},e.model.ActionDetails[index].DisplayText="Renew",e.model.ActionDetails[index].DestinationURL=m.CmsWebAddToCartURL+"producttype=domains&action=reactivate&domainlist="+e.model.DomainName+"&from=manage"):e.model.ActionDetails[index]==m.ActionType.ContactSupport?(e.model.ActionDetails[index]={},e.model.ActionDetails[index].DisplayText="Contact Support",e.model.ActionDetails[index].DestinationURL="https://support.namecheap.com/index.php?/Tickets/Submit/RenderForm/10"):e.model.ActionDetails[index]==m.ActionType.VerifyContacts?(e.model.ActionDetails[index]={},e.model.ActionDetails[index].DisplayText="Verify Contacts",e.model.ActionDetails[index].DestinationURL="#",e.model.ActionDetails[index].DomainName=e.model.DomainName):e.model.ActionDetails[index]==m.ActionType.SeeDetails&&(e.model.ActionDetails[index]={},e.model.ActionDetails[index].DisplayText="See Details",e.model.ActionDetails[index].DestinationURL="/domains/domaincontrolpanel/"+e.model.DomainName);e.serviceAction=function(e){e.DestinationURL&&""!=e.DestinationURL?"#"==e.DestinationURL?m.action(e.InputParams,e.DisplayText):window.open(e.DestinationURL,"_self"):alert("Execute another action")}},onSuccess:function(e){this.instance.asyncStatus(h.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){this.instance}})}(m.model.Data[n]);a.resolve(m.model),i.pageNgGridSettings.settings.actions.updateDropDownBtns(),i.model=i.pageNgGridSettings.parameters.storage.requestData,i.showLoadPanel=!1,i.showContent=!0}else a.resolve(m.model),0==i.pageNgGridSettings.parameters.storage.requestData.length&&(m.isRefereshDisabled=!0)})},i.statusList=[{header:"Active",propertyname:"model.StatusInfo.1",propertyvalue:"Active"},{header:"Alert",propertyname:"model.StatusInfo.1",propertyvalue:"Alert"},{header:"Grace",propertyname:"model.StatusInfo.1",propertyvalue:"Grace"},{header:"Expired",propertyname:"model.StatusInfo.1",propertyvalue:"Expired"}],i.flagsList=[{header:"Blocked",propertyname:"model.IsBlocked",propertyvalue:!0}],i.othersList=[{header:"Unverified Contacts",propertyname:"model.IsRAAUnVerifiedContacts",propertyvalue:!0},{header:"For Sale",propertyname:"model.IsSale",propertyvalue:!0},{header:"Premium",propertyname:"model.IsPremium",propertyvalue:!0}],i.pageNgGridSettings.settings.reload()}}),m.checkDomainStatus=function(){SyncStatus=c(function(){null!=m.SyncDomainList&&null!=m.SyncDomainList.Batchid&&""!=m.SyncDomainList.Batchid&&p.domainList.CheckDomainStatus(m.SyncDomainList.Batchid).then(function(e){var t=e.Result;null!=t&&(0==t.IsSuccess?(m.isRefereshDisabled=!0,m.pageNotification.alerts.clear(),m.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1})):0!=t.TotalCount&&t.CompletedCount+t.FailedCount==t.TotalCount&&0==t.IsUserNotified?(m.isRefereshDisabled=!1,m.pageNotification.alerts.clear(),0==t.IsUserNotified&&m.pageNotification.alerts.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!1}),c.cancel(SyncStatus)):0!=t.TotalCount&&t.CompletedCount+t.FailedCount!=t.TotalCount&&(m.isRefereshDisabled=!0)),null==e.Result&&1==e.Error&&(m.isRefereshDisabled=!0,m.pageNotification.alerts.clear(),""!=e.Msg&&m.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1}))})},2e4)},m.ActionClickEvent=function(e,t){"VERIFY CONTACTS"==e.toUpperCase()&&m.VerifyContacts.onClick(t)},m.uncheckCheckBoxes=function(){m.pageBehavior.pageNgGridSettings.parameters.selection.selectedItems=[];var e=m.pageBehavior.pageNgGridSettings.parameters.storage.requestData;for(i=0;i<e.length;i++)1==e[i].$ncColumnSelected&&(e[i].$ncColumnSelected=!1);$("div#chb_selectAllDomains").find('input[type="checkbox"]').removeAttr("checked")},m.autoRenewClick=new h.AsyncStateBehavior({constructor:function(){var u=this.instance;u.domainWhoIsAutoRenew=function(r){var c,e,l,d,t;null!=r.EditCapabilityCsv&&-1!=r.EditCapabilityCsv.indexOf("extend")||r.IsOwner?(null!=r.WGAutoRenew&&null!=r.WGAutoRenew&&r.WGAutoRenew!=isNaN||(r.WGAutoRenew=!1),null!=r.AutoRenew&&null!=r.AutoRenew&&r.AutoRenew!=isNaN||(r.AutoRenew=!1),null!=r.PDNSAutoRenew&&null!=r.PDNSAutoRenew&&r.PDNSAutoRenew!=isNaN||(r.PDNSAutoRenew=!1),u.asyncStatus(h.AsyncStatus.Loading),c=function(t,e,n,a,i){p.domainList.domainWhoIsAutoRenew(t,r.DomainName,e,n).then(function(e){e.sender="AR_"+t,e.Error?e.Msg=m.DomainInfoRes.error_Alert_Dynamic_AssociatesDomainAutoRenew:e.Msg=m.DomainInfoRes.success_Alert_Dynamic_AssociatesDomainAutoRenew,u.asyncStatus(e.Error?h.AsyncStatus.Error:h.AsyncStatus.Success,e),e.Error&&null!=i?i():e.Error||null==a||a()})},e=function(e,t,i,o,s){var n,a;(n=e,a=t,f.open({templateUrl:"/Domains/PromptModalOpen",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return n},modalContent:function(){return a}}})).result.then(function(){var e,t,n,a;null!=i&&c("DOMAIN",r.AutoRenew,l?r.AutoRenew:r.WGAutoRenew,null,function(){r.AutoRenew=!r.AutoRenew}),null!=o&&null!=r.IsWGEnabled&&null!=r.IsWGEnabled&&c("WG",r.AutoRenew,l?r.AutoRenew:r.WGAutoRenew,null,function(){r.WGAutoRenew=!r.WGAutoRenew}),null!=s&&null!=r.PDNSSubID&&null!=r.PDNSSubID&&0<r.PDNSSubID&&(e=r.PDNSSubID,t=r.PDNSAutoRenew,n=null,a=function(){r.PDNSAutoRenew=!r.PDNSAutoRenew},p.domainList.setPremiumDnsAutoRenew(e,t).then(function(e){e.Error?e.Msg=m.DomainInfoRes.error_Alert_Dynamic_AssociatesDomainAutoRenew:e.Msg=m.DomainInfoRes.success_Alert_Dynamic_AssociatesDomainAutoRenew,u.asyncStatus(0==e.Error?h.AsyncStatus.Success:h.AsyncStatus.Error,e),e.Error&&null!=a?a():e.Error||null==n||n()}))},function(){i&&o&&s?(l&&(r.WGAutoRenew=!1),d&&(r.PDNSAutoRenew=!1),c("DOMAIN",r.AutoRenew,r.WGAutoRenew,null,function(){r.AutoRenew=!r.AutoRenew})):!i||!o||null!=s&&s?!i||o&&null==o||!s?i||o||null==o||s||null==s?i||o||!s&&null!=s?i||!o&&null!=o||s||(r.AutoRenew=!r.AutoRenew,r.PDNSAutoRenew=!r.PDNSAutoRenew,u.activeNotification&&u.activeNotification.destroy&&u.activeNotification.destroy()):(r.AutoRenew=!r.AutoRenew,r.WGAutoRenew=!r.WGAutoRenew,u.activeNotification&&u.activeNotification.destroy&&u.activeNotification.destroy()):(r.AutoRenew=!r.AutoRenew,r.WGAutoRenew=!r.WGAutoRenew,r.PDNSAutoRenew=!r.PDNSAutoRenew,u.activeNotification&&u.activeNotification.destroy&&u.activeNotification.destroy()):(r.PDNSAutoRenew=!r.PDNSAutoRenew,c("DOMAIN",r.AutoRenew,l?r.AutoRenew:r.WGAutoRenew,null,function(){r.AutoRenew=!r.AutoRenew})):(r.WGAutoRenew=!r.WGAutoRenew,c("DOMAIN",r.AutoRenew,r.WGAutoRenew,null,function(){r.AutoRenew=!r.AutoRenew}))})},l=!r.WGAutoRenew&&null!=r.IsWGEnabled,d=!r.PDNSAutoRenew&&null!=r.PDNSSubID&&0<r.PDNSSubID,null!=r.IsWGEnabled&&null!=r.IsWGEnabled||null!=r.PDNSSubID&&null!=r.PDNSSubID&&0<r.PDNSSubID?(null!=r.IsWGEnabled&&null!=r.IsWGEnabled&&(r.AutoRenew&&l?r.WGAutoRenew=!0:r.AutoRenew||(r.WGAutoRenew=!1)),null!=r.PDNSSubID&&null!=r.PDNSSubID&&0<r.PDNSSubID&&(r.AutoRenew&&d?r.PDNSAutoRenew=!0:r.AutoRenew||(r.PDNSAutoRenew=!1)),r.AutoRenew&&l&&d&&(null==r.PDNSSubID||null!=r.IsPDNSActiveStatus)?e(m.DomainInfoRes.prompt_Titel_AutoRenew_TurnOn,m.DomainInfoRes.prompt_Content_AutoRenew_PM1,!0,!0,!0):r.AutoRenew&&l&&!d?(t=r.IsPDNSActiveStatus,d||null!=r.PDNSSubID&&r.IsPDNSActiveStatus||(t=null),e(m.DomainInfoRes.prompt_Titel_AutoRenew_TurnOn,m.DomainInfoRes.prompt_Content_AutoRenew_PM2,!0,!0,t)):r.AutoRenew&&d&&!l?(t=r.WGActiveStatus,l||null!=r.WGActiveStatus&&r.WGActiveStatus||(t=null),e(m.DomainInfoRes.prompt_Titel_AutoRenew_TurnOn,m.DomainInfoRes.prompt_Content_AutoRenew_PM3,!0,t,!0)):!r.AutoRenew&&!l&&null!=r.IsWGEnabled&&!d&&null!=r.PDNSSubID&&0<r.PDNSSubID?e(m.DomainInfoRes.prompt_Titel_AutoRenew_TurnOff,m.DomainInfoRes.prompt_Content_AutoRenew_PM4,!1,!1,!1):r.AutoRenew||l||null==r.IsWGEnabled||!d&&null!=r.PDNSSubID&&r.IsPDNSActiveStatus?r.AutoRenew||!l&&null!=r.IsWGEnabled&&r.IsWGEnabled||d||null==r.PDNSSubID||!(0<r.PDNSSubID)?(r.AutoRenew,c("DOMAIN",r.AutoRenew,l?r.AutoRenew:r.WGAutoRenew,null,function(){r.AutoRenew=!r.AutoRenew})):(t=!0,!l&&null!=r.IsWGEnabled&&r.IsWGEnabled||(t=null),e(m.DomainInfoRes.prompt_Titel_AutoRenew_TurnOff,m.DomainInfoRes.prompt_Content_AutoRenew_PM6,!1,t,!1)):(t=!0,!d&&null!=r.PDNSSubID&&r.IsPDNSActiveStatus||(t=null),e(m.DomainInfoRes.prompt_Titel_AutoRenew_TurnOff,m.DomainInfoRes.prompt_Content_AutoRenew_PM5,!1,!1,t))):c("DOMAIN",r.AutoRenew,l?r.AutoRenew:r.WGAutoRenew,null,function(){r.AutoRenew=!r.AutoRenew})):(r.AutoRenew=!r.AutoRenew,m.pageNotification.stuckNotifications.addError("User has no rights to perform this action",{hasClose:!0,isAutoHide:!0}))}},onSuccess:function(e){var t=this.instance;t.asyncStatus(h.AsyncStatus.Active),t.activeNotification=m.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0})},onActive:function(e){this.instance},onLoading:function(e){this.instance.activeNotification=m.pageNotification.stuckNotifications.addLoading("Loading...",!1)},onLocked:function(e){this.instance},onError:function(e){m.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),m.VerifyContacts=new h.AsyncStateBehavior({constructor:function(){var t=this.instance;t.onClick=function(e){t.asyncStatus(h.AsyncStatus.Loading),p.domainDetails.resendNotificationEmail(e).then(function(e){t.asyncStatus(0==e.Error?h.AsyncStatus.Success:h.AsyncStatus.Error,e)})}},onSuccess:function(e){var t=this.instance;t.asyncStatus(h.AsyncStatus.Active),null!=e&&null!=e&&""!=e&&(t.activeNotification=m.pageNotification.stuckNotifications.addSuccess(m.DomainInfoRes.success_Alert_RegistrantResendNotification,{hasClose:!0,isAutoHide:!0}))},onActive:function(){},onError:function(e){var t=this.instance;t.asyncStatus(h.AsyncStatus.Active),t.activeNotification=m.pageNotification.stuckNotifications.addError(m.DomainInfoRes.failure_Alert_RegistrantResendNotification,{hasClose:!0,isAutoHide:!0})},onLoading:function(e){this.instance.activeNotification=m.pageNotification.stuckNotifications.addLoading(m.DomainInfoRes.static_Loading_RegistrantResendNotification,!0)}}),m.OnViewChange=function(e){"ALL"==e.toUpperCase()&&(window.location.href="/domains/ChangeProductViewOption/"+e)},m.CheckSyncDomainList=function(){p.domainList.CheckSyncDomainList().then(function(e){var t=e.Result;null!=t&&(1==e.Error?(m.isRefereshDisabled=!1,m.pageNotification.alerts.clear(),m.pageNotification.alerts.addError(t.Message.Msg,{hasClose:!0,isAutoHide:!1})):0==e.Error&&null!=t.Message&&""!=t.Message&&"norecords"==t.Message.toLowerCase()?m.isRefereshDisabled=!1:0==e.Error&&null!=t.Message&&""!=t.Message&&"notexist"==t.Message.toLowerCase()?m.isRefereshDisabled=!0:0==e.Error&&null==t.Status?m.isRefereshDisabled=!1:(0!=e.Error||null!=t.Batchid&&""!=t.Batchid&&null!=t.Batchid)&&(null==t.Status||"failed"!=t.Status.toLowerCase()&&"complated"!=t.Status.toLowerCase()&&"partiallycompleted"!=t.Status.toLowerCase())?(m.SyncDomainList.Batchid=t.Batchid,m.SyncDomainList.RecordCount=t.RecordCount,m.SyncDomainList.Status=t.Status,m.SyncDomainList.IsUserNotified=t.IsUserNotified,m.pageNotification.alerts.clear(),null!=t.MessageType&&"warning"==t.MessageType.toLowerCase()?m.pageNotification.alerts.addWarning(t.Message,{hasClose:!0,isAutoHide:!1}):m.pageNotification.alerts.addSuccess(t.Message,{hasClose:!0,isAutoHide:!1}),m.isRefereshDisabled=!0,m.checkDomainStatus()):(m.isRefereshDisabled=!1,m.pageNotification.alerts.clear(),m.pageNotification.alerts.addSuccess(t.Message,{hasClose:!0,isAutoHide:!1}))),null==e.Result&&1==e.Error&&(m.pageNotification.alerts.clear(),m.pageNotification.alerts.addError(t.Msg,{hasClose:!0,isAutoHide:!1}))})},m.syncDomainListBehavior=new h.AsyncStateBehavior({constructor:function(){this.instance.SyncDomainList=function(){m.isRefereshDisabled=!0,p.domainList.SyncDomainList().then(function(e){var t=e.Result;null!=t&&(1==e.Error?(m.pageNotification.alerts.clear(),m.pageNotification.alerts.addError(t.Message,m.syncAlertArguments)):(m.SyncDomainList.Batchid=t.Batchid,m.SyncDomainList.RecordCount=t.RecordCount,m.SyncDomainList.Status=t.Status,m.SyncDomainList.IsUserNotified=t.IsUserNotified,m.pageNotification.alerts.clear(),null!=t.MessageType&&"warning"==t.MessageType.toLowerCase()?m.pageNotification.alerts.addWarning(t.Message,{hasClose:!0,isAutoHide:!1}):m.pageNotification.alerts.addSuccess(t.Message,m.syncAlertArguments),m.checkDomainStatus())),null==e.Result&&1==e.Error&&(m.pageNotification.alerts.clear(),m.pageNotification.alerts.addError(e.Msg,m.syncAlertArguments))})}},onSuccess:function(e){var t=this.instance;""!=e.Msg&&(t.activeNotification=m.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0})),t.asyncStatus(h.AsyncStatus.Active)},onWarning:function(e){var t=this.instance;m.pageNotification.alerts.clear(),t.activeNotification=m.pageNotification.stuckNotifications.addWarning(e.Msg,{hasClose:!0,isAutoHide:!0}),t.isDisabled=!1,t.showError=!1},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance.activeNotification=m.pageNotification.stuckNotifications.addLoading("Processing",{hasClose:!0,isAutoHide:!0})},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=m.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),m.ActionType={ContactSupport:0,VerifyContacts:1,Renew:8,Manage:11,SeeDetails:30,Reactivate:29}}]),app.controller("domainResolveConflictRedirectEmailCtrl",["$scope","$modalInstance","httpRepository","pageHelper","$timeout","notificationService","$filter","$document","RedirectEmailViewModel","$window","DomainName","PageFrom",function(a,t,i,n,e,o,s,r,c,l,d,u){a.pageHelper=n,a.pageNotification=new o.instance,a.DomainInformationRes=DomainInfoRes,a.PageFrom=u,a.domainName=d,a.emailType=c.EmailType,a.dnsType=c.DnsType,a.isRegisteredAtNamecheap=c.IsRegisteredAtNamecheap,a.isUsingNamecheapHosting=c.IsUsingNamecheapHosting,a.isUsingPrivateEmail=c.IsUsingPrivateEmail,a.isUsingFreeDns=c.IsUsingFreeDns,a.emailForwardersCount=c.EmailForwardersCount,a.isUsingCustomMXRecords=!1,a.isUsingCustomDNS=!1,a.resetUI=function(){a.modalTitle=a.domainName+": ",a.showActionButtonGroup1=!1,a.showActionButtonGroup2=!1,a.showDoneButton=!1,a.showSetUpcPanelRedirectButton=!1,a.showSwitchDNSServersButton=!1,a.showForm=!1,a.showEmailRedirectInformation=!1,a.showPrivateEmailSetupInformation=!1,a.showEmailWithinHostingSetupInformation=!1,a.showUsingHostingDNSSetupInformation=!1,a.showPointDefaultDNSSetupInformation=!1,a.showAnotherEmailServiceIsInUseInformation=!1,a.showUsingThirdPartyDNSInformation=!1},a.resetUI(),a.isUsingPrivateEmail?a.isUsingNamecheapHosting?a.isRegisteredAtNamecheap?(a.modalTitle=a.modalTitle+"Redirect Email",a.showActionButtonGroup1=!0,a.showDoneButton=!0,a.showSetUpcPanelRedirectButton=!0,a.showSwitchDNSServersButton=!0,a.showEmailRedirectInformation=!0,a.showPrivateEmailSetupInformation=!0,a.showUsingHostingDNSSetupInformation=!0,a.showPointDefaultDNSSetupInformation=!0):(a.modalTitle=a.modalTitle+"Redirect Email",a.showActionButtonGroup1=!0,a.showDoneButton=!0,a.showSetUpcPanelRedirectButton=!0,a.showEmailRedirectInformation=!0,a.showPrivateEmailSetupInformation=!0,a.showUsingHostingDNSSetupInformation=!0):a.isRegisteredAtNamecheap?(a.modalTitle=a.modalTitle+"Redirect Email",a.showActionButtonGroup1=!0,a.showDoneButton=!0,a.showSwitchDNSServersButton=!0,a.showEmailRedirectInformation=!0,a.showPrivateEmailSetupInformation=!0,a.showPointDefaultDNSSetupInformation=!0,"Custom"!=a.dnsType&&"FWD"!=a.emailType&&(a.isUsingCustomMXRecords=!0)):(a.modalTitle=a.modalTitle+"Redirect Email",a.showActionButtonGroup1=!0,a.showDoneButton=!0,a.showEmailRedirectInformation=!0,a.showPrivateEmailSetupInformation=!0):a.isUsingNamecheapHosting?a.isRegisteredAtNamecheap?(a.modalTitle=a.modalTitle+"Redirect Email",a.showActionButtonGroup1=!0,a.showDoneButton=!0,a.showSwitchDNSServersButton=!0,a.showEmailRedirectInformation=!0,a.showUsingHostingDNSSetupInformation=!0,a.showPointDefaultDNSSetupInformation=!0):(a.modalTitle=a.modalTitle+"Redirect Email",a.showActionButtonGroup1=!0,a.showDoneButton=!0,a.showEmailRedirectInformation=!0,a.showUsingHostingDNSSetupInformation=!0):"Custom"==a.dnsType?(a.modalTitle=a.modalTitle+"Solve Conflict",a.showForm=!0,a.showActionButtonGroup2=!0,a.showUsingThirdPartyDNSInformation=!0,a.isUsingCustomDNS=!0):(a.modalTitle=a.modalTitle+"Solve Conflict",a.showForm=!0,a.showActionButtonGroup2=!0,a.showAnotherEmailServiceIsInUseInformation=!0,a.isUsingCustomMXRecords=!0),a.switchDNSServersClick=function(){a.resetUI(),a.modalTitle=a.modalTitle+"Solve Conflict",a.showForm=!0,a.showActionButtonGroup2=!0,"FWD"!=a.emailType&&(a.isUsingCustomMXRecords=!0),"Custom"==a.dnsType&&(a.isUsingCustomDNS=!0),a.isUsingCustomDNS?a.showUsingThirdPartyDNSInformation=!0:a.showAnotherEmailServiceIsInUseInformation=!0},a.setUpcPanelRedirectClick=function(){a.resetUI(),a.modalTitle=a.modalTitle+"Redirect Email",a.showActionButtonGroup1=!0,a.showDoneButton=!0,a.showEmailRedirectInformation=!0,a.showUsingHostingDNSSetupInformation=!0,a.isRegisteredAtNamecheap&&(a.showSwitchDNSServersButton=!0,a.showPointDefaultDNSSetupInformation=!0)},a.checkBoxClick=function(){a.HasPassport&&(a.showCheckBoxError=!1)},a.RedirectToManagePage=function(e,t){var n="/Domains/RedirectEmailList/"+e+"/"+a.PageFrom;"NONE"==t?i.domainDetails.resolveConflictSetEmailType(e,t).then(function(e){0==e.Error&&(l.location.href=n)}):"FWD"==t&&(l.location.href=n)},a.ShowPostLoader=function(){$(".opac").delay(25).queue(function(){$(this).addClass("page-load").css({"text-align":"left",padding:"0em",opacity:"0.5","background-position":"center 2.5em"})})},a.SaveChanges=new n.AsyncStateBehavior({constructor:function(){var t=this.instance;t.Click=function(){a.HasPassport?(a.showCheckBoxError=!1,a.ShowPostLoader(),"FWD"!=a.emailType&&(a.isUsingCustomMXRecords=!0),"Custom"==a.dnsType&&(a.isUsingCustomDNS=!0),i.domainDetails.resolveConflictChangeDns(a.domainName,a.isUsingCustomMXRecords,a.isUsingCustomDNS).then(function(e){t.asyncStatus(0==e.Error?n.AsyncStatus.Success:n.AsyncStatus.Error,e)})):a.showCheckBoxError=!0}},onSuccess:function(e){this.instance;a.RedirectToManagePage(a.domainName,"FWD")},onError:function(e){this.instance;t.close(e.Msg)}}),a.cancelClick=function(){t.close("")}}]),app.controller("domainsBulkActionCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","pageHelper","ncGridParams",function(l,e,r,o,a,c,t){l.DomainInfoRes=DomainInfoRes,l.pageBulkAction=new c.AsyncStateBehavior({constructor:function(){var s=this.instance;s.PerformAction=function(e,t){l.domainSelectionType=t,l.pageNotification.alerts.clear();var o=l.pageBehavior.pageNgGridSettings.parameters.selection.selectedItems;if(0==o.length)return s.activeNotification=l.pageNotification.stuckNotifications.addWarning(l.DomainInfoRes.alert_Site_AlertActionForEmptySelectionMessage,{hasClose:!0,isAutoHide:!0}),!1;if(e.toUpperCase()=="whoisguard".toUpperCase()){var n="";for(i=0;i<o.length;i++)n+=o[i].model.DomainName.trim(),(1<i||i<o.length-1)&&(n+=",");r.domainList.whoIsGuardBulkAction(n)}else if("emailforwarding"==e.toLowerCase()){n="";for(i=0;i<o.length;i++)n+=o[i].model.DomainName.trim(),(1<i||i<o.length-1)&&(n+=",");r.domainList.EmailForwardingBulkaction(n)}else if(e.toUpperCase()=="contact".toUpperCase())r.domainList.IsContactChangeBlocked().then(function(e){var t=e&&e.Result;if(t&&t.Enabled){var n=t.Message;s.activeNotification=l.pageNotification.stuckNotifications.addError(n,{hasClose:!0,isAutoHide:!0})}else{var a="";for(i=0;i<o.length;i++)a+=o[i].model.DomainName.trim(),(1<i||i<o.length-1)&&(a+=",");r.domainList.contactsUpdateBulkAction(a)}});else if(e.toUpperCase()=="renew".toUpperCase()){n="";for(i=0;i<o.length;i++)n+=o[i].model.DomainName.trim(),(1<i||i<o.length-1)&&(n+=",");r.domainList.RenewExpiringBulkAction(n,l.domainSelectionType)}else if(e.toUpperCase()=="autorenew".toUpperCase()){n="";for(i=0;i<o.length;i++)n+=o[i].model.DomainName.trim(),(1<i||i<o.length-1)&&(n+=",");r.domainListAction.AutoRenewBulkAction(n).then(function(e){null!=e&&null!=e.Result&&0<e.Result.length?(DomainResult=e.Result,l.openAutoRenewModalPopUp.Click(DomainResult)):(l.uncheckCheckBoxes(),l.pageNotification.alerts.addWarning(l.DomainInfoRes.alert_Site_AutoRenewFailedMessage,{hasClose:!0,isAutoHide:!1}))})}else if(e.toUpperCase()=="transferout".toUpperCase()){n="";for(i=0;i<o.length;i++)n+=o[i].model.DomainName.trim(),(1<i||i<o.length-1)&&(n+=",");r.domainListAction.DomainLockBulkAction(n).then(function(e){var t=[],n=[],a=[],i=[];l.TransferDomainsList={};for(var o=0,s=0,r=0;r<e.Result.length;r++)t[r]=e.Result[r].DomainName,a[r]=e.Result[r].IsSupportRegLock,n[r]=e.Result[r].IsEppRequired,i[r]=e.Result[r].IsOwner,a[r]&&0==n[r]?s++:n[r]&&0==a[r]?o++:a[r]&&n[r]&&(s++,o++);l.TransferDomainsList={TransferDomains:t,IsSupportRegLock:a,IsEppRequired:n,TotalDomainsCount:t.length,DomainLockCount:s,EppCount:o,IsOwner:i},0<t.length?l.openDomainLockModalPopUp.Click(l.TransferDomainsList):(l.uncheckCheckBoxes(),l.pageNotification.alerts.addWarning(l.DomainInfoRes.alert_Site_DomainLockFailedMessage,{hasClose:!0,isAutoHide:!1}))})}else if(e.toUpperCase()=="verifycontacts".toUpperCase()){n="";for(i=0;i<o.length;i++)n+=o[i].model.DomainName.trim(),(1<i||i<o.length-1)&&(n+=",");r.domainListAction.VerifyContactsBulkAction(n).then(function(e){for(var t=[],n=0;n<e.Result.length;n++)t[n]=e.Result[n].DomainName;0<t.length?l.openVerifyContactsModalPopUp.Click(t):(l.uncheckCheckBoxes(),l.pageNotification.alerts.addWarning(l.DomainInfoRes.alert_Site_VerifyContactsFailedMessage,{hasClose:!0,isAutoHide:!1}))})}else if(e.toUpperCase()=="addcategory".toUpperCase()){n="";for(i=0;i<o.length;i++)n+=o[i].model.DomainName.trim(),(1<i||i<o.length-1)&&(n+=",");l.openAllotDomainCategoryModalPopUp.Click(n,o)}if(e.toUpperCase()=="dnshost".toUpperCase()){n="";for(i=0;i<o.length;i++)n+=o[i].model.DomainName.trim(),(1<i||i<o.length-1)&&(n+=",");r.domainList.dnsHostBulkAction(n)}},s.asyncStatus(c.AsyncStatus.Success)},onSuccess:function(e){this.instance.asyncStatus(c.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=l.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),l.openAutoRenewModalPopUp=new c.AsyncStateBehavior({constructor:function(){var e=this.instance;e.activeNotification=l.pageNotification.alerts,e.showLoadPanel=!0,e.showContent=!0,e.model={};e.Click=function(e){var t=l.domainServiceNames(e);a.open({templateUrl:"/Domains/Autorenew",controller:"domainListActionCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{serviceName:function(){return t.domainNames},distinctDomainServiceType:function(){return l.distinctDomainServiceTypes(t.serviceTypes)},domainServiceTypes:function(){return t.serviceTypes},additionalInfo:function(){return t.additionalInfoId},DomainAutoRenew:function(){return t.IsDomainAutoRenew},WGAutoRenew:function(){return t.IsWGAutoRenew},PDNSAutoRenew:function(){return t.IsPDNSAutoRenew},actionType:function(){return"autorenew"},domainsCount:function(){return e.length},dataCategoryInitValues:function(){return""},commaSeperatedDomainNames:function(){return""},domainSelectionType:function(){return l.domainSelectionType}}}).result.then(function(e){l.uncheckCheckBoxes(),"Success"==e.params.Msg?l.pageNotification.stuckNotifications.addSuccess(l.DomainInfoRes.success_Alert_Dynamic_AssociatesDomainAutoRenew,l.domainListnotificationAlertArguments):"Error"==e.params.Msg&&l.pageNotification.stuckNotifications.addError(l.DomainInfoRes.error_Alert_Dynamic_AssociatesDomainAutoRenew,l.domainListnotificationAlertArguments)},function(){})},e.asyncStatus(c.AsyncStatus.Loading)},onSuccess:function(e){var t,n=this.instance;"getAliases"==e.sender&&(n.model=e.Result,t=[],n.model.MailboxAliases.forEach(function(e){t.push(createAliasBehavior(e,n))}),n.savedAliases=t,n.aliasesNgGrid.settings.reload()),n.aliasesCount=n.savedAliases.length,n.asyncStatus(c.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){var t=this.instance;t.showLoadPanel=!0,t.showContent=!1},onLocked:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onError:function(e){var t=this.instance;"getAliases"==e.sender&&(t.showLoadPanel=!1,t.showContent=!1,""==e.Msg&&(e.Msg="Internal Server Error")),t.activeNotification.clear(),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.showError=!1}})}}),l.openDomainLockModalPopUp=new c.AsyncStateBehavior({constructor:function(){var e=this.instance;e.activeNotification=l.pageNotification.alerts,e.showLoadPanel=!0,e.showContent=!0,e.model={};e.editAliasModalInstance=null,e.Click=function(e){a.open({templateUrl:"/Domains/DomainLock",controller:"domainListActionCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{serviceName:function(){return JSON.stringify(e)},distinctDomainServiceType:function(){return""},domainServiceTypes:function(){return""},additionalInfo:function(){return""},DomainAutoRenew:function(){return""},WGAutoRenew:function(){return""},PDNSAutoRenew:function(){return""},actionType:function(){return"reglock"},domainsCount:function(){return e.TotalDomainsCount},dataCategoryInitValues:function(){return""},commaSeperatedDomainNames:function(){return""},domainSelectionType:function(){return""}}}).result.then(function(e){l.uncheckCheckBoxes(),"Success"==e.params.Msg?1==e.checked?l.pageNotification.stuckNotifications.addSuccess(l.DomainInfoRes.alert_Site_SaveDomainLockCheckedSuccessMessage,l.domainListnotificationAlertArguments):l.pageNotification.stuckNotifications.addSuccess(l.DomainInfoRes.alert_Site_SaveDomainLockNotCheckedSuccessMessage,l.domainListnotificationAlertArguments):"Error"==e.params.Msg&&("Lock All"==e.lockOption?l.pageNotification.stuckNotifications.addError(l.DomainInfoRes.error_Site_DomainLockOnMessage,l.domainListnotificationAlertArguments):l.pageNotification.stuckNotifications.addError(l.DomainInfoRes.error_Site_DomainLockOffMessage,l.domainListnotificationAlertArguments))},function(){})},e.asyncStatus(c.AsyncStatus.Loading)},onSuccess:function(e){var t,n=this.instance;"getAliases"==e.sender&&(n.model=e.Result,t=[],n.model.MailboxAliases.forEach(function(e){t.push(createAliasBehavior(e,n))}),n.savedAliases=t,n.aliasesNgGrid.settings.reload()),n.aliasesCount=n.savedAliases.length,n.asyncStatus(c.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){var t=this.instance;t.showLoadPanel=!0,t.showContent=!1},onLocked:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onError:function(e){var t=this.instance;"getAliases"==e.sender&&(t.showLoadPanel=!1,t.showContent=!1,""==e.Msg&&(e.Msg="Internal Server Error")),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.showError=!1}})}}),l.openVerifyContactsModalPopUp=new c.AsyncStateBehavior({constructor:function(){var n=this.instance;n.activeNotification=l.pageNotification.alerts,n.showLoadPanel=!0,n.showContent=!0,n.model={};n.editAliasModalInstance=null,n.Click=function(e){a.open({templateUrl:"/Domains/VerifyContacts",controller:"domainListActionCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{serviceName:function(){return e},distinctDomainServiceType:function(){return""},domainServiceTypes:function(){return""},additionalInfo:function(){return""},DomainAutoRenew:function(){return""},WGAutoRenew:function(){return""},PDNSAutoRenew:function(){return""},actionType:function(){return"verifyraa"},domainsCount:function(){return e.length},dataCategoryInitValues:function(){return""},commaSeperatedDomainNames:function(){return""},domainSelectionType:function(){return""}}}).result.then(function(e){l.uncheckCheckBoxes(),"Success"==e?l.pageNotification.stuckNotifications.addSuccess(l.DomainInfoRes.success_Site_ResendEmailSuccessMessage,l.domainListnotificationAlertArguments):"Error"==e&&l.pageNotification.stuckNotifications.addError(l.DomainInfoRes.error_Site_ResendEmailErrorMessage,l.domainListnotificationAlertArguments)},function(){})},n.aliasesNgGrid=new t({sorting:{enabled:!0}},{getData:function(e,t){e.resolve(n.savedAliases)}}),n.asyncStatus(c.AsyncStatus.Loading)},onSuccess:function(e){var t,n=this.instance;"getAliases"==e.sender&&(n.model=e.Result,t=[],n.model.MailboxAliases.forEach(function(e){t.push(createAliasBehavior(e,n))}),n.savedAliases=t,n.aliasesNgGrid.settings.reload()),n.aliasesCount=n.savedAliases.length,n.asyncStatus(c.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){var t=this.instance;t.showLoadPanel=!0,t.showContent=!1},onLocked:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onError:function(e){var t=this.instance;"getAliases"==e.sender&&(t.showLoadPanel=!1,t.showContent=!1,""==e.Msg&&(e.Msg="Internal Server Error")),t.activeNotification.clear(),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.showError=!1}})}}),l.openAllotDomainCategoryModalPopUp=new c.AsyncStateBehavior({constructor:function(){var e=this.instance;e.activeNotification=l.pageNotification.alerts,e.showLoadPanel=!0,e.showContent=!0,e.model={};e.Click=function(e,i){allotDomainCategoryModalInstance=a.open({templateUrl:"/Domains/AllotCategory",controller:"domainListActionCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{serviceName:function(){return l.domainName(i)},distinctDomainServiceType:function(){return""},domainServiceTypes:function(){return""},additionalInfo:function(){return""},DomainAutoRenew:function(){return""},WGAutoRenew:function(){return""},PDNSAutoRenew:function(){return""},actionType:function(){return""},domainsCount:function(){return""},dataCategoryInitValues:function(){return l.dataCategoryInitValues},commaSeperatedDomainNames:function(){return e},domainSelectionType:function(){return""}}}),allotDomainCategoryModalInstance.result.then(function(t){var n,e,a;l.uncheckCheckBoxes(),"Success"==t.Call?(a=l.DomainInfoRes.success_Site_SaveAddCategoryMessage,(n=null)!=(e=o("propertyFilter")(l.dataCategoryInitValues,{text:t.CategoryName}))&&0<e.length&&(n=e[0].id),null!=n&&i.forEach(function(e){e.model.Category=t.CategoryName,e.model.CategoryId=n}),l.pageNotification.stuckNotifications.addSuccess(a.replace("{Category}",t.CategoryName),l.domainListnotificationAlertArguments)):"Error"==t.Call&&(a=l.DomainInfoRes.error_Site_SaveAddCategoryMessage,l.pageNotification.stuckNotifications.addError(a.replace("{Category}",t.CategoryName),l.domainListnotificationAlertArguments))},function(){})},e.asyncStatus(c.AsyncStatus.Loading)},onSuccess:function(e){var t,n=this.instance;"getAliases"==e.sender&&(n.model=e.Result,t=[],n.model.MailboxAliases.forEach(function(e){t.push(createAliasBehavior(e,n))}),n.savedAliases=t,n.aliasesNgGrid.settings.reload()),n.aliasesCount=n.savedAliases.length,n.asyncStatus(c.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){var t=this.instance;t.showLoadPanel=!0,t.showContent=!1},onLocked:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onError:function(e){var t=this.instance;"getAliases"==e.sender&&(t.showLoadPanel=!1,t.showContent=!1,""==e.Msg&&(e.Msg="Internal Server Error")),t.activeNotification.clear(),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.showError=!1}})}}),l.domainServiceNames=function(e){var t,n=[],a=[],i=[],o=[],s=[],r=[],c=0;for(domaincount=0;domaincount<e.length;domaincount++)"ALL"==l.domainSelectionType.toUpperCase()?(n[c]=e[domaincount].DomainName,a[c]="Domains",o[c]=e[domaincount].AutoRenew,"Domains"==a[c]&&(null!=e[domaincount].WGSlotID&&(n[++c]=e[domaincount].DomainName,a[c]="WhoisGuard",s[c]=e[domaincount].WGAutoRenew),null!=(t=e[domaincount].PDNSSubID)&&null!=t&&(n[++c]=e[domaincount].DomainName,a[c]="PremiumDNS",i[c]=e[domaincount].PDNSSubID,r[c]=e[domaincount].PDNSAutoRenew)),"SSL"!=e[domaincount].ServiceTypeName&&"SellDomains"!=e[domaincount].ServiceTypeName&&null!=e[domaincount].ServiceTypeName?(n[++c]=e[domaincount].DomainName,a[c]=e[domaincount].ServiceTypeName,"PrivateEmail"==e[domaincount].ServiceTypeName?i[c]=e[domaincount].SubscriptionId:"Hosting"==e[domaincount].ServiceTypeName?i[c]=e[domaincount].PackageId:i[c]=null):null==e[domaincount].PDNSSubID&&0==e[domaincount].PDNSSubID&&(i[c]=null),c++):"DOMAINONLY"==l.domainSelectionType.toUpperCase()&&(n[c]=e[domaincount].DomainName,a[c]="Domains",o[c]=e[domaincount].AutoRenew,"Domains"==a[c]&&(null!=e[domaincount].WGSlotID&&(n[++c]=e[domaincount].DomainName,a[c]="WhoisGuard",s[c]=e[domaincount].WGAutoRenew),null!=(t=e[domaincount].PDNSSubID)&&null!=t&&(n[++c]=e[domaincount].DomainName,a[c]="PremiumDNS",i[c]=e[domaincount].PDNSSubID,r[c]=e[domaincount].PDNSAutoRenew)),c++);return l.domainDetails={domainNames:n,serviceTypes:a,additionalInfoId:i,IsDomainAutoRenew:o,IsWGAutoRenew:s,IsPDNSAutoRenew:r},l.domainDetails},l.distinctDomainServiceTypes=function(e){var n=[];return $.each(e,function(e,t){-1===$.inArray(t,n)&&n.push(t)}),n},l.domainName=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n].model.DomainName;return t}}]),app.controller("domainsCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","notificationService","pageHelper","$q","ncGridParams","$sce","ncGridEventNames","domainTransferInService","$interval","$timeout","popupWindow","sslRepository","$window",function(m,e,p,s,f,t,h,r,c,n,l,a,o,d,u,g,v){m.expirationDateStyle={date:0,dateGrace:1,dateDanger:2,dateAlert:3},m.NoSearchOption={minimumResultsForSearch:-1},m.CategoryCurrentAction="",m.pageHelper=h,m.pageNotification=new t.instance,m.initPageNotification=new t.instance,m.syncAlertArguments={isAutoHide:!1,hasClose:!0},m.domainListnotificationAlertArguments={isAutoHide:!0,hasClose:!0},m.DomainInfoRes=DomainInfoRes,m.SSLInfoRes=SSLInfoRes,m.Message={},m.domainDetails={},m.SyncDomainList={},m.isRefereshDisabled=!1,m.alertPageFrom=m.$parent.alertPageFrom,m.currentDate=new Date,m.SymantecSunsetDate=new Date(SymantecSunsetDate),m.SymantecSunsetDate=m.SymantecSunsetDate.setDate(m.SymantecSunsetDate.getDate()+1),m.SymantecSunsetMasterKey=SymantecSunsetMasterKey,m.domainSelectionType="ALL",m.showSearchForm=!1,m.crossSellOptions=[],m.isCrossSellDismissed=!1,m.searchDomainValue="";var S=m.SSLInfoRes.static_ErrorMessage_SymantecSunset,y=m.SSLInfoRes.static_InsufficentFundsErrorMsg;m.init=function(e){m.isOverViewPage=e.isOverView,m.isOverViewPage||m.CheckSyncDomainList(),null!=e.MessageType&&null!=e.Message&&("alert"==e.MessageType.toLowerCase()?m.initPageNotification.alerts.addWarning(e.Message,{hasClose:!0,isAutoHide:!1}):"success"==e.MessageType.toLowerCase()?m.initPageNotification.alerts.addSuccess(e.Message,{hasClose:!0,isAutoHide:!1}):"error"==e.MessageType.toLowerCase()&&m.initPageNotification.alerts.addError(e.Message,{hasClose:!0,isAutoHide:!1})),null!=e.InitModel&&"whoisguard"==e.InitModel.ActionType.toLowerCase()&&(m.WhoisGuardAddtoCartDomainList=e.InitModel.DomainList)},m.calculateDateDiffDays=function(e,t){var n=new Date(e).getTime()-new Date(t).getTime();return Math.round(n/864e5)},m.dismissCrossSell=function(){m.isCrossSellDismissed=!0,p.domainList.dismissDomainCrossSell(m.crossSellOptions)},m.getxSellProductName=function(e){switch(e.ProductType){case"HOSTING":return e.ProductName+" "+e.ProductType.slice(0,1)+e.ProductType.slice(1).toLowerCase();case"DOMAINS":return e.DomainName;default:return e.ProductName}},m.getxSellDurationType=function(e){switch(e.DurationType){case"YEAR":return"yr";case"MONTH":return"mo";default:return"yr"}},m.goToXsellProductCartPage=function(e,t,n){e.preventDefault();var a,i=location.protocol+"//"+location.host.replace(/^ap./,""),o="";o="HOSTING"===t.ProductType?(a=n?"NAMECHEAP":"EXISTING",i+"/hosting/purchase/domain-connection?product="+t.ProductName.toLowerCase()+"&addons=server-location%3Bserver-location-us&duration="+t.Duration+"&durationtype="+t.DurationType.toLowerCase()+"&domainType="+a+"&domain="+t.DomainName):i+"/cart/addtocart.aspx?producttype=domains&action=register&domainlist="+t.DomainName,window.location.href=o},m.checkDomainStatus=function(){SyncStatus=o(function(){null!=m.SyncDomainList&&null!=m.SyncDomainList.Batchid&&""!=m.SyncDomainList.Batchid&&p.domainList.CheckDomainStatus(m.SyncDomainList.Batchid).then(function(e){var t=e.Result;null!=t&&(0==t.IsSuccess?(m.isRefereshDisabled=!0,m.pageNotification.alerts.clear(),m.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1})):0!=t.TotalCount&&t.CompletedCount+t.FailedCount==t.TotalCount&&0==t.IsUserNotified?(m.isRefereshDisabled=!1,m.pageNotification.alerts.clear(),0==t.IsUserNotified&&m.pageNotification.alerts.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!1}),o.cancel(SyncStatus)):0!=t.TotalCount&&t.CompletedCount+t.FailedCount!=t.TotalCount&&(m.isRefereshDisabled=!0)),null==e.Result&&1==e.Error&&(m.isRefereshDisabled=!0,m.pageNotification.alerts.clear(),""!=e.Msg&&m.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1}))})},2e4)},m.AddWhoIsGuardToCart=function(){p.domainList.whoisguardbulkaddtocart(m.WhoisGuardAddtoCartDomainList)},m.CheckSyncDomainList=function(){p.domainList.CheckSyncDomainList().then(function(e){var t=e.Result;null!=t&&(1==e.Error?(m.isRefereshDisabled=!1,m.pageNotification.alerts.clear(),m.pageNotification.alerts.addError(t.Message.Msg,{hasClose:!0,isAutoHide:!1})):0==e.Error&&null!=t.Message&&""!=t.Message&&"norecords"==t.Message.toLowerCase()?m.isRefereshDisabled=!1:0==e.Error&&null!=t.Message&&""!=t.Message&&"notexist"==t.Message.toLowerCase()?m.isRefereshDisabled=!0:0==e.Error&&null==t.Status?m.isRefereshDisabled=!1:(0!=e.Error||null!=t.Batchid&&""!=t.Batchid&&null!=t.Batchid)&&(null==t.Status||"failed"!=t.Status.toLowerCase()&&"complated"!=t.Status.toLowerCase()&&"partiallycompleted"!=t.Status.toLowerCase())?(m.SyncDomainList.Batchid=t.Batchid,m.SyncDomainList.RecordCount=t.RecordCount,m.SyncDomainList.Status=t.Status,m.SyncDomainList.IsUserNotified=t.IsUserNotified,m.pageNotification.alerts.clear(),null!=t.MessageType&&"warning"==t.MessageType.toLowerCase()?m.pageNotification.alerts.addWarning(t.Message,{hasClose:!0,isAutoHide:!1}):m.pageNotification.alerts.addSuccess(t.Message,{hasClose:!0,isAutoHide:!1}),m.isRefereshDisabled=!0,m.checkDomainStatus()):(m.isRefereshDisabled=!1,m.pageNotification.alerts.clear(),m.pageNotification.alerts.addSuccess(t.Message,{hasClose:!0,isAutoHide:!1}))),null==e.Result&&1==e.Error&&(m.pageNotification.alerts.clear(),m.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1}))})},m.syncDomainListBehavior=new h.AsyncStateBehavior({constructor:function(){this.instance.SyncDomainList=function(){m.isRefereshDisabled=!0,p.domainList.SyncDomainList().then(function(e){var t=e.Result;null!=t&&(1==e.Error?(m.pageNotification.alerts.clear(),m.pageNotification.alerts.addError(t.Message,m.syncAlertArguments)):(m.SyncDomainList.Batchid=t.Batchid,m.SyncDomainList.RecordCount=t.RecordCount,m.SyncDomainList.Status=t.Status,m.SyncDomainList.IsUserNotified=t.IsUserNotified,m.pageNotification.alerts.clear(),null!=t.MessageType&&"warning"==t.MessageType.toLowerCase()?m.pageNotification.alerts.addWarning(t.Message,{hasClose:!0,isAutoHide:!1}):m.pageNotification.alerts.addSuccess(t.Message,m.syncAlertArguments),m.checkDomainStatus())),null==e.Result&&1==e.Error&&(m.pageNotification.alerts.clear(),m.pageNotification.alerts.addError(e.Msg,m.syncAlertArguments))})}},onSuccess:function(e){var t=this.instance;""!=e.Msg&&(t.activeNotification=m.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0})),t.asyncStatus(h.AsyncStatus.Active)},onWarning:function(e){var t=this.instance;m.pageNotification.alerts.clear(),t.activeNotification=m.pageNotification.stuckNotifications.addWarning(e.Msg,{hasClose:!0,isAutoHide:!0}),t.isDisabled=!1,t.showError=!1},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance.activeNotification=m.pageNotification.stuckNotifications.addLoading("Processing",{hasClose:!0,isAutoHide:!0})},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=m.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),m.pageBehavior=new h.AsyncStateBehavior({constructor:function(){var o=this.instance;o.showLoadPanel=!0,o.showContent=!1,o.model=null,o.categoriesFilter={list:[],check:function(e){return s("propertyFilter")(this.list,{propertyvalue:e})[0]},add:function(e,t){var n;null!=e&&null!=t&&((n=this.check(e))?n.usedCount++:this.list.push({header:t,propertyvalue:e,usedCount:1,propertyname:"model.CategoryId"}))},remove:function(e){var t,n;null!=e&&(("string"==typeof e||e instanceof String)&&(e=parseInt(e)),(t=this.check(e))&&(t.usedCount--,0==t.usedCount&&(this.list.splice(this.list.indexOf(t),1),(n=s("propertyFilter")(o.pageNgGridSettings.parameters.category.availableProperties,{propertyValue:e})[0])&&o.pageNgGridSettings.parameters.category.availableProperties.splice(o.pageNgGridSettings.parameters.category.availableProperties.indexOf(n),1))))}},o.pageNgGridSettings=new c,o.pageNgGridSettings.parameters.search.serchPropertyNames=["getServicesSearchProperties()","model.DomainName","model.Registrar","model.ExpirationDateTitleValue"],o.pageNgGridSettings.parameters.mapping.renderChunkSize=100,o.pageNgGridSettings.parameters.mapping.serverChunkSize=DomainList_ChunkSize;var e,t,n,a=$("#pageOverview").val();o.pageNgGridSettings.settings.getData=function(i,e){o.filterStatusPropertyNames=[],o.filterFlagsPropertyNames=[],o.filterFlagTrialPropertyName=[],o.filterFlagNewPropertyName=[],p.domainList.getDomainList(e,a).then(function(e){var t,n;if(m.showSearchForm=!0,null!=e.Result&&null!=e.Result.Data){""!=e.Msg&&null!=e.Msg&&null!=e.Msg&&(o.activeNotification=m.pageNotification.alerts.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0})),t=e.Result.Data.length,e.Result.Data=m.AssignCssClassForFields(e.Result.Data);for(var a=0;a<t;a++)e.Result.Data[a]=function(e,n){return new h.AsyncStateBehavior({constructor:function(){var o=this.instance;o.model=e,o.isExpand=!1,o.model.ExpirationDateTitleValue=o.model.ExpirationDate?s("date")(o.model.ExpirationDate,"MMM d, yyyy"):null,o.model.ExpirationDateSortValue=o.model.ExpirationDate?o.model.ExpirationDate.getTime():0,o.model.Registrar=o.model.IsNamecheapDomain?"NAMECHEAP":"OTHERS",o.model.ExpirationDateCssClass="date",o.model.ExpirationDateStyle==m.expirationDateStyle.dateGrace&&(o.model.ExpirationDateCssClass="date grace"),o.model.ExpirationDateStyle==m.expirationDateStyle.dateDanger&&(o.model.ExpirationDateCssClass="date danger"),o.model.ExpirationDateStyle==m.expirationDateStyle.dateAlert&&(o.model.ExpirationDateCssClass="date alert"),o.onExpand=function(){if(!o.isMatchesService)for(var e=0;e<o.model.Services.length;e++)o.model.Services[e].inSearchScope=!0;o.isExpand=!o.isExpand,o.isExpand&&setTimeout(function(){$(".table-sticky-filters").trigger("update")},200)},o.closeBuble=function(e){"TD"==e.target.tagName&&(o.isExpand=!1)},o.getIsPremium=function(){return this.model.IsPremiumDomain},o.getIsPremiumDNS=function(){for(var e=!1,t=0;t<o.model.Services.length;t++)o.model.Services[t].IsPDNSAvailable&&(e=!0);return e},o.getServicesPropertiesPath=function(e,t){for(var n=!1,a=0;a<o.model.Services.length;a++)"true"==t&&(t="1"),o.model.Services[a][e]==t?(n=!0,o.model.Services[a].inFilterScope=!0):o.model.Services[a].inFilterScope=!1,o.model.Services[a].inSearchScope=o.model.Services[a].inFilterScope;return o.isFilterMatches=n,o.isMatchesService=n,o.isExpand=n},o.getServicesSearchProperties=function(e){for(var t=!1,n=0;n<o.model.Services.length;n++)o.model.Services[n].inSearchScope=!!o.model.Services[n].inFilterScope&&o.model.Services[n].inFilterScope;if(""!=e)for(var a=0;a<o.model.Services.length;a++){var i=o.model.Services[a];1==o.model.Services[a].inFilterScope&&(i.Name&&-1<i.Name.toLowerCase().indexOf(e.toLowerCase())&&(t=!0,i.inSearchScope=!0),i.ProductStatusString&&-1<i.ProductStatusString.toLowerCase().indexOf(e.toLowerCase())&&(t=!0,i.inSearchScope=!0),i.ProductTypeDescription&&-1<i.ProductTypeDescription.toLowerCase().indexOf(e.toLowerCase())&&(t=!0,i.inSearchScope=!0),null!=i.ExpirationDate&&-1<s("date")(i.ExpirationDate,"MMM d,yyyy").toLowerCase().indexOf(e.toLowerCase())&&(t=!0,i.inSearchScope=!0))}return o.isMatchesService=!!o.isFilterMatches||t,o.isExpand=!!o.isFilterMatches||t,t},n.categoriesFilter.add(o.model.CategoryId,o.model.Category),o.serviceAction=function(e){e.DestinationURL&&""!=e.DestinationURL?"#"==e.DestinationURL?m.action(e.InputParams,e.DisplayText):window.open(e.DestinationURL,"_self"):alert("Execute another action")},o.onCreateCategory=function(e,t){o.asyncStatus(h.AsyncStatus.Loading);var n=r.defer();return p.domainList.createCategories(o.model.DomainName,e).then(function(e){e.sender="createCategories",e.defer=n,o.asyncStatus(0==e.Error?h.AsyncStatus.Success:h.AsyncStatus.Error,e)}),n.promise},o.onChangeCategory=function(e,t){o.asyncStatus(h.AsyncStatus.Loading);var n=r.defer();return p.domainList.allotCategories(o.model.DomainName,e).then(function(e){e.sender="allotCategories",e.defer=n,o.asyncStatus(0==e.Error?h.AsyncStatus.Success:h.AsyncStatus.Error,e)}),n.promise},o.onRemoveCategory=function(e,t){o.asyncStatus(h.AsyncStatus.Loading);var n=r.defer();return p.domainList.removeCategories(o.model.DomainName,t).then(function(e){e.sender="removeCategories",e.defer=n,o.asyncStatus(0==e.Error?h.AsyncStatus.Success:h.AsyncStatus.Error,e)}),n.promise}},onSuccess:function(e){var t=this.instance;"createCategories"==e.sender?(t.model.Category=e.Result[1],t.model.CategoryId=e.Result[2],e.defer.resolve({Error:!1,categoryId:t.model.CategoryId}),m.dataCategoryInitValues.push({id:t.model.CategoryId,text:t.model.Category}),n.categoriesFilter.add(t.model.CategoryId,t.model.Category)):"allotCategories"==e.sender?(t.model.Category=e.Result[1],t.model.CategoryId=e.Result[2],e.defer.resolve({Error:!1,categoryId:t.model.CategoryId}),n.categoriesFilter.add(t.model.CategoryId,t.model.Category)):"removeCategories"==e.sender&&(t.model.Category=null,t.model.CategoryId=null,e.defer.resolve({Error:!1,categoryId:t.model.CategoryId}),n.categoriesFilter.remove(e.Result[2])),"createCategories"!=e.sender&&"allotCategories"!=e.sender&&"removeCategories"!=e.sender||(n.pageNgGridSettings.settings.actions.updateDropDownBtns(),t.activeNotification=m.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0})),t.asyncStatus(h.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){var t=this.instance;"allotCategories"==e.sender?t.activeNotification=m.pageNotification.stuckNotifications.addLoading("Allotting Category",!1):"createCategories"==e.sender?t.activeNotification=m.pageNotification.stuckNotifications.addLoading("Creating New Category",!1):"removeCategories"==e.sender&&(t.activeNotification=m.pageNotification.stuckNotifications.addLoading("Removing Category",!1))},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;"createCategories"!=e.sender&&"allotCategories"!=e.sender&&"removeCategories"!=e.sender||e.defer.resolve({Error:!0}),t.activeNotification=m.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}})}(e.Result.Data[a],o);i.resolve(e.Result),m.crossSellOptions=m.crossSellOptions.length||!Array.isArray(e.Result.CrossSellOptions)?m.crossSellOptions:e.Result.CrossSellOptions,o.pageNgGridSettings.settings.actions.updateDropDownBtns(),o.model=o.pageNgGridSettings.parameters.storage.requestData}else i.resolve(e.Result),0==o.pageNgGridSettings.parameters.storage.requestData.length&&(m.isRefereshDisabled=!0);if(1==m.SymantecSunsetMasterKey&&m.currentDate<=m.SymantecSunsetDate){for(m.IsSymantecCertExist=!1,index=0;index<e.Result.Data.length;index++)for(indexService=0;indexService<e.Result.Data[index].model.Services.length;indexService++){if("SSL"==(n=e.Result.Data[index].model.Services[indexService]).ProductTypeString.toUpperCase()&&"comodo"!=n.ProviderName.toLowerCase()&&("newrenewal"==n.SSLStatus.toLowerCase()||"newpurchase"==n.SSLStatus.toLowerCase())){m.IsSymantecCertExist=!0;break}}1==m.IsSymantecCertExist&&(m.$parent.HasSymantecCertificate=1,"dashboard"!=m.alertPageFrom&&(m.HasSymantecCert=!0))}else if(1==m.SymantecSunsetMasterKey&&m.currentDate>m.SymantecSunsetDate)for(index=0;index<e.Result.Data.length;index++)for(indexService=0;indexService<e.Result.Data[index].model.Services.length;indexService++){if("SSL"==(n=e.Result.Data[index].model.Services[indexService]).ProductTypeString.toUpperCase()&&"comodo"!=n.ProviderName.toLowerCase()&&"renew"==n.Actions[0].DisplayText.toLowerCase()){m.$parent.HasSymantecRenewCertificate=1,m.$parent.HasSymantecCertificate=1,"dashboard"!=m.alertPageFrom&&(m.HasSymantecRenewCert=!0,m.HasSymantecCert=!0);break}}})},o.pageNgGridSettings.eventListener.then(function(e){e.$on(l.ncGridRenderPageBefore,function(e,t){o.pageNgGridSettings.parameters.storage.pageData.forEach(function(e){e.isExpand=!1,e.isFilterMatches=!1;for(var t=0;t<e.model.Services.length;t++)e.model.Services[t].inFilterScope=null,e.model.Services[t].inSearchScope=!0})})}),o.pageNgGridSettings.settings.reload(),p.domainList.getCategories().then(function(e){if(m.dataCategoryInitValues=[],null!=e.Result){for(var t=[],n=0;n<e.Result.length;n++)t.push({id:e.Result[n].CategoryId,text:e.Result[n].CategoryHeader});m.dataCategoryInitValues=t}}),o.statusList=[{header:"Active",propertyname:"getServicesPropertiesPath(ProductStatusString)",propertyvalue:"Active"},{header:"Alert",propertyname:"getServicesPropertiesPath(ProductStatusString)",propertyvalue:"Alert"},{header:"Grace",propertyname:"getServicesPropertiesPath(ProductStatusString)",propertyvalue:"Grace"},{header:"Expired",propertyname:"getServicesPropertiesPath(ProductStatusString)",propertyvalue:"Expired"}],o.flagsList=[{header:"Trial",propertyname:"getServicesPropertiesPath(IsTrial)",propertyvalue:!0},{header:"Blocked",propertyname:"getServicesPropertiesPath(ProductStatusString)",propertyvalue:"AlertBlocked"}],o.othersList=[{header:"New",propertyname:"getServicesPropertiesPath(IsNew)",propertyvalue:!0},{header:"Unverified Contacts",propertyname:"model.IsRAAUnVerifiedContacts",propertyvalue:!0},{header:"Pending Transfer",propertyname:"getServicesPropertiesPath(IsInTransfer)",propertyvalue:!0},{header:"Premium",propertyname:"getIsPremium()",propertyvalue:!0},{header:"For Sale",propertyname:"getServicesPropertiesPath(IsSale)",propertyvalue:!0},{header:"Shared Permissions",propertyname:"model.IsManaging",propertyvalue:!0},{header:"PremiumDNS",propertyname:"getIsPremiumDNS()",propertyvalue:!0}],o.registrarsList=[{header:"Namecheap",propertyname:"model.IsNamecheapDomain",propertyvalue:!0},{header:"Others",propertyname:"model.IsNamecheapDomain",propertyvalue:!1}],o.bulkActions={changeOwnership:function(){var e,t;0!=o.pageNgGridSettings.parameters.selection.selectedItems.length&&(e="/Domains/BulkChangeOwnership?productList=",t=[],o.pageNgGridSettings.parameters.selection.selectedItems.forEach(function(e){t.push(e.model.DomainName)}),e+=t,window.location.href=e)}},o.asyncStatus(h.AsyncStatus.Success),1==m.SymantecSunsetMasterKey&&m.currentDate>m.SymantecSunsetDate&&0<v.localStorage.length&&(null!=(e=u.replaceOrRefundResult()).isError&&("false"===e.isError?"replace"==e.action?(t=m.SSLInfoRes.static_Replace_SuccessMessage,m.pageNotification.stuckNotifications.addSuccess(t,{hasClose:!0,isAutoHide:!0})):(n=m.SSLInfoRes.static_Refund_SuccessMessage,m.pageNotification.stuckNotifications.addSuccess(n.replace("{0}",e.symantecCertType),{hasClose:!0,isAutoHide:!0})):(-1<e.Message.indexOf("INSUFFICIENTFUNDS")?1:0)?m.pageNotification.stuckNotifications.addError(y.replace("{0}",ServerName),{hasClose:!0,isAutoHide:!1}):m.pageNotification.stuckNotifications.addError(S,{hasClose:!0,isAutoHide:!0})))},onSuccess:function(e){this.instance.asyncStatus(h.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=m.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),m.uncheckCheckBoxes=function(){m.pageBehavior.pageNgGridSettings.parameters.selection.selectedItems=[];var e=m.pageBehavior.pageNgGridSettings.parameters.storage.requestData;for(i=0;i<e.length;i++)1==e[i].$ncColumnSelected&&(e[i].$ncColumnSelected=!1);$("div#chb_selectAllDomains").find('input[type="checkbox"]').removeAttr("checked")},m.AssignCssClassForFields=function(e){if(null!=e&&null!=e&&0<e.length)for(index=0;index<e.length;index++)if(null==e[index].ContextualMessage||null==e[index].ContextualMessage||"some products are blocked"!=e[index].ContextualMessage.toLowerCase()&&"hosting is blocked"!=e[index].ContextualMessage.toLowerCase()&&"domain and domain privacy are blocked"!=e[index].ContextualMessage.toLowerCase()?e[index].IsBlockedContextualMessage=!1:e[index].IsBlockedContextualMessage=!0,e[index].DomainNameCssClass="",e[index].IsNamecheapDomain?e[index].IsNamecheapDomain&&!e[index].IsDomainOwner&&""!=e[index].EditCapabilityCsv&&null!=e[index].EditCapabilityCsv?e[index].DomainNameCssClass="with-rights":!e[index].IsNamecheapDomain||e[index].IsDomainOwner||""!=e[index].EditCapabilityCsv&&null!=e[index].EditCapabilityCsv&&null!=e[index].EditCapabilityCsv||(e[index].DomainNameCssClass="without-rights"):e[index].DomainNameCssClass="transfer-in",e[index].ExpirationDate=h.Date.dateFromJson(e[index].ExpirationDate),e[index].RenewByDate=h.Date.dateFromJson(e[index].RenewByDate),0<e[index].Services.length)for(null!=e[index].Services[0].WGExpireDateTime&&null!=e[index].Services[0].WGExpireDateTime&&""!=e[index].Services[0].WGExpireDateTime&&e[index].Services[0].WGExpireDateTime!=isNaN&&(e[index].Services[0].WGExpireDateTime=h.Date.dateFromJson(e[index].Services[0].WGExpireDateTime)),indexService=0;indexService<e[index].Services.length;indexService++)e[index].Services[indexService].ExpirationDate=h.Date.dateFromJson(e[index].Services[indexService].ExpirationDate),e[index].Services[indexService].CssClass="",e[index].Services[indexService].SpanCssClass="",null!=e[index].Services[indexService].ProductTypeString&&null!=e[index].Services[indexService].ProductTypeString&&""!=e[index].Services[indexService].ProductTypeString&&("DOMAIN"==e[index].Services[indexService].ProductTypeString.toUpperCase()?1==e[index].Services[indexService].IsFreeDns?"Active"==e[index].Services[indexService].ProductStatusString?e[index].Services[indexService].CssClass="icon-only icon-domain-freedns-active":e[index].Services[indexService].CssClass="icon-only icon-domain-freedns-inactive":(m.addfadeclass="",e[index].IsManaging||e[index].IsDomainOwner||!e[index].IsNamecheapDomain||(m.addfadeclass="icon-fade"),1==e[index].Services[indexService].WGActiveStatus?e[index].Services[indexService].CssClass="icon-only "+m.addfadeclass+" icon-domain-whoisguard-active":0==e[index].Services[indexService].WGActiveStatus?e[index].Services[indexService].CssClass="icon-only "+m.addfadeclass+" icon-domain-whoisguard-inactive":e[index].Services[indexService].CssClass="icon-only "+m.addfadeclass+" icon-domain",1==e[index].Services[indexService].IsPDNSAvailable&&1==e[index].Services[indexService].IsPDNSActive&&null!=e[index].Services[indexService].PDNSSubID&&0<e[index].Services[indexService].PDNSSubID&&"PREMIUM"==e[index].ProviderSubType.toUpperCase()?e[index].Services[indexService].CssClass=null!=e[index].Services[indexService].WGActiveStatus?e[index].Services[indexService].CssClass+" icon-domain-pdns-active":"icon-only "+m.addfadeclass+" icon-domain-pdns-active":1==e[index].Services[indexService].IsPDNSAvailable&&1==e[index].Services[indexService].IsPDNSActive&&null!=e[index].Services[indexService].PDNSSubID&&0<e[index].Services[indexService].PDNSSubID&&"PREMIUM"!=e[index].ProviderSubType.toUpperCase()&&(e[index].Services[indexService].CssClass=null!=e[index].Services[indexService].WGActiveStatus?e[index].Services[indexService].CssClass+" icon-domain-pdns-inactive":"icon-only "+m.addfadeclass+" icon-domain-pdns-inactive")):"HOSTING"==e[index].Services[indexService].ProductTypeString.toUpperCase()?e[index].Services[indexService].CssClass="icon-only icon-hosting":"PRIVATEEMAIL"==e[index].Services[indexService].ProductTypeString.toUpperCase()?e[index].Services[indexService].CssClass="icon-only icon-email":"SELLDOMAINS"==e[index].Services[indexService].ProductTypeString.toUpperCase()||"FREEDNS"==e[index].Services[indexService].ProductTypeString.toUpperCase()?("SELLDOMAINS"==e[index].Services[indexService].ProductTypeString.toUpperCase()&&(e[index].Services[indexService].IsSellDomain=!0),"FREEDNS"==e[index].Services[indexService].ProductTypeString.toUpperCase()&&(e[index].Services[indexService].IsFreeDns=!0),"SELLDOMAINS"==e[index].Services[indexService].ProductTypeString.toUpperCase()&&(e[index].Services[indexService].CssClass="icon-only icon-domain"),"FREEDNS"==e[index].Services[indexService].ProductTypeString.toUpperCase()&&("Active"==e[index].Services[indexService].ProductStatusString?e[index].Services[indexService].CssClass="icon-only icon-subdomain-freedns-active":e[index].Services[indexService].CssClass="icon-only icon-subdomain-freedns-inactive")):"SSL"==e[index].Services[indexService].ProductTypeString.toUpperCase()?null!=e[index].Services[indexService].ProviderName&&null!=e[index].Services[indexService].ProviderName&&"COMODO"==e[index].Services[indexService].ProviderName?(e[index].Services[indexService].CssClass="icon-only strong icon-ssl-comodo","PositiveSSL FREE"==e[index].Services[indexService].Name&&(e[index].Services[indexService].Name="PositiveSSL",e[index].Services[indexService].IsPromo=!0)):null!=e[index].Services[indexService].ProviderName&&null!=e[index].Services[indexService].ProviderName&&"GEOTRUST"==e[index].Services[indexService].ProviderName?e[index].Services[indexService].CssClass="icon-only strong icon-ssl-geotrust":null!=e[index].Services[indexService].ProviderName&&null!=e[index].Services[indexService].ProviderName&&"THAWTE"==e[index].Services[indexService].ProviderName?e[index].Services[indexService].CssClass="icon-only strong icon-ssl-thawte":e[index].Services[indexService].CssClass="icon-only strong icon-ssl-symantec":"MAILCHIMP"==e[index].Services[indexService].ProductTypeString.toUpperCase()?e[index].Services[indexService].CssClass="icon-only strong icon-mailchimp":"GOOGLE"==e[index].Services[indexService].ProductTypeString.toUpperCase()&&(e[index].Services[indexService].CssClass="icon-only strong icon-google")),null!=e[index].Services[indexService].ProductStatusString&&null!=e[index].Services[indexService].ProductStatusString&&""!=e[index].Services[indexService].ProductStatusString&&(e[index].Services[indexService].SpanCssClass=m.GetCssClassForStatus(e[index].Services[indexService].ProductStatusString),"FREEDNS"==e[index].Services[indexService].ProductTypeString.toUpperCase()&&(e[index].Services[indexService].SpanCssClass="")),e[index].Services[indexService].Status=[],null!=e[index].Services[indexService].Name&&null!=e[index].Services[indexService]&&""!=e[index].Services[indexService]&&("SSL"==e[index].Services[indexService].ProductTypeString.toUpperCase()?(e[index].Services[indexService].Status.push(e[index].Services[indexService].Name),e[index].Services[indexService].Status.push(e[index].Services[indexService].ProductTypeDescription)):e[index].Services[indexService].Status.push(e[index].Services[indexService].Name)),null!=e[index].Services[indexService].ProductStatusString&&null!=e[index].Services[indexService].ProductStatusString&&""!=e[index].Services[indexService].ProductStatusString&&e[index].Services[indexService].Status.push("<strong>Status:</strong> "+e[index].Services[indexService].ProductStatusString),"DOMAIN"==e[index].Services[indexService].ProductTypeString.toUpperCase()&&(1==e[index].Services[indexService].WGActiveStatus?e[index].Services[indexService].Status.push("<strong>Domain Privacy: </strong>Active"):0==e[index].Services[indexService].WGActiveStatus&&e[index].Services[indexService].Status.push("<strong>Domain Privacy: </strong>InActive"),1==e[index].Services[indexService].IsPDNSAvailable&&1==e[index].Services[indexService].IsPDNSActive&&null!=e[index].Services[indexService].PDNSSubID&&0<e[index].Services[indexService].PDNSSubID&&("PREMIUM"==e[index].ProviderSubType.toUpperCase()?e[index].Services[indexService].Status.push("<strong>PremiumDNS: </strong>Active"):"PREMIUM"!=e[index].ProviderSubType.toUpperCase()&&e[index].Services[indexService].Status.push("<strong>PremiumDNS: </strong>InActive"))),null!=e[index].Services[indexService].DueDate&&null!=e[index].Services[indexService].DueDate&&""!=e[index].Services[indexService].DueDate&&(e[index].Services[indexService].DueDate=h.Date.dateFromJson(e[index].Services[indexService].DueDate),e[index].Services[indexService].Status.push("<strong>Due Date:</strong> "+s("date")(new Date(e[index].Services[indexService].DueDate),"MMM dd, yyyy"))),null!=e[index].Services[indexService].ExpirationDate&&null!=e[index].Services[indexService].ExpirationDate&&""!=e[index].Services[indexService].ExpirationDate&&e[index].Services[indexService].Status.push("<strong>Expiration:</strong> "+s("date")(new Date(e[index].Services[indexService].ExpirationDate),"MMM dd, yyyy")),e[index].RenewByDate&&0<m.calculateDateDiffDays(e[index].Services[0].ExpirationDate,e[index].RenewByDate)&&e[index].Services[indexService].Status.push("<strong>Renew By:</strong> "+s("date")(new Date(e[index].RenewByDate),"MMM dd, yyyy")),"DOMAIN"!=e[index].Services[indexService].ProductTypeString.toUpperCase()&&null!=e[index].Services[indexService].TrailEndInDays&&null!=e[index].Services[indexService].TrailEndInDays&&""!=e[index].Services[indexService].TrailEndInDays&&e[index].Services[indexService].Status.push("<strong>Trial:</strong> Ends in "+e[index].Services[indexService].TrailEndInDays+" days");return e},m.GetCssClassForStatus=function(e){var t="";return"ACTIVE"==e.toUpperCase()||"ACTIVETRIAL"==e.toUpperCase()||"ACTIVEBLOCKED"==e.toUpperCase()?t="ok":"EXPIRED"==e.toUpperCase()?t="danger":"ALERT"==e.toUpperCase()||"ALERTTRIAL"==e.toUpperCase()||"ALERTBLOCKED"==e.toUpperCase()?t="alert":"GRACE"==e.toUpperCase()&&(t="grace"),t},m.FeatureNotEmplemented=function(){m.pageNotification.stuckNotifications.addSuccess("This feature is not implemented",{hasClose:!0,isAutoHide:!0})},m.autoRenewClick=new h.AsyncStateBehavior({constructor:function(){var u=this.instance;u.domainWhoIsAutoRenew=function(l,o,d,e){p.domainDetails.IsManagerHasRightsToPerformThisAction(o,e).then(function(e){var n,r,t,c,a,i;e?(null!=d.WGAutoRenew&&null!=d.WGAutoRenew&&d.WGAutoRenew!=isNaN||(d.WGAutoRenew=!1),null!=d.IsAutoRenew&&null!=d.IsAutoRenew&&d.IsAutoRenew!=isNaN||(d.IsAutoRenew=!1),null!=d.PDNSAutoRenew&&null!=d.PDNSAutoRenew&&d.PDNSAutoRenew!=isNaN||(d.PDNSAutoRenew=!1),u.asyncStatus(h.AsyncStatus.Loading),n=function(e,t){return f.open({templateUrl:"/Domains/PromptModalOpen",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return e},modalContent:function(){return t}}})},r=function(t,e,n,a,i){p.domainList.domainWhoIsAutoRenew(t,o,e,n).then(function(e){e.sender="AR_"+t,e.Error?e.Msg=m.DomainInfoRes.error_Alert_Dynamic_AssociatesDomainAutoRenew:e.Msg=m.DomainInfoRes.success_Alert_Dynamic_AssociatesDomainAutoRenew,u.asyncStatus(e.Error?h.AsyncStatus.Error:h.AsyncStatus.Success,e),e.Error&&null!=i?i():e.Error||null==a||a()})},t=function(e,t,i,o,s){n(e,t).result.then(function(){var e,t,n,a;null!=i&&r(l,d.IsAutoRenew,c?d.IsAutoRenew:d.WGAutoRenew,null,function(){d.IsAutoRenew=!d.IsAutoRenew}),null!=o&&null!=d.WGActiveStatus&&null!=d.WGActiveStatus&&r("WG",d.IsAutoRenew,c?d.IsAutoRenew:d.WGAutoRenew,null,function(){d.WGAutoRenew=!d.WGAutoRenew}),null!=s&&null!=d.PDNSSubID&&null!=d.PDNSSubID&&0<d.PDNSSubID&&(e=d.PDNSSubID,t=d.PDNSAutoRenew,n=null,a=function(){d.PDNSAutoRenew=!d.PDNSAutoRenew},p.domainList.setPremiumDnsAutoRenew(e,t).then(function(e){e.Error?e.Msg=m.DomainInfoRes.error_Alert_Dynamic_AssociatesDomainAutoRenew:e.Msg=m.DomainInfoRes.success_Alert_Dynamic_AssociatesDomainAutoRenew,u.asyncStatus(0==e.Error?h.AsyncStatus.Success:h.AsyncStatus.Error,e),e.Error&&null!=a?a():e.Error||null==n||n()}))},function(){null!=i&&null!=o&&null!=s&&i&&o&&s?(c&&(d.WGAutoRenew=!d.WGAutoRenew),a&&(d.PDNSAutoRenew=!d.PDNSAutoRenew),r(l,d.IsAutoRenew,d.WGAutoRenew,null,function(){d.IsAutoRenew=!d.IsAutoRenew})):!i||!o||null!=s&&s?!i||null!=o&&o||!s?null==i||null==o||null==s||i||o||s?i||o||null!=s&&!s?i||null!=o&&!o||s||(d.IsAutoRenew=!d.IsAutoRenew,d.PDNSAutoRenew=!d.PDNSAutoRenew,u.activeNotification&&u.activeNotification.destroy&&u.activeNotification.destroy()):(d.WGAutoRenew=!d.WGAutoRenew,d.IsAutoRenew=!d.IsAutoRenew,u.activeNotification&&u.activeNotification.destroy&&u.activeNotification.destroy()):(d.IsAutoRenew=!d.IsAutoRenew,d.WGAutoRenew=!d.WGAutoRenew,d.PDNSAutoRenew=!d.PDNSAutoRenew,u.activeNotification&&u.activeNotification.destroy&&u.activeNotification.destroy()):(d.PDNSAutoRenew=!d.PDNSAutoRenew,r(l,d.IsAutoRenew,c?d.IsAutoRenew:d.WGAutoRenew,null,function(){d.IsAutoRenew=!d.IsAutoRenew})):(d.WGAutoRenew=!d.WGAutoRenew,r(l,d.IsAutoRenew,d.WGAutoRenew,null,function(){d.IsAutoRenew=!d.IsAutoRenew}))})},"DOMAIN"==l?(c=!d.WGAutoRenew&&null!=d.WGActiveStatus,a=!d.PDNSAutoRenew&&null!=d.PDNSSubID&&0<d.PDNSSubID,null!=d.WGActiveStatus&&null!=d.WGActiveStatus||null!=d.PDNSSubID&&null!=d.PDNSSubID&&0<d.PDNSSubID?(null!=d.WGActiveStatus&&null!=d.WGActiveStatus&&(d.IsAutoRenew&&c?d.WGAutoRenew=!0:d.IsAutoRenew||(d.WGAutoRenew=!1)),null!=d.PDNSSubID&&null!=d.PDNSSubID&&0<d.PDNSSubID&&(d.IsAutoRenew&&a?d.PDNSAutoRenew=!0:d.IsAutoRenew||(d.PDNSAutoRenew=!1)),d.IsAutoRenew&&c&&a?t(m.DomainInfoRes.prompt_Titel_AutoRenew_TurnOn,m.DomainInfoRes.prompt_Content_AutoRenew_PM1,!0,!0,!0):!d.IsAutoRenew||!c||a||null!=d.PDNSSubID&&null==d.IsPDNSActiveStatus?d.IsAutoRenew&&a&&!c?(i=d.WGActiveStatus,c||null!=d.WGActiveStatus&&d.WGActiveStatus||(i=null),t(m.DomainInfoRes.prompt_Titel_AutoRenew_TurnOn,m.DomainInfoRes.prompt_Content_AutoRenew_PM3,!0,i,!0)):d.IsAutoRenew||c||null==d.WGActiveStatus||a||null==d.PDNSSubID?d.IsAutoRenew||c||null==d.WGActiveStatus||!a&&null!=d.PDNSSubID?d.IsAutoRenew||!c&&null!=d.WGActiveStatus||a||null==d.PDNSSubID?(d.IsAutoRenew,r(l,d.IsAutoRenew,c?d.IsAutoRenew:d.WGAutoRenew,null,function(){d.IsAutoRenew=!d.IsAutoRenew})):(i=!0,!c&&null!=d.WGActiveStatus&&d.WGActiveStatus||(i=null),t(m.DomainInfoRes.prompt_Titel_AutoRenew_TurnOff,m.DomainInfoRes.prompt_Content_AutoRenew_PM6,!1,i,!1)):(i=!0,!a&&null!=d.PDNSSubID&&d.IsPDNSActiveStatus||(i=null),t(m.DomainInfoRes.prompt_Titel_AutoRenew_TurnOff,m.DomainInfoRes.prompt_Content_AutoRenew_PM5,!1,!1,i)):t(m.DomainInfoRes.prompt_Titel_AutoRenew_TurnOff,m.DomainInfoRes.prompt_Content_AutoRenew_PM4,!1,!1,!1):(i=d.IsPDNSActiveStatus,a||null!=d.PDNSSubID&&d.IsPDNSActiveStatus||(i=null),t(m.DomainInfoRes.prompt_Titel_AutoRenew_TurnOn,m.DomainInfoRes.prompt_Content_AutoRenew_PM2,!0,!0,i))):r(l,d.IsAutoRenew,c?d.IsAutoRenew:d.WGAutoRenew,null,function(){d.IsAutoRenew=!d.IsAutoRenew})):"WG"==l&&(!d.IsAutoRenew&&d.WGAutoRenew?n(m.DomainInfoRes.prompt_Titel_AutoRenew_WGTurnOn,m.DomainInfoRes.prompt_Content_AutoRenew_PM7).result.then(function(){d.IsAutoRenew=!0,r(l,d.IsAutoRenew,c?d.IsAutoRenew:d.WGAutoRenew,null,function(){d.IsAutoRenew=!d.IsAutoRenew}),null!=d.WGActiveStatus&&null!=d.WGActiveStatus&&r(l,d.IsAutoRenew,c?d.IsAutoRenew:d.WGAutoRenew,null,function(){d.WGAutoRenew=!d.WGAutoRenew})},function(){d.WGAutoRenew=!d.WGAutoRenew,u.activeNotification&&u.activeNotification.destroy&&u.activeNotification.destroy()}):r(l,d.IsAutoRenew,c?d.IsAutoRenew:d.WGAutoRenew,null,function(){d.IsAutoRenew=!d.IsAutoRenew}))):("DOMAIN"==l?d.IsAutoRenew=!d.IsAutoRenew:d.WGAutoRenew=!d.WGAutoRenew,m.pageNotification.stuckNotifications.addError("User has no rights to perform this action",{hasClose:!0,isAutoHide:!0}))})},u.domainPremiumDNSAutoRenew=function(e,t){u.asyncStatus(h.AsyncStatus.Loading);var n,a;!t.IsAutoRenew&&t.PDNSAutoRenew?(n=m.DomainInfoRes.prompt_Titel_AutoRenew_PDNSTurnOn,a=m.DomainInfoRes.prompt_Content_AutoRenew_PM8,f.open({templateUrl:"/Domains/PromptModalOpen",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return n},modalContent:function(){return a}}})).result.then(function(){null==t.WGAutoRenew&&(t.WGAutoRenew=!1),t.IsAutoRenew=!0,p.domainList.domainWhoIsAutoRenew("DOMAIN",t.Name,t.IsAutoRenew,t.WGAutoRenew).then(function(e){e.Error&&(t.IsAutoRenew=!1)}),p.domainList.setPremiumDnsAutoRenew(e,t.PDNSAutoRenew).then(function(e){e.Error?(e.Msg=m.DomainInfoRes.error_Alert_Dynamic_AssociatesDomainAutoRenew,t.PDNSAutoRenew=!t.PDNSAutoRenew):e.Msg=m.DomainInfoRes.success_Alert_Dynamic_AssociatesDomainAutoRenew,u.asyncStatus(0==e.Error?h.AsyncStatus.Success:h.AsyncStatus.Error,e)})},function(){t.PDNSAutoRenew=!t.PDNSAutoRenew,u.activeNotification&&u.activeNotification.destroy&&u.activeNotification.destroy()}):p.domainList.setPremiumDnsAutoRenew(e,t.PDNSAutoRenew).then(function(e){e.Error?e.Msg=m.DomainInfoRes.error_Alert_Dynamic_AssociatesDomainAutoRenew:e.Msg=m.DomainInfoRes.success_Alert_Dynamic_AssociatesDomainAutoRenew,u.asyncStatus(0==e.Error?h.AsyncStatus.Success:h.AsyncStatus.Error,e)})},u.serviceAutoRenew=function(t,e,n){null!=t&&"HOSTING"==t.ProductTypeString?(u.asyncStatus(h.AsyncStatus.Loading),p.domainList.hostingIsAutoRenew(t.ProductId,t.IsAutoRenew).then(function(e){e.Error&&(t.IsAutoRenew=!t.IsAutoRenew),u.asyncStatus(0==e.Error?h.AsyncStatus.Success:h.AsyncStatus.Error,e)})):p.domainDetails.IsManagerHasRightsToPerformThisAction(n,e).then(function(e){e?(u.asyncStatus(h.AsyncStatus.Loading),null!=t&&"PRIVATEEMAIL"==t.ProductTypeString&&p.privateEmail.changeAutoRenew(t.ProductId,t.IsAutoRenew).then(function(e){e.Error&&(t.IsAutoRenew=!t.IsAutoRenew),u.asyncStatus(0==e.Error?h.AsyncStatus.Success:h.AsyncStatus.Error,e)})):(t.IsAutoRenew=!t.IsAutoRenew,m.pageNotification.stuckNotifications.addError("User has no rights to perform this action",{hasClose:!0,isAutoHide:!0}))})}},onSuccess:function(e){var t=this.instance;t.asyncStatus(h.AsyncStatus.Active),t.activeNotification=m.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0})},onActive:function(e){this.instance},onLoading:function(e){this.instance.activeNotification=m.pageNotification.stuckNotifications.addLoading("Loading...",!1)},onLocked:function(e){this.instance},onError:function(e){m.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),m.RemoveAutoRenew=function(e){for(actionindex=0;actionindex<e.length;actionindex++)"Auto-Renew"==e[actionindex].DisplayText&&e.splice(actionindex,1)},m.AuthorizeTransferInModal=function(e,t){a.showAuthorizeTransferModal(e,t).then(function(e){m.pageBehavior.activeNotification=m.pageNotification.stuckNotifications.addSuccess(DomainTransferRes.message_AutorizeTransfer_Success,{hasClose:!0,isAutoHide:!0})})},m.TransferInRefreshStatus=function(e,t){p.domainList.getTransferDetails(e,t).then(function(e){e.Error?m.pageBehavior.activeNotification=m.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0}):null!=e&&null!=e.Result&&(m.pageBehavior.pageNgGridSettings.parameters.storage.requestData[t].model.ContextualMessage=e.Result.Data[0].ContextualMessage,m.pageBehavior.pageNgGridSettings.parameters.storage.requestData[t].model.Actions=e.Result.Data[0].Actions,m.pageBehavior.pageNgGridSettings.parameters.storage.requestData[t].model.Services[0].Actions=e.Result.Data[0].Services[0].Actions,m.pageBehavior.activeNotification=m.pageNotification.stuckNotifications.addSuccess("Transfer In status refreshed",{hasClose:!0,isAutoHide:!0}))})},m.TransferInResendEmail=function(e){p.domainTransfer.resendEmail(e).then(function(e){e.Error?m.pageBehavior.activeNotification=m.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0}):m.pageBehavior.activeNotification=m.pageNotification.stuckNotifications.addSuccess(DomainTransferRes.message_ResendEmail_Success,{hasClose:!0,isAutoHide:!0})})},m.action=function(e,t){var i;if(null!=e||null!=t)return"RENEW"!=t.toUpperCase()&&"BUY NEW"!=t.toUpperCase()&&"LEARN MORE"!=t.toUpperCase()||"#"!=e.Actions[0].DestinationURL?void("AUTHORIZE TRANSFER"==t.toUpperCase()?(i=e.split(","),m.AuthorizeTransferInModal(i[0],i[1])):"RESEND EMAIL"==t.toUpperCase()?m.TransferInResendEmail(e):"REFRESH STATUS"==t.toUpperCase()?(i=e.split(","),m.TransferInRefreshStatus(i[0],i[1])):"VERIFY CONTACTS"==t.toUpperCase()?m.VerifyContacts.onClick(e):"REDIRECT DOMAIN"==t.toUpperCase()?(i=e.split(","),p.domainDetails.IsManagerHasRightsToPerformThisAction(i[0],i[1]).then(function(e){e?new h.AsyncStateBehavior({constructor:function(){var a=this.instance;a.asyncStatus(h.AsyncStatus.Loading),p.domainDetails.getUrlForwardingInfo(i[0]).then(function(e){a.asyncStatus(0==e.Error?h.AsyncStatus.Success:h.AsyncStatus.Error,e);var t,n=JSON.parse(e.Result);e.Error||null==n||(n.IsShowManageButton?(t="/Domains/dns/managehostrecords/"+i[0]+"/domainlist",window.location.href=t):n.IsShowSetupButton?m.AddRecords(i[0],"addRedirect",0,"URL",n):n.IsShowEditButton&&m.AddRecords(i[0],"editRedirect",n.HostId,"URL",n))})},onSuccess:function(e){this.instance},onActive:function(e){this.instance},onLoading:function(e){this.instance.activeNotification=m.pageNotification.stuckNotifications.addLoading("Loading...",!1)},onLocked:function(e){this.instance},onError:function(e){m.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}):m.pageNotification.stuckNotifications.addError("'User has no rights to perform this action",{hasClose:!0,isAutoHide:!0})})):"REDIRECT EMAIL"==t.toUpperCase()?(i=e.split(","),p.domainDetails.IsManagerHasRightsToPerformThisAction(i[0],i[1]).then(function(e){e?new h.AsyncStateBehavior({constructor:function(){var n=this.instance;n.asyncStatus(h.AsyncStatus.Loading),p.domainDetails.getEmailForwardingInfo(i[0]).then(function(e){n.asyncStatus(0==e.Error?h.AsyncStatus.Success:h.AsyncStatus.Error,e);var t=e.Result;e.Error||null==t||m.openResolveConflictRedirectEmailModalPopUp(i[0],JSON.parse(t))})},onSuccess:function(e){this.instance.asyncStatus(h.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance.activeNotification=m.pageNotification.stuckNotifications.addLoading("Loading...",!1)},onLocked:function(e){this.instance},onError:function(e){m.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}):m.pageNotification.stuckNotifications.addError("'User has no rights to perform this action",{hasClose:!0,isAutoHide:!0})})):"AUTHORIZE FREEDNS"==t.toUpperCase()?m.openAuthorizeFreeDNSModalPopUp.onClick(e):"REMOVE"==t.toUpperCase()&&(i=e.split(","),m.RemoveSSlCertificateConfirmation(i[0],i[1]))):(m.symantecCertDetails={certificateId:e.ProductId,certificateType:e.Name,validYears:e.ValidYears,sansQty:e.sansQty},"LEARN MORE"==t.toUpperCase()&&(t="activate"),void u.openPopupWindow(m.symantecCertDetails,t.toLowerCase(),SymantecSunsetDateWithFormat,SiteServerNameUrl))},m.IsEmailRedirectModalOpened=!1,m.openResolveConflictRedirectEmailModalPopUp=function(e,t){var n;t.IsUsingPrivateEmail||t.IsUsingNamecheapHosting||"Custom"==t.DnsType||"NONE"!=t.EmailType&&"FWD"!=t.EmailType?m.IsEmailRedirectModalOpened||((n=f.open({templateUrl:"/Domains/DomainDetails/ResolveConflictRedirectEmailModal",controller:"domainResolveConflictRedirectEmailCtrl",size:"lg",backdrop:"static",resolve:{RedirectEmailViewModel:function(){return t},DomainName:function(){return e},PageFrom:function(){return"domainlist"}}})).result.then(function(e){m.IsEmailRedirectModalOpened=!1,null!=e&&""!=e&&(this.instance,m.pageNotification.stuckNotifications.addError(e,{hasClose:!0,isAutoHide:!0}))}),n.opened.then(function(){m.IsEmailRedirectModalOpened=!0})):"NONE"!=t.EmailType&&"FWD"!=t.EmailType||m.RedirectToManagePage(e,t.EmailType)},m.RedirectToManagePage=function(e,t){var n="/Domains/RedirectEmailList/"+e+"/domainlist";"NONE"==t?p.domainDetails.resolveConflictSetEmailType(e,t).then(function(e){0==e.Error&&(window.location.href=n)}):"FWD"==t&&(window.location.href=n)},m.IsDomainRedirectOpen=!1,m.AddRecords=function(n,a,i,o,s){var r=a,s=s;p.domainDetails.IsManagerHasRightsToPerformThisAction(n,"hosts").then(function(e){var t;m.IsDomainRedirectOpen||((t=f.open({templateUrl:"/Domains/Dns/AdvancedDNSAddRecordsModel/",controller:"addDnsRecords",size:"lg",backdrop:"static",resolve:{openModelParameter:function(){return m.pageTypeParam=null!=a?a:"addNew"},domainName:function(){return n},hostingID:function(){return m.hostRecordID=null!=i?i:0},hostRecordType:function(){return m.editHostRecordType=null!=i?o:""},pageModelClass:function(){return""!=s&&null!=s?s:s=0},domainType:function(){return m.isSubDomain}}})).result.then(function(e){m.IsDomainRedirectOpen=!1,null!=e&&("AddDDNS"==r||"EditDDNS"==r?new h.AsyncStateBehavior({constructor:function(){var t=this.instance;t.activeNotification=m.pageNotification.stuckNotifications.addLoading("Please wait.",!0),p.domainDns.getDynamicRecords(n,m.isSubDomain,!0).then(function(e){e.Error?($("div.site-msg.has-close.error.alert").show(),m.errormessage=e.Msg,t.asyncStatus(h.AsyncStatus.Error,e)):(m.ddnsHostRecords=e.Result.HostInfo,t.asyncStatus(h.AsyncStatus.Success,e))})},onSuccess:function(){m.pageNotification.alerts.clear()},onError:function(){m.pageNotification.alerts.clear()}}):"addNew"==r?m.LoadAdvancedDNSView():"edit"==r||"manageAddNew"==r?window.location.href="/domains/dns/managehostrecords/"+n+"/"+m.pageFrom:"addRedirect"!=r&&"editRedirect"!=r||(e.isResultSuccess&&!e.isCancel?m.pageNotification.stuckNotifications.addSuccess(m.DomainInfoRes.success_Site_RedirectDomain,{hasClose:!0,isAutoHide:!0}):e.isResultSuccess||e.isCancel||m.pageNotification.stuckNotifications.addError(m.DomainInfoRes.error_Site_RedirectDomain,{hasClose:!0,isAutoHide:!0})))}),t.opened.then(function(){m.IsDomainRedirectOpen=!0}))})},m.VerifyContacts=new h.AsyncStateBehavior({constructor:function(){var t=this.instance;t.onClick=function(e){t.asyncStatus(h.AsyncStatus.Loading),p.domainDetails.resendNotificationEmail(e).then(function(e){t.asyncStatus(0==e.Error?h.AsyncStatus.Success:h.AsyncStatus.Error,e)})}},onSuccess:function(e){var t=this.instance;t.asyncStatus(h.AsyncStatus.Active),null!=e&&null!=e&&""!=e&&(t.activeNotification=m.pageNotification.stuckNotifications.addSuccess(m.DomainInfoRes.success_Alert_RegistrantResendNotification,{hasClose:!0,isAutoHide:!0}))},onActive:function(){},onError:function(e){var t=this.instance;t.asyncStatus(h.AsyncStatus.Active),t.activeNotification=m.pageNotification.stuckNotifications.addError(m.DomainInfoRes.failure_Alert_RegistrantResendNotification,{hasClose:!0,isAutoHide:!0})},onLoading:function(e){this.instance.activeNotification=m.pageNotification.stuckNotifications.addLoading(m.DomainInfoRes.static_Loading_RegistrantResendNotification,!0)}}),m.IsAuthorizeFreeDNSModalPopUpOpened=!1,m.openAuthorizeFreeDNSModalPopUp=new h.AsyncStateBehavior({constructor:function(){this.instance.onClick=function(t){var e=m.pageBehavior.pageNgGridSettings.parameters.storage.pageData.map(function(e){return e.model}).filter(function(e){return-1!==t.indexOf(e.DomainName)})[0],i=function(e,t){var n;n=e.DomainName!==t?e.Services.filter(function(e){return e.Name===t})[0]:e.Services[0];return n}(e,t);var o={domainName:e.DomainName,authFlow:i.ShowTxtAuthHint?"txt":"email",hostName:t};m.GetFreeDnsAuthorizationEmailList=new h.AsyncStateBehavior({constructor:function(){var n=this.instance;r.all({emails:p.domainListAction.getFreeDnsAuthorizationEmailList(o.hostName),txtRecord:p.domainListAction.getAuthorizationTxtKey(o.domainName,o.hostName)}).then(function(e){var t=e.emails.Error||e.txtRecord.Error?h.AsyncStatus.Error:h.AsyncStatus.Success;n.asyncStatus(t,e)})},onSuccess:function(e){var t,a=this.instance;o.emails=e.emails.Result,o.txtRecord=e.txtRecord.Result.AuthorizationTxtKey,m.IsAuthorizeFreeDNSModalPopUpOpened||((t=f.open({templateUrl:"/Domains/AuthorizeFreeDNS",controller:"authorizeDNSCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{DomainInfo:function(){return o}}})).result.then(function(e){var t,n;m.IsAuthorizeFreeDNSModalPopUpOpened=!1,e&&e.Msg&&"Success"==e.Msg&&("txt"==e.authFlow?(t="Authorization via TXT record was initiated successfully",i.ShowTxtAuthHint=!0,i.TxtAuthKey=o.txtRecord):(t=m.DomainInfoRes.success_Site_FreeDnsAuthEmailSavedSuccessMessage,i.ShowTxtAuthHint=!1),a.activeNotification=m.pageNotification.stuckNotifications.addSuccess(t,{hasClose:!0,isAutoHide:!0})),e&&e.Msg&&"Error"==e.Msg&&(n=m.DomainInfoRes.error_Site_FreeDnsAuthEmailSavedErrorMessage,a.activeNotification=m.pageNotification.stuckNotifications.addError(n,{hasClose:!0,isAutoHide:!0}))}),t.opened.then(function(){m.IsAuthorizeFreeDNSModalPopUpOpened=!0}))},onError:function(){var e=this.instance,t=m.DomainInfoRes.error_Site_FreeDnsAuthEmailRetrieveFailed;e.activeNotification=m.pageNotification.stuckNotifications.addError(t,{hasClose:!0,isAutoHide:!0})}})}}}),m.RemoveSSlCertificateConfirmation=function(t,e){var n=f.open({templateUrl:"/Common/PromptRemove",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return m.SSLInfoRes.static_RemoveHeading.replace("{0}",e)},modalContent:function(){return"Once an SSL certificate has been removed, it cannot be accessed again. Are you sure you want to remove this SSL certificate?"}}});n.result.then(function(e){"yes"==e&&function(e,t){if(void 0===t&&t)t={};else try{t=JSON.parse(t)}catch(e){t={}}t._NcCompliance=$.cookie("_NcCompliance"),function(e,t,n,a){var i=document.createElement("form");i.target=a||"_self";i.method=t,i.action=e,n&&Object.keys(n).forEach(function(e){var t=document.createElement("input");t.type="hidden",t.name=e,t.setAttribute("value",n[e]),i.appendChild(t)});document.body.appendChild(i),i.submit()}(e,"POST",t)}("/domains/ssl/remove/"+t+"/"+t+"/DOMAINLIST")},function(){n=null})},m.OnViewChange=function(e){"DOMAINSONLY"==e.toUpperCase()&&(window.location.href="/domains/ChangeProductViewOption/"+e)},m.calculateCrossSellDiscount=function(e,t){return 0===e?0:Math.round((e-t)/e*100)}}]),app.controller("domainSetEmailRefreshDurationModal",["$scope","$modalInstance","httpRepository","pageHelper","$timeout","notificationService","$filter","$document","slotId","duration","domainName",function(n,t,e,a,i,o,s,r,c,l,d){n.selectedduration=l,0==n.selectedduration&&(n.selectedduration=3),n.cancelClick=function(){t.close("")},n.SaveChangesToSetEmailRefreshDuration=new a.AsyncStateBehavior({constructor:function(){var t=this.instance;t.onClick=function(){$(".opac").delay(25).queue(function(){$(this).addClass("page-load").css({"text-align":"left",padding:"0em",opacity:"0.5","background-position":"center 2.5em"})}),e.domainDetails.setEmailRefreshDuration(d,c,n.selectedduration).then(function(e){t.asyncStatus(0==e.Error?a.AsyncStatus.Success:a.AsyncStatus.Error,e)})}},onSuccess:function(e){this.instance.asyncStatus(a.AsyncStatus.Active),"NORIGHTS"==e.Result?t.close(e.Result):t.close(n.selectedduration)},onActive:function(){}})}]),app.controller("emailForwardingBulkActionCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","notificationService","pageHelper","$q","ncGridParams","$sce","ncWizardService",function(g,e,s,t,r,n,v,a,c,o,l){g.pageHelper=v,g.step1Notification=new n.instance,g.pageNotification=new n.instance,g.domainEmailRedirectnotificationAlertArguments={hasClose:!0,isAutoHide:!0},g.DomainsInfo=DomainInfoRes,g.SelectedDomainNames="",g.SelectedmailBoxNames="",g.SelectedmailBoxIds="",g.UsedForwarders=0,g.AvailableForwarders=50,g.CatchAllFlag=!1,g.Used=0,g.Total=0,g.HideHorizontalLine=!1,g.ShowCatchAllButton=!0,g.ShowActionButtons=!0,g.showDoneButton=!1,this.initialize=function(e){g.Model=e.Model,g.Messages=e.Messages,g.SelectedDomainList=[]},g.CancelBulkAction=e.closeLightbox=function(){s.domainList.goToDomainList()},g.pageAction=new v.AsyncStateBehavior({constructor:function(){var o=this.instance;o.EmailForwardingConformation1=!1,o.EmailForwardingConformation2=!1,o.model=null,o.pageNgGridSettings=new c,o.pageNgGridSettings.parameters.search.serchPropertyNames=["MailboxName","ForwardTo"],o.pageNgGridSettings.settings.getData=function(e,t){o.filterStatusPropertyNames=[],o.filterFlagsPropertyNames=[]},o.pageNgGridSettings.settings.reload(),o.Step1Action=function(){if(g.step1Notification.alerts.clear(),g.SelectedDomainList=[],$("input:checkbox[name=selecteddomains]:checked").each(function(){var e={};e.DomainName=$(this).attr("id"),g.SelectedDomainList.push(e)}),0==o.EmailForwardingConformation1)return g.step1Notification.alerts.addError(g.Messages.EmailForwardingConformation,{hasClose:!0,isAutoHide:!0}),$("html, body").animate({scrollTop:$('div[link="step1Notification"]').offset().top-20},200),!1;0<g.SelectedDomainList.length?(o.asyncStatus(v.AsyncStatus.Active),l.moveNext(),g.pageNotification.stuckNotifications.clear()):(0==g.SelectedDomainList.length?g.step1Notification.alerts.addError(g.Messages.SelectAtleastOneDomainToProceed,{hasClose:!0,isAutoHide:!0}):g.step1Notification.alerts.addError(g.Messages.CannotProceedToSetp2,{hasClose:!0,isAutoHide:!0}),$("html, body").animate({scrollTop:$('div[link="step1Notification"]').offset().top-20},200))},o.Step2Action=function(){g.pageNotification.stuckNotifications.clear(),g.pageNotification.stuckNotifications.addLoading("Processing",{hasClose:!0,isAutoHide:!0});for(var e=g.pageAction.pageNgGridSettings.parameters.storage.requestData,t="",n=0;n<g.SelectedDomainList.length;n++)t+=g.SelectedDomainList[n].DomainName+",";for(var a="",i="",n=0;n<e.length;n++)a+=e[n].MailboxName+",",i+=e[n].ForwardTo+",";""!=t&&""!=a&&""!=i&&e.length<=50&&s.emailRedirect.saveBulkEmailForwarders(t,a,i,o.EmailForwardingConformation2).then(function(e){null!=e&&null!=e.Result&&e.Result?(g.pageNotification.alerts.clear(),g.pageNotification.stuckNotifications.clear(),g.CancelBulkAction()):(g.pageNotification.alerts.clear(),g.pageNotification.stuckNotifications.clear(),g.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0}))})}},onSuccess:function(e){var t=this.instance;"getModel"==e.sender&&(t.showContent=!0,t.model=e.Result),g.pageNotification.alerts.clear(),g.pageNotification.stuckNotifications.clear(),t.activeNotification=g.pageNotification.stuckNotifications.addSuccess(e.Message,{hasClose:!0,isAutoHide:!0})},onActive:function(e){var t=this.instance;g.pageNotification.alerts.clear(),t.asyncStatus(v.AsyncStatus.Active)},onLoading:function(e){var t=this.instance;g.pageNotification.alerts.clear(),t.activeNotification=g.pageNotification.stuckNotifications.addLoading("Please wait.",!1),t.isDisabled=!0,t.showError=!1},onLocked:function(e){this.instance},onWarning:function(e){var t=this.instance;g.pageNotification.alerts.clear(),t.activeNotification=g.pageNotification.stuckNotifications.addWarning("<B>"+e+"</B>",{hasClose:!0,isAutoHide:!0}),t.isDisabled=!1,t.showError=!1},onError:function(e){var t=this.instance;g.pageNotification.alerts.clear(),g.pageNotification.stuckNotifications.clear(),t.activeNotification=g.pageNotification.stuckNotifications.addError(e.Message,{hasClose:!0,isAutoHide:!0})}}),g.IsForwarderModalOpened=!1,g.openForwarderModal=function(a,e,t,n,i){var o;g.IsForwarderModalOpened||((o=r.open({templateUrl:"/Domains/BulkForwarderModalPopup",controller:"domainBulkEmailRedirectActionCtrl",size:"lg",backdrop:"static",resolve:{domainName:function(){return"example.com"},mailBoxName:function(){return e},mailBoxId:function(){return n},forwardTo:function(){return t},action:function(){return a},title:function(){return"add"==a?title=g.DomainsInfo.static_Modal_Title_AddForwarder:"edit"==a&&(title=g.DomainsInfo.static_Modal_Title_EditForwarder),title},index:function(){return i}}})).result.then(function(t){g.IsForwarderModalOpened=!1;var e,n;this.instance;null!=t&&null!=t&&""!=t&&("Success"==t.Call?(e="",n=g.pageAction.pageNgGridSettings.parameters.storage.requestData,"add"==a?0==n.filter(function(e){return e.MailboxName.replace(/ /g,"")==t.mailBoxName.replace(/ /g,"")&&e.ForwardTo.replace(/ /g,"")==t.forwardTo.replace(/ /g,"")}).length?(g.AddItemInGrid(t),e=g.DomainsInfo.success_Contextual_AddForwarder.replace("{Forwarder}",t.mailBoxName+"@"+t.domainName),g.pageNotification.stuckNotifications.addSuccess(e,g.domainEmailRedirectnotificationAlertArguments)):g.pageNotification.stuckNotifications.addError("Forwarder can not be duplicated.",g.domainEmailRedirectnotificationAlertArguments):"edit"==a&&(0==n.filter(function(e){return e.MailboxName.replace(/ /g,"")==t.mailBoxName.replace(/ /g,"")&&e.ForwardTo.replace(/ /g,"")==t.forwardTo.replace(/ /g,"")}).length?(g.UpdateItemInGrid(t),e=g.DomainsInfo.success_Contextual_EditForwarder.replace("{Forwarder}",t.oldMailBoxName+"@"+t.domainName),g.pageNotification.stuckNotifications.addSuccess(e,g.domainEmailRedirectnotificationAlertArguments)):g.pageNotification.stuckNotifications.addError("Forwarder can not be duplicated.",g.domainEmailRedirectnotificationAlertArguments))):"Error"==t.Call&&("SameEntry"!=t.SameEntryFlag?g.pageNotification.stuckNotifications.addError(g.DomainsInfo.error_Site_AddEditForwarder,g.domainEmailRedirectnotificationAlertArguments):g.pageNotification.stuckNotifications.addWarning(g.DomainsInfo.error_Site_AddEditForwarder,g.domainEmailRedirectnotificationAlertArguments)))}),o.opened.then(function(){g.IsForwarderModalOpened=!0}))},g.IsForwarderModalCatchAllOpened=!1,g.openForwarderModalCatchAll=function(n,e,t,a,i){var o;g.IsForwarderModalCatchAllOpened||((o=r.open({templateUrl:"/Domains/BulkForwarderModalCatchAllPopup",controller:"domainBulkEmailRedirectActionforCatchAllCtrl",size:"lg",backdrop:"static",resolve:{domainName:function(){return"example.com"},mailBoxName:function(){return e},mailBoxId:function(){return a},forwardTo:function(){return t},action:function(){return n},title:function(){return"add"==n?title=g.DomainsInfo.static_Modal_Title_AddCatchAll:"edit"==n&&(title=g.DomainsInfo.static_Modal_Title_EditCatchAll),title},index:function(){return i}}})).result.then(function(e){g.IsForwarderModalCatchAllOpened=!1;var t;this.instance;null!=e&&null!=e&&""!=e&&("Success"==e.Call?(g.CatchAllFlag=!0,t="","add"==n?(g.AddItemInGrid(e),t=g.DomainsInfo.success_Contextual_AddCatchAll):"edit"==n&&(g.UpdateItemInGrid(e),t=g.DomainsInfo.success_Contextual_EditCatchAll),g.pageNotification.stuckNotifications.addSuccess(t,g.domainEmailRedirectnotificationAlertArguments)):"Error"==e.Call&&("add"==n?g.pageNotification.stuckNotifications.addError(g.DomainsInfo.error_Site_AddEditForwarder,g.domainEmailRedirectnotificationAlertArguments):"edit"==n&&("SameEntry"!=e.SameEntryFlag?g.pageNotification.stuckNotifications.addError(g.DomainsInfo.error_Site_AddEditForwarder,g.domainEmailRedirectnotificationAlertArguments):g.pageNotification.stuckNotifications.addWarning(g.DomainsInfo.error_Site_AddEditForwarder,g.domainEmailRedirectnotificationAlertArguments))))}),o.opened.then(function(){}))},g.IsChooseEmailRedirectListingModalPopUpOpened=!1,g.openChooseEmailRedirectListingModalPopUp=function(e,t,n,a,i){g.SelectedDomainNames=e,g.SelectedmailBoxIds=t,g.SelectedmailBoxNames=n;var o;g.IsChooseEmailRedirectListingModalPopUpOpened||((o=r.open({templateUrl:"/Domains/SSL/Common/PromptRemove",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return g.DomainsInfo.static_Modal_Title_RemoveForwarder},modalContent:function(){if("multiremove"==i.toLocaleLowerCase())return g.DomainsInfo.static_MultiRemovePromptIntro}}})).result.then(function(e){var t,n;g.IsChooseEmailRedirectListingModalPopUpOpened=!1,"yes"==e&&"multiremove"==i.toLowerCase()&&(t=g.SelectedDomainNames,n=g.pageAction.pageNgGridSettings.parameters.selection.selectedItems,g.pageRemoveAction.Click(t,"","","",n,i,!0))},function(){g.IsChooseEmailRedirectListingModalPopUpOpened=!1,o=null}),o.opened.then(function(){g.IsChooseEmailRedirectListingModalPopUpOpened=!0}))},g.pageRemoveAction=new v.AsyncStateBehavior({constructor:function(){var h=this.instance;h.Click=function(e,t,n,a,i,o,s){var r=[],c=[],l=[];if("multiremove"==o||"remove"==o){if(h.asyncStatus(v.AsyncStatus.Loading,""),"multiremove"==o)for(var d=0;d<i.length;d++)r.push({MailboxId:i[d].MailboxId.replace(/ /g,""),MailboxName:i[d].MailboxName.replace(/ /g,""),ForwardTo:i[d].ForwardTo.replace(/ /g,"")}),c[d]=i[d].MailboxName.replace(/ /g,""),l[d]=i[d].ForwardTo.replace(/ /g,"");else if("remove"==o)if(r.push({MailboxId:t.replace(/ /g,""),MailboxName:n.replace(/ /g,""),ForwardTo:a.replace(/ /g,"")}),-1<n.indexOf("*"))for(l=a.split(","),d=0;d<l.length;d++)c[d]="*";else c[0]=n.replace(/ /g,""),l[0]=a.replace(/ /g,"");0;var u="",m=0,p=g.pageAction.pageNgGridSettings.parameters.storage.requestData;if(1<c.length)for(d=0;d<c.length;d++){"*"==c[d]?(u=p.filter(function(e){return e.MailboxName.replace(/ /g,"")==c[d].replace(/ /g,"")}),m="remove"==o?1:l[d].split(",").length):u=p.filter(function(e){return e.MailboxName.replace(/ /g,"")==c[d].replace(/ /g,"")&&e.ForwardTo.replace(/ /g,"")==l[d].replace(/ /g,"")}),g.UsedForwarders="*"==c[d]?g.UsedForwarders-m:g.UsedForwarders-u.length;for(var f=0;f<u.length;f++)g.pageAction.pageNgGridSettings.settings.actions.removeItem(u[f])}else{"multiremove"==o&&(n=c[0],a=l[0]);u=p.filter(function(e){return e.MailboxName.replace(/ /g,"")==n.replace(/ /g,"")&&e.ForwardTo.replace(/ /g,"")==a.replace(/ /g,"")});"*"==n&&(m="remove"==o?1:a.split(",").length),g.UsedForwarders="*"==n?g.UsedForwarders-m:g.UsedForwarders-u.length;for(f=0;f<u.length;f++)g.pageAction.pageNgGridSettings.settings.actions.removeItem(u[f])}}0==g.pageAction.pageNgGridSettings.parameters.storage.requestData.length&&(g.showDoneButton=!1),1==s&&g.uncheckCheckBoxes(),g.updateListTitle(g.UsedForwarders,g.AvailableForwarders),g.pageNotification.stuckNotifications.clear(),h.asyncStatus(v.AsyncStatus.Success,{DomainName:e,ForwarderName:c,Message:"success"})}},onSuccess:function(e){g.pageNotification.stuckNotifications.clear();this.instance;var t=!1,n="";if(1<e.ForwarderName.length){var a=e.ForwarderName;for(i=0;i<a.length;i++)"Catch-All"==(n="*"!=a[i]?a[i]+"@"+e.DomainName:"Catch-All")&&(g.CatchAllFlag=!1),"Catch-All"==n?t||(t=!0,g.pageNotification.stuckNotifications.addSuccess(g.DomainsInfo.success_Contextual_EmailRedirectForwarderRemove.replace("{Forwarder}",n),g.domainEmailRedirectnotificationAlertArguments)):g.pageNotification.stuckNotifications.addSuccess(g.DomainsInfo.success_Contextual_EmailRedirectForwarderRemove.replace("{Forwarder}",n),g.domainEmailRedirectnotificationAlertArguments)}else"Catch-All"==(n="*"!=(n=e.ForwarderName[0])?n+"@"+e.DomainName:"Catch-All")&&(g.CatchAllFlag=!1,g.ShowCatchAllButton=!0),g.pageNotification.stuckNotifications.addSuccess(g.DomainsInfo.success_Contextual_EmailRedirectForwarderRemove.replace("{Forwarder}",n),g.domainEmailRedirectnotificationAlertArguments);0==g.pageAction.pageNgGridSettings.parameters.storage.requestData.length||1<g.pageAction.pageNgGridSettings.parameters.storage.requestData.length?g.HideHorizontalLine=!1:g.HideHorizontalLine=!0},onLoading:function(e){var t=this.instance;g.pageNotification.stuckNotifications.addLoading("Please wait.",!1),t.isDisabled=!0,t.showError=!1}}),g.AddItemInGrid=function(e){var t=g.pageAction.pageNgGridSettings.parameters.storage.requestData,n={};n.ForwardTo=e.forwardTo,n.MailboxId=(t.length+1).toString(),n.MailboxName=e.mailBoxName,n.chbId="chbId"+t.length.toString(),g.pageAction.pageNgGridSettings.settings.actions.addNewItem(n);var a=e.forwardTo.split(",");g.UsedForwarders=g.UsedForwarders+a.length,g.updateListTitle(g.UsedForwarders,g.AvailableForwarders),0==t.length||1<t.length?g.HideHorizontalLine=!1:g.HideHorizontalLine=!0,"*"==e.mailBoxName&&(g.ShowCatchAllButton=!1),g.uncheckCheckBoxes(),0<t.length&&(g.showDoneButton=!0),g.pageAction.pageNgGridSettings.parameters.mapping.isLoading=!1,g.pageAction.pageNgGridSettings.parameters.storage.isFullData=!0},g.UpdateItemInGrid=function(e){var t,n;"*"==e.mailBoxName&&(t=e.oldDestination.split(",").length,n=e.forwardTo.split(",").length,g.Used=n<t?g.Used-(t-n):g.Used+(n-t),g.updateListTitle(g.Used,g.Total)),g.pageAction.pageNgGridSettings.parameters.storage.pageData[e.index].MailboxName=e.mailBoxName,g.pageAction.pageNgGridSettings.parameters.storage.pageData[e.index].ForwardTo=e.forwardTo,g.uncheckCheckBoxes()},g.uncheckCheckBoxes=function(){g.pageAction.pageNgGridSettings.parameters.selection.selectedItems=[];var e=g.pageAction.pageNgGridSettings.parameters.storage.requestData;for(i=0;i<e.length;i++)1==e[i].$ncColumnSelected&&(e[i].$ncColumnSelected=!1);$("div#chb_selectAllForwarders").find('input[type="checkbox"]').removeAttr("checked")},g.updateListTitle=function(e,t){g.UsedForwarders=e,g.Used=e,g.Total=50,0==e&&(g.showDoneButton=!1,g.CatchAllFlag=!1,g.ShowCatchAllButton=!0)}}]),app.factory("expiringDomainProducts",["pageHelper","cartService","expiringSoonService","notificationService","$rootScope",function(e,t,o,s,r){var c=window.GlobalErrorMessages||{};return{create:function(n,a){var i=r.$new(!0);return new e.AsyncStateBehavior({constructor:function(){var e=this.instance,t=a().getProducts()||[];angular.extend(e,{domainName:n,allProductsSelected:!1,notifications:new s.instance,activeProducts:t.filter(function(e){return e.DomainName===n}).sort(function(e,t){return e.ExpirationDateUnix-t.ExpirationDateUnix}),onDestroy:function(e){i.$on("$destroy",e)},destroy:function(){i.$destroy(),i=null},renewAllProducts:function(){if(e.allProductsSelected)return o.renewProducts(e,e.notifications,e.activeProducts)}})},onLoading:function(){this.instance.operationIsInProgress=!0},onSuccess:function(){this.instance.operationIsInProgress=!1},onError:function(e){this.instance.operationIsInProgress=!1,this.instance.notifications.stuckNotifications.addError(e.msg||c.error_Site_PleaseTryAgain,{hasClose:!0,isAutoHide:!0})}})}}}]),app.controller("expiringListRouterController",["$scope","ncLocation","$window","cartService","expiringDomainsList","expiringProductsList","popupWindow","sslRepository",function(o,t,e,n,a,i,s,r){"use strict";var c=this,l={domains:{name:"domains",url:"domains",highlightMenuClass:"expiring-domains"},products:{name:"products",url:"products",highlightMenuClass:"expiring-products"}},d=l.domains;h(),e.addEventListener("hashchange",h),o.$on("$destroy",function(){e.removeEventListener("hashchange",h),c.productsListBehaviour&&c.productsListBehaviour.destroy()});function u(){return m}var m=n.getCartItems(),p=a.create(u);function f(e){var t,n,a;c.state=e,c.state.highlightMenuClass&&(t=c.state.highlightMenuClass,n="selected",(a=$("#apnav").find("nav>ul")).find("ul>li."+n).removeClass(n),a.find("ul>li."+t).addClass(n)),c.domainListBehaviour.gridSettings.settings.mapping.resetFilters(),c.productsListBehaviour.gridSettings.settings.mapping.resetFilters(),c.productsListBehaviour.domainDetails&&c.productsListBehaviour.domainDetails.destroy(),c.state!==l.domains&&c.domainListBehaviour.stopProcessing()}function h(){o.$evalAsync(function(){f(function(e){if(!e)return d;var t,n;for(t in l)if(l.hasOwnProperty(t)&&(n=l[t]).name===e)return n;return d}(t.getHash()))})}angular.extend(c,{dateFormat:"MMM d, yyyy",domainListBehaviour:p,productsListBehaviour:i.create(p.getDomainsIndex(),u),states:l,setState:function(e){t.setHash(e?e.url:d.url)}}),o.symantecSunsetDate=SymantecSunsetDate,o.siteServerNameUrl=SiteServerNameUrl,o.openPopupRenew=function(e,t,n){var a=t.split("-").pop().trim();"ssl web server ev"==a.toLowerCase()?a="SSL Webserver EV":"true business id"==a.toLowerCase()&&(a="True BusinessID");var i=1==n?1:0;o.symantecCertDetails={certificateId:e,certificateType:a,validYears:1,sansQty:i},s.openPopupWindow(o.symantecCertDetails,"renew",o.symantecSunsetDate,o.siteServerNameUrl)}}]),app.controller("renewExpiringDominaListBulkActionCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","notificationService","pageHelper","$q","ncGridParams","$sce","ncWizardService",function(n,e,o,t,a,i,s,r,c,l,d){n.step1Notification=new i.instance,n.pageNotification=new i.instance,this.initialize=function(e){n.Model=e.Model;var t=e.MessageModel;1==e.GotoNextPage&&d.moveNext(),null!=t.MessageType&&null!=t.Message&&("alert"==t.MessageType.toLowerCase()?n.pageNotification.alerts.addWarning(t.Message,{hasClose:!0,isAutoHide:!1}):"success"==t.MessageType.toLowerCase()?n.pageNotification.alerts.addSuccess(t.Message,{hasClose:!0,isAutoHide:!1}):"error"==t.MessageType.toLowerCase()&&n.pageNotification.alerts.addError(t.Message,{hasClose:!0,isAutoHide:!1}))},n.CancelBulkAction=e.closeLightbox=function(){o.domainList.goToDomainList()},n.RenewExpiringBulkModification=new s.AsyncStateBehavior({constructor:function(){var t=this.instance;t.Step1Action=function(){n.step1Notification.alerts.clear(),t.asyncStatus(s.AsyncStatus.Loading,"Loading...");var e,a=[],i=[];$("input:checkbox[name=selecteddomains][renewtype=domain]:checked").each(function(){var e=$(this).val()||"";e&&a.push(e)}),$("input:checkbox[name=selecteddomains][renewtype=service]:checked").each(function(){var e=$(this).val().split(":")[0],t=$(this).attr("item-value").split(":"),n=t[0],a=t[1];"oxhosting"===a&&(a="ProductTypePrivateEmail"),"ssl"===a&&(a="SslCertificate"),i.push({ProductInfoType:a,DomainName:e,ProductId:n})}),0<a.length||0<i.length?(e=$("a[data-add-to-cart]").attr("data-add-to-cart"),o.domainListAction.renewExpiringAddToCart(a,i,e).then(function(e){var t=e.Result||0,n=a.length+i.length-t;window.location.href="/Domains/DomainList/RenewExpiring/"+t+"/"+n})):(n.step1Notification.stuckNotifications.clear(),n.step1Notification.alerts.addError("Select at least one valid domain to proceed to the next step!.",{hasClose:!0,isAutoHide:!0}),$("html, body").animate({scrollTop:$('div[link="step1Notification"]').offset().top-20},200))}},onSuccess:function(e){var t=this.instance;t.showContent=!0,t.model=e.Result,n.step1Notification.alerts.clear()},onActive:function(e){this.instance.asyncStatus(s.AsyncStatus.Active)},onLoading:function(e){var t=this.instance;n.pageNotification.alerts.clear(),t.activeNotification=n.pageNotification.stuckNotifications.addLoading("<B>"+e+"</B> Please wait.",!1),t.isDisabled=!0,t.showError=!1},onError:function(e){this.instance.activeNotification=n.step1Notification.stuckNotifications.addError(e.msg,{hasClose:!0,isAutoHide:!0})},onLocked:function(e){this.instance}})}]),app.controller("whoisGuardDomainBulkActionCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","notificationService","pageHelper","$q","ncGridParams","$sce","ncWizardService",function(s,e,o,t,n,a,r,c,l,d,u){s.pageHelper=r,s.step1Notification=new a.instance,s.pageNotification=new a.instance,this.initialize=function(e){s.Model=e.Model,s.Messages=e.Messages,s.SelectedDomainList=[]},s.CancelBulkAction=e.closeLightbox=function(){o.domainList.goToDomainList()},s.NumberofWG=0,s.TotalAmount=0,s.pageAction=new r.AsyncStateBehavior({constructor:function(){var a=this.instance;a.SendConfirmationMail=!1,a.IsActivateWhoisGuard="true",a.WhoisGuardOffApproved=!1,a.Step1Action=function(){s.step1Notification.alerts.clear(),s.SelectedDomainList=[],s.NumberofWG=0,s.TotalAmount=0,$("input:checkbox[name=selecteddomains]:checked").each(function(){var e={};e.DomainName=$(this).attr("id");var t=e.DomainName.indexOf(".");e.tld=e.DomainName.substr(t+1);var n=!1,a=!1,o=s.SelectedDomainList;for(i=0;i<o.length;i++)o[i].DomainName==e.DomainName&&(n=!0);if(!n){for(i=0;i<s.Model.WhoisGuardItems.length;i++)s.Model.WhoisGuardItems[i].DomainName==e.DomainName&&(1==s.Model.WhoisGuardItems[i].CanSelectDomain?(a=!0,e.PurchaseWG=s.Model.WhoisGuardItems[i].PurchaseWG,1==e.PurchaseWG&&(s.TotalAmount=s.TotalAmount+s.Model.WhoisGuardPurchasePrice,s.NumberofWG=s.NumberofWG+1)):a=!1);a&&s.SelectedDomainList.push(e)}}),0<s.SelectedDomainList.length?(a.asyncStatus(r.AsyncStatus.Active),u.moveNext()):(0==s.SelectedDomainList.length?s.step1Notification.alerts.addError(s.Messages.SelectAtleastOneDomainToProceed,{hasClose:!0,isAutoHide:!0}):s.step1Notification.alerts.addError(s.Messages.CannotProceedToSetp2,{hasClose:!0,isAutoHide:!0}),$("html, body").animate({scrollTop:$('div[link="step1Notification"]').offset().top-20},200))},a.Step2Action=function(){s.pageNotification.alerts.clear(),a.asyncStatus(r.AsyncStatus.Loading,"Loading ...");var e=[],t=[];for(i=0;i<s.SelectedDomainList.length;i++)e.push(s.SelectedDomainList[i].DomainName),t.push("whoisguard");var n="",n="true"==a.IsActivateWhoisGuard?"enable":"disable";o.domainList.domainListBulkAction(e.join(","),t.join(","),"action",n,"modifywg",s.pageAction.SendConfirmationMail).then(function(e){var t=e.Result;0==e.Error?o.domainList.whoIsGuardBulkActionSuccess(JSON.stringify(t),"whoisguard"):(s.pageNotification.stuckNotifications.clear(),s.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1}),$("html, body").animate({scrollTop:$('div[link="pageNotification"]').offset().top-20},200))})},a.activateWhoisGuardOnClick=function(){a.WhoisGuardOffApproved=!1},a.deactivateWhoisGuardOnClick=function(){a.WhoisGuardOffApproved||(a.IsActivateWhoisGuard="true",a.showConfirmationPopup())},a.showConfirmationPopup=function(){n.open({templateUrl:"/Domains/PromptModalOpen",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return"Turn Off Domain Privacy Protection"},modalContent:function(){return"You're about to turn off Domain Privacy protection for your domain. Please note that this action will disclose your domain's contact information to the public. By clicking \"Yes,\" you give your explicit consent to reveal this information in the public Whois database."}}}).result.then(function(e){a.IsActivateWhoisGuard="false",a.WhoisGuardOffApproved=!0},function(e){a.IsActivateWhoisGuard="true"})}},onSuccess:function(e){var t=this.instance;"getModel"==e.sender&&(t.showContent=!0,t.model=e.Result,t.pageNgGridSettings.settings.reload()),s.pageNotification.alerts.clear(),t.activeNotification=s.pageNotification.stuckNotifications.addSuccess(e.Message,{hasClose:!0,isAutoHide:!0})},onActive:function(e){var t=this.instance;s.pageNotification.alerts.clear(),t.asyncStatus(r.AsyncStatus.Active)},onLoading:function(e){var t=this.instance;s.pageNotification.alerts.clear(),t.activeNotification=s.pageNotification.stuckNotifications.addLoading("<B>"+e+"</B> Please wait.",!1),t.isDisabled=!0,t.showError=!1},onLocked:function(e){this.instance},onWarning:function(e){var t=this.instance;s.pageNotification.alerts.clear(),t.activeNotification=s.pageNotification.stuckNotifications.addWarning("<B>"+e+"</B>",{hasClose:!0,isAutoHide:!0}),t.isDisabled=!1,t.showError=!1},onError:function(e){this.instance.activeNotification=s.pageNotification.stuckNotifications.addError(e.Message,{hasClose:!0,isAutoHide:!0})}})}]),app.controller("addDnsRecords",["$scope","$modalInstance","openModelParameter","domainName","hostingID","hostRecordType","httpRepository","notificationService","pageModelClass","domainType","sanitizeHtmlService",function(n,a,o,e,t,s,r,c,l,d,u){n.pageNotification=c.instance(),n.NoSearchOption={minimumResultsForSearch:-1},n.addMoreShowBtn=!1,n.saveChangesBtn=!0,n.domainName=e,n.openmodelparam=o,n.requiredValidation=!1,n.isURLRedirect=!1,n.isNamecheapHosting=!1,n.isSwitchDNSservers=!1,n.hostID=t,n.isSubDomain=d,n.serviceName="Other Service",n.isDDNSModel=!1;var m=l;n.hostRecordType=s,n.notificationAlertArguments={isAutoHide:!0,hasClose:!0},n.hostPattern="^@$|^$|^[*a-zA-Z0-9._-]+$",n.destinationURLPattern="^[A-Za-z0-9!$-~`?/@#%^*&()_+=<>.,';:|\"]*$",n.ipv6Pattern="^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*",n.ipAddressPattern="^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$",n.srvWeightPortValue=65535,n.priorityValue=255,n.recordTypeList="addNew"==o||"manageAddNew"==o?"Namecheap BasicDNS"==m||"FREE"==m||"FREE2"==m?[{name:"Select Record Type",value:"Default"},{name:"A Record",value:"A"},{name:"AAAA Record",value:"AAAA"},{name:"ALIAS Record",value:"ALIAS"},{name:"CNAME Record",value:"CNAME"},{name:"CAA Record",value:"CAA"},{name:"SRV Record",value:"SRV"},{name:"TXT Record",value:"TXT"},{name:"URL Redirect Record",value:"URL"},{name:"NS Record",value:"NS"}]:[{name:"Select Record Type",value:"Default"},{name:"A Record",value:"A"},{name:"AAAA Record",value:"AAAA"},{name:"ALIAS Record",value:"ALIAS"},{name:"CNAME Record",value:"CNAME"},{name:"SRV Record",value:"SRV"},{name:"TXT Record",value:"TXT"},{name:"URL Redirect Record",value:"URL"}]:[{name:"Select Record Type",value:"Default"},{name:"A Record",value:"A"},{name:"AAAA Record",value:"AAAA"},{name:"ALIAS Record",value:"ALIAS"},{name:"CNAME Record",value:"CNAME"},{name:"SRV Record",value:"SRV"},{name:"TXT Record",value:"TXT"},{name:"URL Redirect Record",value:"URL"},{name:"NS Record",value:"NS"}],n.domainRedirectList=[{name:"This Domain",value:"Domain"},{name:"SubDomain",value:"SubDomain"}],"addNew"!=o&&"edit"!=o&&"manageAddNew"!=o&&"addRedirect"!=o&&"editRedirect"!=o||("Namecheap BasicDNS"==m||1==m.DnsType||"NameCheapDefault"==m.DnsType||"NameCheapFreeDNS"==m.DnsType||"FREE"==m||"FREE2"==m?n.domainRedirectTypeList=[{name:"Unmasked",value:"URL"},{name:"Masked",value:"FRAME"},{name:"Permanent (301)",value:"URL301"}]:n.domainRedirectTypeList=[{name:"Unmasked",value:"URL"},{name:"Masked",value:"FRAME"}]),n.urlLookList=[{name:"Both http:// and http://www",value:"Both"},{name:"Only http://",value:"@"},{name:"Only http://www",value:"www"}],n.timeToLiveList=[{name:"Automatic",value:"1799"},{name:"1 minute",value:"60"},{name:"5 minutes",value:"300"},{name:"20 minutes",value:"1200"},{name:"30 minutes",value:"1800"},{name:"60 minutes",value:"3600"}],n.ddnsRecordTypeList=[{name:"Use existing records",value:"0"},{name:"Add new record",value:"1"}];var p={recordType:n.recordTypeList[0].value,recordName:"",host:"",hostID:"",target:"",ttl:n.timeToLiveList[0].value,ipAddress:"",ipv6:"",nameserver:"",service:"",protocol:"",priority:"",weight:"",port:"",value:"",domainToRedirect:n.domainRedirectList[0].value,subDomain:"",urlLook:n.urlLookList[0].value,destinationURL:"",domainRedirectType:"",metaTitle:"",metaDescription:"",metaKeyword:"",metaFaviconURL:"",mailServer:"",isMetaTages:!1,isDynamicDNS:!1,isURLTypeDouble:!1,ddnsRecordType:n.ddnsRecordTypeList[0].value,newHostCount:0,applactionTitel:"",isCancel:!1,isResultSuccess:!1};n.textFields=p;var f={isRecordTypeDropDownVisible:!1,isRecordTypeLableVisible:!1,isRecordNameVisible:!1,isHostVisible:!1,isTargetVisible:!1,isTTlVisible:!1,isIPAddressVisible:!1,isDynamicDNSVisible:!1,isIPv6Visible:!1,isNameServerVisible:!1,isServiceVisible:!1,isProtocolVisible:!1,isPriorityVisible:!1,isWeightVisible:!1,isPortVisible:!1,isValueVisible:!1,isDomainToRedirectVisible:!1,isSubDomainVisible:!1,isURlLookVisible:!1,isDestinationURLVisible:!1,isRedirectTypeVisible:!1,isMetaTagesVisible:!1,isTitleVisible:!1,isDescriptionVisible:!1,isKeywordVisible:!1,isFaviconURLVisible:!1,isMailServerVisible:!1,isDDnsDropDownVisible:!1,isDDnsExistingRecordVisible:!1,isEmailSettingTxtHostlbl:!1};if(n.RecordFields=f,n.disableDDnsChangeFun=function(e){""!=e&&(n.textFields.hostID=e)},n.cancelClick=function(){console.log("Dismiss Modal with model : "+n.modalpopupcontrollerValue),n.isNamecheapHosting&&(p.isCancel=!0),a.close(n.textFields)},n.saveRecords=function(){n.requiredValidation=!0,n.textFields.isCancel=!1;var e,t=n.frmadvancedDnsAddRecords.$valid;n.pageNotification.alerts.clear(),t&&(n.textFields.recordType!=n.recordTypeList[0].value||"addNew"!=o&&"manageAddNew"!=o?(n.showLoadPanel=!0,n.textFields.recordType==n.recordTypeList[6].value&&(n.textFields.domainRedirectType==n.domainRedirectTypeList[1].value?n.textFields.recordType=n.domainRedirectTypeList[1].value:"URL301"==n.textFields.domainRedirectType?n.textFields.recordType=n.domainRedirectTypeList[2].value:n.textFields.recordType=n.textFields.recordType,n.urlLookFun(n.textFields.urlLook)),""==n.textFields.recordName&&(n.textFields.recordName=n.textFields.recordType+" Record"),n.isAddNewProcess=!1,"addNew"!=o&&"addEmailSetting"!=o&&"manageAddNew"!=o&&"addRedirect"!=o&&"addRedirectinner"!=o||(n.isAddNewProcess=!0),"AddDDNS"==o?n.ddnsRecordTypeList[0].value==n.textFields.ddnsRecordType?(n.isAddNewProcess=!1,e="",e=angular.isObject(n.textFields.hostID)?n.textFields.hostID.join(","):("0"==n.textFields.hostID&&(n.textFields.hostID=""),n.textFields.hostID),r.domainDns.enableDDNSHostRecord(e,n.domainName).then(function(e){e.Error?(n.showLoadPanel=!1,n.pageNotification.alerts.addError(u(e.Msg),n.notificationAlertArguments),n.textFields.isCancel=!0):(n.showLoadPanel=!1,n.cancelClick(),n.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0}))})):(n.isAddNewProcess=!0,r.domainDns.addHostRecord(n.textFields,n.domainName,n.isAddNewProcess).then(function(e){e.Error?(n.showLoadPanel=!1,n.pageNotification.alerts.addError(u(e.Msg),n.notificationAlertArguments),n.textFields.isCancel=!0):("addNew"==o||"manageAddNew"==o?(n.showLoadPanel=!1,n.saveChangesBtn=!1,n.addMoreShowBtn=!0,n.pageNotification.alerts.addSuccess(e.Msg,n.notificationAlertArguments)):(n.showLoadPanel=!1,n.cancelClick()),null!=n.removeParkingRecord&&1==n.removeParkingRecord&&""!=v&&r.domainDns.removeHostRecord(v,S,n.domainName).then(function(e){}))})):r.domainDns.addHostRecord(n.textFields,n.domainName,n.isAddNewProcess).then(function(e){e.Error?(n.showLoadPanel=!1,n.pageNotification.alerts.addError(u(e.Msg),n.notificationAlertArguments),n.textFields.isCancel=!0):("addNew"==o||"manageAddNew"==o?(n.showLoadPanel=!1,n.saveChangesBtn=!1,n.addMoreShowBtn=!0,n.pageNotification.alerts.addSuccess(e.Msg,n.notificationAlertArguments)):(n.showLoadPanel=!1,n.textFields.isResultSuccess=!0,n.cancelClick()),null!=n.removeParkingRecord&&1==n.removeParkingRecord&&""!=v&&r.domainDns.removeHostRecord(v,S,n.domainName).then(function(e){}))})):(n.pageNotification.alerts.addError("Please Choose Record Type",n.notificationAlertArguments),n.textFields.isCancel=!0))},n.addMoreRecords=function(){n.pageNotification.alerts.clear(),n.addMoreShowBtn=!1,n.saveChangesBtn=!0,n.textclear(),f.isRecordTypeDropDownVisible=!0,n.textFields.recordType=n.recordTypeList[0].name},n.timeToLiveFun=function(e){n.textFields.ttl=e},n.domainRedirectFun=function(e){var t;null!=e&&(e==n.domainRedirectList[1].value?(n.textFields.subDomain="",n.textFields.domainToRedirect=n.domainRedirectList[1].value,f.isSubDomainVisible=!0):(n.textFields.domainToRedirect=n.domainRedirectList[0].value,f.isSubDomainVisible=!1,null!=(t=n.textFields.host.split("."))&&("@"==t[0]||"www"==t[0]?n.textFields.host=t[0]:n.textFields.host=n.urlLookList[1].value)))},n.urlLookFun=function(e){n.textFields.isURLTypeDouble=!1,n.textFields.domainToRedirect==n.domainRedirectList[1].value?n.textFields.urlLook==n.urlLookList[1].value?(n.textFields.host=n.textFields.subDomain,n.textFields.isURLTypeDouble=!1):n.textFields.urlLook==n.urlLookList[2].value?(n.textFields.host=n.urlLookList[2].value+"."+n.textFields.subDomain,n.textFields.isURLTypeDouble=!1):(n.textFields.host=n.urlLookList[2].value+"."+n.textFields.subDomain,n.textFields.isURLTypeDouble=!0):n.textFields.urlLook==n.urlLookList[1].value?(n.textFields.host=n.urlLookList[1].value,n.textFields.applactionTitel="URL Forwarding",n.textFields.isURLTypeDouble=!1):n.textFields.urlLook==n.urlLookList[2].value?(n.textFields.host=n.urlLookList[2].value,n.textFields.isURLTypeDouble=!1):(n.textFields.host=n.urlLookList[1].value+"."+n.urlLookList[2].value,n.textFields.applactionTitel="URL Forwarding",n.textFields.isURLTypeDouble=!0)},n.changeDDnsRecordType=function(e){e==n.ddnsRecordTypeList[1].value?(n.requiredValidation=!1,n.textFields.recordType=n.recordTypeList[1].value,f.isDDnsExistingRecordVisible=!1,f.isRecordNameVisible=!0,f.isHostVisible=!0,f.isIPAddressVisible=!0,f.isTTlVisible=!0):(""==n.getDisableDDNSHostList[0].Host?f.isDDnsExistingRecordVisible=!1:f.isDDnsExistingRecordVisible=!0,f.isRecordNameVisible=!1,f.isHostVisible=!1,f.isIPAddressVisible=!1,f.isTTlVisible=!1,f.isDynamicDNSVisible=!1)},n.redirectTypeFun=function(e){null!=e&&("FRAME"==e?(n.textFields.domainRedirectType=n.domainRedirectTypeList[1].value,n.textFields.isMetaTages=!1,f.isMetaTagesVisible=!0):(n.textFields.domainRedirectType="URL301"==e?n.domainRedirectTypeList[2].value:n.domainRedirectTypeList[0].value,n.textFields.isMetaTages=!1,n.chkMetaTagFun(),f.isMetaTagesVisible=!1))},n.chkMetaTagFun=function(){n.textFields.isMetaTages?(f.isTitleVisible=!0,f.isDescriptionVisible=!0,f.isKeywordVisible=!0,f.isFaviconURLVisible=!1,"addNew"!=o&&"edit"!=o&&"manageAddNew"!=o&&"addRedirect"!=o&&"editRedirect"!=o&&"addRedirectinner"!=o||"Namecheap BasicDNS"!=m&&1!=m.DnsType&&"NameCheapDefault"!=m.DnsType&&"NameCheapFreeDNS"!=m.DnsType&&"FREE"!=m&&"FREE2"!=m||(f.isFaviconURLVisible=!0)):(f.isTitleVisible=!1,f.isDescriptionVisible=!1,f.isKeywordVisible=!1,f.isFaviconURLVisible=!1)},n.setDefaultDNS=function(e){var t;n.frmadvancedDnsAddRecords.chkSwitchDns.$setDirty(),n.frmadvancedDnsAddRecords.$invalid||(n.showLoadPanel=!0,t={NameServers:e,DNSType:"NCDefault"},r.domainDns.setNameServers(t,n.domainName).then(function(e){e.Error?(n.showLoadPanel=!1,n.pageNotification.alerts.addError(u(e.Msg),n.notificationAlertArguments)):(n.showLoadPanel=!1,n.saveChangesBtn=!0,n.isURLRedirect=!1,n.isSwitchDNSservers=!1,n.isNamecheapHosting=!1,n.IsHostRecordLocked=!1,n.AtWwwwHasOtherRecordTypeSet=!1,n.textclear(),n.textFields.recordType=n.recordTypeList[6].value,n.urlLookFun(n.textFields.urlLook),f.isRecordTypeDropDownVisible=!1,f.isRecordNameVisible=!0,f.isDomainToRedirectVisible=!0,f.isURlLookVisible=!0,f.isDestinationURLVisible=!0,f.isRedirectTypeVisible=!0,n.domainRedirectTypeList=[{name:"Unmasked",value:"URL"},{name:"Masked",value:"FRAME"},{name:"Permanent (301)",value:"URL301"}])}))},n.UpdateService=function(e,t){n.frmadvancedDnsAddRecords.chkSwitchDns.$setDirty(),n.textFields.isCancel=!1,n.frmadvancedDnsAddRecords.$invalid||(n.showLoadPanel=!0,r.domainDns.removeHostRecord(e,t,n.domainName).then(function(e){e.Error?(n.showLoadPanel=!1,n.pageNotification.alerts.addError(u(e.Msg),n.notificationAlertArguments)):(n.showLoadPanel=!1,n.isURLRedirect=!0,o="addRedirectinner",a.close(n.textFields))}))},n.textclear=function(){f.isRecordTypeDropDownVisible=!1,f.isRecordTypeLableVisible=!1,f.isRecordNameVisible=!1,f.isHostVisible=!1,f.isTargetVisible=!1,f.isTTlVisible=!1,f.isIPAddressVisible=!1,f.isDynamicDNSVisible=!1,f.isIPv6Visible=!1,f.isNameServerVisible=!1,f.isServiceVisible=!1,f.isProtocolVisible=!1,f.isPriorityVisible=!1,f.isWeightVisible=!1,f.isPortVisible=!1,f.isValueVisible=!1,f.isDomainToRedirectVisible=!1,f.isSubDomainVisible=!1,f.isURlLookVisible=!1,f.isDestinationURLVisible=!1,f.isRedirectTypeVisible=!1,f.isMetaTagesVisible=!1,f.isTitleVisible=!1,f.isDescriptionVisible=!1,f.isKeywordVisible=!1,f.isFaviconURLVisible=!1,f.isMailServerVisible=!1,f.isDDnsDropDownVisible=!1,f.isDDnsExistingRecordVisible=!1,f.isEmailSettingTxtHostlbl=!1,n.requiredValidation=!1,n.isDDNSModel=!1,n.textFields.recordType=n.recordTypeList[0].value,n.textFields.recordName="",n.textFields.host="",n.textFields.ipAddress="",n.textFields.isDynamicDNS=!1,n.textFields.target="",n.textFields.ttl=n.timeToLiveList[0].value,n.textFields.ipv6="",n.textFields.nameserver="",n.textFields.service="",n.textFields.protocol="",n.textFields.priority="",n.textFields.weight="",n.textFields.port="",n.textFields.value="",n.textFields.domainToRedirect=n.domainRedirectList[0].value,n.textFields.subDomain="",n.textFields.urlLook=n.urlLookList[0].value,n.textFields.domainRedirectType="",n.textFields.isMetaTages=!1,n.textFields.destinationURL="",n.textFields.metaTitle="",n.textFields.metaDescription="",n.textFields.metaKeyword="",n.textFields.metaFaviconURL="",n.textFields.mailServer="",n.textFields.isURLTypeDouble=!1,n.textFields.ddnsRecordType=n.ddnsRecordTypeList[0].value,n.textFields.applactionTitel="",n.textFields.isResultSuccess=!1,n.textFields.isCancel=!1},n.recordTypeChange=function(e,t){n.requiredValidation=!1,"Default"==e?(n.textclear(),"New"==t&&(f.isRecordTypeDropDownVisible=!0)):"A"==e?("New"==t?(n.textclear(),n.textFields.recordType=n.recordTypeList[1].value,f.isRecordTypeDropDownVisible=!0):(n.showRecordType=n.recordTypeList[1].name,f.isRecordTypeLableVisible=!0),f.isRecordNameVisible=!0,f.isHostVisible=!0,f.isIPAddressVisible=!0,f.isTTlVisible=!0,f.isDynamicDNSVisible=!0):"AAAA"==e?("New"==t?(n.textclear(),n.textFields.recordType=n.recordTypeList[2].value,f.isRecordTypeDropDownVisible=!0):(f.isRecordTypeLableVisible=!0,n.showRecordType=n.recordTypeList[2].name),f.isRecordNameVisible=!0,f.isHostVisible=!0,f.isIPv6Visible=!0,f.isTTlVisible=!0):"ALIAS"==e||"CNAME"==e?("New"==t?(n.textclear(),n.textFields.recordType=n.recordTypeList[3].value,f.isRecordTypeDropDownVisible=!0):(f.isRecordTypeLableVisible=!0,n.showRecordType=n.recordTypeList[3].name),f.isRecordNameVisible=!0,f.isHostVisible=!0,f.isTargetVisible=!0,f.isTTlVisible=!0):"SRV"==e?("New"==t?(n.textclear(),n.textFields.recordType=n.recordTypeList[4].value,f.isRecordTypeDropDownVisible=!0):(f.isRecordTypeLableVisible=!0,n.showRecordType=n.recordTypeList[4].name),f.isRecordNameVisible=!0,f.isServiceVisible=!0,f.isProtocolVisible=!0,f.isPriorityVisible=!0,f.isWeightVisible=!0,f.isPortVisible=!0,f.isTargetVisible=!0,f.isTTlVisible=!0):"TXT"==e?("New"==t?(n.textclear(),n.textFields.recordType=n.recordTypeList[5].value,f.isRecordTypeDropDownVisible=!0):(f.isRecordTypeLableVisible=!0,n.showRecordType=n.recordTypeList[5].name),f.isRecordNameVisible=!0,f.isHostVisible=!0,f.isValueVisible=!0,f.isTTlVisible=!0):"URL"==e?(n.urlLookFun(n.textFields.urlLook),"New"==t?(n.textclear(),n.textFields.recordType=n.recordTypeList[6].value,n.textFields.domainToRedirect=n.domainRedirectList[0].value,f.isRecordTypeDropDownVisible=!0,f.isURlLookVisible=!0):(n.showRecordType=n.recordTypeList[6].name,n.textFields.domainToRedirect==n.domainRedirectList[1].value&&(f.isSubDomainVisible=!0),f.isRecordTypeLableVisible=!0,f.isURlLookVisible=!1),f.isRecordNameVisible=!0,f.isDomainToRedirectVisible=!0,f.isDestinationURLVisible=!0,f.isRedirectTypeVisible=!0):"NS"==e?("New"==t?(n.textclear(),n.textFields.recordType=n.recordTypeList[7].value,f.isRecordTypeDropDownVisible=!0):(n.showRecordType=n.recordTypeList[7].name,f.isRecordTypeLableVisible=!0),f.isRecordNameVisible=!0,f.isHostVisible=!0,f.isNameServerVisible=!0,f.isTTlVisible=!0):n.textclear()},"addRedirect"==o&&(n.textFields.isCancel=!0,null!=m&&""!=m&&null!=m))if(m.IsUsingNamecheapHosting)n.IsHostRecordLocked=!1,n.AtWwwwHasOtherRecordTypeSet=!1,n.isURLRedirect=!0,n.isNamecheapHosting=!0,n.isSwitchDNSservers=!1;else if(m.IsUsingFreeDns||"Enom"==m.DnsType||"NameCheapDefault"==m.DnsType||"NameCheapFreeDNS"==m.DnsType)if(m.IsHostRecordLocked||m.AtWwwwHasOtherRecordTypeSet){var h="",g="";for(i=0;i<m.HostList.length;i++)"@"!=m.HostList[i].Name&&"www"!=m.HostList[i].Name||"URL"==m.HostList[i].Type||"FRAME"==m.HostList[i].Type||"URL301"==m.HostList[i].Type||(h=h+","+m.HostList[i].HostId,g=g+","+m.HostList[i].Type,null!=m.HostList[i].AssociatedAppTitle&&null!=m.HostList[i].AssociatedAppTitle&&""!=m.HostList[i].AssociatedAppTitle&&("FWD"==m.HostList[i].AssociatedAppTitle&&(m.HostList[i].AssociatedAppTitle="Email Forwading"),""!=n.serviceName?n.serviceName=n.serviceName+"/"+m.HostList[i].AssociatedAppTitle:n.serviceName=m.HostList[i].AssociatedAppTitle),"Email Forwading"==m.HostList[i].AssociatedAppTitle&&(m.HostList[i].AssociatedAppTitle="FWD"));n.hostIDList=""!=h?h.slice(1):0,n.recordTypes=""!=g?g.slice(1):0,n.isNamecheapHosting=!1,n.isSwitchDNSservers=!1,n.IsHostRecordLocked=m.IsHostRecordLocked,n.AtWwwwHasOtherRecordTypeSet=m.AtWwwwHasOtherRecordTypeSet,n.isURLRedirect=!0}else{n.isURLRedirect=!1;var v="",S="";for(i=0;i<m.HostList.length;i++)("@"==m.HostList[i].Name&&"URL"==m.HostList[i].Type&&0<=m.HostList[i].Address.indexOf(n.domainName)||"WWW"==m.HostList[i].Name.toUpperCase()&&"CNAME"==m.HostList[i].Type.toUpperCase()&&"parkingpage.namecheap.com."==m.HostList[i].Address)&&(v=""==v?m.HostList[i].HostId:v+","+m.HostList[i].HostId,S=""==S?m.HostList[i].Type:S+","+m.HostList[i].Type,n.removeParkingRecord=!0);o="addRedirectinner"}else n.IsHostRecordLocked=!1,n.AtWwwwHasOtherRecordTypeSet=!1,n.isNamecheapHosting=!1,n.isSwitchDNSservers=!0,n.isURLRedirect=!0;"addNew"==o||"edit"==o||"manageAddNew"==o?"edit"==o?(n.showLoadPanel=!0,n.textFields.isCancel=!0,r.domainDns.editHostRecord(n.hostID,n.domainName).then(function(e){e.Error?(n.showLoadPanel=!1,n.saveChangesBtn=!1,n.pageNotification.alerts.addError(u(e.Msg),n.notificationAlertArguments)):(n.showLoadPanel=!1,n.textFields=e.Result,n.textFields.hostID=n.hostID,n.recordTypeChange(n.textFields.recordType,"edit"),n.textFields.recordType==n.recordTypeList[6].value&&(n.textFields.host==n.urlLookList[1].value?(n.textFields.urlLook=n.urlLookList[1].value,n.textFields.domainRedirectType==n.domainRedirectTypeList[1].value?n.textFields.isMetaTages?(f.isMetaTagesVisible=!0,f.isTitleVisible=!0,f.isKeywordVisible=!0,f.isDescriptionVisible=!0,f.isFaviconURLVisible=!1,"addNew"!=o&&"edit"!=o&&"manageAddNew"!=o&&"addRedirect"!=o&&"editRedirect"!=o||"Namecheap BasicDNS"!=m&&1!=m.DnsType&&"NameCheapDefault"!=m.DnsType&&"NameCheapFreeDNS"!=m.DnsType&&"FREE"!=m&&"FREE2"!=m||(f.isFaviconURLVisible=!0),n.textFields.metaTitle=e.Result.metaTitle,n.textFields.metakey=e.Result.metakey,n.textFields.metaDescription=e.Result.metaDescription,n.textFields.metaFaviconURL=e.Result.metaFaviconURL):f.isMetaTagesVisible=!0:f.isMetaTagesVisible=!1):n.textFields.host==n.urlLookList[2].value?(n.textFields.urlLook=n.urlLookList[2].value,n.textFields.domainRedirectType==n.domainRedirectTypeList[1].value?n.textFields.isMetaTages?(f.isMetaTagesVisible=!0,f.isTitleVisible=!0,f.isKeywordVisible=!0,f.isDescriptionVisible=!0,f.isFaviconURLVisible=!1,"addNew"!=o&&"edit"!=o&&"manageAddNew"!=o&&"addRedirect"!=o&&"editRedirect"!=o||"Namecheap BasicDNS"!=m&&1!=m.DnsType&&"NameCheapDefault"!=m.DnsType&&"NameCheapFreeDNS"!=m.DnsType&&"FREE"!=m&&"FREE2"!=m||(f.isFaviconURLVisible=!0),n.textFields.metaTitle=e.Result.metaTitle,n.textFields.metakey=e.Result.metakey,n.textFields.metaDescription=e.Result.metaDescription,n.textFields.metaFaviconURL=e.Result.metaFaviconURL):f.isMetaTagesVisible=!0:f.isMetaTagesVisible=!1):"@.www"==n.textFields.host&&(n.textFields.urlLook=n.urlLookList[0].value,n.textFields.domainToRedirect=n.domainRedirectList[0].value,n.textFields.domainRedirectType==n.domainRedirectTypeList[1].value?n.textFields.isMetaTages?(f.isMetaTagesVisible=!0,f.isTitleVisible=!0,f.isKeywordVisible=!0,f.isDescriptionVisible=!0,f.isFaviconURLVisible=!1,"addNew"!=o&&"edit"!=o&&"manageAddNew"!=o&&"addRedirect"!=o&&"editRedirect"!=o||"Namecheap BasicDNS"!=m&&1!=m.DnsType&&"NameCheapDefault"!=m.DnsType&&"NameCheapFreeDNS"!=m.DnsType&&"FREE"!=m&&"FREE2"!=m||(f.isFaviconURLVisible=!0),n.textFields.metaTitle=e.Result.metaTitle,n.textFields.metakey=e.Result.metakey,n.textFields.metaDescription=e.Result.metaDescription,n.textFields.metaFaviconURL=e.Result.metaFaviconURL):f.isMetaTagesVisible=!0:f.isMetaTagesVisible=!1)))})):(f.isRecordTypeDropDownVisible=!0,n.recordTypeChange("Default","New")):"addEmailSetting"==o?(n.textclear(),n.textFields.recordType=n.recordTypeList[5].value,"0"!=m?(null==m.FriendlyName?n.textFields.recordName="CName1":n.textFields.recordName=m.FriendlyName,n.textFields.host=m.Host,n.textFields.value=m.Address,n.textFields.ttl="1799",n.textFields.applactionTitel=m.ProviderSubType,f.isRecordTypeDropDownVisible=!1,f.isRecordNameVisible=!0,f.isHostVisible=!0,f.isEmailSettingTxtHostlbl=!0,f.isValueVisible=!0,f.isTTlVisible=!0):(f.isRecordNameVisible=!1,f.isHostVisible=!1,f.isEmailSettingTxtHostlbl=!1,f.isValueVisible=!1,f.isTTlVisible=!1,n.saveChangesBtn=!1)):"editEmailSetting"==o?(n.showLoadPanel=!0,r.domainDns.editHostRecord(n.hostID,n.domainName).then(function(e){n.showLoadPanel=!1,e.Error?n.pageNotification.alerts.addError(u(e.Msg),n.notificationAlertArguments):(n.textFields=e.Result,n.textFields.hostID=n.hostID,f.isRecordTypeDropDownVisible=!1,f.isRecordNameVisible=!0,f.isHostVisible=!0,f.isValueVisible=!0,f.isTTlVisible=!0)})):"addRedirectinner"==o?(n.textFields.isCancel=!0,null!=m&&""!=m&&null!=m&&(m.IsUsingFreeDns||"Enom"==m.DnsType||"NameCheapDefault"==m.DnsType||"NameCheapFreeDNS"==m.DnsType&&!IsHostRecordLocked?(n.textclear(),n.textFields.recordType=n.recordTypeList[6].value,n.urlLookFun(n.textFields.urlLook),f.isRecordTypeDropDownVisible=!1,f.isRecordNameVisible=!0,f.isDomainToRedirectVisible=!0,f.isURlLookVisible=!0,f.isDestinationURLVisible=!0,f.isRedirectTypeVisible=!0):n.pageNotification.alerts.addError("Not Implemented !",n.notificationAlertArguments))):"editRedirect"==o?(n.showLoadPanel=!0,n.textFields.isCancel=!0,null!=m&&""!=m&&null!=m&&(m.IsUsingFreeDns||"Enom"==m.DnsType||"NameCheapDefault"==m.DnsType||"NameCheapFreeDNS"==m.DnsType&&!IsHostRecordLocked?r.domainDns.editHostRecord(n.hostID,n.domainName).then(function(e){e.Error?(n.showLoadPanel=!1,n.saveChangesBtn=!1,n.pageNotification.alerts.addError(u(e.Msg),n.notificationAlertArguments)):(n.showLoadPanel=!1,n.textFields=e.Result,n.textFields.isCancel=!0,n.textFields.hostID=n.hostID,n.recordTypeChange(n.textFields.recordType,"edit"),n.textFields.recordType==n.recordTypeList[6].value&&(n.textFields.host==n.urlLookList[1].value?(n.textFields.domainToRedirect=n.domainRedirectList[0].value,n.textFields.urlLook=n.urlLookList[1].value,n.textFields.domainRedirectType==n.domainRedirectTypeList[1].value?n.textFields.isMetaTages?(f.isMetaTagesVisible=!0,f.isTitleVisible=!0,f.isKeywordVisible=!0,f.isDescriptionVisible=!0,f.isFaviconURLVisible=!1,"addNew"!=o&&"edit"!=o&&"manageAddNew"!=o&&"addRedirect"!=o&&"editRedirect"!=o||"Namecheap BasicDNS"!=m&&1!=m.DnsType&&"NameCheapDefault"!=m.DnsType&&"NameCheapFreeDNS"!=m.DnsType&&"FREE"!=m&&"FREE2"!=m||(f.isFaviconURLVisible=!0),n.textFields.metaTitle=e.Result.metaTitle,n.textFields.metakey=e.Result.metakey,n.textFields.metaDescription=e.Result.metaDescription,n.textFields.metaFaviconURL=e.Result.metaFaviconURL):f.isMetaTagesVisible=!0:f.isMetaTagesVisible=!1):n.textFields.host==n.urlLookList[2].value?(n.textFields.domainToRedirect=n.domainRedirectList[1].value,n.textFields.urlLook=n.urlLookList[2].value,n.textFields.domainRedirectType==n.domainRedirectTypeList[1].value?n.textFields.isMetaTages?(f.isMetaTagesVisible=!0,f.isTitleVisible=!0,f.isKeywordVisible=!0,f.isDescriptionVisible=!0,f.isFaviconURLVisible=!1,"addNew"!=o&&"edit"!=o&&"manageAddNew"!=o&&"addRedirect"!=o&&"editRedirect"!=o||"Namecheap BasicDNS"!=m&&1!=m.DnsType&&"NameCheapDefault"!=m.DnsType&&"NameCheapFreeDNS"!=m.DnsType&&"FREE"!=m&&"FREE2"!=m||(f.isFaviconURLVisible=!0),n.textFields.metaTitle=e.Result.metaTitle,n.textFields.metakey=e.Result.metakey,n.textFields.metaDescription=e.Result.metaDescription,n.textFields.metaFaviconURL=e.Result.metaFaviconURL):f.isMetaTagesVisible=!0:f.isMetaTagesVisible=!1):"@.www"==n.textFields.host&&(n.textFields.urlLook=n.urlLookList[0].value,n.textFields.domainToRedirect=n.domainRedirectList[0].value,n.textFields.domainRedirectType==n.domainRedirectTypeList[1].value?n.textFields.isMetaTages?(f.isMetaTagesVisible=!0,f.isTitleVisible=!0,f.isKeywordVisible=!0,f.isDescriptionVisible=!0,f.isFaviconURLVisible=!1,"addNew"!=o&&"edit"!=o&&"manageAddNew"!=o&&"addRedirect"!=o&&"editRedirect"!=o||"Namecheap BasicDNS"!=m&&1!=m.DnsType&&"NameCheapDefault"!=m.DnsType&&"NameCheapFreeDNS"!=m.DnsType&&"FREE"!=m&&"FREE2"!=m||(f.isFaviconURLVisible=!0),n.textFields.metaTitle=e.Result.metaTitle,n.textFields.metakey=e.Result.metakey,n.textFields.metaDescription=e.Result.metaDescription,n.textFields.metaFaviconURL=e.Result.metaFaviconURL):f.isMetaTagesVisible=!0:f.isMetaTagesVisible=!1)))}):n.pageNotification.alerts.addError("Not Implemented !",n.notificationAlertArguments))):"AddDDNS"==o?(n.textclear(),n.showLoadPanel=!0,n.textFields.isDynamicDNS=!0,f.isDDnsDropDownVisible=!0,f.isDDnsExistingRecordVisible=!0,n.textFields.isCancel=!0,n.isDDNSModel=!0,r.domainDns.getDisableDDNSHostRecord(n.domainName).then(function(e){e.Error?(n.showLoadPanel=!1,n.saveChangesBtn=!1,n.pageNotification.alerts.addError(u(e.Msg),n.notificationAlertArguments)):(n.showLoadPanel=!1,n.getDisableDDNSHostList=e.Result,""==n.getDisableDDNSHostList[0].Host?(f.isDDnsExistingRecordVisible=!1,n.textFields.ddnsRecordType=n.ddnsRecordTypeList[1].value,n.changeDDnsRecordType(n.textFields.ddnsRecordType)):n.existingHost="Select Records")})):"EditDDNS"==o&&(n.showLoadPanel=!0,n.textFields.isCancel=!0,n.isDDNSModel=!0,r.domainDns.editHostRecord(n.hostID,n.domainName).then(function(e){e.Error?(n.showLoadPanel=!1,n.saveChangesBtn=!1,n.pageNotification.alerts.addError(u(e.Msg),n.notificationAlertArguments)):(n.showLoadPanel=!1,n.textFields=e.Result,n.textFields.hostID=n.hostID,n.textFields.isDynamicDNS=!0,f.isDDnsExistingRecordVisible=!1,f.isRecordNameVisible=!0,f.isHostVisible=!0,f.isIPAddressVisible=!0,f.isTTlVisible=!0)}))}]),app.controller("addNameserversCtrl",["$scope","$element","$rootScope","httpRepository","domainname","notificationService","pageHelper",function(i,e,n,t,o,a,s){var r=ErrorMessageRes;n.closeLightbox=function(){window.location.href="/Domains/DomainControlPanel/"+o+"/advancedns"},i.pageHelper=s,i.pageNotification=new a.instance,i.standardNSTypes=function(){for(var e=[],t=1;t<=9;t++)e.push("ns"+t);for(t=1;t<=9;t++)e.push("dns"+t);return e}(),i.domainname=o,i.addNameserversResource=AddNameserversRes,i.onCheckIp=function(e){if(null!=e){var t=!1;if(null!=e&&""!=e.Ip&&null!=e.Ip&&7<=e.Ip.length){var n,a=s.Validation.ip4(e.Ip);for(n in a)t=a[n].isValid}e.valIp=t}},i.onCheckHost=function(t){if(null!=t){var e=!1;if(null!=t&&""!=t.Host&&null!=t.Host&&(t.errDetails="",e=s.Validation.personalDNSHost(t.Host).isValid),1==e){var n=i.addNSbehavior.model.filter(function(e){return e.Host==t.Host&&e.$$hashKey!=t.$$hashKey});if(0<n.length&&(e=!1),"undefined"!=t.PreviousHost&&""!=t.PreviousHost)if(1==(n=i.addNSbehavior.model.filter(function(e){return e.Host==t.PreviousHost&&e.$$hashKey!=t.$$hashKey})).length)for(var a=0;a<n.length;a++)n[a].valHost=!0;t.PreviousHost=t.Host}t.valHost=e}},i.addNSbehavior=new s.AsyncStateBehavior({constructor:function(){console.log("In constructor");var n=this.instance;n.activeNotification=i.pageNotification.alerts,n.stuckNotifications=i.pageNotification.stuckNotifications,n.customValue+="Constr",n.model=[],n.showRows=function(){return 0<n.model.length},n.addCustomNS=function(){console.log(i.addNSbehavior.model),i.addNSbehavior.model.unshift({Type:"CUS",Host:"",Ip:"",valHost:!1,valIp:!1,Status:"",errDetails:""})},n.addStandardNS=function(){i.addNSbehavior.model.unshift({Type:"STD",Host:"",Ip:"",valHost:!1,valIp:!1,Status:"",errDetails:""})},n.removeNS=function(e){i.addNSbehavior.model.splice(e,1)},n.saveChanges=function(){n.asyncStatus(s.AsyncStatus.Loading);var t=i.addNameserversForm.$valid;t&&n.model.some(function(e){if(0==e.valIp)return!(t=!1)}),t&&n.model.some(function(e){if(0==e.valHost)return!(t=!1)}),t?n.model.forEach(function(e,t){e.Status="INPROGRESS",i.AddNameServerOnebyOne(n,e,t)}):(angular.forEach(i.addNameserversForm.$error.required,function(e){angular.forEach(e.$error.required,function(e){e.$setDirty(),console.log(e)})}),n.model.errDetails="",n.asyncStatus(s.AsyncStatus.Error,{Msg:i.addNameserversResource.error_AddNameserversError}),n.showErrors=!0,msg=r.error_FormIsNotValid,n.activeNotification.clear(),n.activeNotification.addError(msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){n.activeNotification.clear()}}))},console.log(n.customValue)},onSuccess:function(e){console.log("OnSuccess");var t=this.instance;t.model=[],t.asyncStatus(s.AsyncStatus.Active),0==t.model.length&&n.closeLightbox()},onActive:function(e){console.log("onActive"),this.instance.showLoadPanel=!1},onLoading:function(e){console.log("onLoading");var t=this.instance;t.showLoadPanel=!0,t.customValue+="onLoad"},onError:function(e){console.log("onError");var t=this.instance;t.activeNotification=i.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1}),t.showNotifications=!0,t.showHeader=!0,t.asyncStatus(s.AsyncStatus.Active)}}),i.AddNameServerOnebyOne=function(n,a,e){t.domainDns.createNameserver(o,a.Host,a.Ip).then(function(e,t){console.log(e),null!=e&&null!=e&&(0==e.Error?null!=e.Result&&0<e.Result.length&&1==e.Result[0].IsSuccess?(n.model.splice(t,1),n.stuckNotifications.addSuccess(i.addNameserversResource.success_AddNS,{hasClose:!0,isAutoHide:!0})):(a.Status="ERROR",a.errDetails=e.Result[0].Description,n.asyncStatus(s.AsyncStatus.Error,{Msg:i.addNameserversResource.error_AddNameserversError})):(a.Status="ERROR",n.asyncStatus(s.AsyncStatus.Error,{Msg:i.addNameserversResource.error_AddNameserversError,Description:e.Msg})),0==n.model.length&&n.asyncStatus(s.AsyncStatus.Success))})},i.$watch("addNSbehavior.model.Ns",function(e,t){var n;e!==t&&(e=null==e?"":e.toString(),n=s.Validation.host(e),console.log(n))})}]),app.controller("advancedDNSAddUpdateDnsSecRecordModalCtrl",["$scope","$modalInstance","listItem","pageHelper","notificationService","$document","isHostedDomain","advansedDnsModelService","domainName","recordState","httpRepository",function(n,a,e,i,t,o,s,r,c,l,d){n.pageNotification=new t.instance,n.listItem=e,n.recordState=l,n.domainName=c,n.modelService=r,n.pageHelper=i,n.select2Options={minimumResultsForSearch:-1},n.tooltipSettings={width:"1024",extraclass:"tip-1024",align:"right"};var u=ErrorMessageRes;n.$watch("modalForm",function(e){n.listItem.editModel.modalForm=e}),n.modalBehavior=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;t.showErrors=!1,t.activeNotification=n.pageNotification.alerts,t.save=function(){t.activeNotification.clear(),n.listItem.editModel.canSave()?n.listItem.editModel.isTheSameWithPrevSaved()?(n.listItem.asyncStatus(i.AsyncStatus.Success,{sender:"doNotNeedUpdate"}),n.listItem.recordsListBehavior.updateActionAcsses(),a.close(n.listItem)):n.listItem.recordsListBehavior.saveRecords([n.listItem],function(e){0==e.Error?a.close(n.listItem):(n.listItem.asyncStatus(i.AsyncStatus.Active),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!1}))}):t.activeNotification.addError(u.error_FormIsNotValid,{hasClose:!0,isAutoHide:!1})},t.cancel=function(){a.dismiss("cancel")},t.asyncStatus(i.AsyncStatus.Active)},onSuccess:function(e){this.instance.asyncStatus(i.AsyncStatus.Active)},onActive:function(e){this.instance.showErrors=!1},onLoading:function(e){this.instance.showErrors=!1},onError:function(e){var t=this.instance;t.showErrors=!0,null!=t.activeNotification&&t.activeNotification.clear(),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),o.bind("keydown",function(e){27!==e.which||n.listItem.asyncStatus().isDisabled||a.dismiss("escape key press")}),o.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!n.listItem.asyncStatus().isDisabled&&n.modalBehavior.cancel()})}]),app.controller("advancedDNSAddUpdateRecordModalCtrl",["$scope","$modalInstance","listItem","pageHelper","notificationService","$document","listType","advansedDnsModelService","domainName","recordState","httpRepository",function(n,a,e,i,t,o,s,r,c,l,d){n.pageNotification=new t.instance,n.listItem=e,n.recordState=l,n.domainName=c,n.listType=s,n.modelService=r,n.pageHelper=i,n.select2Options={minimumResultsForSearch:-1},n.tooltipSettings={width:"1024",extraclass:"tip-1024",align:"right"};var u=ErrorMessageRes;n.modalBehavior=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;t.showErrors=!1,t.activeNotification=n.pageNotification.alerts,n.listItem.editModel.canSave=function(){return!(!n.mailboxDataForm.$valid||!(!n.listItem.editModel.isMetaFilledValid||n.listItem.editModel.isMetaFilledValid&&n.listItem.editModel.isMetaFilledValid()))||(angular.forEach(n.mailboxDataForm.$error.required,function(e){e.$setDirty()}),angular.forEach(n.mailboxDataForm.$error.pattern,function(e){e.$setDirty()}),!1)},t.save=function(){t.activeNotification.clear(),n.listItem.editModel.canSave()?n.listItem.recordsListBehavior.saveAll&&!n.listItem.recordsListBehavior.actionAcsses.canSaveOne&&n.listItem.recordsListBehavior.actionAcsses.canSaveAll?(n.listItem.asyncStatus(i.AsyncStatus.Loading),d.domainAdvancedDNS.updateEmailType(n.domainName,n.listItem.recordsListBehavior.selectedEmailProvider.value,[n.listItem.editModel.getRealModel()]).then(function(e){0==e.Error?(a.close(n.listItem),n.listItem.recordsListBehavior.updateGridAfterSaveAll(e)):t.newRecords[0].asyncStatus(i.AsyncStatus.Error,{sender:"saveAll",Msg:e.Msg})})):n.listItem.editModel.isTheSameWithPrevSaved()?(n.listItem.asyncStatus(i.AsyncStatus.Success,{sender:"doNotNeedUpdate"}),n.listItem.recordsListBehavior.updateActionAcsses(),a.close(n.listItem)):n.listItem.recordsListBehavior.saveRecords([n.listItem],function(e){0==e.Error?a.close(n.listItem):(n.listItem.asyncStatus(i.AsyncStatus.Active),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!1}))}):t.activeNotification.addError(u.error_FormIsNotValid,{hasClose:!0,isAutoHide:!1})},t.cancel=function(){a.dismiss("cancel")},t.asyncStatus(i.AsyncStatus.Active)},onSuccess:function(e){this.instance.asyncStatus(i.AsyncStatus.Active)},onActive:function(e){this.instance.showErrors=!1},onLoading:function(e){this.instance.showErrors=!1},onError:function(e){var t=this.instance;t.showErrors=!0,null!=t.activeNotification&&t.activeNotification.clear(),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),o.bind("keydown",function(e){27!==e.which||n.listItem.asyncStatus().isDisabled||a.dismiss("escape key press")}),o.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!n.listItem.asyncStatus().isDisabled&&n.modalBehavior.cancel()})}]),app.controller("advancedDNSUpdatePersonalDnsServerModalCtrl",["$scope","$modalInstance","listItem","pageHelper","notificationService","$document","advansedDnsModelService","domainName","httpRepository",function(n,a,e,i,t,o,s,r,c){n.pageNotification=new t.instance,n.listItem=e,n.domainName=r,n.modelService=s,n.pageHelper=i,n.select2Options={minimumResultsForSearch:-1};var l=ErrorMessageRes;n.modalBehavior=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;t.showErrors=!1,t.activeNotification=n.pageNotification.alerts,n.listItem.canSave=function(){return!!n.mailboxDataForm.$valid||(angular.forEach(n.mailboxDataForm.$error.required,function(e){e.$setDirty()}),angular.forEach(n.mailboxDataForm.$error.pattern,function(e){e.$setDirty()}),!1)},t.save=function(){t.activeNotification.clear(),n.listItem.asyncStatus(i.AsyncStatus.Loading),n.listItem.canSave()?n.listItem.savedModel.IP!=n.listItem.editModel.IP?c.domainAdvancedDNS.nameServerUpdate(n.domainName,n.listItem.savedModel.Nameserver,n.listItem.savedModel.IP,n.listItem.editModel.IP).then(function(e){e.sender="update",0==e.Error?(n.listItem.asyncStatus(i.AsyncStatus.Success,e),a.close(n.listItem)):(n.listItem.asyncStatus(i.AsyncStatus.Active),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!1}))}):(n.listItem.asyncStatus(i.AsyncStatus.Success,{sender:"doNotNeedUpdate"}),a.close(n.listItem)):t.activeNotification.addError(l.error_FormIsNotValid,{hasClose:!0,isAutoHide:!1})},t.cancel=function(){a.dismiss("cancel")},t.asyncStatus(i.AsyncStatus.Active)},onSuccess:function(e){this.instance.asyncStatus(i.AsyncStatus.Active)},onActive:function(e){this.instance.showErrors=!1},onLoading:function(e){this.instance.showErrors=!1},onError:function(e){var t=this.instance;t.showErrors=!0,null!=t.activeNotification&&t.activeNotification.clear(),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),o.bind("keydown",function(e){27!==e.which||n.listItem.asyncStatus().isDisabled||a.dismiss("escape key press")}),o.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!n.listItem.asyncStatus().isDisabled&&n.modalBehavior.cancel()})}]),app.controller("domainAdvancedDNSCtrl",["$scope","$rootScope","$q","httpRepository","$filter","notificationService","pageHelper","$timeout","ncGridParams","ncGridEventNames","$templateCache","advansedDnsModelService","dnsTemplateService","$modal","$compile","promiceQueue","$window",function(l,e,c,d,u,m,p,f,n,h,g,v,S,y,t,a,C){l.pageHelper=p,l.pageNotification=new m.instance,l.modelService=v,l.select2Options={minimumResultsForSearch:-1,dropdownCssClass:"small"},l.actionQueue=new a;var A="Select the record(s) to be modified by this action.";function D(i){var o,s=i.ncGrid;s.parameters.mapping.isLazyLoading=!1,s.parameters.storage.addNewFirst=!1,s.eventListener.then(function(e){e.$on(h.ncGridRenderPageAfter,function(e,t){i.showMoreLess&&i.showMoreLess.checkState()})}),s.settings.selection.canChangeSelection=function(e){return null!=e.savedModel&&!e.asyncStatus().isDisabled},i.listType!=l.listType.hostRecords&&i.listType!=l.listType.dynamicDns||((o=i.listType==l.listType.hostRecords?l.dynamicDnsList:l.hostRecordsList).ncGrid.eventListener.then(function(e){e.$on(h.ncGridAddItemAfter,function(e,t){var n;t.item.recordType.sortValue!=v.recordTypes.AdDns.sortValue||null==(n=u("propertyFilter")(s.parameters.storage.requestData,{"model.HostId":t.item.recordModel.HostId})[0])&&((n=R(angular.copy(t.item.recordModel),i,i.listType)).asyncStatus(p.AsyncStatus.Success,{sender:"doNotNeedUpdate"}),s.settings.actions.addNewItem(n),null==u("propertyFilter")(l.pageBehavior.model.CustomHostRecords.Records,{HostId:t.item.recordModel.HostId})[0]&&l.pageBehavior.model.CustomHostRecords.Records.push(t.item.recordModel))}),e.$on(h.ncGridRemoveItemAfter,function(e,t){var n,a,i;t.item.recordType.sortValue!=v.recordTypes.AdDns.sortValue||null!=(n=u("propertyFilter")(s.parameters.storage.requestData,{"model.HostId":t.item.recordModel.HostId})[0])&&(s.settings.actions.removeItem(n),a=u("propertyFilter")(l.pageBehavior.model.CustomHostRecords.Records,{HostId:t.item.recordModel.HostId})[0],-1!=(i=l.pageBehavior.model.CustomHostRecords.Records.indexOf(a))&&l.pageBehavior.model.CustomHostRecords.Records.splice(i,1)),o.listType==l.listType.hostRecords&&0==o.ncGrid.parameters.storage.requestData.length&&l.reloadHostRecordsList()})}),l.$on("updateA+DynamicDNSRecord",function(e,t){var n,a;t.listType!=i.listType&&((n=u("propertyFilter")(s.parameters.storage.requestData,{"model.HostId":t.item.recordModel.HostId})[0]).recordModel=angular.copy(t.item.recordModel),n.model=v[n.recordType.type].viewModel(angular.copy(n.recordModel)),n.savedModel=angular.copy(n.model),n.asyncStatus(p.AsyncStatus.Success,{sender:"doNotNeedUpdate"}),null!=(a=u("propertyFilter")(l.pageBehavior.model.CustomHostRecords.Records,{HostId:t.item.recordModel.HostId})[0])&&(a.Host=n.model.Host,a.Data=n.model.Data))}))}function N(t){return{isMore:null,isLess:null,onMore:function(){this.isMore=!1,this.isLess=!0,this.checkState()},onLess:function(){this.isMore=!0,this.isLess=!1,this.checkState()},checkState:function(){t.parameters.storage.requestData.length<=5?(this.isMore=!1,this.isLess=!1):null==this.isMore&&(this.isMore=!0);for(var e=0;e<t.parameters.storage.requestData.length;e++)-1==t.parameters.storage.requestData[e].model.HostId||e<5||this.isLess?t.parameters.storage.requestData[e].limitedDisplay=!1:t.parameters.storage.requestData[e].limitedDisplay=!0}}}function w(r,i){r.notSavedRecords=[],r.newRecords=[],r.addRecord=function(e,t){var n,a=t||new R(null,r,i);r.newRecords.push(a),r.notSavedRecords.push(a),r.showMoreLess.onMore(),l.checkMobileAction(a),a.recordType&&(a.focusValues=angular.copy(a.recordType.focusedFields)),l.isMobile()||(a.setFocus(null),n=$(e.target).offset().top-300,$("html, body").animate({scrollTop:n},0))},r.saveRecords=function(o,a){var e,t,n;function s(t,n){(r.listType==l.listType.dnsSec?t.recordState==l.recordState.creating?d.domainAdvancedDNS.addDnsSecRecords(l.pageBehavior.domainName,l.pageBehavior.model.Info.IsHostedDomain,[t.editModel.getRealModel()]):d.domainAdvancedDNS.updateDnsSecRecord(l.pageBehavior.domainName,l.pageBehavior.model.Info.IsHostedDomain,t.recordModel,t.editModel.getRealModel()):d.domainAdvancedDNS.addOrUpdateHostRecord(l.pageBehavior.domainName,t.editModel.getRealModel())).then(function(e){e.sender=t.recordState==l.recordState.creating?"add":"update",a?(0==e.Error&&t.asyncStatus(p.AsyncStatus.Success,e),a(e)):(t.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e),r.updateActionAcsses()),n.resolve()})}null!=o&&0!=o.length&&(n=(n=o.map(function(e){return e.recordType?e.recordType.type:null})).filter(function(e,t){return e&&n.indexOf(e)>=t}),e=l.pageBehavior.domainName,((t=n)&&0<t.length?d.domainAdvancedDNS.deleteParkingRecords(e,t):c.when({Result:{ParkingRecordsDeleted:!1}})).then(function(e){for(var t=0,n=[],a=0;a<o.length;a++){var i=o[a];i.asyncStatus(p.AsyncStatus.Loading),i.editModel.isTheSameWithPrevSaved()?i.asyncStatus(p.AsyncStatus.Success,{sender:"doNotNeedUpdate"}):i.editModel.canSave()?n.push(l.actionQueue.push(s,[o[a]])):(t++,i.asyncStatus(p.AsyncStatus.Active))}if(!0===e.Result.ParkingRecordsDeleted&&0<n.length&&c.all(n).then(function(){l.reloadHostRecordsList()}),r.listType==l.listType.dnsSec&&o.length==t)return r.activeNotification&&r.activeNotification.destroy&&r.activeNotification.destroy(),void(r.activeNotification=l.pageNotification.stuckNotifications.addWarning("To enable DNSSEC, get a DS (Delegation of Signing) from your DNS provider and provide it here.",{hasClose:!0,isAutoHide:!0}))}))},r.removeRecords=function(e){if(null==e||0==e.length)return r.activeNotification&&r.activeNotification.destroy&&r.activeNotification.destroy(),void(r.activeNotification=l.pageNotification.stuckNotifications.addWarning(A,{hasClose:!0,isAutoHide:!0}));function t(t,n){(r.listType==l.listType.dnsSec?d.domainAdvancedDNS.removeDomainDnsSecRecords(l.pageBehavior.domainName,l.pageBehavior.model.Info.IsHostedDomain,[t.model]):d.domainAdvancedDNS.removeDomainDnsRecord(t.model.HostId,t.model.RecordType,l.pageBehavior.domainName)).then(function(e){e.sender=e.sender="remove",t.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e),r.updateActionAcsses(),n.resolve()})}for(var n=0;n<e.length;n++)r.listType==l.listType.mailSettings&&n==e.length-1&&l.mailSettingsList.ncGrid.parameters.storage.requestData.length==e.length?r.activeNotification=l.pageNotification.stuckNotifications.addWarning("At least one MX record should be present",{hasClose:!0,isAutoHide:!0}):r.listType==l.listType.dnsSec&&n==e.length-1&&l.dnsSecList.ncGrid.parameters.storage.requestData.length==e.length?r.activeNotification=l.pageNotification.stuckNotifications.addWarning("At least one DNSSEC record should be present",{hasClose:!0,isAutoHide:!0}):(e[n].asyncStatus(p.AsyncStatus.Loading),l.actionQueue.push(t,[e[n]]))},r.actionAcsses={canRemove:!0,canSaveAll:!0,canSaveOne:!0,canAddNew:!0,canCancel:!0},r.updateActionAcsses=function(){}}function R(e,o,n){return new p.AsyncStateBehavior({constructor:function(){var i=this.instance;i.recordsListBehavior=o,i.listType=n,i.model={},i.editModel={},i.recordModel=angular.copy(e),null!=i.recordModel?(i.recordType=v.getRestrictedRecordType(i.recordModel),i.model=v[i.recordType.type].viewModel(angular.copy(i.recordModel)),i.savedModel=angular.copy(i.model),i.recordState=l.recordState.active):(i.recordType=o.availableRecordTypes[0],i.editModel=v[i.recordType.type].editModel(null,i.savedModel),n==l.listType.hostRecords&&(i.editModel.HostId=-1),i.recordState=l.recordState.creating),i.setFocus=function(e){null!=e&&(n==l.listType.hostRecords||n!=l.listType.hostRecords&&"recordType"!=e)?i.focusValues[e]=!0:n==l.listType.hostRecords?i.focusValues.recordType=!0:i.focusValues.host=!0},i.editRecord=function(e,t,n,a){e&&(i.model.ReadOnly==l.lockType.readOnly||i.model.ReadOnly==l.lockType.locked)&&l.isPromtEditRecord||i.recordState!=l.recordState.active?l.isMobile()&&!n&&null!=t&&f(function(){for(var e=angular.element(".editTooltip"),t=0;t<e.length;t++)angular.element(e[t].closest(".is-active")).removeClass("is-active")}):(t&&angular.element(t.target).closest(".is-active").removeClass("is-active"),l.isMobile()&&!n||(i.asyncStatus(p.AsyncStatus.Active),i.editModel=v[i.recordType.type].editModel(null,angular.copy(i.recordModel)),i.editModel.recordModel=i.recordModel,i.recordState=l.recordState.editing,o.notSavedRecords.push(i),i.focusValues=angular.copy(i.recordType.focusedFields),!n&&1023<C.innerWidth&&i.setFocus(a),l.checkMobileAction(i)))},i.onRecordTypeChange=function(){for(var e=Object.keys(v.recordTypes),t=0;t<e.length;t++)if(v.recordTypes[e[t]].sortValue==i.editModel.selectedRecordTypeValue){i.recordType=v.recordTypes[e[t]];break}i.editModel=v[i.recordType.type].editModel(i.editModel,null!=i.recordModel?angular.copy(i.recordModel):null)},i.removeFromNotSavedRecords=function(){var e=o.notSavedRecords.indexOf(i);o.notSavedRecords.splice(e,1)},i.removeFromNewRecords=function(){var e=o.newRecords.indexOf(i);o.newRecords.splice(e,1)},i.cancelRecord=function(){i.removeFromNotSavedRecords(),i.recordState==l.recordState.creating?(angular.element(".cancel.ng-scope").mouseleave(),i.removeFromNewRecords()):(i.recordType=v.getRestrictedRecordType(i.recordModel),i.model=v[i.recordType.type].viewModel(angular.copy(i.recordModel)),i.savedModel=angular.copy(i.model),i.recordState=l.recordState.active,i.asyncStatus(p.AsyncStatus.Active)),i.listType==l.listType.mailSettings&&(o.selectedEmailProvider=angular.copy(o.savedEmailEmailProvider),o.emailProviderSelectedValue=o.savedEmailEmailProvider.sortValue,0==o.ncGrid.parameters.storage.requestData.length&&0==o.newRecords.length&&o.ncGrid.settings.reload())},i.saveRecord=function(){o.saveRecords([i])},i.removeRecord=function(e){e&&angular.element(e.target).closest(".is-active").removeClass("is-active"),o.removeRecords([i])}},onSuccess:function(e){var t=this.instance;S.reloadDnsTemplates(l.pageBehavior.domainName),"add"==e.sender||"update"==e.sender?(t.removeFromNotSavedRecords(),t.recordState==l.recordState.creating&&t.removeFromNewRecords(),0<e.Result.length&&(t.recordModel=angular.copy(e.Result[0]),t.recordType=v.getRestrictedRecordType(t.recordModel),t.model=v[t.recordType.type].viewModel(angular.copy(t.recordModel)),t.savedModel=angular.copy(t.model),t.recordState=l.recordState.active,"add"==e.sender?o.ncGrid.settings.actions.addNewItem(t):t.recordType.sortValue==v.recordTypes.AdDns.sortValue&&l.$broadcast("updateA+DynamicDNSRecord",{item:t,listType:n})),setTimeout(function(){t.asyncStatus(p.AsyncStatus.Active),l.$$phase||l.$apply()},m.notificationTimeLine.success)):"doNotNeedUpdate"==e.sender?(t.recordState=l.recordState.active,setTimeout(function(){t.asyncStatus(p.AsyncStatus.Active),l.$$phase||l.$apply()},m.notificationTimeLine.success)):"remove"==e.sender&&(t.removeFromNotSavedRecords(),o.ncGrid.settings.actions.removeItem(t)),n==l.listType.mailSettings&&o.updateActionAcsses()},onActive:function(e){this.instance},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.activeNotification=l.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0}),setTimeout(function(){t.asyncStatus(p.AsyncStatus.Active),l.$$phase||l.$apply()},m.notificationTimeLine.error)}})}function E(e,o){return new p.AsyncStateBehavior({constructor:function(){var i=this.instance;i.recordsListBehavior=o,i.focusValues={keyTag:!1,algorithm:!1,digestType:!1,digest:!1},i.setFocus=function(t){Object.keys(i.focusValues).forEach(function(e){i.focusValues[e]=t==e}),t||(i.focusValues.keyTag=!0)},i.onAlgorithmTypeChange=function(){},i.onDigestTypeChange=function(){},i.model={},i.editModel={},i.recordModel=angular.copy(e),null!=i.recordModel?(i.model=v.DnsSec.viewModel(angular.copy(i.recordModel)),i.savedModel=angular.copy(i.model),i.recordState=l.recordState.active):(i.editModel=v.DnsSec.editModel(null,i.savedModel),i.recordState=l.recordState.creating),i.editRecord=function(e,t,n,a){e&&l.isPromtEditRecord||i.recordState!=l.recordState.active?l.isMobile()&&!n&&null!=t&&f(function(){for(var e=angular.element(".editTooltip"),t=0;t<e.length;t++)angular.element(e[t].closest(".is-active")).removeClass("is-active")}):(t&&angular.element(t.target).closest(".is-active").removeClass("is-active"),l.isMobile()&&!n||(i.asyncStatus(p.AsyncStatus.Active),i.editModel=v.DnsSec.editModel(i.model,i.savedModel),i.editModel.recordModel=i.recordModel,i.recordState=l.recordState.editing,o.notSavedRecords.push(i),!n&&1023<C.innerWidth&&i.setFocus(a),l.checkMobileAction(i)))},i.removeFromNotSavedRecords=function(){var e=o.notSavedRecords.indexOf(i);o.notSavedRecords.splice(e,1)},i.removeFromNewRecords=function(){var e=o.newRecords.indexOf(i);o.newRecords.splice(e,1)},i.cancelRecord=function(){i.removeFromNotSavedRecords(),i.recordState==l.recordState.creating?(angular.element(".cancel.ng-scope").mouseleave(),i.removeFromNewRecords()):(i.recordModel=angular.copy(e),i.model=v.DnsSec.viewModel(angular.copy(i.recordModel)),i.savedModel=angular.copy(e),i.recordState=l.recordState.active,i.asyncStatus(p.AsyncStatus.Active)),o.updateActionAcsses()},i.saveRecord=function(){i.editModel.canSave()&&o.saveRecords([i])},i.removeRecord=function(e){e&&angular.element(e.target).closest(".is-active").removeClass("is-active"),o.removeRecords([i])},i.asyncStatus(p.AsyncStatus.Active)},onSuccess:function(e){var t,n=this.instance,a=null;function i(){for(var e=0;e<l.pageBehavior.model.DnsSecModel.Records.length;e++){var t=l.pageBehavior.model.DnsSecModel.Records[e];if(t.KeyTag==n.recordModel.KeyTag&&t.AlgorythmType==n.recordModel.AlgorythmType&&t.DigestType==n.recordModel.DigestType&&t.Digest==n.recordModel.Digest)return e}return null}"add"==e.sender||"update"==e.sender?(n.removeFromNotSavedRecords(),n.recordState==l.recordState.creating&&n.removeFromNewRecords(),(t="update"==e.sender?e.Result:e.Result[0])&&("update"==e.sender&&(a=i()),n.recordModel=angular.copy(t),n.model=v.DnsSec.viewModel(angular.copy(n.recordModel)),n.savedModel=angular.copy(n.model),n.recordState=l.recordState.active,"add"==e.sender?o.ncGrid.settings.actions.addNewItem(n).then(function(){null==i()&&(l.pageBehavior.model.DnsSecModel.Records.push(angular.copy(t)),o.updateActionAcsses())}):l.pageBehavior.model.DnsSecModel.Records[a]=n.recordModel),setTimeout(function(){n.asyncStatus(p.AsyncStatus.Active),l.$$phase||l.$apply()},m.notificationTimeLine.success)):"doNotNeedUpdate"==e.sender?(n.recordState=l.recordState.active,setTimeout(function(){n.asyncStatus(p.AsyncStatus.Active),l.$$phase||l.$apply()},m.notificationTimeLine.success)):"remove"==e.sender&&(n.removeFromNotSavedRecords(),a=i(),o.ncGrid.settings.actions.removeItem(n).then(function(){l.pageBehavior.model.DnsSecModel.Records.splice(a,1),o.updateActionAcsses()})),o.updateActionAcsses()},onActive:function(e){},onLoading:function(e){},onError:function(e){var t=this.instance;t.activeNotification=l.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0}),setTimeout(function(){t.asyncStatus(p.AsyncStatus.Active),l.$$phase||l.$apply()},m.notificationTimeLine.error)}})}l.recordState={active:"",editing:"edit",creating:"new"},l.isMobile=function(){return C.innerWidth<=1023},l.lockType={editable:0,readOnly:1,locked:2},l.listType={hostRecords:0,mailSettings:1,dynamicDns:2,personalDnsServer:3,dnsSec:4},l.isPromtEditRecord=!0,l.isPromtRemoveRecord=!0,l.disablePromtRemoveRecord=function(){l.isPromtRemoveRecord=!1,angular.element(".prompt-tip.remove-tip").each(function(e){angular.element(e).remove()})},l.disablePromtEditRecord=function(){l.isPromtEditRecord=!1,angular.element(".prompt-tip.locked-tip").each(function(e){angular.element(e).remove()})},l.advdnsMultipleTemplateUrl=d.domainAdvancedDNS.getAdvancedDnsRecordTemplatePath,l.domainDnsStatus={Default:0,SharedServerType:1,CustomServerType:2,ThirdParty:3,TransferRights:4,Error:5},l.domainTransferRights={IsDDNS:!0,IsHostsMails:!0,IsPersonalNameserver:!0,IsDNSSEC:!0},l.pageBehavior=new p.AsyncStateBehavior({constructor:function(){var t=this.instance;t.isShowBasicGrids=!1,t.isShowPersonalDNSGrid=!1,t.asyncStatus(p.AsyncStatus.Loading),t.setDomainName=function(e){t.domainName=e,g.get(null,d.domainAdvancedDNS.getAdvancedDnsRecordTemplatePath),d.domainAdvancedDNS.getDefaultEmailProviderRecords().then(function(e){e.sender="getDefaultRecords",0==e.Error&&(t.DefaultEmailProviderRecords=e.Result.DefaultEmailProviderRecords)}),d.domainAdvancedDNS.getAdvancedDnsInfo(e,!1).then(function(e){e.sender="getModel",t.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e)})},l.hostRecordsList={},l.hostRecordsList.ncGrid=new n,l.hostRecordsList.ncGrid.parameters.search.serchPropertyNames=["model.selectedRecordTypeValue","model.Host","model.Data","model.Service","model.Protocol","model.Target","model.Weight","model.Port","model.MetaTitle","model.MetaKeywords","model.MetaDescription"],l.mailSettingsList={},l.mailSettingsList.ncGrid=new n,l.dynamicDnsList={},l.dynamicDnsList.ncGrid=new n,l.dynamicDnsList.ncGrid.parameters.search.serchPropertyNames=["model.selectedRecordTypeValue","model.Host","model.Data"],l.personalDnsList={},l.personalDnsList.ncGrid=new n,l.personalDnsList.ncGrid.parameters.search.serchPropertyNames=["model.Nameserver","model.IP"],l.dnsSecList={},l.dnsSecList.ncGrid=new n,t.updateValueRowTemplateName=function(e){e.valueViewTemplatePath="advancedDns_"+t.recordType.type+"_view",e.valueEditTemplatePath="advancedDns_"+t.recordType.type+"_edit"},t.getRecordType=function(){}},onSuccess:function(e){var n,a,t,i,o,s,r=this.instance;function c(){d.domainAdvancedDNS.getDynamicRecords(l.pageBehavior.domainName).then(function(e){0==e.Error&&(n.dnsStatus=""!=e.Result.DDNSPassword,n.dnsStatus&&(n.ncGrid.settings.reload(),n.dnsPassword=e.Result.DDNSPassword,l.pageBehavior.model.DynDnsDetails.SystemRequirements&&(n.dynDnsSoftName=l.pageBehavior.model.DynDnsDetails.SystemRequirements[0])))})}"getModel"==e.sender&&(r.model=e.Result,r.loading=!1,l.isDomainLocked=e.Result.Info.isDomainLocked,r.domainTransferRights=angular.copy(l.domainTransferRights),r.domainDnsStatus=(s=l.domainDnsStatus.Default,r.model.Info.SharedHosting?s=l.domainDnsStatus.SharedServerType:r.model.Info.DnsProviderType==v.DNSProviderSubType.CUSTOM?s=l.domainDnsStatus.CustomServerType:!r.model.Info.DomainExists||!(r.model.Info.IsHostedDomain||r.model.Info.IsOwner||r.model.DynDnsOverviewModel.DNSDetails.IsUsingOurDNS||r.model.Info.DnsProviderType!=v.DNSProviderSubType.NONE)||r.model.DomainBasicDetails.PremiumDNS.IsPremiumdDNSBuyed&&!r.model.DomainBasicDetails.PremiumDNS.IsActive&&!r.model.DynDnsOverviewModel.DNSDetails.IsUsingOurDNS||r.model.Info.DomainExists&&r.model.Info.IsHostedDomain&&!r.model.Info.IsOwner&&r.model.Info.DnsProviderType==v.DNSProviderSubType.FREE2?s=l.domainDnsStatus.ThirdParty:r.model.Info.IsHostedDomain||r.model.Info.IsOwner||!r.model.DynDnsOverviewModel.DNSDetails.IsUsingOurDNS?s=l.domainDnsStatus.Default:(s=l.domainDnsStatus.TransferRights,o=function(e){for(var t=0;t<r.model.Info.ModificationRights.length;t++)if(r.model.Info.ModificationRights[t]==e)return!0;return!1},r.domainTransferRights={IsDDNS:o("ddns"),IsHostsMails:o("hosts"),IsPersonalNameserver:o("nameserver"),IsDNSSEC:o("dnsSec")},r.domainTransferRights.IsDDNS||r.domainTransferRights.IsHostsMails||r.domainTransferRights.IsPersonalNameserver||r.domainTransferRights.IsDNSSEC||(r.activeNotification=l.pageNotification.alerts.addWarning("You have not permission to manage this domain.",{hasClose:!0,isAutoHide:!1}))),s),(i=r).isFreeOrPremiumDnsProvider=i.model.DnsTemplates.IsDnsTemplatesAvailable,(t=l.hostRecordsList).listType=l.listType.hostRecords,t.showMoreLess=N(t.ncGrid),D(t),t.ncGrid.settings.getData=function(e,t){for(var n=l.pageBehavior.model.CustomHostRecords.Records,a=[],i=0;i<n.length;i++)null==n[i].EmailProvider&&n[i].RecordType!=v.realHostType.MX&&n[i].RecordType!=v.realHostType.MXE&&a.push(R(n[i],l.hostRecordsList,l.listType.hostRecords));e.resolve({Data:a})},w(t,l.listType.hostRecords),t.availableRecordTypes=[],t.availableRecordTypes.push(v.recordTypes.A),t.availableRecordTypes.push(v.recordTypes.AdDns),t.availableRecordTypes.push(v.recordTypes.AAAA),t.availableRecordTypes.push(v.recordTypes.ALIAS),t.availableRecordTypes.push(v.recordTypes.CAA),t.availableRecordTypes.push(v.recordTypes.CNAME),t.availableRecordTypes.push(v.recordTypes.NS),t.availableRecordTypes.push(v.recordTypes.SRV),t.availableRecordTypes.push(v.recordTypes.TXT),t.availableRecordTypes.push(v.recordTypes.URL),t.availableUrlTypes=[],Object.keys(v.availableUrlTypes).forEach(function(e){(l.pageBehavior.model.Info.DnsProviderType!=v.DNSProviderSubType.ENOM||l.pageBehavior.model.Info.DnsProviderType==v.DNSProviderSubType.ENOM&&v.availableUrlTypes[e].sortValue!=v.availableUrlTypes.Permanent.sortValue)&&t.availableUrlTypes.push(v.availableUrlTypes[e])}),t.availableUrlTypes=u("orderBy")(t.availableUrlTypes,"sortValue"),t.availableTtlTypes=[],Object.keys(v.availableTtlTypes).forEach(function(e){t.availableTtlTypes.push(v.availableTtlTypes[e])}),t.availableTtlTypes=u("orderBy")(t.availableTtlTypes,"sortValue"),t.avaliableAliasTtlTypes=v.avaliableAliasTtlTypes,t.tags=[],Object.keys(v.tags).forEach(function(e){t.tags.push(v.tags[e])}),t.tags=u("orderBy")(t.tags,"sortValue"),function(){var s=l.mailSettingsList;s.listType=l.listType.mailSettings,s.showMoreLess=N(s.ncGrid);function t(e,t){return null==e&&null==t||0==e?s.availableEmailProviders[0]:6==e||7==e?u("propertyFilter")(s.availableEmailProviders,{value:3})[0]:e?u("propertyFilter")(s.availableEmailProviders,{value:e})[0]:u("propertyFilter")(s.availableEmailProviders,{sortValue:t})[0]}s.availableEmailProviders=[],Object.keys(v.availableEmailProviders).forEach(function(e){(l.pageBehavior.model.Info.DnsProviderType!=v.DNSProviderSubType.ENOM||l.pageBehavior.model.Info.DnsProviderType==v.DNSProviderSubType.ENOM&&v.availableEmailProviders[e].sortValue!=v.availableEmailProviders.GMAIL.sortValue)&&s.availableEmailProviders.push(v.availableEmailProviders[e])}),s.availableEmailProviders=u("orderBy")(s.availableEmailProviders,"sortValue"),s.availableTtlTypes=[],Object.keys(v.availableTtlTypes).forEach(function(e){s.availableTtlTypes.push(v.availableTtlTypes[e])}),s.availableTtlTypes=u("orderBy")(s.availableTtlTypes,"sortValue"),s.savedEmailEmailProvider=angular.copy(t(l.pageBehavior.model.Info.EmailProviderType)),s.selectedEmailProvider=angular.copy(s.savedEmailEmailProvider),s.emailProviderSelectedValue=s.savedEmailEmailProvider.sortValue,f(function(){s.emailProviderSelectedValue=s.savedEmailEmailProvider.sortValue.toString()}),s.onEmailProviderChange=function(){s.selectedEmailProvider=t(null,s.emailProviderSelectedValue),dataLayer.push({event:s.selectedEmailProvider.name+" has chosen",fromLocation:"Advance DNS"}),s.newRecords=[],s.ncGrid.settings.reload()};D(s),s.ncGrid.eventListener.then(function(e){e.$on(h.ncGridRenderPageAfter,function(e,t){(s.ncGrid.parameters.storage.isEmpty&&1==s.newRecords.length&&l.pageBehavior.domainDnsStatus==l.domainDnsStatus.Default||l.pageBehavior.domainTransferRights.IsHostsMails&&l.pageBehavior.domainDnsStatus==l.domainDnsStatus.TransferRights)&&l.checkMobileAction(s.newRecords[0]),s.updateActionAcsses()})}),s.ncGrid.settings.getData=function(e,t){e.resolve({Data:function(){var e=l.pageBehavior.model.CustomHostRecords.Records,i=[];if(s.selectedEmailProvider.value==v.availableEmailProviders.NONE.value||s.selectedEmailProvider.value==v.availableEmailProviders.OX.value||s.selectedEmailProvider.value==v.availableEmailProviders.GMAIL.value)return i;if(s.selectedEmailProvider.value==v.availableEmailProviders.FWD.value){s.newRecords=[],s.notSavedRecords=[],s.availableRecordTypes=[],s.availableRecordTypes.push(v.recordTypes.TXT);for(var t=0;t<e.length;t++)e[t].EmailProvider==v.availableEmailProviders.FWD.value&&e[t].RecordType==v.realHostType.TXT&&i.push(R(e[t],l.mailSettingsList,l.listType.mailSettings));function n(e){for(var t,n=l.pageBehavior.DefaultEmailProviderRecords.FWD.Records,a=0;a<n.length;a++){n[a].RecordType==v.realHostType.TXT&&((t=R(n[a],l.mailSettingsList,l.listType.mailSettings)).model.ReadOnly=l.lockType.locked,e?i.push(t):(s.ncGrid.settings.actions.addNewItem(t),l.$$phase||l.$apply()))}}0==i.length&&(null==l.pageBehavior.DefaultEmailProviderRecords?l.$watch("pageBehavior.DefaultEmailProviderRecords",function(e,t){e!=t&&n(!1)}):n(!0))}else if(s.selectedEmailProvider.value==v.availableEmailProviders.MXE.value){s.newRecords=[],s.notSavedRecords=[],s.availableRecordTypes=[],s.availableRecordTypes.push(v.recordTypes.MXE);for(var a,t=0;t<e.length;t++)e[t].RecordType==v.realHostType.MXE&&i.push(R(e[t],l.mailSettingsList,l.listType.mailSettings));0==i.length&&(a=R(null,l.mailSettingsList,l.listType.mailSettings),s.newRecords.push(a),s.notSavedRecords.push(a))}else if(s.selectedEmailProvider.value==v.availableEmailProviders.MX.value){s.newRecords=[],s.notSavedRecords=[],s.availableRecordTypes=[],s.availableRecordTypes.push(v.recordTypes.MX);for(var o,t=0;t<e.length;t++)e[t].RecordType==v.realHostType.MX&&i.push(R(e[t],l.mailSettingsList,l.listType.mailSettings));0==i.length&&(o=R(null,l.mailSettingsList,l.listType.mailSettings),s.newRecords.push(o),s.notSavedRecords.push(o))}return i}()})},w(s,l.listType.mailSettings),s.updateActionAcsses=function(){s.savedEmailEmailProvider.value!=s.selectedEmailProvider.value?(s.actionAcsses.canSaveAll=!0,s.actionAcsses.canSaveOne=!1):(s.actionAcsses.canSaveAll=!1,s.actionAcsses.canSaveOne=!0),s.actionAcsses.canCancel=0<s.ncGrid.parameters.storage.requestData.length&&null!=s.ncGrid.parameters.storage.requestData[0].savedModel,s.actionAcsses.canRemove=s.selectedEmailProvider.value==v.availableEmailProviders.MX.value&&1<s.ncGrid.parameters.storage.requestData.length,s.actionAcsses.canAddNew=s.selectedEmailProvider.value==v.availableEmailProviders.MX.value&&0<s.ncGrid.parameters.storage.requestData.length},s.updateGridAfterSaveAll=function(e){s.ncGrid.parameters.mapping.isLoading=!1,l.pageBehavior.model=e.Result,s.savedEmailEmailProvider=angular.copy(t(l.pageBehavior.model.Info.EmailProviderType)),s.savedEmailEmailProvider=angular.copy(s.selectedEmailProvider),s.ncGrid.settings.reload(),s.updateActionAcsses(),s.activeNotification=l.pageNotification.stuckNotifications.addSuccess(DomainDnsValidation.success_Contextual_MailSettingSuccess,{hasClose:!0,isAutoHide:!0}),S.reloadDnsTemplates(l.pageBehavior.domainName)},s.saveAll=function(){if(!s.actionAcsses.canSaveOne&&s.actionAcsses.canSaveAll){var t=[];function e(e){e.recordState==l.recordState.creating&&e.editModel.canSave()||e.recordState==l.recordState.editing&&e.editModel.canSave()?t.push(e.editModel.getRealModel()):e.recordState==l.recordState.active&&t.push(e.recordModel)}s.activeNotification=null;for(var n=0;n<s.ncGrid.parameters.storage.requestData.length;n++)e(s.ncGrid.parameters.storage.requestData[n]);for(n=0;n<s.newRecords.length;n++)e(s.newRecords[n]);if(0==t.length&&(s.selectedEmailProvider.value==v.availableEmailProviders.MX.value||s.selectedEmailProvider.value==v.availableEmailProviders.MX.value))return;s.ncGrid.parameters.mapping.isLoading=!0,f(function(){0<t.length||s.selectedEmailProvider.value!=v.availableEmailProviders.MX.value||s.selectedEmailProvider.value!=v.availableEmailProviders.MXE.value||s.selectedEmailProvider.value!=v.availableEmailProviders.TXT.value?l.actionQueue.push(function(e,t){d.domainAdvancedDNS.updateEmailType(l.pageBehavior.domainName,s.selectedEmailProvider.value,e).then(function(e){s.ncGrid.parameters.mapping.isLoading=!1,0==e.Error?s.updateGridAfterSaveAll(e):s.newRecords[0].asyncStatus(p.AsyncStatus.Error,{sender:"saveAll",Msg:e.Msg})}),t.resolve()},[t]):s.ncGrid.parameters.mapping.isLoading=!1})}else s.saveRecords(s.notSavedRecords)}}(),(a=l.personalDnsList).listType=l.listType.personalDnsServer,D(a),a.nameServerTypes=[{name:"Standard Nameservers",value:0},{name:"Custom Nameservers",value:1}],f(function(){a.selectedNameServerTypeValue=a.nameServerTypes[0].value.toString()}),a.search=function(){a.neverSearch=!1,a.ncGrid.settings.reload()},a.defaultNsServers=[{id:"ns1",text:"ns1"},{id:"ns2",text:"ns2"},{id:"ns3",text:"ns3"},{id:"ns4",text:"ns4"},{id:"ns5",text:"ns5"},{id:"ns6",text:"ns6"},{id:"ns7",text:"ns7"},{id:"ns8",text:"ns8"},{id:"ns9",text:"ns9"},{id:"dns1",text:"dns1"},{id:"dns2",text:"dns2"},{id:"dns3",text:"dns3"},{id:"dns4",text:"dns4"},{id:"dns6",text:"dns6"},{id:"dns7",text:"dns7"},{id:"dns8",text:"dns8"},{id:"dns9",text:"dns9"}],f(function(){angular.element(".nameservers-select").select2({dropdownCssClass:"small",placeholder:"Nameserver",data:a.defaultNsServers,allowClear:!1,maximumInputLength:63,formatResult:function(e){return t=null!=e.html?e.html:e.text,String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");var t},createSearchChoice:function(e,t){return 0<=e.indexOf(" ")?null:0===$(t).filter(function(){return 0===this.text.localeCompare(e)}).length?{id:e,text:e}:void 0}}),angular.element(".nameservers-select").on("change",function(e){a.addPersonalDnsModel.Host=e.val,l.addPersonalDnsForm.personalDnsNsServerName.$setDirty(),null==l.$$phase&&l.$apply()})}),a.addNameservers=function(){function e(e,t){d.domainAdvancedDNS.nameServerAdd(e).then(function(e){a.processingAddNameServer=!1,0==e.Error?(a.addNameServerMsg=l.pageNotification.stuckNotifications.addSuccess(DomainDnsInfoRes.success_AddNS,{hasClose:!0,isAutoHide:!0}),a.cancelNameservers()):a.addNameServerMsg=l.pageNotification.stuckNotifications.addError(DomainDnsInfoRes.error_AddNameserversError,{hasClose:!0,isAutoHide:!0}),t.resolve()})}a.addNameServerMsg=null,l.addPersonalDnsForm.$valid&&null!=a.addPersonalDnsModel.Host?(a.processingAddNameServer=!0,f(function(){l.actionQueue.push(e,[a.addPersonalDnsModel])})):angular.forEach(l.addPersonalDnsForm.$error.required,function(e){e.$setDirty()})},a.cancelNameservers=function(){a.setDefaultPersonalDnsModel(),angular.element(".nameservers-select").val(null).trigger("change"),angular.element(".addNameserver").closest(".is-active").removeClass("is-active"),l.addPersonalDnsForm.$setPristine()},a.addPersonalDnsModel={},a.addPersonalDnsModel.Domainname=l.pageBehavior.domainName,a.addPersonalDnsModel.Host=null,a.setDefaultPersonalDnsModel=function(){a.addPersonalDnsModel.Domainname=l.pageBehavior.domainName,a.addPersonalDnsModel.Host=null,a.addPersonalDnsModel.Ip="",a.showTooltip=!1},a.removeRecords=function(e){if((a.activeNotification=null)!=e&&0!=e.length)for(var t=0;t<e.length;t++)e[t].asyncStatus(p.AsyncStatus.Loading),l.actionQueue.push(n,[e[t]]);else a.activeNotification=l.pageNotification.stuckNotifications.addWarning(A,{hasClose:!0,isAutoHide:!0});function n(t,n){d.domainAdvancedDNS.nameServerDelete(l.pageBehavior.domainName,t.model.Nameserver).then(function(e){e.sender="remove",t.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e),n.resolve()})}},a.ncGrid.settings.getData=function(n,e){d.domainAdvancedDNS.nameServerSearch(e,l.pageBehavior.domainName,"1"==a.selectedNameServerTypeValue?a.hostSearchValue:"").then(function(e){var t;0==e.Error?(t=[],e.Result.Data.forEach(function(e){var i,n;t.push((i=e,n=a,new p.AsyncStateBehavior({constructor:function(){var a=this.instance;a.model=i,a.savedModel=angular.copy(i),a.recordState=l.recordState.active,a.editRecord=function(e,t,n){a.recordState==l.recordState.active&&(t&&angular.element(t.target).closest(".is-active").removeClass("is-active"),C.innerWidth<=1023&&null==n||(a.editModel=angular.copy(i),a.recordState=l.recordState.editing,n?y.open({templateUrl:d.domainAdvancedDNS.getAdvancedDNSUpdatePersonalDnsServerModal,controller:"advancedDNSUpdatePersonalDnsServerModalCtrl",size:"lg",resolve:{listItem:function(){return a},domainName:function(){return l.pageBehavior.domainName}}}).result.then(function(e){a.cancelRecord(),0},function(){a.cancelRecord(),0}):a.focusOn=!0))},a.saveRecord=function(){a.valueForm.$valid?(a.asyncStatus(p.AsyncStatus.Loading),a.savedModel.IP!=a.editModel.IP?d.domainAdvancedDNS.nameServerUpdate(l.pageBehavior.domainName,a.savedModel.Nameserver,a.savedModel.IP,a.editModel.IP).then(function(e){e.sender="update",a.asyncStatus(0==e.Error?p.AsyncStatus.Success:p.AsyncStatus.Error,e)}):a.asyncStatus(p.AsyncStatus.Success,{sender:"doNotNeedUpdate"})):angular.forEach(a.valueForm.$error.required,function(e){e.$setDirty()})},a.removeRecord=function(e){e&&angular.element(e.target).closest(".is-active").removeClass("is-active"),n.removeRecords([a])},a.cancelRecord=function(){a.recordState=l.recordState.active}},onSuccess:function(e){var t=this.instance;"update"==e.sender?(t.recordState=l.recordState.active,t.model.IP=t.editModel.IP,t.savedModel=angular.copy(i),t.activeNotification=l.pageNotification.stuckNotifications.addSuccess(DomainDnsInfoRes.success_AddNS,{hasClose:!0,isAutoHide:!0}),setTimeout(function(){t.asyncStatus(p.AsyncStatus.Active),l.$$phase||l.$apply()},m.notificationTimeLine.success)):"doNotNeedUpdate"==e.sender?(t.recordState=l.recordState.active,setTimeout(function(){t.asyncStatus(p.AsyncStatus.Active),l.$$phase||l.$apply()},m.notificationTimeLine.success)):"remove"==e.sender&&(t.activeNotification=l.pageNotification.stuckNotifications.addSuccess(u("stringFormat")("{0} successfully removed",[t.model.Nameserver]),{hasClose:!0,isAutoHide:!0}),n.ncGrid.settings.actions.removeItem(t))},onActive:function(e){this.instance},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance,n=null,n="update"==e.sender?DomainDnsInfoRes.error_UpdateNameserversError:u("stringFormat")(DomainDnsInfoRes.static_DeleteDynamicErrorMessage,[t.model.Nameserver]);t.activeNotification=l.pageNotification.stuckNotifications.addError(n,{hasClose:!0,isAutoHide:!0}),setTimeout(function(){t.asyncStatus(p.AsyncStatus.Active),l.$$phase||l.$apply()},m.notificationTimeLine.error)}})))}),n.resolve({Data:t})):n.resolve({Data:[]})})},a.ncGrid.parameters.mapping.isLoading=!1,a.ncGrid.parameters.mapping.isPageFull=!0,N(a.ncGrid),a.neverSearch=!0,(n=l.dynamicDnsList).listType=l.listType.dynamicDns,c(),n.resetKey=function(){var t=y.open({templateUrl:"/Common/PromptRemove",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return"Please reset DDNS Password"},modalContent:function(){return"You are about to reset your password. To avoid interruption of service, you must update ALL the locations that require this password to log in. Do you wish to continue? [Yes/No]"}}});t.result.then(function(e){d.domainAdvancedDNS.resetDnsPassword(l.pageBehavior.domainName).then(function(e){0==e.Error&&(n.dnsPassword=e.Msg)}),t=null},function(){t=null})},n.showMoreLess=N(n.ncGrid),D(n),n.ncGrid.settings.getData=function(e,t){for(var n=l.pageBehavior.model.CustomHostRecords.Records,a=[],i=0;i<n.length;i++)null==n[i].EmailProvider&&n[i].RecordType==v.realHostType.A&&1==n[i].IsDynDns&&a.push(R(n[i],l.dynamicDnsList,l.listType.dynamicDns));e.resolve({Data:a})},n.onChangeDnsStatus=function(){n.dnsStatus=!n.dnsStatus,n.dnsStatus?d.domainAdvancedDNS.turnOffDns(l.pageBehavior.domainName).then(function(e){0==e.Error&&(n.dnsStatus=!n.dnsStatus)}):d.domainAdvancedDNS.turnOnDns(l.pageBehavior.domainName).then(function(e){0==e.Error&&(n.ncGrid.settings.reload(),n.dnsStatus=!n.dnsStatus,c())})},w(n,l.listType.dynamicDns),n.availableRecordTypes=[],n.availableRecordTypes.push(v.recordTypes.AdDns),n.availableTtlTypes=[],Object.keys(v.availableTtlTypes).forEach(function(e){n.availableTtlTypes.push(v.availableTtlTypes[e])}),n.availableTtlTypes=u("orderBy")(n.availableTtlTypes,"sortValue"),function(){var s=l.dnsSecList;function a(){return(l.pageBehavior.domainDnsStatus==l.domainDnsStatus.CustomServerType||l.pageBehavior.domainDnsStatus==l.domainDnsStatus.SharedServerType)&&s.dnsSecStatus}s.listType=l.listType.dnsSec,s.viewTemplatePath="advancedDns_dnsSecRecord_view",s.editTemplatePath="advancedDns_dnsSecRecord_edit",D(s),w(s,l.listType.dnsSec),s.showMoreLess=N(s.ncGrid),s.processing=!1,s.updateActionAcsses=function(){s.actionAcsses.canRemove=1<l.pageBehavior.model.DnsSecModel.Records.length,s.actionAcsses.canCancel=1<=l.pageBehavior.model.DnsSecModel.Records.length||1==s.newRecords.length&&1<=l.pageBehavior.model.DnsSecModel.Records.length},s.accessToFunctionalityOfEditing=l.pageBehavior.model.Info.DnsProviderType!=v.DNSProviderSubType.FREE2&&l.pageBehavior.model.Info.DnsProviderType!=v.DNSProviderSubType.ENOM&&l.pageBehavior.domainDnsStatus!=l.domainDnsStatus.SharedServerType,s.dnsSecStatus=l.pageBehavior.model.DnsSecModel.IsEnabled,s.dnsSecStatusLocked=l.pageBehavior.model.DnsSecModel.IsAvailable&&!l.isDomainLocked,s.onChangeDnsSecStatus=function(){s.activeNotification&&s.activeNotification.destroy(),0==l.pageBehavior.model.DnsSecModel.Records.length&&s.dnsSecStatus&&a()?(l.pageBehavior.model.DnsSecModel.IsEnabled=s.dnsSecStatus,l.dnsSecList.ncGrid.settings.reload().then(function(){s.updateActionAcsses()})):(s.processing=!0,d.domainAdvancedDNS.enableDomainDnsSec(l.pageBehavior.domainName,s.dnsSecStatus).then(function(n){f(function(){if(s.processing=!1,n.Error)s.activeNotification=l.pageNotification.stuckNotifications.addError(n.Msg,{hasClose:!0,isAutoHide:!1}),s.dnsSecStatus=!s.dnsSecStatus;else{if(l.pageBehavior.model.DnsSecModel.IsEnabled=s.dnsSecStatus,l.pageBehavior.model.DnsSecModel.IsEnabled||(l.pageBehavior.model.DnsSecModel.Records=[]),0<s.newRecords.length)for(var e=0;e<s.newRecords.length;e++)s.newRecords[e].removeFromNewRecords();if(0<s.notSavedRecords.length)for(var t=0;t<s.newRecords.length;t++)s.newRecords[t].cancelRecord();a()&&l.dnsSecList.ncGrid.settings.reload().then(function(){s.updateActionAcsses()}),l.pageBehavior.domainDnsStatus==l.domainDnsStatus.SharedServerType&&l.pageBehavior.domainDnsStatus==l.domainDnsStatus.CustomServerType||(s.activeNotification=l.pageNotification.stuckNotifications.addSuccess("All good! Request processed successfully",{hasClose:!0,isAutoHide:!0}))}},5e3)}))},s.ncGrid.settings.getData=function(e,t){for(var n,a=[],i=0;i<l.pageBehavior.model.DnsSecModel.Records.length;i++){var o=l.pageBehavior.model.DnsSecModel.Records[i];a.push(E(o,s))}0==a.length&&0==s.newRecords.length&&(n=new E(null,s),s.newRecords.push(n),s.notSavedRecords.push(n)),e.resolve({Data:a})},a()&&l.dnsSecList.ncGrid.settings.reload().then(function(){s.updateActionAcsses()});s.addDnsSecRecord=function(e){s.addRecord(e,new E(null,s)),s.updateActionAcsses()}}(),l.hostRecordsList.ncGrid.settings.reload(),l.hostRecordsList.ncGrid.settings.actions.updateDropDownBtns(),l.mailSettingsList.ncGrid.settings.reload(),l.isMobile()&&(g.get(d.domainAdvancedDNS.getAdvancedDNSAddUpdateRecordModal),g.get(d.domainAdvancedDNS.getAdvancedDNSDnsSecAddUpdateRecordModal))),r.asyncStatus(p.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance.loading=!0},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.domainDnsStatus=l.domainDnsStatus.Error,t.loading=!1,t.activeNotification=l.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1})}}),l.checkMobileAction=function(e){l.isMobile()&&(e.recordsListBehavior.listType!=l.listType.dnsSec?y.open({templateUrl:d.domainAdvancedDNS.getAdvancedDNSAddUpdateRecordModal,controller:"advancedDNSAddUpdateRecordModalCtrl",size:"lg",resolve:{listItem:function(){return e},listType:function(){return l.listType},domainName:function(){return l.pageBehavior.domainName},recordState:function(){return l.recordState}}}):y.open({templateUrl:d.domainAdvancedDNS.getAdvancedDNSDnsSecAddUpdateRecordModal,controller:"advancedDNSAddUpdateDnsSecRecordModalCtrl",size:"lg",resolve:{listItem:function(){return e},isHostedDomain:function(){return l.pageBehavior.model.Info.IsHostedDomain},domainName:function(){return l.pageBehavior.domainName},recordState:function(){return l.recordState}}})).result.then(function(e){0},function(){e&&e.cancelRecord(),0})},l.dnsTemplates={isLoading:!1,selected:"",available:S.allTemplates,changeDnsTemplate:function(){l.dnsTemplates.selected&&dataLayer.push({event:l.dnsTemplates.selected+" template chosen",fromLocation:"Advance DNS"})},onCancelClick:function(){l.dnsTemplates.selected=""},onSaveClick:function(){var a;function t(){l.dnsTemplates.selected=""}l.dnsTemplates.selected&&(a=l.dnsTemplates.available.filter(function(e){return e.Key===l.dnsTemplates.selected})[0],y.open({templateUrl:"/Domains/dns/DnsTemplatePrompt",controller:"dnsTemplatePromptCtrl",size:"lg",resolve:{modalTitle:function(){return"WARNING: You are about to change your DNS settings"},modalContent:function(){return"You are about to reconfigure your current DNS records. When changing DNS records, there is a chance you may experience misconfiguration errors or limited functionality on your site. Are you sure you want to continue?"},modalChosenTemplate:function(){return l.dnsTemplates.selected}}}).result.then(function(){var e=l.pageBehavior.domainName;l.dnsTemplates.isLoading=!0,d.domainAdvancedDNS.applyDnsTemplate(e,a.Key).then(function(e){l.dnsTemplates.isLoading=!1,t(),function(e){var t="Uh oh, something went wrong... Your changes were not saved. Please try again or contact our Customer Service Team if the problem persists.";{var n;!e.Error&&e.Result?e.Result.Success?(l.successNotification("SUCCESS! Your template has been set up. Please allow some time for the changes to take effect."),l.reloadHostRecordsList(),a.Disabled=!0,S.reloadDnsTemplates(l.pageBehavior.domainName)):(n=e.Result.Errors&&e.Result.Errors[0])?l.errorNotification(n):l.errorNotification(t):l.errorNotification(t)}}(e)})},t))}},l.errorNotification=function(e){l.pageNotification.stuckNotifications.addError(e,{hasClose:!0,isAutoHide:!0})},l.successNotification=function(e){l.pageNotification.stuckNotifications.addSuccess(e,{hasClose:!0,isAutoHide:!0})},l.reloadHostRecordsList=function(){l.hostRecordsList.ncGrid.parameters.mapping.isLoading=!0,d.domainAdvancedDNS.getAdvancedDnsInfo(l.pageBehavior.domainName,!1).then(function(e){l.hostRecordsList.ncGrid.parameters.mapping.isLoading=!1,0==e.Error&&(l.pageBehavior.model=e.Result,l.hostRecordsList.ncGrid.settings.reload())})}}]),app.controller("domainsdnsCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","notificationService","pageHelper","$q","ncGridParams","$sce","ncGridEventNames","$location",function(u,e,m,t,p,s,f,n,a,o,r,c){u.HostCount=0,u.pageHelper=f,u.pageNotification=new s.instance,u.struckNotification=new s.instance,u.isNameCheapDomain=!0,u.AddHostRecordsModelOpened=!1,u.DomainDnsInfoValidation=DomainDnsInfoRes,u.UrlSplits=c.absUrl().split("/"),u.domainName=u.UrlSplits[u.UrlSplits.length-2],u.pageFrom=u.UrlSplits[u.UrlSplits.length-1],""==u.UrlSplits[u.UrlSplits.length-1]&&(u.domainName=u.UrlSplits[u.UrlSplits.length-3],u.pageFrom=u.UrlSplits[u.UrlSplits.length-2]),u.NoSearchOption={minimumResultsForSearch:-1};var h=null!=u.domainName?u.domainName:"";u.isSubDomain=!1;var l=h.indexOf("."),d=h.substr(l+1);u.tld=d.toUpperCase(),u.SharedHosting="1",u.NCDefault="1",u.removeStatus="1",u.hostRecordLimit="150",u.eMailFwdHostId=0,u.mailSettings=[{name:"Automatic",value:"1799"},{name:"1 minute",value:"60"},{name:"5 minute",value:"300"},{name:"20 minute",value:"1200"},{name:"30 minute",value:"1800"},{name:"60 minute",value:"3600"}],u.AtRecordAddress="",u.MXRecords=[{HostId:"",Address:"",FriendlyName:"",MXPref:"",TTL:"",Name:""}],u.initialize=function(e){},u.CustomNameServerShow=!1,u.nameServerCustomValue="",u.NamserverDropDownChange=function(e){"custom"==e?u.CustomNameServerShow=!0:(u.CustomNameServerShow=!1,u.nameServerCustomValue="")},u.personalDnsServerType="",u.findPersonalDnsServerType=function(){u.personalDnsServerType=$("#ddlNameservers").val()},u.subDomainsListObj=[],u.subDomainsList=[],e.closeLightbox=function(){"advancedns"==u.pageFrom?u.AdvanceDnsOverView():window.location.href="/Domains/DomainControlPanel/"+u.domainName+"/domain/"},u.AdvanceDnsOverView=function(){window.location.href="/Domains/DomainControlPanel/"+h+"/advancedns"},u.EdidNameServerInit=function(){u.EdidNameServer=new f.AsyncStateBehavior({constructor:function(){var t=this.instance;u.pageNotification.alerts.clear(),t.activeNotification=u.pageNotification.stuckNotifications.addLoading("Please wait.",!0),m.domainDns.getNameServers(h).then(function(e){e.Error?($("#errorEditNameServer").show(),u.errormessage=e.Msg,t.asyncStatus(f.AsyncStatus.Error,e)):(u.DefaultDNS=e.Result.DefaultDNS,u.IsFreeDNS="0"==e.Result.DNSType,u.ShardHosting=e.Result.SharedHosting,u.BackUp=e.Result.BackUp,u.Custom=e.Result.Custom,u.checkboxSelection="0"==e.Result.DNSType?"1":e.Result.DNSType,u.hostRecordLimit="2"==e.Result.DNSType?"144":u.hostRecordLimit,u.providerType=e.Result.ProviderType,t.asyncStatus(f.AsyncStatus.Success,e))})},onSuccess:function(){this.instance;u.pageNotification.alerts.clear()},onError:function(){this.instance;u.pageNotification.alerts.clear()}})},u.SaveNameServer=function(){var e,t,n={NameServers:"",DNSType:""};"4"==u.checkboxSelection&&(e=0,$("#EdidNameServerfrm input[type='text']").each(function(){""!=this.value&&(e=parseInt(e)+1)})),u.nsrequired=!(1<e),(1<e||"4"!=u.checkboxSelection)&&(t=$("#EdidNameServerfrm input[type='radio']:checked").val(),"1"==(n.DNSType=t)?(n.NameServers=u.DefaultDNS.toString(),n.DNSType="NCDefault"):"2"==t?(n.NameServers=u.BackUp.toString(),n.DNSType="NCBackup"):"3"==t?(n.NameServers=u.ShardHosting.toString(),n.DNSType="SharedHosting"):"4"==t&&(n.DNSType="Custom",$("#EdidNameServerfrm input[type='text']").each(function(){""!=this.value&&(n.NameServers+=this.value+",")})))},u.DynamicDNSDetails=function(e){this.instance;u.Resource=e.Resources,u.DynamicDNS=new f.AsyncStateBehavior({constructor:function(){var t=this.instance;t.activeNotification=u.pageNotification.stuckNotifications.addLoading("Please wait.",!0),m.domainDns.getDynamicRecords(h).then(function(e){e.Error?($("#errorDisplayDynamiciDNS").show(),u.errormessage=e.Msg,t.asyncStatus(f.AsyncStatus.Error,e)):(u.ddnsPassword=e.Result.DDNSPassword,u.PasswordLastResetDate=e.Result.PasswordLastResetDate,u.ddnsHostRecords=e.Result.HostInfo,u.clientSoftware=e.Result.SystemRequirements[0],u.sytemRequirements=e.Result.SystemRequirements[1].split("/n"),u.downLoadurl=e.Result.SystemRequirements[2],u.DDNSRecordList=e.Result,t.asyncStatus(f.AsyncStatus.Success,e))})},onSuccess:function(){this.instance;u.pageNotification.alerts.clear()},onError:function(){this.instance;u.pageNotification.alerts.clear()}})},u.IsResetPasswordPopUpOpened=!1,u.ResetPasswordPopUp=function(t){var e;u.IsResetPasswordPopUpOpened||((e=p.open({templateUrl:"/Common/PromptRemove",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return u.Resource.ResetDDNSPasswordTitle},modalContent:function(){return u.Resource.ResetDDNSPasswordContent}}})).result.then(function(e){u.IsResetPasswordPopUpOpened=!1,"yes"==e?u.DDNSResetPassword():u.pageAction.Click(t,"remove",!1,subject)},function(){u.IsResetPasswordPopUpOpened=!1,e=null}),e.opened.then(function(e){u.IsResetPasswordPopUpOpened=!0}))},u.DDNSResetPassword=function(){u.resetDnsPasswordPopup=new f.AsyncStateBehavior({constructor:function(){var t=this.instance;t.activeNotification=new s.instance;t.asyncStatus(f.AsyncStatus.Loading,""),m.domainDns.resetDnsPassword(h).then(function(e){e.Error?t.asyncStatus(f.AsyncStatus.Error,e):t.asyncStatus(f.AsyncStatus.Success,e)})},onLoading:function(){var e=this.instance;u.pageNotification.alerts.clear(),e.activeNotification=u.pageNotification.stuckNotifications.addLoading("Please wait.",!1),e.isDisabled=!0,e.showError=!1},onSuccess:function(e){u.ddnsPassword=e.Msg;var t=this.instance;u.pageNotification.alerts.clear(),t.activeNotification=u.pageNotification.stuckNotifications.addSuccess(u.Resource.ResetPasswordSuccess,{hasClose:!0,isAutoHide:!0})},onError:function(e){$("#errorDisplayDynamiciDNS").hide(),this.instance.activeNotification=u.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}})},u.IsRemoveAHostRecordOpened=!1,u.RemoveAHostRecord=function(n,a,i){var o="";u.RemoveAtRecord=new f.AsyncStateBehavior({constructor:function(){var e,t=this.instance;t.activeNotification=new s.instance,u.HostId=n,u.group="0",u.IsRemoveAHostRecordOpened||((e=p.open({templateUrl:"/Domains/dns/RemoveHostModel/",controller:"removeHostRecordctrl",size:"lg",backdrop:"static",resolve:{RecordId:function(){return n},RecordType:function(){return a}}})).result.then(function(e){u.IsRemoveAHostRecordOpened=!1,""!=e&&(o=e.RemoveStatus,t.activeNotification=u.pageNotification.stuckNotifications.addLoading("Please wait.",!1),m.domainDns.RemoveARecord(e.RemoveStatus,e.HostId,h,e.RecordType).then(function(e){e.Error?t.asyncStatus(f.AsyncStatus.Error,e.Msg):t.asyncStatus(f.AsyncStatus.Success,e)}))}),e.opened.then(function(e){u.IsRemoveAHostRecordOpened=!0}))},onSuccess:function(e){var t=this.instance;u.ddnsHostRecords=e.Result.HostInfo,u.pageNotification.alerts.clear();var n="Remove"==o?u.Resource.RemoveARecordSuccess:u.Resource.DisableARecordSuccess.replace("{0}",i);t.activeNotification=u.pageNotification.stuckNotifications.addSuccess(n,{hasClose:!0,isAutoHide:!0})},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=u.pageNotification.stuckNotifications.addError(e,{hasClose:!0,isAutoHide:!0})}})},u.loadHostRecords=function(){u.loadHostRecordsErrorStatus=!1,u.pageBehavior=new f.AsyncStateBehavior({constructor:function(){var i=this.instance;i.model=null,i.pageNgGridSettings=new a,i.pageNgGridSettings.parameters.search.serchPropertyNames=["RecordType","MXPref","HostName","FriendlyName","Address","Weight","IsActive"],i.pageNgGridSettings.settings.getData=function(a,e){m.domainDns.getHostRecordList(e,h).then(function(e){i.showLoadPanel=!0,i.showContent=!1;var t;if(null!=e.Result&&null!=e.Result.Data){""!=e.Msg&&(i.activeNotification=u.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0})),t=e.Result.Data.length,u.manageDnsType=e.Result.DnsServerType,u.HostCount=t;for(var n=0;n<t;n++)e.Result.Data[n].chbId="chbId"+n;i.pageNgGridSettings.parameters.mapping.isLazyLoading=i.pageNgGridSettings.parameters.mapping.serverChunkSize<=e.Result.Data.length,a.resolve(e.Result),i.model=i.pageNgGridSettings.parameters.storage.requestData,i.showLoadPanel=!1,i.showContent=!0}else i.activeNotification=u.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0}),u.loadHostRecordsErrorStatus=e.Error})},i.pageNgGridSettings.settings.reload(),m.domainDns.loadHostCount(h).then(function(e){u.hostRecordLimit=e.hostCount}),i.recordList=[{header:"A",propertyname:"RecordType",propertyvalue:"A"},{header:"AAAA",propertyname:"RecordType",propertyvalue:"AAAA"},{header:"CNAME",propertyname:"RecordType",propertyvalue:"CNAME"},{header:"NS",propertyname:"RecordType",propertyvalue:"NS"},{header:"MX",propertyname:"RecordType",propertyvalue:"MX"},{header:"SRV",propertyname:"RecordType",propertyvalue:"SRV"},{header:"TXT",propertyname:"RecordType",propertyvalue:"TXT"},{header:"URL Redirect",propertyname:"RecordType",propertyvalue:"URL Redirect"}],i.statusList=[{header:"ON",propertyname:"IsActive",propertyvalue:!0},{header:"OFF",propertyname:"IsActive",propertyvalue:!1}],i.asyncStatus(f.AsyncStatus.Success)},onSuccess:function(e){this.instance.asyncStatus(f.AsyncStatus.Active),u.EdidNameServerInit()},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=u.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}})},u.IsRemoveHostRecordsOpened=!1,u.setHostStatus=function(a,i,e){var o,s,r,c,l,d,t;null!=a&&null!=a&&(o=a.HostId,s=a.IsActive,r=a.RecordType,c=a.AssociatedAppTitle,l=a.IsMetaTagSet,d=a.IsUsedForDDNS),"activeStatus"==e?u.TurningOnOrOffHostRecords=new f.AsyncStateBehavior({constructor:function(){var t,n=this.instance;0==s?("FWD"==c&&(u.IsRemoveHostRecordsOpened||((t=p.open({templateUrl:"/Domains/Dns/RemoveHostRecords/",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return"Turn off Locked Record"},modalContent:function(){return"Turning off this record may result in a non-proper service operation which has been assosiated with this. Would you still want to proceed further?"}}})).result.then(function(e){u.IsRemoveHostRecordsOpened=!1,"yes"==e?($("#"+o).parents("tr").addClass("async-processing"),new f.AsyncStateBehavior({constructor:function(){var t=this.instance;m.domainDns.turningOnOrOffHostRecords(o,s,h).then(function(e){t.asyncStatus(0==e.Error?f.AsyncStatus.Success:f.AsyncStatus.Error,e)})},onSuccess:function(e){$("#"+o).parents("tr").removeClass("async-processing")},onError:function(e){u.pageNotification.stuckNotifications.addError("It is not posssible to turn off the host record",{hasClose:!0,isAutoHide:!0}),$("#"+o).parents("tr").removeClass("async-processing"),a.IsActive=!a.IsActive}})):u.pageAction.Click(referenceId,"remove",!1,subject)},function(e){u.IsRemoveHostRecordsOpened=!1,"cancel"==e&&$("#"+i.target.id).prop("checked",!0),$("#"+o).parents("tr").removeClass("async-processing"),t=null}),t.opened.then(function(){u.IsRemoveHostRecordsOpened=!0}))),"URL Redirect"==r?u.IsRemoveHostRecordsOpened||((t=p.open({templateUrl:"/Domains/Dns/RemoveHostRecords/",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return"Turn off Locked Record"},modalContent:function(){return l&&d?"URL redirect,META Tags set up,Dynamic DNS services have been assosiated with this record. Turning off this record may result in a non-proper service operation. Would you still want to proceed further?":l||d?l&&!d?"URL redirect,META Tags set up services have been assosiated with this record. Turning off this record may result in a non-proper service operation. Would you still want to proceed further?":!l&&d?"URL redirect,Dynamic DNS services have been assosiated with this record. Turning off this record may result in a non-proper service operation. Would you still want to proceed further?":void 0:"URL redirect service has been assosiated with this record. Turning off this record may result in a non-proper service operation. Would you still want to proceed further?"}}})).result.then(function(e){u.IsRemoveHostRecordsOpened=!1,"yes"==e?($("#"+o).parents("tr").addClass("async-processing"),new f.AsyncStateBehavior({constructor:function(){var t=this.instance;m.domainDns.turningOnOrOffHostRecords(o,s,h).then(function(e){t.asyncStatus(0==e.Error?f.AsyncStatus.Success:f.AsyncStatus.Error,e)})},onSuccess:function(e){$("#"+o).parents("tr").removeClass("async-processing")},onError:function(e){u.pageNotification.stuckNotifications.addError("It is not posssible to turn off the host record",{hasClose:!0,isAutoHide:!0}),$("#"+o).parents("tr").removeClass("async-processing"),a.IsActive=!a.IsActive}})):u.pageAction.Click(referenceId,"remove",!1,subject)},function(e){u.IsRemoveHostRecordsOpened=!1,"cancel"==e&&$("#"+i.target.id).prop("checked",!0),$("#"+o).parents("tr").removeClass("async-processing"),t=null}),t.opened.then(function(){u.IsRemoveHostRecordsOpened=!0})):"MX"==r?u.IsRemoveHostRecordsOpened||((t=p.open({templateUrl:"/Domains/Dns/RemoveHostRecords/",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return"Turn off Locked Record"},modalContent:function(){return"Turning off this record may result in a non-proper service operation which has been assosiated with this. Would you still want to proceed further?"}}})).result.then(function(e){u.IsRemoveHostRecordsOpened=!1,"yes"==e?($("#"+o).parents("tr").addClass("async-processing"),new f.AsyncStateBehavior({constructor:function(){var t=this.instance;m.domainDns.turningOnOrOffHostRecords(o,s,h).then(function(e){t.asyncStatus(0==e.Error?f.AsyncStatus.Success:f.AsyncStatus.Error,e)})},onSuccess:function(e){$("#"+o).parents("tr").removeClass("async-processing")},onError:function(e){u.pageNotification.stuckNotifications.addError("It is not posssible to turn off the host record",{hasClose:!0,isAutoHide:!0}),$("#"+o).parents("tr").removeClass("async-processing"),a.IsActive=!a.IsActive}})):u.pageAction.Click(referenceId,"remove",!1,subject)},function(e){"cancel"==e&&(u.IsRemoveHostRecordsOpened=!1,$("#"+i.target.id).prop("checked",!0)),$("#"+o).parents("tr").removeClass("async-processing"),t=null}),t.opened.then(function(){u.IsRemoveHostRecordsOpened=!0})):"URL Redirect"!=r&&"MX"!=r&&"FWD"!=c&&($("#"+o).parents("tr").addClass("async-processing"),new f.AsyncStateBehavior({constructor:function(){var t=this.instance;m.domainDns.turningOnOrOffHostRecords(o,s,h).then(function(e){t.asyncStatus(0==e.Error?f.AsyncStatus.Success:f.AsyncStatus.Error,e)})},onSuccess:function(e){$("#"+o).parents("tr").removeClass("async-processing")},onError:function(e){u.pageNotification.stuckNotifications.addError("It is not posssible to turn off the host record",{hasClose:!0,isAutoHide:!0}),$("#"+o).parents("tr").removeClass("async-processing"),a.IsActive=!a.IsActive}}))):($("#"+o).parents("tr").addClass("async-processing"),m.domainDns.turningOnOrOffHostRecords(o,s,h).then(function(e){n.asyncStatus(0==e.Error?f.AsyncStatus.Success:f.AsyncStatus.Error,e)}))},onSuccess:function(e){$("#"+o).parents("tr").removeClass("async-processing")},onError:function(e){u.pageNotification.stuckNotifications.addError("It is not posssible to turn on the host record",{hasClose:!0,isAutoHide:!0}),$("#"+o).parents("tr").removeClass("async-processing"),a.IsActive=!a.IsActive}}):"editStatus"==e&&("URL Redirect"==r||"FWD"==c||d?u.IsRemoveHostRecordsOpened||((t=p.open({templateUrl:"/Domains/Dns/RemoveHostRecords/",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return"Edit Locked Record"},modalContent:function(){return"We need to obtain customers confirmation that editing a locked record may result in a non-proper service operation and specify the name of the service."}}})).result.then(function(e){u.IsRemoveHostRecordsOpened=!1,"yes"==e?u.AddRecords("edit",o,r,u.manageDnsType,"hosts"):u.pageAction.Click(referenceId,"remove",!1,subject)},function(e){"cancel"==e&&(u.IsRemoveHostRecordsOpened=!1,$("#"+i.target.id).prop("checked",!0))}),t.opened.then(function(){u.IsRemoveHostRecordsOpened=!0}),t.closed.then(function(){u.IsRemoveHostRecordsOpened=!1})):u.AddRecords("edit",o,r,u.manageDnsType,"hosts"))},u.removeHost=function(n,a){var e;u.IsRemoveHostRecordsOpened||((e=p.open({templateUrl:"/Domains/Dns/RemoveHostRecords/",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){switch(a){case"URL Redirect":case"MX":return"Remove Locked Record";default:return"Remove Record"}},modalContent:function(){switch(a){case"URL Redirect":case"MX":return"We need to obtain customer's confirmation that the host records will be removed, and the services that may depend on them may stop funtioning properly. List the name of the services that would be affected";default:return"We need to obtain customer's confirmation that the host records will be removed, and the services that may depend on them may stop funtioning properly"}}}})).result.then(function(e){u.IsRemoveHostRecordsOpened=!1,"yes"==e?($("#"+n).parents("tr").addClass("async-processing"),new f.AsyncStateBehavior({constructor:function(){var t=this.instance;m.domainDns.removeHostRecord(n,a,h).then(function(e){t.asyncStatus(0==e.Error?f.AsyncStatus.Success:f.AsyncStatus.Error,e)})},onSuccess:function(e){$("#"+n).parents("tr").removeClass("async-processing"),$("#"+n).parents("tr").hide(),u.pageNotification.stuckNotifications.addSuccess("The record(s) was/were Successfully Removed",{hasClose:!0,isAutoHide:!0}),window.location.href="/domains/dns/managehostrecords/"+h+"/advancedns"},onError:function(e){$("#"+n).parents("tr").removeClass("async-processing"),u.pageNotification.stuckNotifications.addError("The record(s) was/were not Removed",{hasClose:!0,isAutoHide:!0})}})):u.pageAction.Click(referenceId,"remove",!1,subject)},function(){u.IsRemoveHostRecordsOpened=!1,$("#"+n).parents("tr").removeClass("async-processing"),e=null}),e.opened.then(function(){u.IsRemoveHostRecordsOpened=!0}))},u.turningOnHostRecords=function(){var t=u.pageBehavior.pageNgGridSettings.parameters.selection.selectedItems,e="";for(i=0;i<t.length;i++)olyHostId=t[i].HostId,e+=t[i].HostId,(1<i||i<t.length-1)&&(e+=","),$("#"+olyHostId).parents("tr").addClass("async-processing");new f.AsyncStateBehavior({constructor:function(){var t=this.instance;m.domainDns.turningOnOrOffHostRecords(e,"True",h).then(function(e){t.asyncStatus(0==e.Error?f.AsyncStatus.Success:f.AsyncStatus.Error,e)})},onSuccess:function(e){for(i=0;i<t.length;i++)olyHostId=t[i].HostId,t[i].IsActive=!0,$("#"+olyHostId).parents("tr").removeClass("async-processing"),$("div.dropdown.has-icon.icon-actions.bulk-actions.ng-scope").removeClass("expanded")},onError:function(e){for(u.pageNotification.stuckNotifications.addError("It is not posssible to turn on the host record",{hasClose:!0,isAutoHide:!0}),i=0;i<t.length;i++)olyHostId=t[i].HostId,t[i].IsActive=t[i].IsActive,$("#"+olyHostId).parents("tr").removeClass("async-processing")}})},u.pageNotification=new s.instance,u.SuccessMessageOnSameViewClick=function(){u.pageNotification.alerts.addSuccess("This is a test success message on same view.",u.sslnotificationAlertArguments),u.pageNotification.stuckNotifications.addSuccess("This is a test success message on same view.",{hasClose:!0,isAutoHide:!0})},u.turningOffHostRecords=function(){var e,t,n=u.pageBehavior.pageNgGridSettings.parameters.selection.selectedItems,a="";for(i=0;i<n.length;i++){a+=n[i].HostId,(1<i||i<n.length-1)&&(a+=","),"URL Redirect"!=n[i].RecordType&&"MX"!=n[i].RecordType&&"FWD"!=n[i].AssociatedAppTitle||(e=!0)}if(e){u.IsRemoveHostRecordsOpened||((t=p.open({templateUrl:"/Domains/Dns/RemoveHostRecords/",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return"Turn off Locked Record"},modalContent:function(){return"We need to Obtain the customer's confirmation tat editing a locked record may result in a non-proper service operation and specify the name of the service"}}})).result.then(function(e){if(u.IsRemoveHostRecordsOpened=!1,"yes"==e){for(i=0;i<n.length;i++)olyHostId=n[i].HostId,$("#"+olyHostId).parents("tr").addClass("async-processing");new f.AsyncStateBehavior({constructor:function(){var t=this.instance,e=u.domainName;m.domainDns.turningOnOrOffHostRecords(a,"False",e).then(function(e){t.asyncStatus(0==e.Error?f.AsyncStatus.Success:f.AsyncStatus.Error,e)})},onSuccess:function(e){for(i=0;i<n.length;i++)n[i].IsActive=!1,olyHostId=n[i].HostId,$("#"+olyHostId).parents("tr").removeClass("async-processing");$("div.dropdown.has-icon.icon-actions.bulk-actions.ng-scope").removeClass("expanded")},onError:function(e){for(u.pageNotification.stuckNotifications.addError("It is not posssible to turn off the host record",{hasClose:!0,isAutoHide:!0}),i=0;i<n.length;i++)olyHostId=n[i].HostId,n[i].IsActive=n[i].IsActive,$("#"+olyHostId).parents("tr").removeClass("async-processing")}})}else u.pageAction.Click(referenceId,"remove",!1,subject)},function(){for(u.IsRemoveHostRecordsOpened=!1,i=0;i<n.length;i++)olyHostId=n[i].HostId,$("#"+olyHostId).parents("tr").removeClass("async-processing");t=null}),t.opened.then(function(){u.IsRemoveHostRecordsOpened=!0}))}else{for(i=0;i<n.length;i++)olyHostId=n[i].HostId,$("#"+olyHostId).parents("tr").addClass("async-processing");new f.AsyncStateBehavior({constructor:function(){var t=this.instance;m.domainDns.turningOnOrOffHostRecords(a,"False",h).then(function(e){t.asyncStatus(0==e.Error?f.AsyncStatus.Success:f.AsyncStatus.Error,e)})},onSuccess:function(e){for(i=0;i<n.length;i++)n[i].IsActive=!1,olyHostId=n[i].HostId,$("#"+olyHostId).parents("tr").removeClass("async-processing");$("div.dropdown.has-icon.icon-actions.bulk-actions.ng-scope").removeClass("expanded")},onError:function(e){for(u.pageNotification.stuckNotifications.addError("It is not posssible to turn off the host record",{hasClose:!0,isAutoHide:!0}),i=0;i<n.length;i++)n[i].IsActive=n[i].IsActive,olyHostId=n[i].HostId,$("#"+olyHostId).parents("tr").removeClass("async-processing")}})}},u.DDNSTurnOn=function(){u.DDNSEnable=new f.AsyncStateBehavior({constructor:function(){var t=this.instance;m.domainDns.turnOnDns(h).then(function(e){e.Error?t.asyncStatus(f.AsyncStatus.Error,e):window.location.href="/Domains/Dns/DynamicDNS/"+h+"/advancedns"})},onError:function(e){u.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}})},u.IsDynamicDNSTurnOffModalPopUpOpened=!1,u.openDynamicDNSTurnOffModalPopUp=function(e,t,n){var a;u.IsDynamicDNSTurnOffModalPopUpOpened||((a=p.open({templateUrl:"/Domains/SSL/Common/PromptRemove",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return u.DomainDnsInfoValidation.static_DynamicDNSTurnOffTitle},modalContent:function(){return u.DomainDnsInfoValidation.static_DynamicDNSTurnOffIntro}}})).result.then(function(e){u.IsDynamicDNSTurnOffModalPopUpOpened=!1,"yes"==e&&"ddnsturnoff"==n.toLowerCase()&&new f.AsyncStateBehavior({constructor:function(){var t=this.instance;m.domainDns.turnOffDns(h).then(function(e){t.asyncStatus(0==e.Error?f.AsyncStatus.Success:f.AsyncStatus.Error,e)})},onSuccess:function(e){1==e.Result&&(u.pageNotification.stuckNotifications.addSuccess(u.DomainDnsInfoValidation.static_DynamicDNSTurnOffSuccessMessage,{hasClose:!0,isAutoHide:!0}),u.AdvanceDnsOverView())},onError:function(e){u.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}})},function(){u.IsDynamicDNSTurnOffModalPopUpOpened,a=null}),a.opened.then(function(){u.IsDynamicDNSTurnOffModalPopUpOpened=!0}))},u.removeAllHostRecords=function(e){var t,n=u.pageBehavior.pageNgGridSettings.parameters.selection.selectedItems,a="",o="";for(i=0;i<n.length;i++)a+=n[i].HostId,o+=n[i].RecordType,(1<i||i<n.length-1)&&(a+=","),o+=",";u.IsRemoveHostRecordsOpened||((t=p.open({templateUrl:"/Domains/Dns/RemoveHostRecords/",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){for(i=0;i<n.length;i++)switch(o=n[i].RecordType,n[i].RecordType){case"URL Redirect":case"MX":return"Remove Locked Record";default:return"Remove Record"}},modalContent:function(){for(i=0;i<n.length;i++)switch(o=n[i].RecordType,n[i].RecordType){case"URL Redirect":case"MX":return"We need to obtain customer's confirmation that the host records will be removed, and the services that may depend on them may stop funtioning properly. List the name of the services that would be affected";default:return"We need to obtain customer's confirmation that the host records will be removed, and the services that may depend on them may stop funtioning properly"}}}})).result.then(function(e){if(u.IsRemoveHostRecordsOpened=!1,"yes"==e){for(i=0;i<n.length;i++)olyHostId=n[i].HostId,$("#"+olyHostId).parents("tr").addClass("async-processing");new f.AsyncStateBehavior({constructor:function(){var t=this.instance;m.domainDns.removeHostRecord(a,o,h).then(function(e){t.asyncStatus(0==e.Error?f.AsyncStatus.Success:f.AsyncStatus.Error,e)})},onSuccess:function(e){for(i=0;i<n.length;i++)n[i].IsActive=!1,olyHostId=n[i].HostId,$("#"+olyHostId).parents("tr").hide();u.pageNotification.stuckNotifications.addSuccess("The record(s) was/were Successfully Removed",{hasClose:!0,isAutoHide:!0}),$("div.dropdown.has-icon.icon-actions.bulk-actions.ng-scope").removeClass("expanded"),window.location.href="/domains/dns/managehostrecords/"+h+"/advancedns"},onError:function(e){for(u.pageNotification.stuckNotifications.addError("The record(s) was/were not Removed",{hasClose:!0,isAutoHide:!0}),i=0;i<n.length;i++)n[i].IsActive=!1,olyHostId=n[i].HostId,$("#"+olyHostId).parents("tr").removeClass("async-processing")}})}else u.pageAction.Click(referenceId,"remove",!1,subject)},function(){for(u.IsRemoveHostRecordsOpened=!1,i=0;i<n.length;i++)olyHostId=n[i].HostId,$("#"+olyHostId).parents("tr").removeClass("async-processing");t=null}),t.opened.then(function(){u.IsRemoveHostRecordsOpened=!1}))},u.AddRecords=function(n,a,i,o,e){var s=n,o=o;m.domainDetails.IsManagerHasRightsToPerformThisAction(u.domainName,e).then(function(e){var t;e&&(u.AddHostRecordsModelOpened||((t=p.open({templateUrl:"/Domains/Dns/AdvancedDNSAddRecordsModel/",controller:"addDnsRecords",size:"lg",backdrop:"static",resolve:{openModelParameter:function(){return u.pageTypeParam=null!=n?n:"addNew"},domainName:function(){return n="addRedirect",u.UrlSplits=c.absUrl().split("/"),u.domainName=u.UrlSplits[u.UrlSplits.length-2],u.pageFrom=u.UrlSplits[u.UrlSplits.length-1],""==u.UrlSplits[u.UrlSplits.length-1]&&(u.domainName=u.UrlSplits[u.UrlSplits.length-3],u.pageFrom=u.UrlSplits[u.UrlSplits.length-2]),u.domainName},hostingID:function(){return u.hostRecordID=null!=a?a:0},hostRecordType:function(){return u.editHostRecordType=null!=a?i:""},pageModelClass:function(){return""!=o&&null!=o?o:o=0},domainType:function(){return u.isSubDomain}}})).result.then(function(e){u.AddHostRecordsModelOpened=!1,null!=e&&("AddDDNS"!=s&&"EditDDNS"!=s||0!=e.isCancel?"addNew"==s?u.LoadAdvancedDNSView():"edit"==s||"manageAddNew"==s?window.location.href="/domains/dns/managehostrecords/"+h+"/"+u.pageFrom:"addRedirect"==s||"editRedirect"==s?e.isCancel||(window.location.href="/domains/domaincontrolpanel/"+h+"/domain"):"addEmailSetting"!=s&&"editEmailSetting"!=s||(u.AtRecordAddress=e.value,m.domainDns.getEmailForwardingDefaultList("",h).then(function(e){u.eMailFwdHostId=e.Result.Data[0].HostId})):new f.AsyncStateBehavior({constructor:function(){var t=this.instance;t.activeNotification=u.pageNotification.stuckNotifications.addLoading("Please wait.",!0),m.domainDns.getDynamicRecords(h,!0).then(function(e){e.Error?($("div.site-msg.has-close.error.alert").show(),u.errormessage=e.Msg,t.asyncStatus(f.AsyncStatus.Error,e)):(u.ddnsHostRecords=e.Result.HostInfo,t.asyncStatus(f.AsyncStatus.Success,e))})},onSuccess:function(){u.pageNotification.alerts.clear()},onError:function(){u.pageNotification.alerts.clear()}}))}),t.opened.then(function(){u.AddHostRecordsModelOpened=!0})))})},u.LoadAdvancedDNSView=function(){u.pageDNSOverViewBehavior=new f.AsyncStateBehavior({constructor:function(){var a=this.instance;a.model=null,m.domainDns.getDomainAdvancedDNSDetails(u.domainName).then(function(e){if(a.showLoadPanel=!0,a.showContent=!1,0==e.Error&&null!=e.Result){if(a.model=e.Result,""!=e.Msg&&u.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0}),a.asyncStatus(f.AsyncStatus.Active),null!=e.Result.DNSDetails.SubDomainsCSV&&null!=e.Result.DNSDetails.SubDomainsCSV){var t=e.Result.DNSDetails.SubDomainsCSV.split(",");if(0<t.length){for(var n=0,n=0;n<t.length;n++)u.sbDomainObject={},u.sbDomainObject.name=t[n],u.sbDomainObject.value=t[n],u.subDomainsListObj.push(u.sbDomainObject);u.subDomainsList=u.subDomainsListObj,u.dnsdetails={Subdomains:h},u.isSubDomain=!0}}}else null!=e.Result&&null!=e.Result&&null==e.Result.Domainname&&"false"==e.Result.Status?u.isNameCheapDomain=!1:a.asyncStatus(f.AsyncStatus.Error,e)})},onSuccess:function(e){this.instance.asyncStatus(f.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=u.struckNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}})},u.dnsdetailsSubDomainChange=function(e){u.domainName=e,window.location.href="/Domains/DomainControlPanel/"+e+"/advancedns"},u.SaveClicked=!1,u.formMailSettings={},u.HostCount=0,u.pageHelper=f,u.pageNotification=new s.instance,u.mailSettingsTTL=[{name:"Automatic",value:"1799"},{name:"1 minute",value:"60"},{name:"5 minute",value:"300"},{name:"20 minute",value:"1200"},{name:"30 minute",value:"1800"},{name:"60 minute",value:"3600"}],u.group1={},u.group2={},u.group3={},u.group4={},u.group5={},u.mxe={};var g={no_email:!(u.mailOptionTypeList=[{name:"No Email Service",value:"no_email"},{name:"Email Forwarding",value:"email_forwarding"},{name:"Custom MX Records",value:"custom_mx"},{name:"Simplified MX Record",value:"mxe"},{name:"Private Email",value:"private_email"},{name:"Gmail",value:"gmail"}]),email_forwarding:!1,custom_mx:!1,mxe:!1,private_email:!1,gmail:!1};u.mailOptionType=g,u.mailsettings={MailTypes:"no_email"},u.DnsHostRecordListViewModel={},u.AddMoreMXRecords=function(e,t){"Add"==e?u.MXRecords.push({HostId:"",Address:"",FriendlyName:"",MXPref:"",TTL:"",Name:""}):"Hide"==e&&u.MXRecords.splice(t,1)},u.loadDefaultMailRecords=function(){u.showLoadPanelForMailSetting=!0,u.mailSettingsPageBehavior=new f.AsyncStateBehavior({constructor:function(){var i=this.instance;i.showLoadPanel=!0,i.showContent=!1,i.model=null,i.pageNgGridSettings=new a,i.pageNgGridSettings.settings.getData=function(a,e){i.filterStatusPropertyNames=[],i.filterFlagsPropertyNames=[],m.domainDns.getEmailForwardingDefaultList(e,h).then(function(e){var t;if(null!=e.Result&&null!=e.Result.Data){""!=e.Msg&&(i.activeNotification=u.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0})),t=e.Result.Data.length,u.HostCount=t;for(var n=0;n<t;n++)e.Result.Data[n].chbId="chbId"+n;i.pageNgGridSettings.parameters.mapping.isLazyLoading=i.pageNgGridSettings.parameters.mapping.serverChunkSize<=e.Result.Data.length,a.resolve(e.Result),i.model=i.pageNgGridSettings.parameters.storage.requestData}else i.activeNotification=u.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})})},i.pageNgGridSettings.settings.reload(),i.asyncStatus(f.AsyncStatus.Success)},onSuccess:function(e){this.instance.asyncStatus(f.AsyncStatus.Active),m.domainDns.getEmailSettingInfo(h).then(function(e){switch(u.hostRecordLimit=e.HostRecordLimit,e.EmailType){case"NONE":u.mailsettings.MailTypes=u.mailOptionTypeList[0].value,u.mailOptionChange(u.mailOptionTypeList[0].value);break;case"FWD":u.mailsettings.MailTypes=u.mailOptionTypeList[1].value,u.mailOptionChange(u.mailOptionTypeList[1].value);break;case"MX":u.mailsettings.MailTypes=u.mailOptionTypeList[2].value,u.mailOptionChange(u.mailOptionTypeList[2].value);var t=JSON.parse(e.HostList);0<t.length&&(u.MXRecords=t);break;case"MXE":u.mailsettings.MailTypes=u.mailOptionTypeList[3].value,u.mailOptionChange(u.mailOptionTypeList[3].value);var n=JSON.parse(e.HostList);0<n.length&&(u.mxe={RecordName:n[0].FriendlyName,IPAddress:n[0].Address});break;case"OX":u.mailsettings.MailTypes=u.mailOptionTypeList[4].value,u.mailOptionChange(u.mailOptionTypeList[4].value);break;case"GMAIL":u.mailsettings.MailTypes=u.mailOptionTypeList[5].value,u.mailOptionChange(u.mailOptionTypeList[5].value)}u.showLoadPanelForMailSetting=!1})},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=u.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}})},u.resetToDefault=function(){g.no_email=!1,g.email_forwarding=!1,g.custom_mx=!1,g.mxe=!1,g.gmail=!1,g.private_email=!1},u.mailOptionChange=function(e){u.SaveClicked=!1,e==u.mailOptionTypeList[0].value?(u.resetToDefault(),g.no_email=!0):e==u.mailOptionTypeList[1].value?(u.resetToDefault(),g.email_forwarding=!0):e==u.mailOptionTypeList[2].value?(u.resetToDefault(),g.custom_mx=!0):e==u.mailOptionTypeList[3].value?(u.resetToDefault(),g.mxe=!0):e==u.mailOptionTypeList[4].value?(u.resetToDefault(),g.private_email=!0):e==u.mailOptionTypeList[5].value&&(u.resetToDefault(),g.gmail=!0),e==u.mailOptionTypeList[0].value&&(u.resetToDefault(),g.no_email=!0)},u.MXValidation=function(e){u.activeTab=e},u.SaveHostRecords=function(){u.activeTab=-1;var e="";switch(u.mailsettings.MailTypes){case u.mailOptionTypeList[0].value:e="NONE";break;case u.mailOptionTypeList[1].value:e="FWD";break;case u.mailOptionTypeList[2].value:e="MX",u.DnsHostRecordListViewModel.MailRecords=u.MXRecords;break;case u.mailOptionTypeList[3].value:e="MXE",u.DnsHostRecordListViewModel={MxeInfo:u.mxe};break;case u.mailOptionTypeList[4].value:e="OX";break;case u.mailOptionTypeList[5].value:e="GMAIL"}u.formMailSettings.$valid&&u.hostRecord.Verify&&(u.showLoadPanelForMailSetting=!0,m.domainDns.setEmailType(h,e,JSON.stringify(u.DnsHostRecordListViewModel)).then(function(e){""==e.message||e.isredirect||(u.pageNotification.stuckNotifications.addError(e.setEmaiTypeStatusDesc,{hasClose:!0,isAutoHide:!0}),u.showLoadPanelForMailSetting=!1),e.isredirect&&(window.location.href=e.redirecturl),u.showLoadPanelForMailSetting=!1}))},u.$watch("[group1.Host,group1.MailServer,group1.Priority]",function(e,t){u.SaveClicked=!1,""==e[0]?($group1.MailServer="",u.formMailSettings.MailServer1="",u.formMailSettings.Priority1="",u.group1.show=!1):""==e[1]?($group1.Host="",u.formMailSettings.Host1="",u.formMailSettings.Priority1="",u.group1.show=!1):""==e[2]&&($group1.MailServer="",u.formMailSettings.Host1="",u.formMailSettings.Priority1="",u.group1.show=!1)},!0),u.$watch("[group2.Host,group2.MailServer,group2.Priority]",function(e,t){u.SaveClicked=!1,""==e[0]?($group2.MailServer="",u.formMailSettings.MailServer2="",u.formMailSettings.Priority2="",u.group2.show=!1):""==e[1]?($group2.Host="",u.formMailSettings.Host2="",u.formMailSettings.Priority2="",u.group2.show=!1):""==e[2]&&($group2.MailServer="",u.formMailSettings.Host2="",u.formMailSettings.Priority2="",u.group2.show=!1)},!0),u.$watch("[group3.Host,group3.MailServer,group3.Priority]",function(e,t){u.SaveClicked=!1,""==e[0]?($group3.MailServer="",u.formMailSettings.MailServer3="",u.formMailSettings.Priority3="",u.group3.show=!1):""==e[1]?($group3.Host="",u.formMailSettings.Host3="",u.formMailSettings.Priority3="",u.group3.show=!1):""==e[2]&&($group3.MailServer="",u.formMailSettings.Host3="",u.formMailSettings.Priority3="",u.group3.show=!1)},!0),u.$watch("[group4.Host,group4.MailServer,group4.Priority]",function(e,t){u.SaveClicked=!1,""==e[0]?($group4.MailServer="",u.formMailSettings.MailServer4="",u.formMailSettings.Priority4="",u.group4.show=!1):""==e[1]?($group4.Host="",u.formMailSettings.Host4="",u.formMailSettings.Priority4="",u.group4.show=!1):""==e[2]&&($group4.MailServer="",u.formMailSettings.Host4="",u.formMailSettings.Priority4="",u.group4.show=!1)},!0),u.$watch("[group5.Host,group5.MailServer,group5.Priority]",function(e,t){u.SaveClicked=!1,""==e[0]?($group5.MailServer="",u.formMailSettings.MailServer5="",u.formMailSettings.Priority5="",u.group5.show=!1):""==e[1]?($group5.Host="",u.formMailSettings.Host5="",u.formMailSettings.Priority5="",u.group5.show=!1):""==e[2]&&($group5.MailServer="",u.formMailSettings.Host5="",u.formMailSettings.Priority5="",u.group5.show=!1)},!0),u.$watch("[mxe.RecordName,mxe.IPAddress]",function(e,t){u.SaveClicked=!1,""==e[0]?(u.mxe.RecordName="",u.formMailSettings.IPAddress="",u.mxe.show=!1):""==e[1]&&(u.mxe.IPAddress="",u.formMailSettings.RecordName="",u.mxe.show=!1)},!0)}]),app.controller("domainsMailSettingCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","notificationService","pageHelper","$q","ncGridParams","$sce","ncGridEventNames","$location",function(o,e,t,n,a,i,s,r,c,l,d,u){o.SaveClicked=!1,o.formMailSettings={};var m=u.absUrl().split("/").pop();o.HostCount=0,o.pageHelper=s,o.pageNotification=new i.instance,o.mailSettingsTTL=[{name:"Automatic",value:"1799"},{name:"1 minute",value:"60"},{name:"5 minute",value:"300"},{name:"20 minute",value:"1200"},{name:"30 minute",value:"1800"},{name:"60 minute",value:"3600"}],o.group1={},o.group2={},o.group3={},o.group4={},o.group5={},o.mxe={};var p={no_email:!(o.mailOptionTypeList=[{name:"No Email Service",value:"no_email"},{name:"Email Forwarding",value:"email_forwarding"},{name:"Custom MX",value:"custom_mx"},{name:"MXE",value:"mxe"},{name:"Private Email",value:"private_email"},{name:"Gmail",value:"gmail"}]),email_forwarding:!1,custom_mx:!1,mxe:!1,private_email:!1,gmail:!1};o.mailOptionType=p,o.mailsettings={MailTypes:"no_email"},o.DnsHostRecordListViewModel={},o.mailSettingsPageBehavior=new s.AsyncStateBehavior({constructor:function(){var i=this.instance;i.showLoadPanel=!0,i.showContent=!1,i.model=null,i.pageNgGridSettings=new c,i.pageNgGridSettings.settings.getData=function(a,e){i.filterStatusPropertyNames=[],i.filterFlagsPropertyNames=[],t.domainDns.getEmailForwardingDefaultList(e).then(function(e){var t;if(null!=e.Result&&null!=e.Result.Data){""!=e.Msg&&(i.activeNotification=o.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0})),t=e.Result.Data.length,o.HostCount=t;for(var n=0;n<t;n++)e.Result.Data[n].chbId="chbId"+n;i.pageNgGridSettings.parameters.mapping.isLazyLoading=i.pageNgGridSettings.parameters.mapping.serverChunkSize<=e.Result.Data.length,a.resolve(e.Result),i.model=i.pageNgGridSettings.parameters.storage.requestData}else i.activeNotification=o.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})})},i.pageNgGridSettings.settings.reload(),i.asyncStatus(s.AsyncStatus.Success)},onSuccess:function(e){this.instance.asyncStatus(s.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=o.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),o.resetToDefault=function(){p.no_email=!1,p.email_forwarding=!1,p.custom_mx=!1,p.mxe=!1,p.gmail=!1,p.private_email=!1},o.mailOptionChange=function(e){e==o.mailOptionTypeList[0].value?(o.resetToDefault(),p.no_email=!0):e==o.mailOptionTypeList[1].value?(o.resetToDefault(),p.email_forwarding=!0):e==o.mailOptionTypeList[2].value?(o.resetToDefault(),p.custom_mx=!0):e==o.mailOptionTypeList[3].value?(o.resetToDefault(),p.mxe=!0):e==o.mailOptionTypeList[4].value?(o.resetToDefault(),p.private_email=!0):e==o.mailOptionTypeList[5].value&&(o.resetToDefault(),p.gmail=!0),e==o.mailOptionTypeList[0].value&&(o.resetToDefault(),p.no_email=!0)},o.SaveHostRecords=function(){var e="";switch(o.mailsettings.MailTypes){case o.mailOptionTypeList[0].value:e="NONE";break;case o.mailOptionTypeList[1].value:e="FWD";break;case o.mailOptionTypeList[2].value:e="MX",o.DnsHostRecordListViewModel={HostList1:o.group1,HostList2:o.group2,HostList3:o.group3,HostList4:o.group4,HostList5:o.group5};break;case o.mailOptionTypeList[3].value:e="MXE",o.DnsHostRecordListViewModel={MxeInfo:o.mxe};break;case o.mailOptionTypeList[4].value:e="OX";break;case o.mailOptionTypeList[5].value:e="GMAIL"}o.formMailSettings.$valid&&t.domainDns.setEmailType(m,e,JSON.stringify(o.DnsHostRecordListViewModel)).then(function(e){e.isredirect&&(window.location.href=e.redirecturl+"/"+m)})},o.$watch("[group1.Host,group1.MailServer,group1.Priority]",function(e,t){o.SaveClicked=!1,""==e[0]?($group1.MailServer="",o.formMailSettings.MailServer1="",o.formMailSettings.Priority1="",o.group1.show=!1):""==e[1]?($group1.Host="",o.formMailSettings.Host1="",o.formMailSettings.Priority1="",o.group1.show=!1):""==e[2]&&($group1.MailServer="",o.formMailSettings.Host1="",o.formMailSettings.Priority1="",o.group1.show=!1)},!0),o.$watch("[group2.Host,group2.MailServer,group2.Priority]",function(e,t){o.SaveClicked=!1,""==e[0]?($group2.MailServer="",o.formMailSettings.MailServer2="",o.formMailSettings.Priority2="",o.group2.show=!1):""==e[1]?($group2.Host="",o.formMailSettings.Host2="",o.formMailSettings.Priority2="",o.group2.show=!1):""==e[2]&&($group2.MailServer="",o.formMailSettings.Host2="",o.formMailSettings.Priority2="",o.group2.show=!1)},!0),o.$watch("[group3.Host,group3.MailServer,group3.Priority]",function(e,t){o.SaveClicked=!1,""==e[0]?($group3.MailServer="",o.formMailSettings.MailServer3="",o.formMailSettings.Priority3="",o.group3.show=!1):""==e[1]?($group3.Host="",o.formMailSettings.Host3="",o.formMailSettings.Priority3="",o.group3.show=!1):""==e[2]&&($group3.MailServer="",o.formMailSettings.Host3="",o.formMailSettings.Priority3="",o.group3.show=!1)},!0),o.$watch("[group4.Host,group4.MailServer,group4.Priority]",function(e,t){o.SaveClicked=!1,""==e[0]?($group4.MailServer="",o.formMailSettings.MailServer4="",o.formMailSettings.Priority4="",o.group4.show=!1):""==e[1]?($group4.Host="",o.formMailSettings.Host4="",o.formMailSettings.Priority4="",o.group4.show=!1):""==e[2]&&($group4.MailServer="",o.formMailSettings.Host4="",o.formMailSettings.Priority4="",o.group4.show=!1)},!0),o.$watch("[group5.Host,group5.MailServer,group5.Priority]",function(e,t){o.SaveClicked=!1,""==e[0]?($group5.MailServer="",o.formMailSettings.MailServer5="",o.formMailSettings.Priority5="",o.group5.show=!1):""==e[1]?($group5.Host="",o.formMailSettings.Host5="",o.formMailSettings.Priority5="",o.group5.show=!1):""==e[2]&&($group5.MailServer="",o.formMailSettings.Host5="",o.formMailSettings.Priority5="",o.group5.show=!1)},!0),o.$watch("[mxe.RecordName,mxe.IPAddress]",function(e,t){o.SaveClicked=!1,""==e[0]?($mxe.RecordName="",o.formMailSettings.IPAddress="",o.mxe.show=!1):""==e[1]&&($mxe.IPAddress="",o.formMailSettings.RecordName="",o.mxe.show=!1)},!0)}]),app.controller("domainsPersonalNsCtrl",["$scope","$rootScope","httpRepository","domainname","$filter","$modal","notificationService","pageHelper","$q","ncGridParams","$sce","ncGridEventNames",function(l,e,c,t,n,o,a,d,s,r,u,m){l.HostCount=0,l.pageHelper=d,l.pageNotification=new a.instance,l.DomainDnsInfoValidation=DomainDnsInfoRes,l.ManageDomainNameServerInfo={},l.EditNameServerInfo={},e.closeLightbox=function(){window.location.href="/Domains/DomainControlPanel/"+t+"/advancedns"},l.bulkDeleteHandler=function(e){var t=[],n=l.pageBehavior.pageNgGridSettings.parameters.selection.selectedItems,a=0;for(i=0;i<n.length;i++)0==i&&(t[a]=n[i].Domain),t[a]=n[i].Nameserver,a++},l.IsEditNameServerModalPopUpOpened=!1,l.openEditNameServerModalPopUp=function(e,t,n,a){var i;l.IsEditNameServerModalPopUpOpened||((i=o.open({templateUrl:"/Domains/Dns/NameServerEditPopUp",controller:"NameserverEditCtrl",size:"lg",backdrop:"static",resolve:{sectionViewModal:function(){return l.EditNameServerInfo.DomainName=e,l.EditNameServerInfo.Nameserver=t,l.EditNameServerInfo.OldIp=n,l.EditNameServerInfo.Index=a,l.EditNameServerInfo}}})).result.then(function(e){l.IsEditNameServerModalPopUpOpened=!1,"cancel"!=e&&null!=e&&(l.pageBehavior.pageNgGridSettings.parameters.storage.pageData[e.Index].IP=e.IP,l.pageNotification.alerts.clear(),i.activeNotification=l.pageNotification.stuckNotifications.addSuccess(l.DomainDnsInfoValidation.static_UpdateDynamicSuccessMessage,{hasClose:!0,isAutoHide:!0}))}),i.opened.then(function(){l.IsEditNameServerModalPopUpOpened=!0}))},l.IsChooseNSListingModalPopUpOpened=!1,l.openChooseNSListingModalPopUp=function(s,r,c){var e;l.IsChooseNSListingModalPopUpOpened||((e=o.open({templateUrl:"/Domains/SSL/Common/PromptRemove",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return"multiremove"==c.toLowerCase()?l.DomainDnsInfoValidation.static_MultiRemoveTitle:l.DomainDnsInfoValidation.static_SingleRemoveTitle},modalContent:function(){return"multiremove"==c.toLocaleLowerCase()?l.DomainDnsInfoValidation.static_MultiRemovePromptIntro:l.DomainDnsInfoValidation.static_SingleRemovePromptIntro}}})).result.then(function(e){if(l.IsChooseNSListingModalPopUpOpened=!1,"yes"==e)if("multiremove"==c.toLowerCase()){var t=[],n="",a=l.pageBehavior.pageNgGridSettings.parameters.selection.selectedItems,o=0;for(i=0;i<a.length;i++)0==i&&(n=t[o]=a[i].Domain),t[o]=a[i].Nameserver,o++;l.pageAction.Click(n,t.join(","),c,!0)}else"remove"==c.toLowerCase()&&l.pageAction.Click(r,s,c,!1)},function(){e=null}),e.opened.then(function(){l.IsChooseNSListingModalPopUpOpened=!0}))},l.pageAction=new d.AsyncStateBehavior({constructor:function(){var o=this.instance,s="",r="";o.Click=function(e,t,n,i){if(null!=(r=0<=t.indexOf(",")?t.split(","):t)&&"[object Array]"===Object.prototype.toString.call(r)){if("multiremove"==n||"remove"==n){l.isMultiple=!0,s=1==i?l.DomainDnsInfoValidation.loading_Dynamic_RemoveMultiple:l.DomainDnsInfoValidation.loading_Dynamic_RemoveSingle,o.asyncStatus(d.AsyncStatus.Loading,s);for(var a=0;a<r.length;a++)l.RemoveNameServerOnebyOne(e,r[a],o)}}else""!=r&&("multiremove"!=n&&"remove"!=n||(s=1==i?l.DomainDnsInfoValidation.loading_Dynamic_RemoveMultiple:l.DomainDnsInfoValidation.loading_Dynamic_RemoveSingle,c.domainDns.NameServerDelete(e,r).then(function(e){var t=e.Result;if(null!=t){if(l.pageNotification.stuckNotifications.clear(),0==t.IsSuccess)l.pageNotification.stuckNotifications.addError(l.DomainDnsInfoValidation.static_DeleteDynamicErrorMessage.replace("{NSServer}",t.Nameserver.toString()),{hasClose:!0,isAutoHide:!0});else for(var n=l.pageBehavior.pageNgGridSettings.parameters.storage.requestData.filter(function(e){return e.Nameserver==t.Nameserver}),a=0;a<n.length;a++)l.pageBehavior.pageNgGridSettings.settings.actions.removeItem(n[a]),l.pageNotification.stuckNotifications.addSuccess(l.DomainDnsInfoValidation.static_DeleteDynamicSuccessMessage.replace("{NSServer}",n[a].Nameserver),{hasClose:!0,isAutoHide:!0});0==l.pageBehavior.pageNgGridSettings.parameters.storage.pageData.length&&(l.pageBehavior.pageNgGridSettings.settings.pagination.setNextPage(),l.pageBehavior.pageNgGridSettings.settings.pagination.setPreviousPage()),1==i&&l.uncheckCheckBoxes()}null==e.Result&&1==e.Error&&l.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})})))}},onSuccess:function(e){var t=this.instance;"getModel"==e.sender&&(t.showContent=!0,t.model=e.Result,t.pageNgGridSettings.settings.reload()),l.pageNotification.alerts.clear(),t.activeNotification=l.pageNotification.stuckNotifications.addSuccess(e.Message,{hasClose:!0,isAutoHide:!0})},onActive:function(e){this.instance.asyncStatus(d.AsyncStatus.Active)},onLoading:function(e){var t=this.instance;l.pageNotification.alerts.clear(),t.activeNotification=l.pageNotification.stuckNotifications.addLoading("<B>"+e+"</B> Please wait.",!1),t.isDisabled=!0,t.showError=!1},onLocked:function(e){this.instance},onError:function(e){this.instance.activeNotification=l.pageNotification.stuckNotifications.addError(e.Message,{hasClose:!0,isAutoHide:!0})}}),l.RemoveNameServerOnebyOne=function(e,t,i){c.domainDns.NameServerDelete(e,t).then(function(e){var t=e.Result;if(null!=t){if(0==t.IsSuccess)i.asyncStatus(d.AsyncStatus.Error),l.pageNotification.stuckNotifications.addError(l.DomainDnsInfoValidation.static_DeleteDynamicErrorMessage.replace("{NSServer}",t.Nameserver.toString()),{hasClose:!0,isAutoHide:!0});else for(var n=l.pageBehavior.pageNgGridSettings.parameters.storage.requestData.filter(function(e){return e.Nameserver==t.Nameserver}),a=0;a<n.length;a++)i.asyncStatus(d.AsyncStatus.Success),l.pageBehavior.pageNgGridSettings.settings.actions.removeItem(n[a]),l.pageNotification.stuckNotifications.addSuccess(l.DomainDnsInfoValidation.static_DeleteDynamicSuccessMessage.replace("{NSServer}",n[a].Nameserver),{hasClose:!0,isAutoHide:!0});0==l.pageBehavior.pageNgGridSettings.parameters.storage.pageData.length&&(l.pageBehavior.pageNgGridSettings.settings.pagination.setNextPage(),l.pageBehavior.pageNgGridSettings.settings.pagination.setPreviousPage()),1==isBulkAction&&l.uncheckCheckBoxes()}null==e.Result&&1==e.Error&&(i.asyncStatus(d.AsyncStatus.Error),l.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0}))})},l.uncheckCheckBoxes=function(){l.pageBehavior.pageNgGridSettings.parameters.selection.selectedItems=[];var e=l.pageBehavior.pageNgGridSettings.parameters.storage.requestData;for(i=0;i<e.length;i++)1==e[i].$ncColumnSelected&&(e[i].$ncColumnSelected=!1);$("div#chb_selectAllNameServer").find('input[type="checkbox"]').removeAttr("checked")},l.pageBehavior=new d.AsyncStateBehavior({constructor:function(){var i=this.instance;i.showLoadPanel=!0,i.showContent=!1,i.model=null,i.pageNgGridSettings=new r,i.pageNgGridSettings.parameters.search.serchPropertyNames=["Nameserver","IP"],i.pageNgGridSettings.parameters.mapping.isLazyLoading=!1,i.pageNgGridSettings.settings.getData=function(a,e){var t=$("input[type='hidden']#domainName").val(),n=$("input[type='hidden']#searchkey").val();i.filterStatusPropertyNames=[],i.filterFlagsPropertyNames=[],c.domainDns.getInfoList(e,t,n).then(function(e){var t;if(null!=e.Result&&null!=e.Result.Data){""!=e.Msg&&(i.activeNotification=l.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoHide:!0})),t=e.Result.Data.length,l.HostCount=t;for(var n=0;n<t;n++)e.Result.Data[n].chbId="chbId"+n;i.pageNgGridSettings.parameters.mapping.isLazyLoading=i.pageNgGridSettings.parameters.mapping.serverChunkSize<=e.Result.Data.length,a.resolve(e.Result),i.model=i.pageNgGridSettings.parameters.storage.requestData}else i.activeNotification=l.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})})},i.pageNgGridSettings.settings.reload(),i.asyncStatus(d.AsyncStatus.Success)},onSuccess:function(e){this.instance.asyncStatus(d.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=l.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}})}]),app.controller("NameserverEditCtrl",["$scope","$modalInstance","httpRepository","pageHelper","$timeout","notificationService","$filter","$document","sectionViewModal",function(n,a,e,i,t,o,s,r,c){n.HostCount=0,n.pageHelper=i,n.NameServerEditModel=c,n.pageNotification=new o.instance,n.pageNotificationAruguement={isAutoHide:!0,hasClose:!0},n.nameServerPageBehavior=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;t.showLoadPanel=!0,t.showContent=!1,t.click=function(){t.asyncStatus(i.AsyncStatus.Loading),e.domainDns.getNameServerInfo(n.NameServerEditModel.DomainName,n.NameServerEditModel.Nameserver).then(function(e){e.sender="getNSInfo",t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},t.save=function(){if(null!=n.nameServerPageBehavior){if(!n.ctrlFrmPopUpPersonalDNS.frmEditPersonalDNS.$invalid){if(t.asyncStatus(i.AsyncStatus.Loading),t.model.OldIP==t.model.IP)return n.pageNotification.alerts.clear(),void n.pageNotification.alerts.addError("The original IP and new IP are the same. Please specify a new IP",n.pageNotificationAruguement);e.domainDns.updateNameServerInfo(t.model.Domain,t.model.Nameserver,t.model.OldIP,t.model.IP).then(function(e){e.sender="updateNSInfo",t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})}}else n.IsItemChosen=!1},t.cancel=function(){a.dismiss("cancel")}},onSuccess:function(e){var t=this.instance;t.showLoadPanel=!1,"getNSInfo"==e.sender?(t.model=e.Result,t.model.Domain=e.Result.Domain,t.model.IP=e.Result.IP,t.model.OldIP=n.NameServerEditModel.OldIp,t.model.Nameserver=e.Result.Nameserver,t.model.Index=n.NameServerEditModel.Index):"updateNSInfo"==e.sender&&a.close(n.nameServerPageBehavior.model)},onActive:function(e){this.instance},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){this.instance.showErrors=!0,n.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),n.nameServerPageBehavior.click()}]),app.controller("removeHostRecordctrl",["$scope","$modalInstance","$document","RecordId","RecordType",function(t,n,e,a,i){t.HostId=a,t.RecordType=i,t.ConfirmRemoveHostRecord=function(){var e={HostId:t.HostId,RemoveStatus:1==t.removeStatus?"Disable":"Remove",RecordType:t.RecordType};n.close(e)},t.cancelClick=function(){console.log("Dismiss Modal with model : "+t.modalpopupcontrollerValue),n.close("")}}]),app.controller("domainTransferAuthorizeModalCtrlObsolete",["$scope","$rootScope","httpRepository","pageHelper","notificationService","$filter","$modalInstance","$document","modalInteraction",function(n,e,t,a,i,o,s,r,c){n.pageHelper=a,n.pageNotification=new i.instance,n.modalBehavior=new a.AsyncStateBehavior({constructor:function(){var e=this.instance;e.model={},e.model.domainName=c.domainName,e.activeNotification=new i.instance,e.asyncStatus(a.AsyncStatus.Success),e.isAuthCodeEmpty=function(){return""==(this.model.authCode||"")},e.isAuthCodeInvalid=function(){var e=this.model.authCode||"";return e.length<8||50<e.length},e.areAllFieldsValid=function(){return!this.isAuthCodeEmpty()&&!this.isAuthCodeInvalid()},e.close=function(){s.dismiss("cancel")},e.save=function(){var e;this.showNotifications=!1,angular.forEach(n.authorizeTransferForm.$error.required,function(e){e.$setDirty()}),this.areAllFieldsValid()?s.close({authCode:this.model.authCode,domainName:this.model.domainName}):(e={Msg:ErrorMessageRes.error_FormIsNotValid},this.asyncStatus(a.AsyncStatus.Error,e))}},onSuccess:function(e){this.instance.model.authCode=""},onActive:function(e){this.instance},onLoading:function(e){this.instance.showLoadPanel=!0},onError:function(e){var t=this.instance;t.activeNotification=n.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1}),t.showNotifications=!0,t.asyncStatus(a.AsyncStatus.Active)}}),r.bind("keydown",function(e){27!==e.which||n.modalBehavior.asyncStatus().isDisabled||n.modalBehavior.close()})}]),app.controller("domainTransferCtrlObsolete",["$scope","$rootScope","httpRepository","pageHelper","notificationService","$filter","$modal",function(e,t,n,a,i,o,s){e.pageHelper=a,e.pageNotification=new i.instance,e.pageBehavior=new a.AsyncStateBehavior({constructor:function(){var e=this.instance;e.activeNotification=new i.instance,e.asyncStatus(a.AsyncStatus.Success),e.authorizeTransfer=function(e){s.open({templateUrl:"/DomainTransfer/AuthorizeTransfer",controller:"domainTransferAuthorizeModalCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{modalInteraction:function(){return{domainName:e}}}}).result.then(function(e){n.transfer.setAuthCode(e.domainName,e.authCode)})}},onSuccess:function(e){this.instance},onActive:function(e){this.instance},onLoading:function(e){this.instance.showLoadPanel=!0},onError:function(e){this.instance}})}]),app.controller("privateEmailChangeMailboxPasswordModalCtrl",["$scope","$modalInstance","mailboxBehavior","httpRepository","pageHelper","notificationService","$document","subscriptionBehavior",function(i,n,e,a,o,t,s,r){var c=ErrorMessageRes;i.pageHelper=o,i.mailboxNotification=new t.instance,i.mailbox=e.model,i.domainName=r.model.DomainName,i.mailboxData={newPassword:null,confirmPassword:null,nmPassword:null},i.startAutoFocus=!0,i.$watch("mailboxData.newPassword",function(e,t){if(e!==t){i.mailboxDataForm.passwordComplexity=o.Validation.passwordComplexityScore(e);var n,a=o.Validation.password(e);for(n in a)i.mailboxDataForm.password["errorMsg_"+n]=a[n].arg,i.mailboxDataForm.password.$setValidity(n,a[n].isValid);i.mailboxDataForm.confirmPassword.$setValidity("passwordmatch",!(e!=i.mailboxData.confirmPassword))}}),i.$watch("mailboxData.nmPassword",function(e,t){if(e!==t){i.mailboxDataForm.nmPassword.$setValidity("wrongPassword",!0);var n,a=o.Validation.namecheapPassword(e);for(n in a)i.mailboxDataForm.nmPassword["errorMsg_"+n]=a[n].arg,i.mailboxDataForm.nmPassword.$setValidity(n,a[n].isValid)}}),i.$watch("mailboxData.confirmPassword",function(e,t){e!==t&&null!=e&&i.mailboxDataForm.confirmPassword.$setValidity("passwordmatch",!(e!=i.mailboxData.newPassword))}),i.modalBehavior=new o.AsyncStateBehavior({constructor:function(){var t=this.instance;t.showErrors=!1,t.activeNotification=i.mailboxNotification.alerts,t.save=function(){i.mailboxDataForm.$valid?(t.asyncStatus(o.AsyncStatus.Loading),i.mailboxDataForm.nmPassword.$setValidity("wrongPassword",!0),a.privateEmail.mailboxChangePassword(i.mailbox,i.mailboxData.newPassword,i.mailboxData.nmPassword).then(function(e){0==e.Error?angular.isDefined(e.Result.IsNamecheapPasswordValid)&&!e.Result.IsNamecheapPasswordValid?(i.mailboxDataForm.nmPassword.$setValidity("wrongPassword",!1),t.asyncStatus(o.AsyncStatus.Active,e)):n.close(e.Msg):t.asyncStatus(o.AsyncStatus.Error,e)})):(angular.forEach(i.mailboxDataForm.$error.required,function(e){e.$setDirty()}),t.showErrors=!0,msg=c.error_FormIsNotValid,null!=t.activeNotification&&t.activeNotification.clear(),t.activeNotification.addError(msg,{hasClose:!0,isAutoHide:!0}))},t.cancel=function(){n.selectedMailboxes=i.selectedMailboxes,n.dismiss("cancel")},t.asyncStatus(o.AsyncStatus.Active)},onSuccess:function(e){this.instance.asyncStatus(o.AsyncStatus.Active)},onActive:function(e){this.instance.showErrors=!1},onLoading:function(e){this.instance.showErrors=!1},onError:function(e){var t=this.instance;t.showErrors=!0,null!=t.activeNotification&&t.activeNotification.clear(),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),s.bind("keydown",function(e){27!==e.which||i.modalBehavior.asyncStatus().isDisabled||n.dismiss("escape key press")}),s.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!i.modalBehavior.asyncStatus().isDisabled&&i.modalBehavior.cancel()})}]),app.controller("privateEmailEditAliasesCtrl",["$scope","httpRepository","pageHelper","notificationService","$cookies","$cookieStore","$filter","ncGridParams","$modal","$rootScope",function(a,o,s,e,t,n,r,i,c,l){l.closeLightbox=function(){window.location.href=a.locationHelper.subscriptionPath},a.pageNotification=new e.instance,a.pageHelper=s;var d,u,m,p,f=PrivateEmailRes;function h(e,i){return new s.AsyncStateBehavior({constructor:function(){var t=this.instance;t.aliasError=null,t.activeNotification=a.pageNotification.stuckNotifications,t.model={Name:e.Name,Pending:e.Pending,oldName:angular.copy(e.Name)},t.canChangeSelection=function(){return!t.asyncStatus().isDisabled},t.remove=function(){t.asyncStatus(s.AsyncStatus.Loading,{sender:"remove"}),o.privateEmail.removeAlias(a.locationHelper.subscriptionId,i.model.Mailbox,t.model.Name).then(function(e){e.sender="remove",t.asyncStatus(0==e.Error?s.AsyncStatus.Success:s.AsyncStatus.Error,e)})},t.edit=function(){null==i.editAliasModalInstance&&(i.editAliasModalInstance=c.open({templateUrl:"/Domains/PrivateEmail/EditAliasesModal",controller:"privateEmailEditAliasesModalCtr",size:"lg",backdrop:"static",keyboard:!1,resolve:{peContext:function(){return{aliasesBehavior:i,editableAlias:t}}}}),i.editAliasModalInstance.result.then(function(e){t.model.oldName=angular.copy(t.model.Name),t.model.Name=e,t.asyncStatus(s.AsyncStatus.Success,{sender:"edit"}),i.editAliasModalInstance=null},function(){i.editAliasModalInstance=null}))},t.asyncStatus(s.AsyncStatus.Active)},onSuccess:function(e){var t,n=this.instance;function a(e){n.activeNotification.clear(),n.activeNotification.addSuccess(e,{hasClose:!0,isAutoHide:!0})}n.aliasError=null,"added"!=e.sender?"remove"!=e.sender?("edit"==e.sender&&(-1!=(t=i.model.AllDomainAliases.indexOf(n.model.oldName))&&(i.model.AllDomainAliases[t]=n.model.Name),a(r("stringFormat")(f.msg_AliasNameChanged,[n.model.oldName,n.model.Name]))),n.asyncStatus(s.AsyncStatus.Active)):i.aliasesNgGrid.settings.actions.removeItem(n).then(function(e){i.aliasesCount=i.savedAliases.length,i.model.AllDomainAliases.splice(i.model.AllDomainAliases.indexOf(e.model.Name),1),a(r("stringFormat")(f.msg_AliasIsRemoved,[e.model.Name])),n.asyncStatus(s.AsyncStatus.Active)}):i.aliasesNgGrid.settings.actions.addNewItem(n).then(function(e){i.aliasesCount=i.savedAliases.length,i.model.AllDomainAliases.push(n.model.Name),a(r("stringFormat")(f.msg_AliasIsAded,[n.model.Name])),n.asyncStatus(s.AsyncStatus.Active)})},onActive:function(e){this.instance.aliasError=null},onLoading:function(e){this.instance.aliasError=null},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;"remove"==e.sender&&(e.Msg=r("stringFormat")(f.error_AliasRemoveInternal,[t.model.oldName])),t.aliasError=e.Msg,t.activeNotification.clear(),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.asyncStatus(s.AsyncStatus.Active)}})}})}a.locationHelper=(m=u=d=null,p=window.location.pathname.split("/"),{subscriptionPath:function(){if(!d){d="";for(var e=1;e<p.length-2;e++)d+="/",d+=p[e]}return d}(),subscriptionId:u=u||p[p.length-3],shortMailboxName:m=m||p[p.length-2]}),a.aliasesBehavior=new s.AsyncStateBehavior({constructor:function(){var n=this.instance;n.activeNotification=a.pageNotification.alerts,n.showLoadPanel=!0,n.showContent=!0,n.aliasesCount=null,n.savedAliases=[],n.model={};var t=n.emptyAliasListWarning=null;n.editAliasModalInstance=null,n.addNewAlias=function(){n.aliasesCount>n.model.MaxAliasCount||null!=t||(t=c.open({templateUrl:"/Domains/PrivateEmail/EditAliasesModal",controller:"privateEmailEditAliasesModalCtr",size:"lg",backdrop:"static",keyboard:!1,resolve:{peContext:function(){return{aliasesBehavior:n}}}})).result.then(function(e){h({Name:e,Pending:!1},n).asyncStatus(s.AsyncStatus.Success,{sender:"added"}),t=null},function(){t=null})},n.aliasesNgGrid=new i,n.aliasesNgGrid.parameters.mapping.isLazyLoading=!1,n.aliasesNgGrid.settings.getData=function(e,t){e.resolve({Data:n.savedAliases})},n.aliasesNgGrid.settings.selection.canChangeSelection=function(e){return e.canChangeSelection()},n.asyncStatus(s.AsyncStatus.Loading),o.privateEmail.getAliases(a.locationHelper.subscriptionId,a.locationHelper.shortMailboxName).then(function(e){e.sender="getAliases",n.asyncStatus(0==e.Error?s.AsyncStatus.Success:s.AsyncStatus.Error,e)})},onSuccess:function(e){var t,n=this.instance;"getAliases"==e.sender&&(n.model=e.Result,t=[],n.model.MailboxAliases.forEach(function(e){t.push(h(e,n))}),n.savedAliases=t,n.aliasesNgGrid.settings.reload()),n.aliasesCount=n.savedAliases.length,n.asyncStatus(s.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){var t=this.instance;t.showLoadPanel=!0,t.showContent=!1},onLocked:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onError:function(e){var t=this.instance;"getAliases"==e.sender&&(t.showLoadPanel=!1,t.showContent=!1,""==e.Msg&&(e.Msg="Internal Server Error")),t.activeNotification.clear(),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.showError=!1}})}})}]),app.controller("privateEmailEditAliasesModalCtr",["$scope","httpRepository","pageHelper","notificationService","$cookies","$cookieStore","$filter","$document","$modalInstance","peContext",function(o,e,s,t,n,a,i,r,c,l){var d=PrivateEmailRes;o.pageNotification=new t.instance,o.pageHelper=s,o.startAutoFocus=!0;var u=ErrorMessageRes,m={domainName:null,subscriptionId:null,mailboxName:null,allDomainAliases:[],allDomainMailboxes:[],oldAliasName:null,shortOldAliasName:null,isEdit:null,isShowModalHeader:!0};o.fromLightboxs=!1,null!=l.aliasesBehavior&&(o.fromLightboxs=!0,m.domainName="@"+l.aliasesBehavior.model.Domain,m.subscriptionId=l.aliasesBehavior.model.SubscriptionId,m.mailboxName=l.aliasesBehavior.model.Mailbox,m.allDomainAliases=l.aliasesBehavior.model.AllDomainAliases,m.allDomainMailboxes=l.aliasesBehavior.model.AllDomainMailboxes,m.shortOldAliasName=null!=l.editableAlias?null!=l.editableAlias.model.Name&&-1!=l.editableAlias.model.Name.indexOf("@")?l.editableAlias.model.Name.split("@")[0]:l.editableAlias.model.Name:"",m.oldAliasName=null!=l.editableAlias?l.editableAlias.model.Name:"",m.isEdit=null!=l.editableAlias,m.isShowModalHeader=!1),null!=l.mailboxesBehavior&&(m.domainName="@"+l.subscriptionBehavior.model.DomainName,m.subscriptionId=l.subscriptionBehavior.model.Id,m.mailboxName=l.mailboxBehavior.model.MailboxName,m.allDomainAliases=[],m.allDomainMailboxes=[],l.mailboxesBehavior.model.forEach(function(e){m.allDomainMailboxes.push(e.model.MailboxName),e.model.Aliases.forEach(function(e){m.allDomainAliases.push(e)})}),m.shortOldAliasName=null!=l.mailboxBehavior.model.Aliases[0]?null!=l.mailboxBehavior.model.Aliases[0]&&-1!=l.mailboxBehavior.model.Aliases[0].indexOf("@")?l.mailboxBehavior.model.Aliases[0].split("@")[0]:l.mailboxBehavior.model.Aliases[0]:"",m.oldAliasName=l.mailboxBehavior.model.Aliases[0],m.isEdit=null!=l.mailboxBehavior.model.Aliases[0],m.isShowModalHeader=!0),o.modalBehavior=new s.AsyncStateBehavior({constructor:function(){var t=this.instance;t.showErrors=!1,t.activeNotification=o.pageNotification.alerts,t.isShowModalHeader=m.isShowModalHeader,t.model={isEdit:m.isEdit,name:m.shortOldAliasName,domainName:m.domainName,mailboxName:m.mailboxName},t.cancel=function(){c.dismiss("cancel")},t.save=function(){if(o.aliasForm.$valid){if(t.showErrors=!1,t.model.name==m.shortOldAliasName)return void t.cancel();t.model.name.toLowerCase(),t.model.isEdit?(t.asyncStatus(s.AsyncStatus.Loading,{sender:"edit"}),e.privateEmail.editAlias(m.subscriptionId,m.mailboxName,m.oldAliasName,t.model.name+t.model.domainName).then(function(e){e.sender="edit",t.asyncStatus(0==e.Error?s.AsyncStatus.Success:s.AsyncStatus.Error,e)})):(t.asyncStatus(s.AsyncStatus.Loading,{sender:"addNew"}),e.privateEmail.addAlias(m.subscriptionId,m.mailboxName,t.model.name+t.model.domainName).then(function(e){e.sender="addNew",t.asyncStatus(0==e.Error?s.AsyncStatus.Success:s.AsyncStatus.Error,e)}))}else angular.forEach(o.aliasForm.$error.required,function(e){e.$setDirty()}),t.showErrors=!0,msg=u.error_FormIsNotValid,t.activeNotification.clear(),t.activeNotification.addError(msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.activeNotification.clear()}})},t.asyncStatus(s.AsyncStatus.Active)},onSuccess:function(e){var t=this.instance;t.showErrors=!1,"addNew"!=e.sender&&"edit"!=e.sender||c.close(t.model.name+t.model.domainName),t.asyncStatus(s.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance},onError:function(e){var t=this.instance;t.showErrors=!0,"addNew"==e.sender&&(e.Msg=i("stringFormat")(d.error_AliasAddInternal,[t.model.name+m.domainName])),"edit"==e.sender&&(e.Msg=i("stringFormat")(d.error_AliasChangeNameInternal,[m.oldAliasName+m.domainName])),null!=t.activeNotification&&t.activeNotification.clear(),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.showErrors=!1}})}}),o.$watch("modalBehavior.model.name",function(e,t){if(e!==t){e=null==e?"":e.toString();var n,a=s.Validation.mailboxAliasNameCharacters(e);for(n in a)o.aliasForm.name["errorMsg_"+n]=a[n].arg,o.aliasForm.name.$setValidity(n,a[n].isValid);var i=e+o.modalBehavior.model.domainName;o.aliasForm.name.$setValidity("duplicateAlias",-1==m.allDomainAliases.indexOf(i)||i==m.oldAliasName),o.aliasForm.name.$setValidity("duplicateName",-1==m.allDomainMailboxes.indexOf(i))}}),r.bind("keydown",function(e){27!==e.which||o.modalBehavior.asyncStatus().isDisabled||o.modalBehavior.cancel()}),r.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!o.modalBehavior.asyncStatus().isDisabled&&o.modalBehavior.cancel()})}]),app.controller("privateEmailEditStorageMailboxModalCtrl",["$scope","$modalInstance","httpRepository","pageHelper","mailboxBehavior","subscriptionBehavior","$document","notificationService","mailboxesBehavior",function(o,n,e,s,t,a,i,r,c){var l=ErrorMessageRes;o.mailboxNotification=new r.instance,o.subscriptionBehavior=a,o.mailboxBehavior=t,o.pageHelper=s,o.select2Options={minimumResultsForSearch:-1},o.startAutoFocus=!0,o.quotaKb=function(){return 0==o.quotaSize?1024*o.quota*1024*1024:1024*o.quota*1024};var d,u=(d=0,c.model.forEach(function(e){d+=e.model.EmailStorageMax.Bytes}),d-o.mailboxBehavior.model.EmailStorageMax.Bytes);o.getMailboxeMaxStorage=s.Calculation.getDataSize(o.subscriptionBehavior.model.EmailStorageMax.Bytes-u),o.stillDistributeStorage=function(){var e=o.subscriptionBehavior.model.EmailStorageMax.Bytes-u;return s.Calculation.getDataSize(e-o.quotaKb())},o.quota=angular.copy(o.mailboxBehavior.model.EmailStorageMax.AdjustedSize),o.quotaSize=1<=o.mailboxBehavior.model.EmailStorageMax.Gb?0:1;function m(e){var t,n=0==o.quotaSize?o.getMailboxeMaxStorage.Gb:o.getMailboxeMaxStorage.Mb,a=0==o.quotaSize?.001:1,i=s.Validation.number(e,a,n,1==o.quotaSize);for(t in i)o.mailboxDataForm.mailboxstorage["errorMsg_"+t]=i[t].arg,o.mailboxDataForm.mailboxstorage.$setValidity(t,i[t].isValid)}o.$watch("quota",function(e,t){e!==t&&m(e)}),o.$watch("quotaSize",function(e,t){e!==t&&m(o.quota)}),o.modalBehavior=new s.AsyncStateBehavior({constructor:function(){var t=this.instance;t.showError=!1,t.activeNotification=o.mailboxNotification.alerts,t.save=function(){o.mailboxDataForm.$valid?(t.asyncStatus(s.AsyncStatus.Loading),e.privateEmail.editStorage(o.subscriptionBehavior.model.Id,o.mailboxBehavior.model.MailboxName,0==o.quotaSize?1024*parseFloat(o.quota):parseFloat(o.quota)).then(function(e){t.asyncStatus(0==e.Error?s.AsyncStatus.Success:s.AsyncStatus.Error,e)})):(angular.forEach(o.mailboxDataForm.$error.required,function(e){e.$setDirty()}),t.showError=!0,msg=l.error_FormIsNotValid,t.activeNotification.clear(),t.activeNotification.addError(msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.activeNotification=null}}))},t.cancel=function(){n.dismiss("cancel")}},onSuccess:function(e){var t=this.instance;t.cancel(),o.mailboxBehavior.asyncStatus(s.AsyncStatus.Success,{sender:"editStorage",newQuota:s.Calculation.getDataSize(o.quotaKb())}),t.showError=!1,t.cancel()},onActive:function(e){this.instance.showError=!1},onLoading:function(e){this.instance.showErrors=!0},onError:function(e){var t=this.instance;t.showError=!0,t.activeNotification.clear(),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.activeNotification=null}})}}),i.bind("keydown",function(e){27!==e.which||o.modalBehavior.asyncStatus().isDisabled||n.dismiss("escape key press")}),i.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!o.modalBehavior.asyncStatus().isDisabled&&o.modalBehavior.cancel()})}]),app.controller("privateEmailSetupMailboxesModalCtrl",["$scope","$modalInstance","mailboxesBehavior","httpRepository","subscriptionBehavior","pageHelper","$timeout","notificationService","$document",function(o,n,e,a,t,s,i,r,c){var l=PrivateEmailRes,d=ErrorMessageRes;o.pageNotification=new r.instance,o.pageHelper=s,o.subscriptionModel=t.model,o.select2Options={minimumResultsForSearch:-1},o.avalibleMailboxCount=o.subscriptionModel.MailboxesCountMax-o.subscriptionModel.MailboxesCountCurrent;var u,m=new Array,p=new Array,f=new Array;e.model.forEach(function(e){p.push(e.model.MailboxName),e.model.Aliases.forEach(function(e){m.push(e)})}),o.getMailboxMaxStorage=((u=o.subscriptionModel.EmailStorageMax.Bytes-o.subscriptionModel.EmailStorageCurrent.Bytes)<0&&(u=0),s.Calculation.getDataSize(u)),o.$watch("newMailbox.name",function(e,t){if(e!==t){e=null==e?"":e.toString();var n,a=s.Validation.mailboxAliasNameCharacters(e);for(n in a)o.mailboxForm.name["errorMsg_"+n]=a[n].arg,o.mailboxForm.name.$setValidity(n,a[n].isValid);var i=e+"@"+o.subscriptionModel.DomainName;o.mailboxForm.name.$setValidity("duplicateAlias",!(-1!=m.indexOf(i))),o.mailboxForm.name.$setValidity("duplicateName",!(-1!=p.indexOf(i)||-1!=f.indexOf(e)))}}),o.$watch("newMailbox.password",function(e,t){if(e!==t){o.newMailbox.passwordcomplexity=s.Validation.passwordComplexityScore(e);var n,a=s.Validation.password(e);for(n in a)o.mailboxForm.password["errorMsg_"+n]=a[n].arg,o.mailboxForm.password.$setValidity(n,a[n].isValid);o.mailboxForm.confirmPassword.$dirty&&o.mailboxForm.confirmPassword.$setValidity("passwordmatch",!(e!=o.newMailbox.confirmPassword))}}),o.$watch("newMailbox.confirmPassword",function(e,t){e!==t&&null!=e&&o.mailboxForm.confirmPassword.$setValidity("passwordmatch",!(e!=o.newMailbox.password))});function h(e){var t,n=0==o.newMailbox.quotaSize?o.getMailboxMaxStorage.Gb:o.getMailboxMaxStorage.Mb,a=0==o.newMailbox.quotaSize?.001:1,i=s.Validation.number(e,a,n,1==o.newMailbox.quotaSize);for(t in i)o.mailboxForm.mailboxstorage["errorMsg_"+t]=i[t].arg,o.mailboxForm.mailboxstorage.$setValidity(t,i[t].isValid)}o.$watch("newMailbox.quota",function(e,t){e!==t&&h(e)}),o.$watch("newMailbox.quotaSize",function(e,t){e!==t&&h(o.newMailbox.quota)}),o.modalBehavior=new s.AsyncStateBehavior({constructor:function(){var t=this.instance;t.showErrors=!1,t.messages.loading=l.msg_CreateMailboxProcessing,t.activeNotification=o.pageNotification.alerts,t.fillMailboxModel=function(){o.newMailbox={name:null,password:null,confirmPassword:null,quota:o.subscriptionModel.DefaultMailQuota.Bytes>o.getMailboxMaxStorage.Bytes?o.getMailboxMaxStorage.AdjustedSize:o.subscriptionModel.DefaultMailQuota.AdjustedSize,quotaSize:o.subscriptionModel.DefaultMailQuota.Bytes>o.getMailboxMaxStorage.Bytes?1<=o.getMailboxMaxStorage.Gb?0:1:1<=o.subscriptionModel.DefaultMailQuota.Gb?0:1,quotaMB:function(){return 0==this.quotaSize?1024*this.quota:this.quota},subscriptionId:o.subscriptionModel.Id,defaultMailQuota:o.subscriptionModel.DefaultMailQuota.Mb},o.startAutoFocus=!0},t.fillMailboxModel(),t.createMailbox=function(){o.mailboxForm.$valid?(t.asyncStatus(s.AsyncStatus.Loading),o.newMailbox.name=o.newMailbox.name.toLowerCase(),a.privateEmail.addMailbox(o.newMailbox,o.subscriptionModel).then(function(e){t.asyncStatus(0==e.Error?s.AsyncStatus.Success:s.AsyncStatus.Error,e)})):(angular.forEach(o.mailboxForm.$error.required,function(e){e.$setDirty()}),h(o.newMailbox.quota),t.showErrors=!0,msg=d.error_FormIsNotValid,t.activeNotification&&t.activeNotification.clear(),t.activeNotification.addError(msg,{hasClose:!0,isAutoHide:!0}))},t.cancel=function(){n.dismiss("cancel")},t.asyncStatus(s.AsyncStatus.Active)},onSuccess:function(e){this.instance;mailboxAvailableStorage=null,o.subscriptionModel.MailboxesCountCurrent++;var t=o.subscriptionModel.EmailStorageCurrent.Bytes+1024*o.newMailbox.quotaMB()*1024;o.subscriptionModel.EmailStorageCurrent=s.Calculation.getDataSize(t),n.close(e.Result)},onActive:function(e){this.instance.showErrors=!1},onLoading:function(e){this.instance.showErrors=!0},onError:function(e){var t=this.instance;t.showErrors=!0,t.activeNotification&&t.activeNotification.clear(),t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),c.bind("keydown",function(e){27!==e.which||o.modalBehavior.asyncStatus().isDisabled||n.dismiss("escape key press")}),c.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!o.modalBehavior.asyncStatus().isDisabled&&o.modalBehavior.cancel()})}]),app.controller("privateEmailSubscriptionCtrl",["$scope","$rootScope","httpRepository","$cookies","$cookieStore","$filter","$modal","$location","notificationService","pageHelper","$timeout","$q","ncGridParams","$sce","forEachChunk",function(l,e,s,t,n,d,o,a,i,u,r,c,m,p,f){var h=PrivateEmailRes,g=CommonButtonTextRes,v=a.absUrl().split("/")[a.absUrl().split("/").length-2];function S(e,a){return new u.AsyncStateBehavior({constructor:function(){var n=this.instance;n.model=e,n.model.MailboxSortName=n.model.MailboxName.substring(0,n.model.MailboxName.indexOf("@")),n.isDisabled=!0,n.canChangeSelection=function(){return!n.asyncStatus().isDisabled},n.turnOff=function(){a.bulkActions.turnOff(n)},n.turnOn=function(){a.bulkActions.turnOn(n)},n.remove=function(){a.bulkActions.remove(n)},n.changePassword=function(){null==a.activeModalInstance&&(a.activeModalInstance=o.open({templateUrl:"/Domains/PrivateEmail/ChangeMailboxPasswordModal",controller:"privateEmailChangeMailboxPasswordModalCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{mailboxBehavior:function(){return n},subscriptionBehavior:function(){return l.subscriptionBehavior}}}),a.activeModalInstance.result.then(function(){n.asyncStatus(u.AsyncStatus.Success,{sender:"changePassword"}),a.activeModalInstance=null},function(){a.activeModalInstance=null}))},n.editStorage=function(){null==a.activeModalInstance&&(a.activeModalInstance=o.open({templateUrl:"/Domains/PrivateEmail/EditStorageMailboxModal",controller:"privateEmailEditStorageMailboxModalCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{mailboxBehavior:function(){return n},subscriptionBehavior:function(){return l.subscriptionBehavior},mailboxesBehavior:function(){return a}}}),a.activeModalInstance.result.then(function(){a.activeModalInstance=null},function(){a.activeModalInstance=null}))},n.mailboxStatus={className:function(){function e(){return n.model.UserLocked?"danger":"ok"}if(null!=l.subscriptionBehavior.model)return e();l.$on("subscriptionInfoLoaded",e)},description:function(){function e(){return n.model.UserLocked?h.status_SubscriptionMailboxOFF:h.status_SubscriptionMailboxON}if(null!=l.subscriptionBehavior.model)return e();l.$on("subscriptionInfoLoaded",e)},tooltip:function(){function e(){return null!=l.subscriptionBehavior.mailboxesRestrictions.tooltip?l.subscriptionBehavior.mailboxesRestrictions.tooltip:n.model.AdminLocked||n.model.AutoLocked?h.msg_MailboxLockedTooltip:n.model.Pending?h.msg_MailboxIsPendingTooltip:n.model.UserLocked?h.msg_MailboxOffTooltip:null}if(null!=l.subscriptionBehavior.model)return e();l.$on("subscriptionInfoLoaded",e)}},n.context={getManagePath:function(){return path=window.location.pathname+"/"+n.model.MailboxName.replace("@"+l.subscriptionBehavior.model.DomainName,"")+"/EditAliases"},pendingAliasesGetManageHtmlLink:function(){return p.trustAsHtml(d("stringFormat")(h.error_HasPendingAliasesWithLink,[n.context.getManagePath()]))},actions:{manage:function(){window.location.href=n.context.getManagePath()},addEdit:function(){n.model.HasPendingAliases?window.open("https://support.namecheap.com/index.php?/Tickets/Submit/RenderForm/44","_blank"):l.subscriptionBehavior.model.MaxAliasCount<1&&null!=a.activeModalInstance||(a.activeModalInstance=o.open({templateUrl:"/Domains/PrivateEmail/EditAliasesModal",controller:"privateEmailEditAliasesModalCtr",size:"lg",backdrop:"static",keyboard:!1,resolve:{peContext:function(){return{subscriptionBehavior:l.subscriptionBehavior,mailboxesBehavior:a,mailboxBehavior:n}}}}),a.activeModalInstance.result.then(function(e){0==n.model.Aliases.length?n.asyncStatus(u.AsyncStatus.Success,{sender:"addedAlias",aliasName:e}):n.asyncStatus(u.AsyncStatus.Success,{sender:"editAlias",aliasName:e}),a.activeModalInstance=null},function(){a.activeModalInstance=null}))},remove:function(){n.asyncStatus(u.AsyncStatus.Loading,{sender:"removeAlias"}),s.privateEmail.removeAlias(l.subscriptionBehavior.model.Id,n.model.MailboxName,n.model.Aliases[0]).then(function(e){e.sender="removeAlias",e.aliasName=n.model.Aliases[0],n.asyncStatus(0==e.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,e)})}},isSingleAlias:1==l.subscriptionBehavior.model.MaxAliasCount,disabled:1==l.subscriptionBehavior.model.LockedReason||l.subscriptionBehavior.model.Status==l.SubscriptionStatus.Grace||l.subscriptionBehavior.model.Status==l.SubscriptionStatus.Redemption,btns:{cover:null,additional:[],isSplitBtn:!1,update:function(){function e(e,t){return{title:e,clickFn:t}}n.context.btns.additional=[];var t={btnSupport:e(g.static_Support,function(){window.open("https://support.namecheap.com/index.php?/Tickets/Submit/RenderForm/44","_blank")}),btnEditStorage:e(h.btn_EditStorage,n.editStorage),btnManageAliases:e(h.btn_EditAliases,n.context.actions.manage),btnAddAlias:e(h.btn_AddNewAlias,n.context.actions.addEdit),btnEditAlias:e(h.btn_EditAlias,n.context.actions.addEdit),btnChangePassword:e(h.btn_ChangePassword,n.changePassword),btnTurnOffMailbox:e(h.btn_TurnOffMailbox,n.turnOff),btnTurnOnMailbox:e(h.btn_TurnOnMailbox,n.turnOn),btnRemoveAlias:e(h.btn_RemoveAlias,n.context.actions.remove),btnRemove:e(g.static_Remove,n.remove),btnOpenWebmail:e(h.btn_OpenWebmail,function(){window.open(l.subscriptionBehavior.model.WebmailUrl,"_blank")})};n.model.AdminLocked||n.model.Pending?(n.context.btns.cover=t.btnSupport,n.context.btns.additional.push(t.btnRemove)):n.model.UserLocked||n.model.AdminLocked||n.context.isSingleAlias?n.model.UserLocked||n.model.AdminLocked||!n.context.isSingleAlias?n.model.UserLocked&&!n.model.AdminLocked&&(n.context.btns.cover=t.btnTurnOnMailbox,n.context.btns.additional.push(t.btnRemove),n.context.btns.additional.push(t.btnSupport)):(n.model.HasPendingAliases?(n.context.btns.cover=t.btnSupport,n.context.btns.additional.push(t.btnEditStorage),n.context.btns.additional.push(t.btnRemoveAlias)):(n.context.btns.cover=t.btnEditStorage,0==n.model.CurrentAliaseCount?n.context.btns.additional.push(t.btnAddAlias):(n.context.btns.additional.push(t.btnEditAlias),n.context.btns.additional.push(t.btnRemoveAlias))),n.context.btns.additional.push(t.btnChangePassword),n.context.btns.additional.push(t.btnTurnOffMailbox),n.context.btns.additional.push(t.btnRemove),n.context.btns.additional.push(t.btnOpenWebmail)):(n.model.HasPendingAliases?(n.context.btns.cover=t.btnManageAliases,n.context.btns.additional.push(t.btnEditStorage)):(n.context.btns.cover=t.btnEditStorage,n.context.btns.additional.push(t.btnManageAliases)),n.context.btns.additional.push(t.btnChangePassword),n.context.btns.additional.push(t.btnTurnOffMailbox),n.context.btns.additional.push(t.btnRemove),n.context.btns.additional.push(t.btnOpenWebmail)),0<n.context.btns.additional.length&&(n.context.btns.isSplitBtn=!0)}}},n.context.btns.update()},onSuccess:function(e){var n=this.instance;if("addedAlias"==e.sender&&(n.model.CurrentAliaseCount=1,n.model.Aliases.push(e.aliasName),e.Msg=d("stringFormat")(h.msg_AliasIsAded,[e.aliasName])),"removeAlias"==e.sender&&(1==n.model.HasPendingAliases&&(n.model.HasPendingAliases=!1),n.model.CurrentAliaseCount=0,e.Msg=d("stringFormat")(h.msg_AliasIsRemoved,[e.aliasName]),n.model.Aliases=[]),"editAlias"==e.sender&&(e.Msg=d("stringFormat")(h.msg_AliasNameChanged,[n.model.Aliases[0],e.aliasName]),n.model.Aliases[0]=e.aliasName),"remove"==e.sender){var t=d("stringFormat")(h.msg_MailboxIsRemoved,[n.model.MailboxName]);return n.activeNotification&&n.activeNotification.destroy&&n.activeNotification.destroy(),n.activeNotification=l.pageNotification.stuckNotifications.addSuccess(t,{hasClose:!0,isAutoHide:!0}),a.mailboxNgGrid.settings.actions.removeItem(n).then(function(e){var t=l.subscriptionBehavior.model.EmailStorageCurrent.Bytes-n.model.EmailStorageMax.Bytes;l.subscriptionBehavior.model.EmailStorageCurrent=u.Calculation.getDataSize(t),l.subscriptionBehavior.model.MailboxesCountCurrent--}),void(l.select2Options.minimumResultsForSearch=10<l.mailboxesBehavior.model.length?1:-1)}if("changePassword"==e.sender&&(e.Msg=d("stringFormat")(h.msg_MailboxChangePasswordSuccess,[n.model.MailboxName])),"editStorage"==e.sender&&(e.Msg=d("stringFormat")(h.msg_EditStorageChanged,[n.model.MailboxName,n.model.EmailStorageMax.AdjustedSize,n.model.EmailStorageMax.AdjustedName,e.newQuota.AdjustedSize,e.newQuota.AdjustedName]),l.subscriptionBehavior.model.EmailStorageCurrent=u.Calculation.getDataSize(l.subscriptionBehavior.model.EmailStorageCurrent.Bytes-n.model.EmailStorageMax.Bytes+e.newQuota.Bytes),n.model.EmailStorageMax=e.newQuota,n.model.EmailStorageAvailable=u.Calculation.getDataSize(n.model.EmailStorageMax.Bytes-n.model.EmailStorageCurrent.Bytes)),"turnOff"==e.sender&&(e.Msg=d("stringFormat")(h.msg_MailboxDisableSuccess,[n.model.MailboxName]),n.model.UserLocked=!0,a.mailboxNgGrid.settings.selection.unselectItem(n)),"turnOn"==e.sender&&(e.Msg=d("stringFormat")(h.msg_MailboxEnableSuccess,[n.model.MailboxName]),n.model.UserLocked=!1,a.mailboxNgGrid.settings.selection.unselectItem(n)),"setupNew"==e.sender)return a.mailboxNgGrid.settings.actions.addNewItem(n).then(function(e){var t=d("stringFormat")(h.msg_PrivateEmailAddMailboxSuccess,[n.model.MailboxName]);n.activeNotification&&n.activeNotification.destroy&&n.activeNotification.destroy(),n.activeNotification=l.pageNotification.stuckNotifications.addSuccess(t,{hasClose:!0,isAutoHide:!0}),n.asyncStatus(u.AsyncStatus.Active)}),l.select2Options.minimumResultsForSearch=10<l.mailboxesBehavior.model.length?1:-1,void n.asyncStatus(u.AsyncStatus.Active);n.isDisabled=!1,n.activeNotification&&n.activeNotification.destroy&&n.activeNotification.destroy(),n.activeNotification=l.pageNotification.stuckNotifications.addSuccess(e.Msg,{hasClose:!0,isAutoforEachHide:!0}),n.context.btns.update(),n.asyncStatus(u.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.isDisabled=!1,t.showError=!1},onLoading:function(e){var t=this.instance;t.showError=!1,t.isDisabled=!0},onLocked:function(e){var t=this.instance;t.showError=!1,t.isDisabled=!0},onError:function(e){var t=this.instance;t.isDisabled=!1,t.showError=!0,"turnOff"==e.sender&&(e.Msg=d("stringFormat")(h.msg_PrivateEmailTurnOffMailboxError,[t.model.MailboxName])),"turnOn"==e.sender&&(e.Msg=d("stringFormat")(h.msg_PrivateEmailTurnOnMailboxError,[t.model.MailboxName])),"remove"==e.sender&&(e.Msg=d("stringFormat")(h.msg_PrivateEmailDeleteMailboxError,[t.model.MailboxName])),"removeAlias"==e.sender&&(e.Msg=d("stringFormat")(h.error_AliasRemoveInternal,[t.model.Aliases[0]])),t.activeNotification=l.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.showError=!1,t.asyncStatus(u.AsyncStatus.Active)}}),t.context.btns.update()}})}l.pageHelper=u,l.searchMailbox="",l.pageNotification=new i.instance,l.select2Options={minimumResultsForSearch:-1},l.subscriptionBehavior=new u.AsyncStateBehavior({constructor:function(){var t=this.instance;t.showLoadPanel=!0,t.showPageContent=!1,t.planStatus={ClassName:function(){var e=["ok","danger","alert","grace"];return null==t.model?null:t.model.Status==l.SubscriptionStatus.Active?e[0]:t.model.Status==l.SubscriptionStatus.NotActivated?e[2]:t.model.Status==l.SubscriptionStatus.Expired||t.model.Status==l.SubscriptionStatus.Cancelled||t.model.Status==l.SubscriptionStatus.Redemption?e[1]:t.model.Status==l.SubscriptionStatus.Grace?e[3]:null},Description:function(){if(null==t.model)return null;var e=[h.status_SubscriptionActive,h.status_SubscriptionGrace,h.status_SubscriptionRedemption,h.status_SubscriptionNotActivated,h.status_SubscriptionExpired,h.status_SubscriptionCancelled];return null!=e[t.model.Status]?e[t.model.Status]:null}},t.renew=function(){o.open({templateUrl:"/Domains/PrivateEmail/RenewSubscriptionModal",controller:"privateEmailRenewModalCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{subscriptionBehavior:function(){return t}}}).result.then(function(){},function(){0})},t.isDisabledRenew=function(){return!!t.asyncStatus().isLocked&&(1==t.model.LockedReason||t.model.Status!=l.SubscriptionStatus.Grace)},t.expireSoon=!1,t.mailboxesRestrictions={locked:!1,tooltip:null,flag:!1};var n=null;t.isAlert=function(){if(null==t.model)return!1;var e=!1;return t.model.Status==l.SubscriptionStatus.Grace||t.model.Status==l.SubscriptionStatus.Redemption?e=!1:(t.model.ExpireDayCount<=t.model.ExpirationNotification||t.model.Status!=l.SubscriptionStatus.Active&&t.model.Status!=l.SubscriptionStatus.Grace&&t.model.Status!=l.SubscriptionStatus.Redemption||t.model.MailboxesCountCurrent==l.SubscriptionStatus.Active)&&(e=!0),0<d("propertyFilter")(l.mailboxesBehavior.model,{"model.HasPendingAliases":!0}).length&&(null==n&&(n=l.pageNotification.alerts.addWarning(h.error_HasPendingAliases,{hasClose:!0,isAutoHide:!1})),e=!0),n&&n.destroy&&(n.destroy(),n=null),e},t.asyncStatus(u.AsyncStatus.Loading),s.privateEmail.getSubscription(v).then(function(e){t.asyncStatus(0==e.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,e)})},onSuccess:function(e){var i=this.instance;e.Result.ValidityStart=u.Date.dateFromJson(e.Result.ValidityStart),e.Result.ValidityEnd=u.Date.dateFromJson(e.Result.ValidityEnd),e.Result.ExpireDayCount=u.Date.diffDays(new Date,e.Result.ValidityEnd),e.Result.PurchaseMoreMailboxesErrorMessage=e.Result.IsDomainOwner?"":"Is not avalable for the domain";var n=null;l.$watch("subscriptionBehavior.model.MailboxesCountCurrent",function(e,t){(null!=e&&e!=t||0==e)&&(n&&n.destroy&&n.destroy(),0==e&&i.model.Status==l.SubscriptionStatus.Active&&(n=l.pageNotification.alerts.addWarning(h.info_MailboxListIsEmptyWithLink,{hasClose:!0,isAutoHide:!1,senderScope:l})))});var a=null;l.$watch("subscriptionBehavior.model.EmailStorageCurrent.Bytes",function(e,t){a}),i.model=e.Result;function t(){var n=["MX","CNAME","TXT","NS","A","SRV","AAAA","MXE"],a=[];return i.model.ExpectedDnsRecords.forEach(function(e){var t="";t+="@"==e.Host?"":e.Host+"."+i.model.DomainName+" IN ",t+=n[e.RecordType]+" ",t+=e.Data,a.push(t)}),a.join("\n")}var o,s,r,c;1==this.instance.model.LockedReason?(i.mailboxesRestrictions.locked=!0,i.mailboxesRestrictions.tooltip=h.msg_SubscriptionMailboxLockedAdminTooltip,i.mailboxesRestrictions.flag=!0,this.instance.model.Status==l.SubscriptionStatus.Grace?(i.mailboxesRestrictions.tooltip=h.msg_MailboxLockedExpiredTooltip,i.mailboxesRestrictions.locked=!1,i.mailboxesRestrictions.flag=!0):this.instance.model.Status==l.SubscriptionStatus.Redemption&&(i.mailboxesRestrictions.tooltip=h.msg_MailboxLockedRedemptionTooltip,i.mailboxesRestrictions.locked=!1,i.mailboxesRestrictions.flag=!0)):this.instance.model.Status==l.SubscriptionStatus.Grace?(i.mailboxesRestrictions.locked=!1,i.mailboxesRestrictions.tooltip=h.msg_MailboxLockedExpiredTooltip,i.mailboxesRestrictions.flag=!0):this.instance.model.Status==l.SubscriptionStatus.Redemption?(i.mailboxesRestrictions.locked=!1,i.mailboxesRestrictions.tooltip=h.msg_MailboxLockedRedemptionTooltip,i.mailboxesRestrictions.flag=!0):3==this.instance.model.Status&&(i.mailboxesRestrictions.locked=!0,i.mailboxesRestrictions.tooltip=h.msg_MailboxLockedPendingTooltip,i.mailboxesRestrictions.flag=!0),i.model.ExpireDayCount<=i.model.ExpirationNotification&&0<=i.model.ExpireDayCount&&1!=this.instance.model.Status&&(msgText=0==i.model.ExpireDayCount?h.msg_SubscriptionExpireToday:d("stringFormat")(h.msg_SubscriptionExpireDayCountSiteMsg,[i.model.ExpireDayCount]),l.pageNotification.alerts.addWarning(msgText,{hasClose:!0,isAutoHide:!1})),1==this.instance.model.LockedReason||this.instance.model.Status!=l.SubscriptionStatus.Active?(i.asyncStatus(u.AsyncStatus.Locked),o=new Date(e.Result.ValidityEnd),i.model.Status==l.SubscriptionStatus.Grace&&(s=u.Date.dateFromJson(o.setDate(o.getDate()+e.Result.MoveToRedemptionDays)),l.pageNotification.alerts.addWarning(d("stringFormat")(h.msg_PrivateEmailgetSubscriptionStatusGrace,[s.toLocaleString().substring(0,s.toLocaleString().indexOf(","))]),{hasClose:!0,isAutoHide:!1})),i.model.Status==l.SubscriptionStatus.Redemption&&(r=u.Date.dateFromJson(o.setDate(o.getDate()+e.Result.MoveToExpirationDays)),l.pageNotification.alerts.addWarning(d("stringFormat")(h.msg_PrivateEmailgetSubscriptionStatusRedemption,[r.toLocaleString().substring(0,r.toLocaleString().indexOf(","))]),{hasClose:!0,isAutoHide:!1})),i.model.Status,l.SubscriptionStatus.NotActivated,1==i.model.LockedReason&&i.model.StartLockDate&&((c=u.Date.dateFromJson(i.model.StartLockDate)).setDate(c.getDate()+60),l.pageNotification.alerts.addWarning(d("stringFormat")(h.msg_PrivateEmailgetSubscriptionStatusLock,[i.model.DomainName,c.toLocaleString().substring(0,c.toLocaleString().indexOf(","))]),{hasClose:!0,isAutoHide:!1})),0==i.model.DnsRecordsAreValid&&l.pageNotification.alerts.addWarning(d("stringFormat")(h.msg_SubscriptionWithoutCorrectMX,[t()]),{hasClose:!0,isAutoHide:!1})):this.instance.asyncStatus(u.AsyncStatus.Active),0==i.model.DnsRecordVerificationSuccess?l.pageNotification.alerts.addWarning(h.error_DnsRecordVerificationFail,{hasClose:!0,isAutoHide:!1}):0==i.model.DnsRecordsAreValid&&this.instance.model.Status==l.SubscriptionStatus.Active&&1!=this.instance.model.LockedReason&&l.pageNotification.alerts.addWarning(d("stringFormat")(h.msg_SubscriptionWithoutCorrectMX,[t()]),{hasClose:!0,isAutoHide:!1}),i.expireSoon=i.model.ExpireDayCount<=i.model.ExpirationNotification&&0<=i.model.ExpireDayCount,l.$broadcast("subscriptionInfoLoaded",{subscription:this.instance.model})},onLocked:function(e){this.instance.showLoadPanel=!1,this.instance.showPageContent=!0},onActive:function(e){this.instance.showLoadPanel=!1,this.instance.showPageContent=!0},onLoading:function(e){this.instance.showLoadPanel=!0,this.instance.showPageContent=!1},onError:function(e){this.instance.showLoadPanel=!1,this.instance.showPageContent=!1,l.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),l.autoRenewBehavior=new u.AsyncStateBehavior({constructor:function(){var n=this.instance;n.isDisabled=!0,l.$on("subscriptionInfoLoaded",function(e,t){n.model=l.subscriptionBehavior.model.AutoRenewEnabled,l.subscriptionBehavior.asyncStatus().isLocked||n.asyncStatus(u.AsyncStatus.Active)}),n.messages.loading=h.msg_AutoRenewProcessing,n.messages.errorg=h.msg_ChangeAutoRenewError,n.asyncStatus(u.AsyncStatus.Locked),n.onChange=function(){n.asyncStatus(u.AsyncStatus.Loading),s.privateEmail.changeAutoRenew(l.subscriptionBehavior.model.Id,n.model).then(function(e){n.asyncStatus(0==e.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,e)})}},onSuccess:function(e){var t,n,a=this.instance;l.subscriptionBehavior.model.AutoRenewEnabled=a.model,a.messages.success=e.Msg,a.activeNotification=l.pageNotification.stuckNotifications.addSuccess(a.messages.success,{hasClose:!0,isAutoHide:!0}),1==a.model&&l.subscriptionBehavior.expireSoon?((t=new Date(u.Date.getESTDate().setHours(2,30))).getTime()<u.Date.getESTDate().getTime()&&t.setDate(t.getDate()+1),n=u.Date.diffHours(t,u.Date.getESTDate()),a.warningMsg=d("stringFormat")(h.msg_AutoRenewalAttemptProcessHoursCount,[Math.abs(n)])):0==a.model&&null!=a.warningMsg&&(a.warningMsg=null),a.asyncStatus(u.AsyncStatus.Active)},onActive:function(e){this.instance.isDisabled=!1},onLoading:function(e){var t=this.instance;t.activeNotification=l.pageNotification.stuckNotifications.addLoading(t.messages.loading,{hasClose:!1,isAutoHide:!1}),t.isDisabled=!0},onLocked:function(e){this.instance.isDisabled=!0},onError:function(e){var t=this.instance;t.model=!t.model,t.isDisabled=!1,t.activeNotification=l.pageNotification.stuckNotifications.addError(t.messages.errorg,{hasClose:!0,isAutoHide:!0})}}),l.antiSpoofBehavior=new u.AsyncStateBehavior({constructor:function(){var n=this.instance;l.$on("subscriptionInfoLoaded",function(e,t){n.model=l.subscriptionBehavior.model.AntiSpoofEnabled,l.subscriptionBehavior.asyncStatus().isLocked||n.asyncStatus(u.AsyncStatus.Active)}),n.messages.loading=h.msg_AntiSpoofFilterProcessing,n.messages.errorg=h.msg_ChangeAntiSpoofFilterError,n.asyncStatus(u.AsyncStatus.Locked),n.onChange=function(){n.asyncStatus(u.AsyncStatus.Loading),s.privateEmail.changeAntiSpoofFilter(l.subscriptionBehavior.model.DomainName,n.model).then(function(e){n.asyncStatus(0==e.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,e)})}},onSuccess:function(e){var t=this.instance;l.subscriptionBehavior.model.AntiSpoofEnabled=t.model,t.messages.success=e.Msg,t.activeNotification=l.pageNotification.stuckNotifications.addSuccess(t.messages.success,{hasClose:!0,isAutoHide:!0}),t.isDisabled=!1},onActive:function(e){this.instance.isDisabled=!1},onLoading:function(e){var t=this.instance;t.activeNotification=l.pageNotification.stuckNotifications.addLoading(t.messages.loading,{hasClose:!1,isAutoHide:!1}),t.isDisabled=!0},onLocked:function(e){this.instance.isDisabled=!0},onError:function(e){var t=this.instance;t.isDisabled=!1,t.model=!t.model,t.activeNotification=l.pageNotification.stuckNotifications.addError(t.messages.errorg,{hasClose:!0,isAutoHide:!0})}}),l.catchAllBehavior=new u.AsyncStateBehavior({constructor:function(){var n=this.instance;n.emptyOptionTitle="None",n.model=n.emptyOptionTitle,n.asyncStatus(u.AsyncStatus.Locked),n.messages.loading=h.msg_CatchAllProcessing,l.$on("subscriptionInfoLoaded",function(e,t){n.model=l.subscriptionBehavior.model.CatchAll,l.subscriptionBehavior.asyncStatus().isLocked||n.asyncStatus(u.AsyncStatus.Active)}),l.filterMailboxes=function(e){return!(e.model.UserLocked||e.model.AdminLocked||e.model.AutoLocked||e.model.IsCatchAll)},n.onChange=function(){null==l.subscriptionBehavior.model.CatchAll&&n.model==n.emptyOptionTitle?n.asyncStatus(u.AsyncStatus.Active):n.model==n.emptyOptionTitle?(n.asyncStatus(u.AsyncStatus.Loading),s.privateEmail.clearCatchAllMailbox(l.subscriptionBehavior.model.DomainName,l.subscriptionBehavior.model.CatchAll).then(function(e){e.sender="clearCatchAll",n.messages.errorg=h.msg_ClearCatchAllMailboxError,n.asyncStatus(0==e.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,e)})):l.subscriptionBehavior.model.CatchAll!=n.model?(n.asyncStatus(u.AsyncStatus.Loading),s.privateEmail.catchAllMailbox(l.subscriptionBehavior.model.DomainName,n.model).then(function(e){e.sender="setCatchAll",n.messages.errorg=h.msg_CatchAllMailboxError,n.asyncStatus(0==e.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,e)})):n.asyncStatus(u.AsyncStatus.Active)}},onSuccess:function(e){var t=this.instance;"clearCatchAll"==e.sender?l.mailboxesBehavior.mailboxNgGrid.parameters.storage.requestData.forEach(function(e){e.model.IsCatchAll=!1,l.subscriptionBehavior.model.CatchAll=null}):"setCatchAll"==e.sender&&l.mailboxesBehavior.mailboxNgGrid.parameters.storage.requestData.forEach(function(e){e.model.IsCatchAll=e.model.MailboxName==t.model,l.subscriptionBehavior.model.CatchAll=t.model}),t.messages.success=e.Msg,t.activeNotification=l.pageNotification.stuckNotifications.addSuccess(t.messages.success,{hasClose:!0,isAutoHide:!0}),t.isDisabled=!1},onActive:function(e){this.instance.isDisabled=!1},onLoading:function(e){var t=this.instance;t.activeNotification=l.pageNotification.stuckNotifications.addLoading(t.messages.loading,{hasClose:!1,isAutoHide:!1}),t.isDisabled=!0},onLocked:function(e){this.instance.isDisabled=!0},onError:function(e){var t=this.instance;t.model=l.subscriptionBehavior.model.CatchAll,t.isDisabled=!1,t.activeNotification=l.pageNotification.stuckNotifications.addError(t.messages.errorg,{hasClose:!0,isAutoHide:!0})}}),l.mailboxesBehavior=new u.AsyncStateBehavior({constructor:function(){var i=this.instance;i.activeModalInstance=null,i.model=[],i.selectAllMailboxesModel=!1,i.createMailboxBehavior=S,i.asyncStatus(u.AsyncStatus.Loading),s.privateEmail.getMailboxes(v).then(function(n){n.sender="getMailboxes",null==l.subscriptionBehavior.model?l.$on("subscriptionInfoLoaded",function(e,t){i.asyncStatus(0==n.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,n)}):i.asyncStatus(0==n.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,n)}),i.mailboxNgGrid=new m,i.mailboxNgGrid.parameters.search.serchPropertyNames=["model.MailboxName"],i.mailboxNgGrid.parameters.mapping.isLazyLoading=!1,i.mailboxNgGrid.settings.getData=function(e,t){e.resolve({Data:i.model})},i.mailboxNgGrid.settings.selection.canChangeSelection=function(e){return e.canChangeSelection()},i.setupMailboxes=function(){null==i.activeModalInstance&&(i.activeModalInstance=o.open({templateUrl:"/Domains/PrivateEmail/SetupMailboxesModal",controller:"privateEmailSetupMailboxesModalCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{mailboxesBehavior:function(){return i},subscriptionBehavior:function(){return l.subscriptionBehavior}}}),i.activeModalInstance.result.then(function(e){i.activeModalInstance=null;var t=i.createMailboxBehavior(e,i);t.asyncStatus(u.AsyncStatus.Success,{sender:"setupNew",result:t})},function(){i.activeModalInstance=null}))},i.bulkActions={turnOff:function(e){var n=[];null!=e?n.push(e):n=d("propertyFilter")(i.mailboxNgGrid.parameters.selection.selectedItems,{"model.UserLocked":!1,"model.AdminLocked":!1,"model.AutoLocked":!1,"model.Pending":!1});var a=0;n.forEach(function(e,t,n){e.asyncStatus(u.AsyncStatus.Loading,{sender:"turnOff"})}),f(n,function(t){var e=s.privateEmail.turnOffMailbox(t.model);return e.then(function(e){a++,e.sender="turnOff",t.asyncStatus(0==e.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,e),a==n.length&&i.mailboxNgGrid.settings.selection.checkSelectPage()}),e})},turnOn:function(e){var n=[];null!=e?n.push(e):n=d("propertyFilter")(i.mailboxNgGrid.parameters.selection.selectedItems,{"model.UserLocked":!0,"model.AdminLocked":!1,"model.AutoLocked":!1,"model.Pending":!1});var a=0;n.forEach(function(e,t,n){e.asyncStatus(u.AsyncStatus.Loading,{sender:"turnOn"})}),f(n,function(t){var e=s.privateEmail.turnOnMailbox(t.model);return e.then(function(e){a++,e.sender="turnOn",t.asyncStatus(0==e.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,e),a==n.length&&i.mailboxNgGrid.settings.selection.checkSelectPage()},1),e})},remove:function(e){var t;null==i.activeModalInstance&&(t=[],null!=e?t.push(e):t=i.mailboxNgGrid.parameters.selection.selectedItems,i.activeModalInstance=o.open({templateUrl:"/Common/PromptRemove",controller:"promptRemoveModalCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{modalTitle:function(){return null==e&&1<t.length?d("stringFormat")(h.modal_title_DeleteMailboxes,[l.subscriptionBehavior.model.DomainName,t.length]):null==e&&1==t.length?d("stringFormat")(h.modal_title_DeleteMailbox,[l.subscriptionBehavior.model.DomainName,t[0].model.MailboxName]):d("stringFormat")(h.modal_title_DeleteMailbox,[l.subscriptionBehavior.model.DomainName,e.model.MailboxName])},modalContent:function(){return null==e&&1<t.length?h.modal_header_DeleteMailboxes:h.modal_header_DeleteMailbox}}}),i.activeModalInstance.result.then(function(){t.forEach(function(e,t){e.asyncStatus(u.AsyncStatus.Loading,{sender:"remove"})}),f(t,function(t){t.model.IsCatchAll&&(l.catchAllBehavior.model=l.catchAllBehavior.emptyOptionTitle,l.catchAllBehavior.onChange());var e=s.privateEmail.deleteMailbox(t.model);return e.then(function(e){e.sender="remove",t.asyncStatus(0==e.Error?u.AsyncStatus.Success:u.AsyncStatus.Error,e)}),e},1),i.activeModalInstance=null},function(){i.activeModalInstance=null}))},canTurnOff:function(){return 0<d("propertyFilter")(i.mailboxNgGrid.parameters.selection.selectedItems,{"model.UserLocked":!1,"model.AdminLocked":!1,"model.AutoLocked":!1,"model.Pending":!1}).length},canTurnOn:function(){return 0<d("propertyFilter")(i.mailboxNgGrid.parameters.selection.selectedItems,{"model.UserLocked":!0,"model.AdminLocked":!1,"model.AutoLocked":!1,"model.Pending":!1}).length}}},onSuccess:function(e){var t,n=this.instance;"getMailboxes"==e.sender&&(t=[],e.Result.forEach(function(e){t.push(n.createMailboxBehavior(e,n))}),n.model=t,n.mailboxNgGrid.settings.reload(),l.select2Options.minimumResultsForSearch=10<l.mailboxesBehavior.model.length?1:-1,n.asyncStatus(u.AsyncStatus.Active))},onActive:function(e){var t=this.instance;0==this.instance.model.length&&(t.hideGrid=!0)},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;"remove"!=e.sender&&"getMailboxes"==e.sender&&(t.hideGrid=!0,t.activeNotification=l.pageNotification.stuckNotifications.addError("Could not load list of mailboxes",{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.showError=!1,t.asyncStatus(u.AsyncStatus.Active)}}))}}),l.SubscriptionStatus={Active:0,Grace:1,Redemption:2,NotActivated:3,Expired:4,Cancelled:5},l.MailboxStatus={Active:0,Disabled:1,Locked:2,Pending:3},l.speed_createmailboxes=function(t,n,a){var i,o;null==t&&(t=0),null==a&&(a=0),null==n&&(n=50),t<a+n&&(o={name:"testSpeed"+(i=+a+t),password:"123456789",quota:1,subscriptionId:l.subscriptionBehavior.model.Id,defaultMailQuota:1,quotaMB:function(){return 1}},s.privateEmail.addMailbox(o,l.subscriptionBehavior.model).then(function(e){l.speedLog+="("+i+")"+o.name+"--\x3e"+e.Error+"("+e.Msg+") \n",l.speed_createmailboxes(t+=1,n,a)}))}}]),app.controller("privateEmailUpgradeSubscriptionCtrl",["$scope","httpRepository","pageHelper","notificationService","$filter","$rootScope",function(n,a,i,e,t,o){var s=UpgradeSubscriptionRes;o.closeLightbox=function(){window.location.href=n.getSubscriptionPath()},n.pageNotification=new e.instance,n.pageHelper=i,n.getSubscriptionPath=function(){for(var e=window.location.pathname.split("/"),t="",n=1;n<e.length-1;n++)t+="/",t+=e[n];return t},n.upgradeBehavior=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;t.showLoadPanel=!0,t.showGrid=!1,t.isDisabled=!0,t.model=[],t.getSubscriptionId=function(){var e=window.location.pathname.split("/");return e[e.length-2]},t.changeSelectedTab=function(n){t.model.forEach(function(e,t){e.isSelected=t==n})},t.asyncStatus(i.AsyncStatus.Loading),a.privateEmail.getAvailableSubscriptionPlans(t.getSubscriptionId()).then(function(e){t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)}),t.upgrade=function(e){t.asyncStatus(i.AsyncStatus.Loading,{sender:"upgrade"}),a.privateEmail.upgradeSubscription(t.getSubscriptionId(),e.Name,t.model[0].Name,t.model.DefaultPaymentType).then(function(e){e.sender="upgrade",t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})}},onSuccess:function(e){var t=this.instance;"upgrade"==e.sender?window.location.href=e.Result:(t.model=e.Result,t.changeSelectedTab(0),t.asyncStatus(i.AsyncStatus.Active))},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showGrid=!0,t.isDisabled=!1},onLoading:function(e){this.instance},onLocked:function(e){var t=this.instance;t.showLoadPanel=!1,t.showGrid=!0,t.isDisabled=!0},onError:function(e){var t=this.instance;t.showLoadPanel=!1,"upgrade"!=e.sender&&(t.showGrid=!1),t.isDisabled=!1,t.activeNotification=n.pageNotification.alerts.addError(e.Msg,{hasClose:!1,isAutoHide:!1,onDestroyed:function(){t.showError=!1}})}}),n.getFeatureDescription=function(e){return null!=s["feature_"+e]?s["feature_"+e]:e}}]),app.controller("resetPassword",["$rootScope","$scope","$rootScope","httpRepository","pageHelper","notificationService","ncGridParams","$timeout","reCAPTCHA",function(e,i,e,a,o,t,n,s,r){function c(t){a.password.showCaptcha().then(function(e){null!=e.Result&&"ON"==e.Result.ShowCaptcha&&(t.showCaptcha=!0)})}r.setPublicKey(ReCaptchaPublicKey),i.resetType={byEmail:"1",byDomain:"2",byUserName:"3"},i.isSubmitDisabled=!1,i.resources=ResetPasswordRes,i.pageHelper=o,i.pageNotification=new t.instance,i.behavior=new o.AsyncStateBehavior({constructor:function(){var e=this.instance;e.activeNotification=new t.instance,e.asyncStatus(o.AsyncStatus.Loading),e.resetType=i.resetType.byUserName,e.isSubmitDisabled=i.isSubmitDisabled,e.userName="",e.domainName="",e.email="",e.captcha="",e.showCaptcha=!1,c(e)},onSuccess:function(e){var t=this.instance;"resetPassword"==e.sender&&(t.activeNotification=i.pageNotification.alerts.addSuccess(i.resources.msg_SuccessfulReset,{hasClose:!0,isAutoHide:!1})),t.userName="",t.domainName="",t.email="",t.isSubmitDisabled=!1,s(function(){null!=i.ResetPasswordForm.userNameId&&i.ResetPasswordForm.userNameId.$setPristine(),null!=i.ResetPasswordForm.emailId&&i.ResetPasswordForm.emailId.$setPristine(),null!=i.ResetPasswordForm.domainId&&i.ResetPasswordForm.domainId.$setPristine()},10),t.asyncStatus(o.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance},onError:function(e){var t=this.instance;t.activeNotification=i.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1}),t.userName="",t.domainName="",t.email="",t.isSubmitDisabled=!1,s(function(){null!=i.ResetPasswordForm.userNameId&&i.ResetPasswordForm.userNameId.$setPristine(),null!=i.ResetPasswordForm.emailId&&i.ResetPasswordForm.emailId.$setPristine(),null!=i.ResetPasswordForm.domainId&&i.ResetPasswordForm.domainId.$setPristine()},10),t.asyncStatus(o.AsyncStatus.Active)}}),i.resetPassword=function(){var n=i.behavior;i.pageNotification.alerts.clear(),null==i.ResetPasswordForm.$valid||i.ResetPasswordForm.$valid?function(){var e=n.userName;n.resetType==i.resetType.byEmail&&(e=n.email),n.resetType==i.resetType.byDomain&&(e=n.domainName),n.isSubmitDisabled=!0;var t="";angular.isDefined(grecaptcha)&&angular.isDefined(grecaptcha.StoredGlobalResponse)&&(t=grecaptcha.StoredGlobalResponse),angular.isDefined(grecaptcha)&&grecaptcha.reset(),a.password.reset(n.resetType,e,t).then(function(e){e.sender="resetPassword",e.Error&&(0<e.Errors.length&&"captchaError"==e.Errors[0].ErrorDescription?e.Msg=i.resources.msg_error_captchaNotValid:e.Msg=i.resources.error_API),n.asyncStatus(0==e.Error?o.AsyncStatus.Success:o.AsyncStatus.Error,e),c(n)})}():angular.forEach(i.ResetPasswordForm.$error.required,function(e){e.$setDirty()})},i.$watch("behavior.userName",function(e,t){var n;e!==t&&(null==e&&(e=""),i.ResetPasswordForm.userNameId.$setValidity("loginIncorrect",!0),0!=e.length?(n=o.Validation.login(e),i.ResetPasswordForm.userNameId.$setValidity("loginIncorrect",n.isValid)):i.ResetPasswordForm.userNameId.$setDirty())}),i.$watch("behavior.email",function(e,t){var n;e!==t&&(null==e&&(e=""),i.ResetPasswordForm.emailId.$setValidity("invalidEmail",!0),0!=e.length?(n=o.Validation.emailUnicode(e),i.ResetPasswordForm.emailId.$setValidity("invalidEmail",n.isValid)):i.ResetPasswordForm.emailId.$setDirty())}),i.$watch("behavior.domainName",function(e,t){var n,a;e!==t&&(null==e&&(e=""),n=o.Validation.domainNoTld(e),a=o.Validation.domainWithTld(e),i.ResetPasswordForm.domainId.$setValidity("domainIncorrect",!0),i.ResetPasswordForm.domainId.$setValidity("domainIncorrectTld",!0),0!=e.length?n.isValid&&e.indexOf(".")<0?i.ResetPasswordForm.domainId.$setValidity("domainIncorrectTld",!1):i.ResetPasswordForm.domainId.$setValidity("domainIncorrect",a.isValid):i.ResetPasswordForm.domainId.$setDirty())})}]),app.controller("marketplaceCancelCtrl",["$scope","$modalInstance","sellDomainRepository","pageHelper","$timeout","notificationService","$filter","$document","sectionViewModal",function(n,e,a,t,i,o,s,r,c){n.Password="",n.sellDomainCancelModel=c,n.NextPopButtonClicked=!1,n.pageNotification=new o.instance,n.cancelClick=function(){console.log("Dismiss Modal with model : "+n.modalpopupcontrollerValue),e.close("")},n.pageNotificationAruguement={isAutoHide:!0,hasClose:!0},n.CancelMarketplace=function(e,t){n.NextPopButtonClicked=!0,null!=n.sellDomainCancelModel?n.frmsellDomainCancel.$invalid||a.sellDomainInfo.CancelMarketplace(n.Password,e,t).then(function(e){1==e.Error?(n.pageNotification.alerts.clear(),n.pageNotification.alerts.addError("We failed to cancel Marketplace listing. "+e.Msg,n.pageNotificationAruguement)):window.location.href="/Domains/DomainControlPanel/"+n.sellDomainCancelModel.DomainName+"/domain"}):n.IsItemChosen=!1}}]),app.controller("SellDomainctrl",["$scope","$rootScope","sellDomainRepository","$cookies","$cookieStore","$filter","$modal","$location","notificationService","pageHelper","$timeout","$attrs",function(l,e,d,t,n,u,a,i,o,m,s,r){l.pageHelper=m,l.pageNotification=new o.instance,l.SellDomainInfoValidation=SellDomainInfoRes,l.SellDomainInfo={},l.NoSearchOption={minimumResultsForSearch:-1},l.SelectionSize={maximumSelectionSize:"5"};$("#s2id_ddlcategory");l.NextButtonClicked=!1,l.showDomainExpirationMessage=!1,l.showDomainExpirationMessageWithLink=!1,l.askingpricecheck=function(e,t){l.sellDomain.AskingPrice.$setValidity("pricevalidationmin",!0),l.sellDomain.AskingPrice.$setValidity("pricevalidationmax",!0),null!=l.SellDomainInfo&&null!=l.SellDomainInfo.AskingPrice&&(0<l.SellDomainInfo.AskingPrice.indexOf(".")&&l.SellDomainInfo.AskingPrice!=Number(l.SellDomainInfo.AskingPrice).toFixed(2)&&l.sellDomain.AskingPrice.$setValidity("pricevalidationmin",!1),l.SellDomainInfo.AskingPrice.toString().replace(/,/g,"")<Number(e)?l.sellDomain.AskingPrice.$setValidity("pricevalidationmin",!1):l.SellDomainInfo.AskingPrice.toString().replace(/,/g,"")>Number(t)&&l.sellDomain.AskingPrice.$setValidity("pricevalidationmax",!1))},e.closeLightbox=function(){window.location.href="/Domains/DomainControlPanel/"+l.SellDomainInfo.DomainName+"/domain/"},l.pageBehavior=new m.AsyncStateBehavior({constructor:function(){var e=this.instance;e.showLoadPanel=!0,e.showContent=!1;var t=$("input[type='hidden']#mpListingId").val(),n=$("input[type='hidden']#domainName").val(),a=$("input[type='hidden']#expiryDay").val(),i=$("input[type='hidden']#domainExpireDate").val(),o=$("input[type='hidden']#domainExpireDateValue").val(),s=$("input[type='hidden']#tldRenewalMinDays").val(),r=$("input[type='hidden']#tldRenewalMaxDays").val(),c=($("input[type='hidden']#tldReactivateMaxDays").val(),$("input[type='hidden']#IsWhoisGuard").val());d.sellDomainInfo.getSellDomainInfo(t).then(function(e){null!=e.Result&&(l.SellDomainInfo=e.Result,l.SellDomainInfo.DomainName=n,l.SellDomainInfo.DomainExpireDays=a,l.SellDomainInfo.DomainExpiredDate=u("date")(new Date(l.SellDomainInfo.DomainExpiredDate),"MMM dd, yyyy"),null!=t&&""!=t||(l.SellDomainInfo.DomainExpireDate=i,l.SellDomainInfo.DomainExpireDateValue=new Date(o)),null!=l.SellDomainInfo.SelectedCategory&&(l.SellDomainInfo.SelectedCategory=l.SellDomainInfo.SelectedCategory.split(",")),l.DerivedCategories=[],l.Other={},angular.forEach(l.SellDomainInfo.CategoryList,function(e,t){"Other"!=e?(l.temp={},l.temp.key=t,l.temp.val=e,l.DerivedCategories.push(l.temp)):(l.Other.key=t,l.Other.val=e)}),l.DerivedCategories=u("orderBy")(l.DerivedCategories,"val"),null!=l.Other&&(l.DerivedCategories.push(l.Other),l.Other={}),null!=l.SellDomainInfo&&null!=l.SellDomainInfo.AskingPrice&&"0"==l.SellDomainInfo.AskingPrice.toString()&&(l.SellDomainInfo.AskingPrice=""),"true"==c&&l.pageNotification.alerts.addWarning(l.SellDomainInfoValidation.static_WhoisguardSiteAlert_Message,{hasClose:!0,isAutoHide:!1}),l.SellDomainInfo.DomainExpireDays<=30&&(a<r&&s<a?l.showDomainExpirationMessageWithLink=!0:l.showDomainExpirationMessage=!0))}),e.asyncStatus(m.AsyncStatus.Active),e.SaveChanges=function(){l.pageNotification.alerts.clear(),l.NextButtonClicked=!0,null==l.sellDomain||l.sellDomain.$invalid?l.pageNotification.alerts.addError(l.SellDomainInfoValidation.error_Site_InvalidForm,{hasClose:!0,isAutoHide:!1}):d.sellDomainInfo.insertSellDomainInfo(l.SellDomainInfo).then(function(e){1==e.Error?l.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0}):window.location.href="/Domains/DomainControlPanel/"+l.SellDomainInfo.DomainName+"/domain"})}},onSuccess:function(e){var t=this.instance;null!=e.msg&&""!=e.msg?t.activeNotification=l.pageNotification.stuckNotifications.addSuccess(e.msg,{hasClose:!0,isAutoHide:!0}):t.asyncStatus(m.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,t.activeNotification=l.pageNotification.stuckNotifications.addError(e.msg,{hasClose:!0,isAutoHide:!0})}})}]),app.controller("EquivalentComodoForSymantecCtrl",["$scope","$window","$modal","$modalInstance","sslRepository","popupWindow","symantecCertDetails","comodoDetails","actionName","symantecSunsetDate","siteServerNameUrl",function(t,n,e,a,i,o,s,r,c,l,d){function u(e){1==e&&i.sslInfo.GetRefundForSymantecCertificate(t.symantecCertId).then(function(e){o.replaceOrRefund(e,"refund",t.symantecCertType),o.redirectToPage()}),$.magnificPopup.close()}t.symantecCertDetails=s,t.comodoDetails=r,t.actionName=c,t.sslInfoRes=SSLInfoRes,t.symantecSunsetDate=l,t.siteServerNameUrl=d,t.messageBodyForSymantecReplace=t.sslInfoRes.static_MessageBodyForSymantecReplace.replace("{0}",t.symantecSunsetDate),t.symantecStopMessage=t.sslInfoRes.static_SymantecStopMessage.replace("{0}",t.symantecSunsetDate),t.symantecCertType=t.symantecCertDetails.certificateType,t.symantecCertId=t.symantecCertDetails.certificateId,t.comodoCertificate=t.comodoDetails.Result.CertificateType,t.price=t.comodoDetails.Result.ComodoPrice,t.profit=t.comodoDetails.Result.Profit,t.yourSavings=t.comodoDetails.Result.YourSavings,t.validationLevel=t.comodoDetails.Result.ValidationLevel,t.domainsInclude=t.comodoDetails.Result.DomainsInclude,t.refund=t.comodoDetails.Result.Refund,t.greenBar=1==t.comodoDetails.Result.Greenbar,t.noOfSans=t.symantecCertDetails.sansQty,t.addonDomains=0!=t.comodoDetails.Result.AddonDomains&&t.comodoDetails.Result.AddonDomains,t.buttonClicked=!1,t.closeModal=function(){a.close("")},t.openPrompt=function(){a.close(""),modalConfirm(t.sslInfoRes.static_RefundTitle.replace("{0}",t.symantecCertType),t.sslInfoRes.static_RefundMessage,u)},t.replaceComodoSSL=function(){if(1==t.buttonClicked)return!1;var e;t.buttonClicked=!0,"activate"==t.actionName.toLowerCase()?i.sslInfo.ReplaceEquivalentComodoCertificateForSymantec(t.comodoCertificate,t.symantecCertDetails.validYears,t.symantecCertId,t.noOfSans).then(function(e){o.replaceOrRefund(e,"replace",t.symantecCertType),o.redirectToPage()}):"renew"==t.actionName.toLowerCase()?n.location.href=t.siteServerNameUrl+"/cart/addtocart.aspx?producttype=ssl&action=renew&cids="+t.symantecCertId:(e=function(e){var t=e.replace(/ /g,"-").toLowerCase();"multi-domain-ssl"!=t&&"ev-multi-domain-ssl"!=t||(t=t.replace(/^/,"comodossl-"));return t}(t.comodoCertificate),n.location.href=t.siteServerNameUrl+"/cart/addtocart.aspx?producttype=ssl&product="+e+"&action=purchase")}}]),app.controller("productPageCtrl",["$scope","popupWindow","sslRepository","notificationService","$window",function(o,n,e,t,a){o.pageNotification=new t.instance,o.SSLInfoRes=SSLInfoRes,o.SymantecSunsetMasterKey=SymantecSunsetMasterKey,o.SymantecSunsetDate=new Date(SymantecSunsetDate),o.SymantecSunsetDate=o.SymantecSunsetDate.setDate(o.SymantecSunsetDate.getDate()+1),o.ServerName=ServerName,o.currentDate=new Date;var i,s,r,c=o.SSLInfoRes.static_ErrorMessage_SymantecSunset,l=o.SSLInfoRes.static_InsufficentFundsErrorMsg;o.productDetails=function(e,t,n,a,i){o.symantecCertificateDetails={certificateId:0,certificateType:e,validYears:a,sansQty:i},o.symantecSunsetDate=t,o.siteServerNameurl=n},1==o.SymantecSunsetMasterKey&&o.currentDate>o.SymantecSunsetDate&&0<a.localStorage.length&&(null!=(i=n.replaceOrRefundResult()).isError&&("false"===i.isError?"replace"==i.action?(s=o.SSLInfoRes.static_Replace_SuccessMessage,o.pageNotification.stuckNotifications.addSuccess(s,{hasClose:!0,isAutoHide:!0})):(r=o.SSLInfoRes.static_Refund_SuccessMessage,o.pageNotification.stuckNotifications.addSuccess(r.replace("{0}",i.symantecCertType),{hasClose:!0,isAutoHide:!0})):(-1<i.Message.indexOf("INSUFFICIENTFUNDS")?1:0)?o.pageNotification.stuckNotifications.addError(l.replace("{0}",o.ServerName),{hasClose:!0,isAutoHide:!1}):o.pageNotification.stuckNotifications.addError(c,{hasClose:!0,isAutoHide:!0}))),o.openModal=function(e,t){o.symantecCertificateDetails.certificateId=e,n.openPopupWindow(o.symantecCertificateDetails,t,o.symantecSunsetDate,o.siteServerNameurl)}}]),app.controller("sslChooseContactModalCtrl",["$scope","$modalInstance","sslRepository","pageHelper","$timeout","notificationService","$filter","$document",function(n,e,a,i,t,o,s,r){n.cancelClick=function(){console.log("Dismiss Modal with model : "+n.modalpopupcontrollerValue),e.close("")},n.IsItemChosen=!1,n.IsLoadingCompleted=!1,n.sslnotification=new o.instance,n.SaveChanges=function(){null!=n.selectedaddress?n.frmEditAddonDomain.$invalid||e.close(n.selectedAddressList):n.IsItemChosen=!1},n.BindAddressNameInDropdown=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;n.IsItemChosen=!0,n.sslnotification.alerts.clear(),a.sslInfo.GetAddressInformation().then(function(e){t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},onSuccess:function(e){n.addressListItemsArray=[],n.addressListItemsArray.push(e.Result.PrimaryAddressDetails);for(var t=0;t<e.Result.AlternativeAddressDetails.length;t++)n.addressListItemsArray.push(e.Result.AlternativeAddressDetails[t]);$(".opac").addClass("page-load").css({"text-align":"left",padding:"0em",opacity:"0.5","background-position":"center 8.1em"}),n.IsLoadingCompleted=!0,this.instance.asyncStatus(i.AsyncStatus.Active)},onActive:function(e){$(".opac").delay(250).queue(function(){$(this).removeClass("page-load").css({"text-align":"left",padding:"0em",opacity:"0.9"})})}}),n.selectedAddressList={FirstName:"",LastName:"",Organization:"",Address1:"",Address2:"",Country:"",Phone:"",PhoneExt:"",Fax:"",FaxExt:"",EmailAddress:"",StateProvince:"",City:"",PostalCode:"",JobTitle:""},n.DisplayFirstName="",n.DisplayLastName="",n.DisplayOrganization="",n.DisplayAddress1="",n.DisplayAddress2="",n.DisplayCountry="",n.DisplayPhone="",n.DisplayPhoneExt="",n.DisplayFax="",n.DisplayFaxExt="",n.DisplayEmailAddress="",n.DisplayStateProvince="",n.DisplayCity="",n.DisplayPostalCode="",n.DisplayCityStatePostalCode="",n.addressChange=function(e){for(var t=0;t<n.addressListItemsArray.length;t++)if(n.addressListItemsArray[t].AddressName.trim()==e.trim()){""!=n.addressListItemsArray[t].Address.FirstName&&null!=n.addressListItemsArray[t].Address.FirstName&&null!=n.addressListItemsArray[t].Address.FirstName?n.DisplayFirstName=n.addressListItemsArray[t].Address.FirstName.trim():n.DisplayFirstName="",""!=n.addressListItemsArray[t].Address.LastName&&null!=n.addressListItemsArray[t].Address.LastName&&null!=n.addressListItemsArray[t].Address.LastName?n.DisplayLastName=n.addressListItemsArray[t].Address.LastName.trim():n.DisplayLastName="",""!=n.addressListItemsArray[t].Address.Organization&&null!=n.addressListItemsArray[t].Address.Organization&&null!=n.addressListItemsArray[t].Address.Organization?n.DisplayOrganization=n.addressListItemsArray[t].Address.Organization.trim():n.DisplayOrganization="",""!=n.addressListItemsArray[t].Address.Address1&&null!=n.addressListItemsArray[t].Address.Address1&&null!=n.addressListItemsArray[t].Address.Address1?n.DisplayAddress1=n.addressListItemsArray[t].Address.Address1.trim():n.DisplayAddress1="",""!=n.addressListItemsArray[t].Address.Address2&&null!=n.addressListItemsArray[t].Address.Address2&&null!=n.addressListItemsArray[t].Address.Address2?n.DisplayAddress2=n.addressListItemsArray[t].Address.Address2.trim():n.DisplayAddress2="",""!=n.addressListItemsArray[t].Address.Country&&null!=n.addressListItemsArray[t].Address.Country&&null!=n.addressListItemsArray[t].Address.Country?n.DisplayCountry=n.addressListItemsArray[t].Address.Country.trim():n.DisplayCountry="",""!=n.addressListItemsArray[t].Address.Phone&&null!=n.addressListItemsArray[t].Address.Phone&&null!=n.addressListItemsArray[t].Address.Phone?n.DisplayPhone=n.addressListItemsArray[t].Address.Phone.trim():n.DisplayPhone="",""!=n.addressListItemsArray[t].Address.PhoneExt&&null!=n.addressListItemsArray[t].Address.PhoneExt&&null!=n.addressListItemsArray[t].Address.PhoneExt?n.DisplayPhoneExt=n.addressListItemsArray[t].Address.PhoneExt.trim():n.DisplayPhoneExt="",""!=n.addressListItemsArray[t].Address.Fax&&null!=n.addressListItemsArray[t].Address.Fax&&null!=n.addressListItemsArray[t].Address.Fax?n.DisplayFax=n.addressListItemsArray[t].Address.Fax.trim():n.DisplayFax="",""!=n.addressListItemsArray[t].Address.FaxExt&&null!=n.addressListItemsArray[t].Address.FaxExt&&null!=n.addressListItemsArray[t].Address.FaxExt?n.DisplayFaxExt=n.addressListItemsArray[t].Address.FaxExt.trim():n.DisplayFaxExt="",""!=n.addressListItemsArray[t].Address.EmailAddress&&null!=n.addressListItemsArray[t].Address.EmailAddress&&null!=n.addressListItemsArray[t].Address.EmailAddress?n.DisplayEmailAddress=n.addressListItemsArray[t].Address.EmailAddress.trim():n.DisplayEmailAddress="",""!=n.addressListItemsArray[t].Address.StateProvince&&null!=n.addressListItemsArray[t].Address.StateProvince&&null!=n.addressListItemsArray[t].Address.StateProvince?n.DisplayStateProvince=n.addressListItemsArray[t].Address.StateProvince.trim():n.DisplayStateProvince="",""!=n.addressListItemsArray[t].Address.City&&null!=n.addressListItemsArray[t].Address.City&&null!=n.addressListItemsArray[t].Address.City?n.DisplayCity=n.addressListItemsArray[t].Address.City.trim():n.DisplayCity="",""!=n.addressListItemsArray[t].Address.PostalCode&&null!=n.addressListItemsArray[t].Address.PostalCode&&null!=n.addressListItemsArray[t].Address.PostalCode?n.DisplayPostalCode=n.addressListItemsArray[t].Address.PostalCode.trim():n.DisplayPostalCode="",""!=n.DisplayStateProvince&&""!=n.DisplayPostalCode?n.DisplayCityStatePostalCode=n.DisplayCity+", "+n.DisplayStateProvince+", "+n.DisplayPostalCode:""!=n.DisplayStateProvince&&""==n.DisplayPostalCode?n.DisplayCityStatePostalCode=n.DisplayCity+", "+n.DisplayStateProvince:""==n.DisplayStateProvince&&""!=n.DisplayPostalCode?n.DisplayCityStatePostalCode=n.DisplayCity+", "+n.DisplayPostalCode:n.DisplayCityStatePostalCode=n.DisplayCity,$.ajax({type:"GET",contentType:"application/json; charset=utf-8",cache:!1,async:!1,url:"/domains/ssl/GetFormattedPhoneAndFax",data:{CountryCode:encodeURI(n.DisplayCountry),Fax:encodeURI(n.DisplayFax),FaxExt:encodeURI(n.DisplayFaxExt),Phone:encodeURI(n.DisplayPhone),PhoneExt:encodeURI(n.DisplayPhoneExt)},success:function(e){n.DisplayPhone=e.split("~")[0],n.DisplayFax=e.split("~")[1],n.DisplayCountry=e.split("~")[2]},error:function(e){alert("Error:"+e)}}),n.selectedAddressList={FirstName:n.addressListItemsArray[t].Address.FirstName,LastName:n.addressListItemsArray[t].Address.LastName,Organization:n.addressListItemsArray[t].Address.Organization,Address1:n.addressListItemsArray[t].Address.Address1,Address2:n.addressListItemsArray[t].Address.Address2,Country:n.addressListItemsArray[t].Address.Country,Phone:n.addressListItemsArray[t].Address.Phone,PhoneExt:n.addressListItemsArray[t].Address.PhoneExt,Fax:n.addressListItemsArray[t].Address.Fax,FaxExt:n.addressListItemsArray[t].Address.FaxExt,EmailAddress:n.addressListItemsArray[t].Address.EmailAddress,StateProvince:n.addressListItemsArray[t].Address.StateProvince,City:n.addressListItemsArray[t].Address.City,PostalCode:n.addressListItemsArray[t].Address.PostalCode,JobTitle:n.addressListItemsArray[t].Address.JobTitle};break}}}]),app.controller("sslEditAddonDomainModalCtrl",["$scope","$modalInstance","sslRepository","pageHelper","$timeout","notificationService","$filter","$document","addonDomainName","primaryDomainDetails","IsSanActivationWithSubDomainsOnly","IsSanReissueEditWithSubDomainOnly",function(o,e,s,r,t,n,a,i,c,l,d,u){o.cancelClick=function(){e.close("")},o.editedaddondomain=c.CommonName,o.SaveChanges=function(){o.frmEditAddonDomain.$invalid||e.close(o.editedaddondomain)},o.subDomainName="",o.IsSanActivationWithSubDomainsOnly=!1,o.IsSanReissueEditWithSubDomainOnly=!1,o.validateDomain=new r.AsyncStateBehavior({constructor:function(){var i=this.instance;i.click=function(e,t,n,a){i.asyncStatus(r.AsyncStatus.Loading),o.subDomainName=t,o.IsSanActivationWithSubDomainsOnly=n,o.IsSanReissueEditWithSubDomainOnly=a,s.sslInfo.ValidateDomainInfo(e).then(function(e){i.asyncStatus(0==e.Error?r.AsyncStatus.Success:r.AsyncStatus.Error,e)})}},onSuccess:function(e){this.instance.showLoadPanel=!1,newDomain=e.Result,o.IsSanActivationWithSubDomainsOnly&&(""==newDomain||""!=newDomain&&newDomain.toLowerCase()!=o.subDomainName.toLowerCase()?o.frmEditAddonDomain.EditAddonDomainField.$setValidity("invalidSan",!1):o.frmEditAddonDomain.EditAddonDomainField.$setValidity("invalidSan",!0)),o.IsSanReissueEditWithSubDomainOnly&&(""==newDomain||""!=newDomain&&newDomain.toLowerCase()!=o.subDomainName.toLowerCase()?o.frmEditAddonDomain.EditAddonDomainField.$setValidity("invalidSubDomain",!1):o.frmEditAddonDomain.EditAddonDomainField.$setValidity("invalidSubDomain",!0))},onActive:function(e){this.instance},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){this.instance.showErrors=!0,o.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),o.$watch("editedaddondomain",function(e,t){var n,a;d&&(n=l.DomainName,""!=e&&o.validateDomain.click(e,n.toLowerCase(),d,u)),u&&(a=c.DomainName,""!=e&&o.validateDomain.click(e,a.toLowerCase(),d,u))})}]),app.controller("sslEditDCVCtrl",["$scope","$rootScope","sslRepository","$cookies","$cookieStore","$filter","$modal","$location","notificationService","pageHelper","$timeout","$attrs",function(m,e,a,t,n,p,o,s,r,c,l,d){m.sslnotificationAlertArguments={isAutoHide:!1,hasClose:!0},m.IsMinimumSanSatisfied=!1,m.addonDomains=[],m.SSLInfoRes=SSLInfoRes,m.SSLInfoValidation=SSLInfoValidation,m.PrimaryDomainIgnoreSearchOption={},m.SecondaryDomainIgnoreSearchOption=[],this.initialize=function(e){var t;if(m.SSLInfoSectionViewModel=e,null==m.SSLInfoSectionViewModel.PrimaryDomainDetail?(m.SSLInfoSectionViewModel.PrimaryDomainDetail=[],(t=[]).CommonName="",t.DomainName="",t.ValidationType="",t.ValidationValue="",t.disabled=!1,m.SSLInfoSectionViewModel.PrimaryDomainDetail.push(t)):(m.selecteddcvmethod=m.GetDcvMethodName(m.SSLInfoSectionViewModel.PrimaryDomainDetail.ValidationType),""!=m.SSLInfoSectionViewModel.PrimaryDomainDetail.ValidationValue&&null!=m.SSLInfoSectionViewModel.PrimaryDomainDetail.ValidationValue&&NaN!=m.SSLInfoSectionViewModel.PrimaryDomainDetail.ValidationValue?m.primarydomainapproveremail=m.SSLInfoSectionViewModel.PrimaryDomainDetail.ValidationValue:m.primarydomainapproveremail=m.SSLInfoRes.static_SelectOption,m.AddDCVMethodToList(m.selecteddcvmethod,m.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName,m.SSLInfoSectionViewModel.PrimaryDomainDetail.ValidationValue,"PRIMARY")),null!=m.SSLInfoSectionViewModel.SanDomainsDetail)for(m.selecteddcvmethodofaddondomain=[],m.addonDomainApproverEmail=[],a=0;a<m.SSLInfoSectionViewModel.SanDomainsDetail.length;a++){var n=[];n.CommonName=m.SSLInfoSectionViewModel.SanDomainsDetail[a].CommonName,n.DomainName=m.SSLInfoSectionViewModel.SanDomainsDetail[a].DomainName,n.ValidationType=m.GetDcvMethodName(m.SSLInfoSectionViewModel.SanDomainsDetail[a].ValidationType),m.selecteddcvmethodofaddondomain[a]=m.GetDcvMethodName(m.SSLInfoSectionViewModel.SanDomainsDetail[a].ValidationType),""!=m.SSLInfoSectionViewModel.SanDomainsDetail[a].ValidationValue&&null!=m.SSLInfoSectionViewModel.SanDomainsDetail[a].ValidationValue&&NaN!=m.SSLInfoSectionViewModel.SanDomainsDetail[a].ValidationValue?(n.ValidationValue=m.SSLInfoSectionViewModel.SanDomainsDetail[a].ValidationValue,m.addonDomainApproverEmail[a]=m.SSLInfoSectionViewModel.SanDomainsDetail[a].ValidationValue):m.addonDomainApproverEmail[a]=m.SSLInfoRes.static_SelectOption,m.addonDomains.push(n)}for(var a=m.addonDomainCount=0;a<m.SSLInfoSectionViewModel.SanDomainsDetail.length;a++)""!=m.SSLInfoSectionViewModel.SanDomainsDetail[a].CommonName&&(m.addonDomainCount+=1);m.GetApproverEmailList.click();for(var i=0;i<m.addonDomains.length;i++){var o=[];o.NAME=m.addonDomains[i].CommonName,o.DCV=m.addonDomains[i].ValidationType,o.EMAILADDRESS=m.addonDomains[i].ValidationValue,o.DOMAINTYPE="SECONDARY",m.selecteddcvmethodofaddondomain[i]=o.DCV,"EMAIL"==o.DCV.toUpperCase()&&""!=m.addonDomains[i].CommonName&&m.GetApproverEmailListForAddOns.click(m.addonDomains[i].CommonName,i),m.AddDCVMethodToList(o.DCV,o.NAME,o.EMAILADDRESS,o.DOMAINTYPE,i,"PAGELOAD")}},m.sslnotification=new r.instance,m.select2Options={minimumResultsForSearch:-1},m.addonDcvMethodDisabled=!1,m.domainstovalidateviaemail=[],m.domainstovalidateviahttp=[],m.domainstovalidateviadns=[],m.addondomainsEmail=[],m.selecteddcvmethod="",m.NoSearchOption={minimumResultsForSearch:-1},m.GetApproverEmailList=new c.AsyncStateBehavior({constructor:function(){var t=this.instance;t.click=function(){t.asyncStatus(c.AsyncStatus.Loading),a.sslInfo.GetApproverEmailList(m.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName,m.SSLInfoSectionViewModel.APIParameterValue,0).then(function(e){t.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e)})}},onSuccess:function(e){e.Result.AprroverEmailList.length<=10?m.PrimaryDomainIgnoreSearchOption={minimumResultsForSearch:-1}:m.PrimaryDomainIgnoreSearchOption={};this.instance;m.ClearSummaryMsgAndScrollTop(),m.primarydomainapproveremaillist=e.Result.AprroverEmailList;var t=$("select#ddlApproverEmail");for(i=0;i<e.Result.AprroverEmailList.length;i++)t.append($("<option></option>").val(e.Result.AprroverEmailList[i]).html(e.Result.AprroverEmailList[i]));m.wizardstep+=1},onLoading:function(e){var t=this.instance;m.sslnotification.alerts.clear(),t.activeNotification=m.sslnotification.stuckNotifications.addLoading("<B>Loading</B> Please wait.",!1),t.isDisabled=!0,t.showError=!1},onError:function(e){m.sslnotification.alerts.clear(),m.sslnotification.alerts.addError(e.Msg,m.sslnotificationAlertArguments),$("html, body").animate({scrollTop:0},800)},onActive:function(e){}}),m.GetApproverEmailListForAddOns=new c.AsyncStateBehavior({constructor:function(){var n=this.instance;n.click=function(e,t){n.asyncStatus(c.AsyncStatus.Loading),a.sslInfo.GetApproverEmailList(e,m.SSLInfoSectionViewModel.APIParameterValue,t).then(function(e){n.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e,t)})}},onSuccess:function(e,t){e.Result.AprroverEmailList.length<=10?m.SecondaryDomainIgnoreSearchOption[e.Result.SanIndex]={minimumResultsForSearch:-1}:m.SecondaryDomainIgnoreSearchOption[e.Result.SanIndex]={};this.instance;m.sslnotification.alerts.clear(),m.addondomainsEmail.push(e.Result.AprroverEmailList);var n="#sanDropDown_"+e.Result.SanIndex,a=$(n);for(a.empty(),a.append($("<option selected></option>").val(m.SSLInfoRes.static_SelectOption).html(m.SSLInfoRes.static_SelectOption)),i=0;i<e.Result.AprroverEmailList.length;i++)a.append($("<option></option>").val(e.Result.AprroverEmailList[i]).html(e.Result.AprroverEmailList[i]));null!=m.addonDomainApproverEmail[e.Result.SanIndex]&&a.select2("val",m.addonDomainApproverEmail[e.Result.SanIndex]),this.instance.asyncStatus(c.AsyncStatus.Active)},onLoading:function(e){var t=this.instance;m.sslnotification.alerts.clear(),t.activeNotification=m.sslnotification.stuckNotifications.addLoading("<B>Loading</B> Please wait.",!1),t.isDisabled=!0,t.showError=!1},onError:function(e){m.sslnotification.alerts.clear(),m.sslnotification.alerts.addError(e.Msg,m.sslnotificationAlertArguments),$("html, body").animate({scrollTop:0},800)},onActive:function(e){}}),m.bindApproverEmails=function(e,t,n,a,i){"Email"==n&&m.GetApproverEmailListForAddOns.click(e,t),m.bindDomainsToValidateAndDCVMethod(e,n,"",a,"",t)},m.selecteddcvmethodofaddondomain=[],m.bindDomainsToValidateAndDCVMethod=function(e,t,n,a,i,o){"PRIMARYDROPDOWNCHANGE"==i&&(m.RemoveDomainNameFromDCVMethods(e,!0,!0,!0),m.primarydomainapproveremail=m.SSLInfoRes.static_SelectOption,n=m.primarydomainapproveremail,$("#primDomainDcvMethod").select2("val",m.SSLInfoRes.static_SelectOption)),m.dcvUseSameMethodForAllDomains&&"PRIMARY"==a&&"PRIMARYDROPDOWNCHANGE"==i&&m.dcvUseSameMethodForAllDomains&&m.UseSameMethodForAddonDomains(t,m.dcvUseSameMethodForAllDomains),m.AddDCVMethodToList(t,e,n,a,o)},m.RemoveDomainNameFromDCVMethods=function(e,t,n,a){for(var i=0;i<m.domainstovalidateviaemail.length;i++)m.domainstovalidateviaemail[i].NAME==e&&t&&m.domainstovalidateviaemail.splice(i,1);for(i=0;i<m.domainstovalidateviahttp.length;i++)m.domainstovalidateviahttp[i].NAME==e&&n&&m.domainstovalidateviahttp.splice(i,1);for(i=0;i<m.domainstovalidateviadns.length;i++)m.domainstovalidateviadns[i].NAME==e&&a&&m.domainstovalidateviadns.splice(i,1)},m.UseSameMethodForAddonDomains=function(e,t){m.addonDomainApproverEmail=[];for(var n=0;n<m.addonDomains.length;n++){m.addonDomains[n].ValidationValue="",m.selecteddcvmethodofaddondomain[n]="",m.addonDcvMethodDisabled=!1,m.RemoveDomainNameFromDCVMethods(m.addonDomains[n].CommonName,!0,!0,!0),m.addonDomainApproverEmail[n]=m.SSLInfoRes.static_SelectOption,$("#sanDropDown_"+n).select2("val",m.SSLInfoRes.static_SelectOption)}if(""!=e&&t)for(n=0;n<m.addonDomains.length;n++)m.selecteddcvmethodofaddondomain[n]=e,m.addonDcvMethodDisabled=!0,"EMAIL"==e.toUpperCase()&&""!=m.addonDomains[n].CommonName&&m.GetApproverEmailListForAddOns.click(m.addonDomains[n].CommonName,n),m.AddDCVMethodToList(e,m.addonDomains[n].CommonName,m.addonDomains[n].ValidationValue,"SECONDARY",n)},m.GetDcvMethodName=function(e){var t="";switch(e){case 0:t="Email";break;case 1:t="File";break;case 2:t="Dns"}return t},m.GetValidationType=function(e){var t="";switch(e){case 0:t="Domain";break;case 1:t="Organization";break;case 2:t="Extended"}return t},m.ClearSummaryMsgAndScrollTop=function(){m.sslnotification.alerts.clear(),$("html, body").animate({scrollTop:0},800)},m.ClearValuesOnStepBackward=function(e){if(m.sslnotification.alerts.clear(),m.SSLInfoSectionViewModel.IsDCVStepRequired&&e<3)for(m.domainstovalidateviaemail=[],m.domainstovalidateviahttp=[],m.domainstovalidateviadns=[],m.dcvUseSameMethodForAllDomains=!1,m.selecteddcvmethod="",index=0;index<m.selecteddcvmethodofaddondomain.length;index++)m.selecteddcvmethodofaddondomain[index]="",m.addonDcvMethodDisabled=!1},m.AddDCVMethodToList=function(e,t,n,a,i,o){var s=[];if(s.NAME=t,s.DCV=e,null!=i&&"EMAIL"==e.toUpperCase()&&null!=n&&"PAGELOAD"!=o?s.EMAILADDRESS=n[i]:s.EMAILADDRESS=n,s.DOMAINTYPE=a,s.SanOrder=i,m.RemoveDomainNameFromDCVMethods(t,!0,!0,!0),"EMAIL"==e.toUpperCase()){for(index=0;index<m.domainstovalidateviaemail.length;index++){if(m.domainstovalidateviaemail[index].NAME==t){m.domainstovalidateviaemail[index].DCV=e,m.domainstovalidateviaemail[index].EMAILADDRESS=null!=i&&"PAGELOAD"!=o?n[i]:n,m.domainstovalidateviaemail[index].DOMAINTYPE=a;break}m.domainstovalidateviaemail.push(s);break}0==m.domainstovalidateviaemail.length&&m.domainstovalidateviaemail.push(s)}else"FILE"==e.toUpperCase()?(s.EMAILADDRESS=m.SSLInfoRes.static_File_Based_EditDCV,m.domainstovalidateviahttp.push(s)):"DNS"==e.toUpperCase()&&(s.EMAILADDRESS=m.SSLInfoRes.static_DNS_Based_EditDCV,m.domainstovalidateviadns.push(s))},m.ClickDone=function(){var e,t=m.ValidateDCVStep();0==t[0]?(m.sslnotification.alerts.clear(),e=t[1],$("html, body").animate({scrollTop:0},800),m.sslnotification.alerts.addError(e,m.sslnotificationAlertArguments)):a.sslInfo.ValidateDCVStep(t[1]).then(function(e){e.Error?($("html, body").animate({scrollTop:0},800),m.sslnotification.alerts.addError(e.Msg,m.sslnotificationAlertArguments)):m.AysnchronousChangeDCVMethod.Click(m.SSLInfoSectionViewModel)})},m.AysnchronousChangeDCVMethod=new c.AsyncStateBehavior({constructor:function(){var t=this.instance;t.Click=function(e){t.asyncStatus(c.AsyncStatus.Loading),a.sslInfo.ChangeDCVMethod(e).then(function(e){t.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e)})}},onSuccess:function(e){a.sslInfo.RedirectProductPageJSON(m.SSLInfoSectionViewModel.CertificateId,e.Msg).then(function(e){var t;e.Error||(t=e.Msg,window.location=t)})},onLoading:function(e){var t=this.instance;m.sslnotification.alerts.clear(),t.activeNotification=m.sslnotification.stuckNotifications.addLoading("<B>Submitting Confirmation</B> Please wait.",!1),t.isDisabled=!0,t.showError=!1},onError:function(e){a.sslInfo.ChangeDCVMethodError(m.SSLInfoSectionViewModel.CertificateId,e.Msg).then(function(e){if(e.Error)return m.sslnotification.alerts.clear(),m.sslnotification.alerts.addError(e.Msg,m.sslnotificationAlertArguments),$("html, body").animate({scrollTop:0},800),!1;var t=e.Msg;window.location=t})}}),m.ValidateDCVStep=function(){for(var e=m.SSLInfoSectionViewModel,t=!1,n=!1,a=!1,i=m.domainstovalidateviaemail.length,o=m.domainstovalidateviadns.length,s=m.domainstovalidateviahttp.length,r=0;r<m.domainstovalidateviaemail.length;r++)if(null==m.domainstovalidateviaemail[r].EMAILADDRESS||""==m.domainstovalidateviaemail[r].EMAILADDRESS||NaN==m.domainstovalidateviaemail[r].EMAILADDRESS||m.domainstovalidateviaemail[r].EMAILADDRESS==m.SSLInfoRes.static_SelectOption){e=m.SSLInfoValidation.error_Contextual_ApproverEmailRequired.replace("{COMMONNAME}",m.domainstovalidateviaemail[r].NAME),n=!0;break}if("COMODO"==m.SSLInfoSectionViewModel.ProviderName?m.addonDomainCount+1!=i+o+s&&(e=m.SSLInfoValidation.error_Contextual_DCVMethodRequired,a=!0):i+o+s==0&&(e=m.SSLInfoValidation.error_Contextual_PrimaryDomainDCVMethodRequired,a=!0),a||n)t=!1;else if(m.SSLInfoSectionViewModel.IsDCVStepRequired){for(var c,l={CommonName:"",DomainName:"",ValidationType:"",ValidationValue:"",IsHttpDCVUsed:!1,IsDNSDCVUsed:!1},d=[],r=0;r<m.domainstovalidateviaemail.length;r++){"PRIMARY"==m.domainstovalidateviaemail[r].DOMAINTYPE?(l.CommonName=m.domainstovalidateviaemail[r].NAME,l.DomainName=m.domainstovalidateviaemail[r].NAME,l.ValidationType=m.domainstovalidateviaemail[r].DCV,l.ValidationValue=m.domainstovalidateviaemail[r].EMAILADDRESS,l.IsHttpDCVUsed=!1,l.IsDNSDCVUsed=!1):((c={}).CommonName=m.domainstovalidateviaemail[r].NAME,c.DomainName=m.domainstovalidateviaemail[r].NAME,c.ValidationType=m.domainstovalidateviaemail[r].DCV,c.ValidationValue=m.domainstovalidateviaemail[r].EMAILADDRESS,c.SanOrder=m.domainstovalidateviaemail[r].SanOrder,d.push(c))}for(r=0;r<m.domainstovalidateviahttp.length;r++){"PRIMARY"==m.domainstovalidateviahttp[r].DOMAINTYPE?(l.CommonName=m.domainstovalidateviahttp[r].NAME,l.DomainName=m.domainstovalidateviahttp[r].NAME,l.ValidationType=m.domainstovalidateviahttp[r].DCV,l.ValidationValue=m.domainstovalidateviahttp[r].EMAILADDRESS,l.IsHttpDCVUsed=!0,l.IsDNSDCVUsed=!1):((c={}).CommonName=m.domainstovalidateviahttp[r].NAME,c.DomainName=m.domainstovalidateviahttp[r].NAME,c.ValidationType=m.domainstovalidateviahttp[r].DCV,c.ValidationValue=m.domainstovalidateviahttp[r].EMAILADDRESS,c.SanOrder=m.domainstovalidateviahttp[r].SanOrder,d.push(c))}for(r=0;r<m.domainstovalidateviadns.length;r++){"PRIMARY"==m.domainstovalidateviadns[r].DOMAINTYPE?(l.CommonName=m.domainstovalidateviadns[r].NAME,l.DomainName=m.domainstovalidateviadns[r].NAME,l.ValidationType=m.domainstovalidateviadns[r].DCV,l.ValidationValue=m.domainstovalidateviadns[r].EMAILADDRESS,l.IsHttpDCVUsed=!1,l.IsDNSDCVUsed=!0):((c={}).CommonName=m.domainstovalidateviadns[r].NAME,c.DomainName=m.domainstovalidateviadns[r].NAME,c.ValidationType=m.domainstovalidateviadns[r].DCV,c.ValidationValue=m.domainstovalidateviadns[r].EMAILADDRESS,c.SanOrder=m.domainstovalidateviadns[r].SanOrder,d.push(c))}0<m.domainstovalidateviahttp.length&&0==m.domainstovalidateviaemail.length&&0==m.domainstovalidateviadns.length?(m.SSLInfoSectionViewModel.IsHttpDCVUsed=!0,m.SSLInfoSectionViewModel.IsDNSDCVUsed=!1):0<m.domainstovalidateviadns.length&&0==m.domainstovalidateviahttp.length&&0==m.domainstovalidateviaemail.length&&(m.SSLInfoSectionViewModel.IsDNSDCVUsed=!0,m.SSLInfoSectionViewModel.IsHttpDCVUsed=!1);var u=p("orderBy")(d,"SanOrder");m.SSLInfoSectionViewModel.PrimaryDomainDetail=l,m.SSLInfoSectionViewModel.SanDomainsDetail=u,e=m.SSLInfoSectionViewModel,t=!0}return[t,e]},m.EditDcvCancel=function(){a.sslInfo.RedirectProductPageJSON(m.SSLInfoSectionViewModel.CertificateId).then(function(e){if(e.Error)return m.sslnotification.alerts.clear(),m.sslnotification.alerts.addError(e.Msg,m.sslnotificationAlertArguments),$("html, body").animate({scrollTop:0},800),!1;var t=e.Msg;window.location=t})}}]),app.controller("sslWizardStepCtrl",["$scope","$rootScope","sslRepository","$cookies","$cookieStore","$filter","$modal","$location","notificationService","pageHelper","$timeout","$attrs","popupWindow",function(S,e,o,t,n,u,a,s,r,c,l,d,y){S.showLoadPanel=!0,S.domainName="",S.isConfirmClicked=!1,S.SSLInfoRes=SSLInfoRes,S.IsMinimumSanSatisfied=!1,S.sslnotificationAlertArguments={isAutoHide:!1,hasClose:!0},S.sslnotificationAlertArgumentsforSanEdit={isAutoHide:!0,hasClose:!0};var C="";function A(e,t){e?$.magnificPopup.close():(S.UrlSplits=s.absUrl().split("/"),S.domainName=S.UrlSplits[S.UrlSplits.length-2],S.pageFrom=S.UrlSplits[S.UrlSplits.length-1],""==S.UrlSplits[S.UrlSplits.length-1]&&(S.domainName=S.UrlSplits[S.UrlSplits.length-3],S.pageFrom=S.UrlSplits[S.UrlSplits.length-2]),"DOMAINLIST"==S.pageFrom.toUpperCase()?window.location.href="/domains/domainlist/":"PRODUCTLIST"==S.pageFrom.toUpperCase()?window.location.href="/ProductList/SslCertificates":"DASHBOARD"==S.pageFrom.toUpperCase()?window.location.href="/dashboard":window.location.href="/domains/domainlist/")}S.NoSearchOption={minimumResultsForSearch:-1},S.PrimaryDomainIgnoreSearchOption={},S.SecondaryDomainIgnoreSearchOption=[],S.wizardstep=1,S.ErrorOccuredInReissue=!1,$("#CSRCode").focus(),S.ButtonName=S.SSLInfoRes.static_ButtonSubmit,S.showPopupWindow=ShowPopupWindow,S.symantecSunsetDate=SymantecSunsetDate,S.siteServerNameUrl=SiteServerNameUrl,this.initialize=function(e){if(S.showLoadPanel=!1,!e.IsValid)return S.SSLInfoSectionViewModel=e,S.sslnotification.alerts.clear(),S.sslnotification.alerts.addError(e.Message,S.sslnotificationAlertArguments),!1;S.SSLInfoSectionViewModel=e,"True"==S.showPopupWindow&&"comodo"!=S.SSLInfoSectionViewModel.ProviderName.toLowerCase()&&"active"!=S.SSLInfoSectionViewModel.Status.toLowerCase()&&(S.symatecCertificateDetails={certificateId:S.SSLInfoSectionViewModel.CertificateId,certificateType:S.SSLInfoSectionViewModel.CertificateType,validYears:S.SSLInfoSectionViewModel.Years,sanCount:S.SSLInfoSectionViewModel.SanCount},y.openPopupWindow(S.symatecCertificateDetails,"activate",S.symantecSunsetDate,S.siteServerNameUrl)),"EV SSL SGC"!=S.SSLInfoSectionViewModel.SSlType.toUpperCase()||"COMODO"!=S.SSLInfoSectionViewModel.ProviderName||"NEWPURCHASE"!=S.SSLInfoSectionViewModel.Status&&"NEWRENEWAL"!=S.SSLInfoSectionViewModel.Status||modalConfirm("Activate Comodo EV SSL Certificate",'<B>When you activate, Comodo will replace your EV SGC SSL with EV SSL</B><BR>Comodo has discontinued the EV SGC SSL because it has become obsolete.  EV SSL will preserve all functionalities. <a target="_blank"  href="https://www.namecheap.com/support/knowledgebase/article.aspx/9790/38/sgc-certificates-sunset">Learn More </a><br><br>Do you wish to continue?',A);for(var t,n=0;n<S.SSLInfoSectionViewModel.SanCount;n++){var a=[],i=[];null!=S.SSLInfoSectionViewModel.SanDomainsDetail&&n<S.SSLInfoSectionViewModel.SanDomainsDetail.length&&"ACTIVE"==S.SSLInfoSectionViewModel.Status?(a.CommonName=S.SSLInfoSectionViewModel.SanDomainsDetail[n].CommonName,a.DomainName=S.SSLInfoSectionViewModel.SanDomainsDetail[n].DomainName,a.ValidationType=S.GetDcvMethodName(S.SSLInfoSectionViewModel.SanDomainsDetail[n].ValidationType),a.ValidationValue=S.SSLInfoSectionViewModel.SanDomainsDetail[n].ValidationValue,i.OldCommonName=S.SSLInfoSectionViewModel.SanDomainsDetail[n].CommonName,i.OldDomainName=S.SSLInfoSectionViewModel.SanDomainsDetail[n].DomainName,i.OldValidationType=S.GetDcvMethodName(S.SSLInfoSectionViewModel.SanDomainsDetail[n].ValidationType),i.OldValidationValue=S.SSLInfoSectionViewModel.SanDomainsDetail[n].ValidationValue,"COMODO"==S.SSLInfoSectionViewModel.ProviderName?(a.disabled=!1,S.AddDCVMethodToList(a.ValidationType,a.CommonName,a.ValidationValue,"SECONDARY",n,"PAGELOAD")):a.disabled=!0):(a.CommonName="",a.DomainName="",a.ValidationType="",a.ValidationValue="",a.disabled=!1,i.OldCommonName="",i.OldDomainName="",i.OldValidationType="",i.OldValidationValue=""),S.oldAddonDomains.push(i),S.addonDomains.push(a)}if("ACTIVE"==S.SSLInfoSectionViewModel.Status&&(null==S.SSLInfoSectionViewModel.PrimaryDomainDetail?(S.SSLInfoSectionViewModel.PrimaryDomainDetail=[],(t=[]).CommonName="",t.DomainName="",t.ValidationType="",t.ValidationValue="",t.disabled=!1,S.SSLInfoSectionViewModel.PrimaryDomainDetail.push(t)):("COMODO"!=S.SSLInfoSectionViewModel.ProviderName.toUpperCase()&&"Dns"==S.GetDcvMethodName(S.SSLInfoSectionViewModel.PrimaryDomainDetail.ValidationType)?S.selecteddcvmethod="Email":S.selecteddcvmethod=S.GetDcvMethodName(S.SSLInfoSectionViewModel.PrimaryDomainDetail.ValidationType),S.primarydomainapproveremail=S.SSLInfoSectionViewModel.PrimaryDomainDetail.ValidationValue,S.AddDCVMethodToList(S.selecteddcvmethod,S.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName,S.SSLInfoSectionViewModel.PrimaryDomainDetail.ValidationValue,"PRIMARY"),S.oldPrimaryDomain.CommonName=S.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName,S.oldPrimaryDomain.DomainName=S.SSLInfoSectionViewModel.PrimaryDomainDetail.DomainName,S.oldPrimaryDomain.ValidationType=S.selecteddcvmethod,S.oldPrimaryDomain.ValidationValue=S.SSLInfoSectionViewModel.PrimaryDomainDetail.ValidationValue),null!=S.SSLInfoSectionViewModel.SanDomainsDetail))for(S.selecteddcvmethodofaddondomain=[],S.addonDomainApproverEmail=[],index=0;index<S.SSLInfoSectionViewModel.SanDomainsDetail.length;index++)S.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName==S.SSLInfoSectionViewModel.SanDomainsDetail[index].CommonName?(S.SSLInfoSectionViewModel.SanDomainsDetail.splice(index,1),--index):(S.selecteddcvmethodofaddondomain[index]=S.GetDcvMethodName(S.SSLInfoSectionViewModel.SanDomainsDetail[index].ValidationType),"EMAIL"==S.GetDcvMethodName(S.SSLInfoSectionViewModel.SanDomainsDetail[index].ValidationType).toUpperCase()?S.addonDomainApproverEmail[index]=S.SSLInfoSectionViewModel.SanDomainsDetail[index].ValidationValue:S.addonDomainApproverEmail[index]=S.SSLInfoRes.static_SelectOption);S.SSLInfoSectionViewModel=e;var o=$("select#addressListCountry"),s=$("select#addressListCountryOfIncorporation"),r=$("select#callBackContactsCountry"),c=$("select#AdminContactsCountry"),l=$("select#TechContactsCountry"),d=$('form[name="frmCompanyContacts"] select#PhoneCode'),u=$('form[name="frmCompanyContacts"] select#FaxCode'),m=$('form[name="frmAdminContacts"] select#PhoneCode'),p=$('form[name="frmAdminContacts"] select#FaxCode'),f=$('form[name="frmTechContacts"] select#PhoneCode'),h=$('form[name="frmTechContacts"] select#FaxCode'),g=$('form[name="frmCallBackContact"] select#CallBackPhoneCode'),v=$('form[name="frmCallBackContact"] select#CallBackFaxCode');"NEWPURCHASE"==e.Status||"INPROGRESS"==e.Status||"NEWRENEWAL"==e.Status?(C=e.CompanyContactDetails.Country,S.AddressList.Country=e.CompanyContactDetails.Country,S.CallBackContacts.Country=e.CallbackContactDetails.Country,S.AdminContacts.Country=e.AdminContactDetails.Country,S.TechContacts.Country=e.TechContactDetails.Country,S.AddressList.CountryofIncorporation=e.CompanyContactDetails.Country,null!=o&&o.select2("val",S.AddressList.Country),null!=r&&r.select2("val",S.CallBackContacts.Country),null!=c&&c.select("val",S.AdminContacts.Country),null!=l&&l.select2("val",S.TechContacts.Country),null!=s&&s.select2("val",S.AddressList.CountryofIncorporation),null!=d&&(d.select2("val",e.CompanyContactDetails.PhonePrefix),S.AddressList.PhoneCode=e.CompanyContactDetails.PhonePrefix),null!=m&&(m.select2("val",e.AdminContactDetails.PhoneCode),S.AdminContacts.PhoneCode=e.AdminContactDetails.PhoneCode),null!=f&&(f.select2("val",e.TechContactDetails.PhoneCode),S.TechContacts.PhoneCode=e.TechContactDetails.PhoneCode),null!=g&&(g.select2("val",e.CallbackContactDetails.PhoneCode),S.CallBackContacts.PhoneCode=e.CallbackContactDetails.PhoneCode)):"ACTIVE"==e.Status&&(S.AdminContacts.EmailAddress=e.AdminEmail,null!=e.CompanyContactDetails&&(null!=e.CompanyContactDetails.CompanyName&&""!=e.CompanyContactDetails.CompanyName&&NaN!=e.CompanyContactDetails.CompanyName&&null!=e.CompanyContactDetails.CompanyName&&(S.AddressList.CompanyName=e.CompanyContactDetails.CompanyName),null!=e.CompanyContactDetails.AssumedName&&""!=e.CompanyContactDetails.AssumedName&&NaN!=e.CompanyContactDetails.AssumedName&&null!=e.CompanyContactDetails.AssumedName&&(S.AddressList.AssumedName=e.CompanyContactDetails.AssumedName,S.AddressList.AssumedNameRequired=!0),""!=e.CompanyContactDetails.Department&&NaN!=e.CompanyContactDetails.Department&&null!=e.CompanyContactDetails.Department&&(S.AddressList.Department=e.CompanyContactDetails.Department,S.AddressList.DepartMentRequired=!0),""!=e.CompanyContactDetails.CompanyNumber&&NaN!=e.CompanyContactDetails.CompanyNumber&&null!=e.CompanyContactDetails.CompanyNumber&&(S.AddressList.CompanyNumber=e.CompanyContactDetails.CompanyNumber,S.AddressList.CompanyNumberRequired=!0),""!=e.CompanyContactDetails.DunsNumber&&NaN!=e.CompanyContactDetails.DunsNumber&&null!=e.CompanyContactDetails.DunsNumber&&(S.AddressList.DunsNumber=parseInt(e.CompanyContactDetails.DunsNumber),S.AddressList.DunsNumberRequired=!0),""!=e.CompanyContactDetails.IncorporatingAgency&&NaN!=e.CompanyContactDetails.IncorporatingAgency&&null!=e.CompanyContactDetails.IncorporatingAgency&&(S.AddressList.IncorporatingAgency=e.CompanyContactDetails.IncorporatingAgency),""!=e.CompanyContactDetails.CityOfIncorporation&&NaN!=e.CompanyContactDetails.CityOfIncorporation&&null!=e.CompanyContactDetails.CityOfIncorporation&&(S.AddressList.CityOfIncorporation=e.CompanyContactDetails.CityOfIncorporation,S.AddressList.CityOfIncorporationRequired=!0),""!=e.CompanyContactDetails.StateProvinceOfIncorporation&&NaN!=e.CompanyContactDetails.StateProvinceOfIncorporation&&null!=e.CompanyContactDetails.StateProvinceOfIncorporation&&(S.AddressList.StateprovinceofIncorporation=e.CompanyContactDetails.StateProvinceOfIncorporation,S.AddressList.StateofIncorporationRequired=!0),""!=e.CompanyContactDetails.CountryOfIncorporation&&NaN!=e.CompanyContactDetails.CountryOfIncorporation&&null!=e.CompanyContactDetails.CountryOfIncorporation&&(S.AddressList.CountryofIncorporation=e.CompanyContactDetails.CountryOfIncorporation,s.select2("val",e.CompanyContactDetails.CountryOfIncorporation),S.AddressList.CountryofIncorporationRequired=!0),""!=e.CompanyContactDetails.Address1&&NaN!=e.CompanyContactDetails.Address1&&null!=e.CompanyContactDetails.Address1&&(S.AddressList.Address=e.CompanyContactDetails.Address1),""!=e.CompanyContactDetails.Address2&&NaN!=e.CompanyContactDetails.Address2&&null!=e.CompanyContactDetails.Address2&&(S.AddressList.Address1=e.CompanyContactDetails.Address2,S.AddressList.Address1Required=!0),""!=e.CompanyContactDetails.POBox&&NaN!=e.CompanyContactDetails.POBox&&null!=e.CompanyContactDetails.POBox&&(S.AddressList.POBox=e.CompanyContactDetails.POBox,S.AddressList.POBoxRequired=!0),""!=e.CompanyContactDetails.City&&NaN!=e.CompanyContactDetails.City&&null!=e.CompanyContactDetails.City&&(S.AddressList.City=e.CompanyContactDetails.City),""!=e.CompanyContactDetails.StateProvince&&NaN!=e.CompanyContactDetails.StateProvince&&null!=e.CompanyContactDetails.StateProvince&&(S.AddressList.StateProvince=e.CompanyContactDetails.StateProvince),""!=e.CompanyContactDetails.PostalCode&&NaN!=e.CompanyContactDetails.PostalCode&&null!=e.CompanyContactDetails.PostalCode&&(S.AddressList.ZIPPostalCode=e.CompanyContactDetails.PostalCode),null!=e.CompanyContactDetails.Country&&null!=e.CompanyContactDetails.Country&&""!=e.CompanyContactDetails.Country&&(S.AddressList.Country=e.CompanyContactDetails.Country),o.select2("val",S.AddressList.Country),""!=e.CompanyContactDetails.AdminEmail&&NaN!=e.CompanyContactDetails.AdminEmail&&null!=e.CompanyContactDetails.AdminEmail&&(S.AddressList.EmailAddress=e.CompanyContactDetails.AdminEmail),""!=e.CompanyContactDetails.BusinessCategory&&NaN!=e.CompanyContactDetails.BusinessCategory&&null!=e.CompanyContactDetails.BusinessCategory&&(S.AddressList.BusinessCategory=e.CompanyContactDetails.BusinessCategory),""!=e.CompanyContactDetails.DateOfIncorporation&&NaN!=e.CompanyContactDetails.DateOfIncorporation&&null!=e.CompanyContactDetails.DateOfIncorporation&&(S.AddressList.DateofIncorporation=e.CompanyContactDetails.DateOfIncorporation,S.AddressList.DateofIncorporationRequired=!0),null!=e.CompanyContactDetails.PhoneNumber&&null!=e.CompanyContactDetails.PhoneNumber&&""!=e.CompanyContactDetails.PhoneNumber?(S.AddressList.PhoneNumber=e.CompanyContactDetails.PhoneNumber.split(".")[1],S.AddressList.PhoneCode=e.CompanyContactDetails.PhoneNumber.split(".")[0].replace(/\+/g,""),d.select2("val",S.AddressList.PhoneCode),-1!=S.AddressList.PhoneNumber.indexOf("x")&&(S.AddressList.PhoneNumberExt=S.AddressList.PhoneNumber.split("x")[1].replace(/\x/g,""),S.AddressList.PhoneNumber=S.AddressList.PhoneNumber.split("x")[0])):(S.AddressList.PhoneNumber="",S.AddressList.PhoneCode=""),null!=e.CompanyContactDetails.PhoneNumberExt&&""!=e.CompanyContactDetails.PhoneNumberExt&&(S.AddressList.PhoneNumberExt=e.CompanyContactDetails.PhoneNumberExt),null!=S.AddressList.PhoneNumberExt&&""!=S.AddressList.PhoneNumberExt&&(S.AddressList.PhoneExtCheckBox=!0),null!=e.CompanyContactDetails.FaxNumber&&null!=e.CompanyContactDetails.FaxNumber&&""!=e.CompanyContactDetails.FaxNumber?(S.AddressList.FaxNumber=e.CompanyContactDetails.FaxNumber.split(".")[1],S.AddressList.FaxCode=e.CompanyContactDetails.FaxNumber.split(".")[0].replace(/\+/g,""),u.select2("val",S.AddressList.FaxCode)):(S.AddressList.FaxNumber="",S.AddressList.FaxCode="")),null!=e.CallbackContactDetails&&(S.CallBackContacts.FirstName=e.CallbackContactDetails.FirstName,S.CallBackContacts.LastName=e.CallbackContactDetails.LastName,S.CallBackContacts.JobTitle=e.CallbackContactDetails.JobTitle,""!=S.CallBackContacts.JobTitle&&NaN!=S.CallBackContacts.JobTitle&&null!=S.CallBackContacts.JobTitle&&(S.CallBackContacts.JobTitleRequired=!0),null!=e.CallbackContactDetails.CallbackMethod&&null!=e.CallbackContactDetails.CallbackMethod&&""!=e.CallbackContactDetails.CallbackMethod&&NaN!=e.CallbackContactDetails.CallbackMethod&&(S.CallBackContacts.CallBackMethod=e.CallbackContactDetails.CallbackMethod),null!=e.CallbackContactDetails.PhoneNumber&&null!=e.CallbackContactDetails.PhoneNumber&&""!=e.CallbackContactDetails.PhoneNumber?(S.CallBackContacts.Phone=e.CallbackContactDetails.PhoneNumber.split(".")[1],S.CallBackContacts.PhoneCode=e.CallbackContactDetails.PhoneNumber.split(".")[0].replace(/\+/g,""),g.select2("val",S.CallBackContacts.PhoneCode)):(S.CallBackContacts.Phone="",S.CallBackContacts.PhoneCode=""),S.CallBackContacts.PhoneExt=e.CallbackContactDetails.PhoneNumberExt,null!=e.CallbackContactDetails.FaxNumber&&null!=e.CallbackContactDetails.FaxNumber&&""!=e.CallbackContactDetails.FaxNumber?(S.CallBackContacts.Fax=e.CallbackContactDetails.FaxNumber.split(".")[1],S.CallBackContacts.FaxCode=e.CallbackContactDetails.FaxNumber.split(".")[0].replace(/\+/g,""),v.select2("val",S.CallBackContacts.FaxCode)):(S.CallBackContacts.Fax="",S.CallBackContacts.FaxCode=""),S.CallBackContacts.PhoneExt=e.CallbackContactDetails.PhoneNumberExt,S.CallBackContacts.Fax=e.CallbackContactDetails.FaxNumber,""!=S.CallBackContacts.Fax&&NaN!=S.CallBackContacts.Fax&&null!=S.CallBackContacts.Fax&&(S.CallBackContacts.FaxRequired=!0),S.CallBackContacts.EmailAddress=e.CallbackContactDetails.EmailAddress,S.CallBackContacts.CompanyName=e.CallbackContactDetails.CompanyName,S.CallBackContacts.Department=e.CallbackContactDetails.Department,S.CallBackContacts.Address=e.CallbackContactDetails.Address1,S.CallBackContacts.Address1=e.CallbackContactDetails.Address2,""!=S.CallBackContacts.Address1&&NaN!=S.CallBackContacts.Address1&&null!=S.CallBackContacts.Address1&&(S.CallBackContacts.Address1Required=!0),S.CallBackContacts.POBox=e.CallbackContactDetails.POBox,""!=S.CallBackContacts.POBox&&NaN!=S.CallBackContacts.POBox&&null!=S.CallBackContacts.POBox&&(S.CallBackContacts.POBoxRequired=!0),S.CallBackContacts.City=e.CallbackContactDetails.City,S.CallBackContacts.StateProvince=e.CallbackContactDetails.StateProvince,S.CallBackContacts.ZIPPostalCode=e.CallbackContactDetails.PostalCode,null!=e.CallbackContactDetails.Country&&null!=e.CallbackContactDetails.Country&&""!=e.CallbackContactDetails.Country&&(S.CallBackContacts.Country=e.CallbackContactDetails.Country),r.select2("val",S.CallBackContacts.Country),S.CallBackContacts.DestinationSame=e.CallbackContactDetails.DestinationSame),null!=e.AdminContactDetails?(S.AdminContacts.FirstName=e.AdminContactDetails.FirstName,S.AdminContacts.LastName=e.AdminContactDetails.LastName,S.AdminContacts.CompanyName=e.AdminContactDetails.Organization,S.AdminContacts.JobTitle=e.AdminContactDetails.JobTitle,S.AdminContacts.Address=e.AdminContactDetails.Address1,S.AdminContacts.Address1=e.AdminContactDetails.Address2,S.AdminContacts.City=e.AdminContactDetails.City,S.AdminContacts.StateProvince=e.AdminContactDetails.StateProvince,S.AdminContacts.ZIPPostalCode=e.AdminContactDetails.PostalCode,null!=e.AdminContactDetails.Country&&null!=e.AdminContactDetails.Country&&""!=e.AdminContactDetails.Country&&(S.AdminContacts.Country=e.AdminContactDetails.Country),c.select2("val",S.AdminContacts.Country),null!=e.AdminContactDetails.Phone&&null!=e.AdminContactDetails.Phone&&""!=e.AdminContactDetails.Phone?(S.AdminContacts.PhoneNumber=e.AdminContactDetails.Phone.split(".")[1],S.AdminContacts.PhoneCode=e.AdminContactDetails.Phone.split(".")[0].replace(/\+/g,""),m.select2("val",S.AdminContacts.PhoneCode),-1!=S.AdminContacts.PhoneNumber.indexOf("x")&&(S.AdminContacts.PhoneNumberExt=S.AdminContacts.PhoneNumber.split("x")[1].replace(/\x/g,""),S.AdminContacts.PhoneNumber=S.AdminContacts.PhoneNumber.split("x")[0],S.AdminContacts.PhoneExtCheckBox=!0)):(S.AdminContacts.PhoneNumber="",S.AdminContacts.PhoneCode=""),null!=e.AdminContactDetails.PhoneExt&&""!=e.AdminContactDetails.PhoneExt&&(S.AdminContacts.PhoneNumberExt=e.AdminContactDetails.PhoneExt),null!=S.AdminContacts.PhoneNumberExt&&""!=S.AdminContacts.PhoneNumberExt&&(S.AdminContacts.PhoneExtCheckBox=!0),null!=e.AdminContactDetails.Fax&&null!=e.AdminContactDetails.Fax&&""!=e.AdminContactDetails.Fax?(S.AdminContacts.FaxNumber=e.AdminContactDetails.Fax.split(".")[1],S.AdminContacts.FaxCode=e.AdminContactDetails.Fax.split(".")[0].replace(/\+/g,""),p.select2("val",S.AdminContacts.FaxCode)):(S.AdminContacts.FaxNumber="",S.AdminContacts.FaxCode=""),"COMODO"!=S.SSLInfoSectionViewModel.ProviderName.toUpperCase()||""!=e.AdminContactDetails.EmailAddress&&null!=e.AdminContactDetails.EmailAddress?S.AdminContacts.EmailAddress=e.AdminContactDetails.EmailAddress:S.AdminContacts.EmailAddress=e.UserEmail):"COMODO"==S.SSLInfoSectionViewModel.ProviderName.toUpperCase()?S.AdminContacts.EmailAddress=e.UserEmail:S.AdminContacts.EmailAddress=e.AdminContactDetails.EmailAddress,null!=e.TechContactDetails&&(S.TechContacts.FirstName=e.TechContactDetails.FirstName,S.TechContacts.LastName=e.TechContactDetails.LastName,S.TechContacts.CompanyName=e.TechContactDetails.Organization,S.TechContacts.JobTitle=e.TechContactDetails.JobTitle,S.TechContacts.Address=e.TechContactDetails.Address1,S.TechContacts.Address1=e.TechContactDetails.Address2,S.TechContacts.City=e.TechContactDetails.City,S.TechContacts.StateProvince=e.TechContactDetails.StateProvince,S.TechContacts.ZIPPostalCode=e.TechContactDetails.PostalCode,null!=e.TechContactDetails.Country&&null!=e.TechContactDetails.Country&&""!=e.TechContactDetails.Country&&(S.TechContacts.Country=e.TechContactDetails.Country),l.select2("val",S.TechContacts.Country),null!=e.TechContactDetails.Phone&&null!=e.TechContactDetails.Phone&&""!=e.TechContactDetails.Phone?(S.TechContacts.PhoneNumber=e.TechContactDetails.Phone.split(".")[1],S.TechContacts.PhoneCode=e.TechContactDetails.Phone.split(".")[0].replace(/\+/g,""),f.select2("val",S.TechContacts.PhoneCode),-1!=S.TechContacts.PhoneNumber.indexOf("x")&&(S.TechContacts.PhoneNumberExt=S.TechContacts.PhoneNumber.split("x")[1].replace(/\x/g,""),S.TechContacts.PhoneNumber=S.TechContacts.PhoneNumber.split("x")[0],S.TechContacts.PhoneExtCheckBox=!0)):(S.TechContacts.PhoneNumber="",S.TechContacts.PhoneCode=""),null!=e.TechContactDetails.PhoneExt&&""!=e.TechContactDetails.PhoneExt&&(S.TechContacts.PhoneNumberExt=e.TechContactDetails.PhoneExt),null!=S.TechContacts.PhoneNumberExt&&""!=S.TechContacts.PhoneNumberExt&&(S.TechContacts.PhoneExtCheckBox=!0),null!=e.TechContactDetails.Fax&&null!=e.TechContactDetails.Fax&&""!=e.TechContactDetails.Fax?(S.TechContacts.FaxNumber=e.TechContactDetails.Fax.split(".")[1],S.TechContacts.FaxCode=e.TechContactDetails.Fax.split(".")[0].replace(/\+/g,""),h.select2("val",S.TechContacts.FaxCode)):(S.TechContacts.FaxNumber="",S.TechContacts.FaxCode=""),S.TechContacts.EmailAddress=e.TechContactDetails.EmailAddress)),S.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName=""},S.addonDomains=[],S.oldAddonDomains=[],S.oldPrimaryDomain=[],S.AddressList={CompanyName:"",AssumedName:"",AssumedNameRequired:!1,Department:"",DepartMentRequired:!1,CompanyNumber:"",CompanyNumberRequired:!1,DunsNumber:"",DunsNumberRequired:!1,IncorporatingAgency:"",CityOfIncorporation:"",CityOfIncorporationRequired:!1,StateprovinceofIncorporation:"",StateofIncorporationRequired:!1,CountryofIncorporation:"",CountryofIncorporationRequired:!1,Address:"",Address1:"",Address1Required:!1,POBox:"",POBoxRequired:!1,City:"",StateProvince:"",ZIPPostalCode:"",Country:"",EmailAddress:"",BusinessCategory:"",DateofIncorporation:"",DateofIncorporationRequired:!1,CompanyContacts:"",AdminstrativeContacts:"",PhoneCode:"",PhoneNumber:"",PhoneNumberExt:"",PhoneExtCheckBox:!1,FaxCode:"",FaxNumber:""},S.CallBackContacts={FirstName:"",LastName:"",JobTitle:"",JobTitleRequired:!1,CallBackMethod:"",PhoneCode:"",Phone:"",PhoneExt:"",PhoneExtCheckBox:!1,FaxCode:"",Fax:"",FaxRequired:!1,EmailAddress:"",DestinationSame:!1,CompanyName:"",Department:"",Address1:"",Address:"",Address1Required:!1,POBox:"",POBoxRequired:!1,City:"",StateProvince:"",ZIPPostalCode:"",Country:""},S.AdminContacts={FirstName:"",LastName:"",CompanyName:"",JobTitle:"",Address:"",Address1:"",City:"",StateProvince:"",ZIPPostalCode:"",Country:S.CountryCode,PhoneCode:"",PhoneNumber:"",PhoneNumberExt:"",PhoneExtCheckBox:!1,FaxCode:"",FaxNumber:"",EmailAddress:"",EmailExtension:"",CheckUseBillingAndTechAddress:!1},S.TechContacts={FirstName:"",LastName:"",CompanyName:"",JobTitle:"",Address:"",Address1:"",City:"",StateProvince:"",ZIPPostalCode:"",Country:S.CountryCode,PhoneCode:"",PhoneNumber:"",PhoneNumberExt:"",PhoneExtCheckBox:!1,FaxCode:"",FaxNumber:"",EmailAddress:"",EmailExtension:"",CheckUseNamecheapContacts:!1},S.emailpattern=nc_Val_EmailPattern,S.firstandlastnamepattern=nc_Val_FnameLnameRegExpression,S.orgcompannamepatern=nc_Val_OrgCompanyNameWithAmpersandRegExpression,S.addresspattern=nc_Val_AddressWithAmpersandRegex,S.citypattern=nc_Val_CityRegex,S.companynumberpattern=nc_Val_AlphaNumeric,S.statepattern=nc_Val_StateRegex,S.postalcodepattern=nc_Val_PostalCodeRegex,S.select2Options={minimumResultsForSearch:-1},S.lstbusinesscategory="0",S.lstCallBackMethod="0",S.IsCountryOfIncorporationRequired=!1,S.IsCountryRequired=!1,S.IsAdminCountryRequired=!1,S.IsCallbackCountryRequired=!1,S.UseCompanyContactsForCallBack=function(e){var t=$("select#callBackContactsCountry");e?(S.CallBackContacts.CompanyName=S.AddressList.CompanyName,S.CallBackContacts.Department=S.AddressList.Department,S.CallBackContacts.Address=S.AddressList.Address,S.CallBackContacts.Address2=S.AddressList.Address1,S.CallBackContacts.POBox=S.AddressList.POBox,S.CallBackContacts.City=S.AddressList.City,S.CallBackContacts.StateProvince=S.AddressList.StateProvince,S.CallBackContacts.ZIPPostalCode=S.AddressList.ZIPPostalCode,S.CallBackContacts.Country=S.AddressList.Country,t.select2("val",S.AddressList.Country)):(S.CallBackContacts.CompanyName="",S.CallBackContacts.Department="",S.CallBackContacts.Address="",S.CallBackContacts.Address2="",S.CallBackContacts.POBox="",S.CallBackContacts.City="",S.CallBackContacts.StateProvince="",S.CallBackContacts.ZIPPostalCode="",S.CallBackContacts.Country="",t.select2("val",""))},S.IsChooseContactModalPopUpOpened=!1,S.openChooseContactModalPopUp=function(f){var e;S.IsChooseContactModalPopUpOpened||((e=a.open({templateUrl:"/Domains/SSL/ChooseContact/",controller:"sslChooseContactModalCtrl",size:"lg",backdrop:"static"})).result.then(function(e){var t,n,a,i,o,s,r,c,l,d,u,m,p;S.IsChooseContactModalPopUpOpened=!1,""!=e&&("Admin"==f&&(S.AdminContacts.FirstName=e.FirstName,S.AdminContacts.LastName=e.LastName,S.AdminContacts.CompanyName=e.Organization,S.AdminContacts.JobTitle=e.JobTitle,S.AdminContacts.Address=e.Address1,S.AdminContacts.Address1=e.Address2,S.AdminContacts.City=e.City,S.AdminContacts.StateProvince=e.StateProvince,S.AdminContacts.ZIPPostalCode=e.PostalCode,(t=$('form[name="frmAdminContacts"] select#AdminContactsCountry')).length&&(t.select2("val",e.Country),S.AdminContacts.Country=e.Country),-1!=e.Phone.indexOf(".")&&(S.AdminContacts.PhoneNumber=e.Phone.split(".")[1]),S.AdminContacts.PhoneNumberExt=e.PhoneExt,-1!=e.Fax.indexOf(".")&&(S.AdminContacts.FaxNumber=e.Fax.split(".")[1]),""!=e.PhoneExt&&(S.AdminContacts.PhoneExtCheckBox=!0,$("#PhSectionMax").length&&$("#PhSectionMax").addClass("has-extension"),$("#PhSectionMin").length&&$("#PhSectionMin").addClass("has-extension")),S.AdminContacts.EmailAddress=e.EmailAddress,(n=$('form[name="frmAdminContacts"] select#PhoneCode')).length&&-1!=e.Phone.indexOf(".")&&(n.select2("val",e.Phone.split(".")[0].replace(/\+/g,"")),S.AdminContacts.PhoneCode=e.Phone.split(".")[0].replace(/\+/g,"")),(a=$('form[name="frmAdminContacts"] select#FaxCode')).length&&-1!=e.Fax.indexOf(".")&&(a.select2("val",e.Fax.split(".")[0].replace(/\+/g,"")),S.AdminContacts.FaxCode=e.Fax.split(".")[0].replace(/\+/g,""))),"Tech"==f&&(S.TechContacts.FirstName=e.FirstName,S.TechContacts.LastName=e.LastName,S.TechContacts.CompanyName=e.Organization,S.TechContacts.JobTitle=e.JobTitle,S.TechContacts.Address=e.Address1,S.TechContacts.Address1=e.Address2,S.TechContacts.City=e.City,S.TechContacts.StateProvince=e.StateProvince,S.TechContacts.ZIPPostalCode=e.PostalCode,(i=$('form[name="frmTechContacts"] select#TechContactsCountry')).length&&(i.select2("val",e.Country),S.TechContacts.Country=e.Country),-1!=e.Phone.indexOf(".")&&(S.TechContacts.PhoneNumber=e.Phone.split(".")[1]),S.TechContacts.PhoneNumberExt=e.PhoneExt,-1!=e.Fax.indexOf(".")&&(S.TechContacts.FaxNumber=e.Fax.split(".")[1]),""!=e.PhoneExt&&(S.TechContacts.PhoneExtCheckBox=!0,$("#PhSectionTechnical").length&&$("#PhSectionTechnical").addClass("has-extension"),$("#PhSectionTechMin").length&&$("#PhSectionTechMin").addClass("has-extension")),S.TechContacts.EmailAddress=e.EmailAddress,(o=$('form[name="frmTechContacts"] select#PhoneCode')).length&&-1!=e.Phone.indexOf(".")&&(o.select2("val",e.Phone.split(".")[0].replace(/\+/g,"")),S.TechContacts.PhoneCode=e.Phone.split(".")[0].replace(/\+/g,"")),(s=$('form[name="frmTechContacts"] select#FaxCode')).length&&-1!=e.Fax.indexOf(".")&&(s.select2("val",e.Fax.split(".")[0].replace(/\+/g,"")),S.TechContacts.FaxCode=e.Fax.split(".")[0].replace(/\+/g,""))),"Geotrust"!=f&&"Comodo"!=f&&"ReissueComodoFields"!=f||(S.AddressList.CompanyName=e.Organization,S.AddressList.CityOfIncorporation=e.City,S.AddressList.StateprovinceofIncorporation=e.StateProvince,(r=$('form[name="frmCompanyContacts"] select#addressListCountry')).length&&(r.select2("val",e.Country),S.AddressList.Country=e.Country),S.AddressList.Address=e.Address1,S.AddressList.Address1=e.Address2,S.AddressList.City=e.City,S.AddressList.StateProvince=e.StateProvince,S.AddressList.ZIPPostalCode=e.PostalCode,-1!=e.Phone.indexOf(".")&&(S.AddressList.PhoneNumber=e.Phone.split(".")[1]),S.AddressList.PhoneNumberExt=e.PhoneExt,-1!=e.Fax.indexOf(".")&&(S.AddressList.FaxNumber=e.Fax.split(".")[1]),""!=e.PhoneExt&&(S.AddressList.PhoneExtCheckBox=!0,$("#PhSectionGeotrust").length&&$("#PhSectionGeotrust").addClass("has-extension")),(c=$('form[name="frmCompanyContacts"] select#PhoneCode')).length&&-1!=e.Phone.indexOf(".")&&(c.select2("val",e.Phone.split(".")[0].replace(/\+/g,"")),S.AddressList.PhoneCode=e.Phone.split(".")[0].replace(/\+/g,"")),(l=$('form[name="frmCompanyContacts"] select#FaxCode')).length&&-1!=e.Fax.indexOf(".")&&(l.select2("val",e.Fax.split(".")[0].replace(/\+/g,"")),S.AddressList.FaxCode=e.Fax.split(".")[0].replace(/\+/g,"")),(d=$('form[name="CompanyContacts"] select#addressCountry')).length&&(d.select2("val",e.Country),S.AddressList.Country=e.Country)),"Callback"==f&&(S.CallBackContacts.FirstName=e.FirstName,S.CallBackContacts.LastName=e.LastName,S.CallBackContacts.JobTitle=e.JobTitle,-1!=e.Phone.indexOf(".")&&(S.CallBackContacts.Phone=e.Phone.split(".")[1]),S.CallBackContacts.PhoneExt=e.PhoneExt,""!=e.PhoneExt&&(S.AddressList.CallBackPhoneExtCheckBox=!0,$("#PhSectionCallback").length&&$("#PhSectionCallback").addClass("has-extension")),-1!=e.Fax.indexOf(".")&&(S.CallBackContacts.Fax=e.Fax.split(".")[1]),S.CallBackContacts.EmailAddress=e.EmailAddress,S.CallBackContacts.CompanyName=e.Organization,S.CallBackContacts.Address=e.Address1,S.CallBackContacts.Address1=e.Address2,S.CallBackContacts.City=e.City,S.CallBackContacts.StateProvince=e.StateProvince,S.CallBackContacts.ZIPPostalCode=e.PostalCode,(u=$('form[name="frmCallBackContact"] select#callBackContactsCountry')).length&&(u.select2("val",e.Country),S.CallBackContacts.Country=e.Country),(m=$('form[name="frmCallBackContact"] select#CallBackPhoneCode')).length&&-1!=e.Phone.indexOf(".")&&(m.select2("val",e.Phone.split(".")[0].replace(/\+/g,"")),S.CallBackContacts.PhoneCode=e.Phone.split(".")[0].replace(/\+/g,"")),(p=$('form[name="frmCallBackContact"] select#CallBackFaxCode')).length&&-1!=e.Fax.indexOf(".")&&(p.select2("val",e.Fax.split(".")[0].replace(/\+/g,"")),S.CallBackContacts.FaxCode=e.Fax.split(".")[0].replace(/\+/g,""))))}),e.opened.then(function(){S.IsChooseContactModalPopUpOpened=!0}))},S.addonDcvMethodDisabled=!1,S.domainstovalidateviaemail=[],S.domainstovalidateviahttp=[],S.domainstovalidateviadns=[],S.addondomainsEmail=[],S.NextButtonClicked=!1,S.ErrorMsgRes=ErrorMessageRes,S.SSLInfoValidation=SSLInfoValidation,S.sslnotification=new r.instance,S.httpDCValidation="false",S.dnsDCValidation="false",S.WebServer=S.SSLInfoRes.static_SelectOption,S.getTimes=function(e){return new Array(e)},S.$watch("WebServer",function(e,t){S.SelectedWebServer=$("#ddlWebServer option:selected").text(),e!=S.SSLInfoRes.static_SelectOption&&S.sslactivate.ddlWebServer.$setValidity("webserverRequired",!0)},!0),S.$watch("AdminContacts.EmailAddress",function(e,t){e!=t&&(nc_Val_EmailPattern.test(e)&&S.ValidateTLD(e)?S.frmAdminContacts.AdminEmail.$setValidity("AdminEmailRequired",!0):S.frmAdminContacts.AdminEmail.$setValidity("AdminEmailRequired",!1))},!0),S.$watch("CallBackContacts.EmailAddress",function(e,t){e!=t&&(nc_Val_EmailPattern.test(e)&&S.ValidateTLD(e)?S.frmCallBackContact.CallBackEmailAddress.$setValidity("CallBackEmailRequired",!0):S.frmCallBackContact.CallBackEmailAddress.$setValidity("CallBackEmailRequired",!1))},!0),S.$watch("TechContacts.EmailAddress",function(e,t){e!=t&&(nc_Val_EmailPattern.test(e)&&S.ValidateTLD(e)?S.frmTechContacts.TechEmail.$setValidity("TechEmailRequired",!0):S.frmTechContacts.TechEmail.$setValidity("TechEmailRequired",!1))},!0),S.$watch("wizardstep",function(e,t){e!==t&&(S.SSLInfoSectionViewModel.IsDCVStepRequired?S.ButtonName=1==e?S.SSLInfoRes.static_ButtonSubmit:1<e&&e<5?S.SSLInfoRes.static_ButtonNext:S.SSLInfoRes.static_ButtonConfirm:S.ButtonName=1==e?S.SSLInfoRes.static_ButtonSubmit:1<e&&e<4?S.SSLInfoRes.static_ButtonNext:S.SSLInfoRes.static_ButtonConfirm)}),S.$watch("SSLInfoSectionViewModel.CSRCode",function(e,t){e!==t&&(S.NextButtonClicked=!1,""!=e&&null!=e&&null!=e&&NaN!=e||(S.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName=""))}),S.$watch("AddressList.CountryofIncorporation",function(e,t){e!==t&&(""==e&&"ACTIVE"==S.SSLInfoSectionViewModel.Status||""==e&&"COMODO"==S.SSLInfoSectionViewModel.ProviderName&&"Extended"==S.GetValidationType(S.SSLInfoSectionViewModel.ValidationType)?S.frmCompanyContacts.addressListCountryOfIncorporation.$setValidity("countryOfIncorpRequired",!1):(S.frmCompanyContacts.addressListCountryOfIncorporation.$setValidity("countryOfIncorpRequired",!0),""!=S.AddressList.StateprovinceofIncorporation&&(S.AddressList.StateprovinceofIncorporation=S.GetStateCode(S.frmCompanyContacts.StateprovinceofIncorporation,e,S.AddressList.StateprovinceofIncorporation))))}),S.$watch("AddressList.Country",function(e,t){e!==t&&null!=S.frmCompanyContacts&&null!=S.frmCompanyContacts.addressListCountry&&(S.frmCompanyContacts.addressListCountry.$setValidity("countryRequired",!0),""==e?("GEOTRUST"==S.SSLInfoSectionViewModel.ProviderName.toUpperCase()&&"Domain"==S.GetValidationType(S.SSLInfoSectionViewModel.ValidationType)||"THAWTE"==S.SSLInfoSectionViewModel.ProviderName.toUpperCase()&&"Domain"==S.GetValidationType(S.SSLInfoSectionViewModel.ValidationType)?S.frmCompanyContacts.addressListCountry.$setValidity("countryRequired",!0):S.frmCompanyContacts.addressListCountry.$setValidity("countryRequired",!1),S.frmCompanyContacts.ZIPPostalCode.$setValidity("invalidzipcode",!0),S.frmCompanyContacts.StateProvince.$setValidity("invalidstate",!0)):(S.ZipCodeValidation(e,S.AddressList.ZIPPostalCode)?S.frmCompanyContacts.ZIPPostalCode.$setValidity("invalidzipcode",!0):S.frmCompanyContacts.ZIPPostalCode.$setValidity("invalidzipcode",!1),""!=S.AddressList.StateProvince&&(S.AddressList.StateProvince=S.GetStateCode(S.frmCompanyContacts.StateProvince,e,S.AddressList.StateProvince))))}),S.$watch("AddressList.ZIPPostalCode",function(e,t){e!=t&&""!=e&&(S.ZipCodeValidation(S.AddressList.Country,e)?S.frmCompanyContacts.ZIPPostalCode.$setValidity("invalidzipcode",!0):S.frmCompanyContacts.ZIPPostalCode.$setValidity("invalidzipcode",!1))}),S.$watch("AddressList.DateofIncorporation",function(e,t){e!==t&&(""!=e&&"Invalid Date"==new Date(e)?S.frmCompanyContacts.DateofIncorporation.$setValidity("invalidDateOfIncorp",!1):S.frmCompanyContacts.DateofIncorporation.$setValidity("invalidDateOfIncorp",!0))}),S.$watch("AdminContacts.Country",function(e,t){e!==t&&null!=S.frmAdminContacts&&null!=S.frmAdminContacts.AdminContactsCountry&&(S.frmAdminContacts.AdminContactsCountry.$setValidity("adminCountryRequired",!0),""==e?(S.frmAdminContacts.AdminContactsCountry.$setValidity("adminCountryRequired",!1),S.frmAdminContacts.ZIPPostalCode.$setValidity("invalidzipcode",!0),S.frmAdminContacts.StateProvince.$setValidity("invalidstate",!0)):(S.ZipCodeValidation(e,S.AdminContacts.ZIPPostalCode)?S.frmAdminContacts.ZIPPostalCode.$setValidity("invalidzipcode",!0):S.frmAdminContacts.ZIPPostalCode.$setValidity("invalidzipcode",!1),""!=S.AdminContacts.StateProvince&&(S.AdminContacts.StateProvince=S.GetStateCode(S.frmAdminContacts.StateProvince,e,S.AdminContacts.StateProvince))))}),S.$watch("TechContacts.Country",function(e,t){e!==t&&null!=S.frmTechContacts&&null!=S.frmTechContacts.TechContactsCountry&&(S.frmTechContacts.TechContactsCountry.$setValidity("techCountryRequired",!0),""==e?(S.frmTechContacts.TechContactsCountry.$setValidity("techCountryRequired",!1),S.frmTechContacts.ZIPPostalCode.$setValidity("invalidzipcode",!0),S.frmTechContacts.StateProvince.$setValidity("invalidstate",!0)):(S.ZipCodeValidation(e,S.TechContacts.ZIPPostalCode)?S.frmTechContacts.ZIPPostalCode.$setValidity("invalidzipcode",!0):S.frmTechContacts.ZIPPostalCode.$setValidity("invalidzipcode",!1),""!=S.TechContacts.StateProvince&&(S.TechContacts.StateProvince=S.GetStateCode(S.frmTechContacts.StateProvince,e,S.TechContacts.StateProvince))))}),S.$watch("CallBackContacts.Country",function(e,t){var n;e!==t&&null!=S.frmCallBackContact&&null!=S.frmCallBackContact.callBackContactsCountry&&(S.frmCallBackContact.callBackContactsCountry.$setValidity("callbackCountryRequired",!0),""==e?(S.frmCallBackContact.callBackContactsCountry.$setValidity("callbackCountryRequired",!1),S.frmCallBackContact.ZIPPostalCode.$setValidity("invalidzipcode",!0),S.frmCallBackContact.StateProvince.$setValidity("invalidstate",!0)):(S.ZipCodeValidation(e,S.CallBackContacts.ZIPPostalCode)?S.frmCallBackContact.ZIPPostalCode.$setValidity("invalidzipcode",!0):S.frmCallBackContact.ZIPPostalCode.$setValidity("invalidzipcode",!1),""!=S.CallBackContacts.StateProvince&&(n=S.GetStateCode(S.frmCallBackContact.StateProvince,e,S.CallBackContacts.StateProvince),S.CallBackContacts.StateProvince=n)))}),S.$watch("CallBackContacts.PhoneCode",function(e,t){e!==t&&null!=S.frmCallBackContact&&null!=S.frmCallBackContact.CallBackPhoneCode&&(""==e?S.frmCallBackContact.CallBackPhoneCode.$setValidity("callbackPhoneCodeRequired",!1):S.frmCallBackContact.CallBackPhoneCode.$setValidity("callbackPhoneCodeRequired",!0))}),S.$watch("CallBackContacts.FaxCode",function(e,t){e!==t&&null!=S.frmCallBackContact&&null!=S.frmCallBackContact.CallBackFaxCode&&(""==e?S.frmCallBackContact.CallBackFaxCode.$setValidity("callbackFaxCodeRequired",!1):S.frmCallBackContact.CallBackFaxCode.$setValidity("callbackFaxCodeRequired",!0))}),S.$watch("AddressList.PhoneCode",function(e,t){e!==t&&null!=S.frmCompanyContacts&&null!=S.frmCompanyContacts.PhoneCode&&(S.frmCompanyContacts.PhoneCode.$setValidity("companyPhoneCodeRequired",!0),""==e&&""!=S.AddressList.PhoneNumber&&S.frmCompanyContacts.PhoneCode.$setValidity("companyPhoneCodeRequired",!1))}),S.$watch("AdminContacts.PhoneCode",function(e,t){e!==t&&null!=S.frmAdminContacts&&null!=S.frmAdminContacts.PhoneCode&&(""==e&&""!=S.AdminContacts.PhoneNumber?S.frmAdminContacts.PhoneCode.$setValidity("adminPhoneCodeRequired",!1):S.frmAdminContacts.PhoneCode.$setValidity("adminPhoneCodeRequired",!0))}),S.$watch("TechContacts.PhoneCode",function(e,t){e!==t&&null!=S.frmTechContacts&&null!=S.frmTechContacts.PhoneCode&&(""==e&&""!=S.TechContacts.PhoneNumber?S.frmTechContacts.PhoneCode.$setValidity("techPhoneCodeRequired",!1):S.frmTechContacts.PhoneCode.$setValidity("techPhoneCodeRequired",!0))}),S.$watch("AddressList.FaxCode",function(e,t){e!==t&&null!=S.frmCompanyContacts&&null!=S.frmCompanyContacts.FaxCode&&(""==e&&""!=S.AddressList.FaxNumber&&null!=S.AddressList.FaxNumber?S.frmCompanyContacts.FaxCode.$setValidity("companyFaxCodeRequired",!1):S.frmCompanyContacts.FaxCode.$setValidity("companyFaxCodeRequired",!0))}),S.$watch("AdminContacts.FaxCode",function(e,t){e!==t&&null!=S.frmAdminContacts&&null!=S.frmAdminContacts.FaxCode&&(""==e&&""!=S.AdminContacts.FaxNumber&&null!=S.AdminContacts.FaxNumber?S.frmAdminContacts.FaxCode.$setValidity("adminFaxCodeRequired",!1):S.frmAdminContacts.FaxCode.$setValidity("adminFaxCodeRequired",!0))}),S.$watch("TechContacts.FaxCode",function(e,t){e!==t&&null!=S.frmTechContacts&&null!=S.frmTechContacts.FaxCode&&(""==e&&""!=S.TechContacts.FaxNumber&&null!=S.TechContacts.FaxNumber?S.frmTechContacts.FaxCode.$setValidity("techFaxCodeRequired",!1):S.frmTechContacts.FaxCode.$setValidity("techFaxCodeRequired",!0))}),S.$watch("CallBackContacts.CallBackMethod",function(e,t){e!=t&&""!=e&&S.frmCallBackContact.ddlCallBackMethod.$setValidity("invalidCallBackMethod",!0)}),S.CompanyCountryOfIncorporationChangeEvent=function(){S.IsCountryOfIncorporationRequired=!0},S.CompanyCountryChangeEvent=function(){"ACTIVE"==S.SSLInfoSectionViewModel.Status&&(S.IsCountryRequired=!0)},S.CallbackCountryChangeEvent=function(){S.IsCallbackCountryRequired=!0},S.AdminCountryChangeEvent=function(){S.IsAdminCountryRequired=!0},S.ZipCodeValidation=function(e,t){var n,a=!0;return""!=t&&(n="",n="us"==(e=e.toLowerCase())?nc_Val_US_PostalCodeRegex:"ca"==e?nc_Val_CA_PostalCodeRegex:"gb"==e?nc_Val_GB_PostalCodeRegex:"nl"==e?nc_Val_NL_PostalCodeRegex:"br"==e?nc_Val_BR_PostalCodeRegex:"jp"==e?nc_Val_JP_PostalCodeRegex:nc_Val_PostalCodeRegex,a=!!t.match(n)),a},S.AddonIndexChange=0,S.GetStateCode=function(e,t,n){var a={US:{states:{AL:["AL","Alabama"],AK:["AK","Alaska"],AZ:["AZ","Arizona"],AR:["AR","Arkansas"],CA:["CA","California"],CO:["CO","Colorado"],CT:["CT","Connecticut"],DE:["DE","Delaware"],FL:["FL","Florida"],GA:["GA","Georgia"],HI:["HI","Hawaii"],ID:["ID","Idaho"],IL:["IL","Illinois"],IN:["IN","Indiana"],IA:["IA","Iowa"],KS:["KS","Kansas"],KY:["KY","Kentucky"],LA:["LA","Louisiana"],ME:["ME","Maine"],MD:["MD","Maryland"],MA:["MA","Massachetts"],MI:["MI","Michigan"],MN:["MN","Minnesota"],MS:["MS","Mississippi"],MO:["MO","Missouri"],MT:["MT","Montana"],NE:["NE","Nebraska"],NV:["NV","Nevada"],NH:["NH","New Hampshire"],NJ:["NJ","New Jersey"],NM:["NM","New Mexico"],NY:["NY","New York"],NC:["NC","North Carolina"],ND:["ND","North Dakota"],OH:["OH","Ohio"],OK:["OK","Oklahoma"],OR:["OR","Oregon"],PA:["PA","Pennsylvania"],RI:["RI","Rhode Island"],SC:["SC","South Carolina"],SD:["SD","South Dakota"],TN:["TN","Tennessee"],TX:["TX","Texas"],UT:["UT","Utah"],VT:["VT","Vermont"],VA:["VA","Virginia"],WA:["WA","Washington"],WV:["WV","West Virginia"],WI:["WI","Wisconsin"],WY:["WY","Wyoming"],DC:["DC","Washington, D.C","Washington D.C","Washington DC","Washington, DC"],AS:["AS","American Samoa"],UM:["UM","Minor Outlying Islands"],MP:["MP","Northern Mariana Islands"],PR:["PR","Puerto Rico"],VI:["VI","Virgin Islands"],GU:["GU","Guam"],FM:["FM","Federated States of Micronesia"],MH:["MH","Marshall Islands"],PW:["PW","Palau"],AE:["AE","Armed Forces Europe"],AP:["AP","Armed Forces Pacific"],AA:["AA","Armed Forces Americas"]}},CA:{states:{AB:["AB","Alberta"],BC:["BC","British Columbia"],MB:["MB","Manitoba"],NB:["NB","New Brunswick"],NL:["NL","Newfoundland & Labrador"],NS:["NS","Nova Scotia"],ON:["ON","Ontario"],PE:["PE","Prince Edward Island"],QC:["QC","Quebec"],SK:["SK","Saskatchewan"],NT:["NT","Northwest Territories"],NU:["NU","Nunavut"],YT:["YT","Yukon"]}}}[t=t];if(null==a)return e.$setValidity("invalidstate",!0),n;validateState=!0;var i,o,s=a.states;s[n];for(o in s)for(var r in s[o])if("sortOn"!=r&&(i=s[o][r].replace(/[^a-zA-Z0-9]/g,"").toLowerCase(),n.toLowerCase()===i))return e.$setValidity("invalidstate",!0),e.$setViewValue(o),e.$render(),o;return e.$setValidity("invalidstate",!1),e.$setViewValue(n),e.$render(),n},S.$watch("SSLInfoSectionViewModel.CSRCode",function(e,t){var n,a;e!=t&&""!=e&&null!=e?(n=(e.match(/-----BEGIN NEW CERTIFICATE REQUEST-----/g)||[]).length,a=(e.match(/-----BEGIN CERTIFICATE REQUEST-----/g)||[]).length,S.sslactivate.CSRCode.$setValidity("CSRInvalid",!0),S.sslactivate.CSRCode.$setValidity("noDomainName",!0),S.sslactivate.CSRCode.$setValidity("enterwildcard",!0),S.sslactivate.CSRCode.$setValidity("enternonwildcard",!0),S.sslactivate.CSRCode.$setValidity("multidomainnotallowed",!0),S.sslactivate.CSRCode.$setValidity("activateMoreDomain",!0),S.sslactivate.CSRCode.$setValidity("invalidDomainRenewal",!0),S.sslactivate.CSRCode.$setValidity("samePrimaryDomainForRenewal",!0),S.sslactivate.CSRCode.$setValidity("internalDomainNameNotAllowed",!0),S.sslactivate.CSRCode.$setValidity("sansParametersDoNotMatchWithCommonName",!0),S.sslactivate.CSRCode.$setValidity("positiveSSLCantBeRenewals",!0),S.sslactivate.CSRCode.$setValidity("specialPromotionsCantBeRenewals",!0),S.sslactivate.CSRCode.$setValidity("commonNameInCSRIsBlocked",!0),S.sslactivate.CSRCode.$setValidity("errorDomain",!0),1<a||1<n?S.sslactivate.CSRCode.$setValidity("multiplecsrprovided",!1):S.sslactivate.CSRCode.$setValidity("multiplecsrprovided",!0)):S.sslactivate.CSRCode.$setValidity("multiplecsrprovided",!0)},!0),S.CheckDuplicateCommonNames=function(){if(""!=S.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName){var e=[];for(e.push(S.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName.toUpperCase()),index=0;index<S.addonDomains.length;index++)if(S.addOnErrorLength=S.addonDomains.length-1,""!=S.addonDomains[index].CommonName&&null!=S.addonDomains[index].CommonName){var t=S.addonDomains[index].CommonName.toUpperCase();if(null!=S.sslactivate.addondomainField){if(-1!==e.indexOf(t.toUpperCase())){S.sslactivate.addondomainField.$setValidity("invalidSan",!0),S.sslactivate.addondomainField.$setValidity("invalidSubDomain",!0),S.sslactivate.addondomainField.$setValidity("duplicateAddonDomain",!1),S.addOnErrorLength=index;break}S.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName!=S.addonDomains[index].CommonName&&e.push(t),S.sslactivate.addondomainField.$setValidity("duplicateAddonDomain",!0)}}}},S.AsynchronousWizardConfirmation=new c.AsyncStateBehavior({constructor:function(){var t=this.instance;t.Click=function(){S.isConfirmClicked=!0,t.asyncStatus(c.AsyncStatus.Loading),o.sslInfo.ActivateCertificate(S.SSLInfoSectionViewModel).then(function(e){t.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e)})}},onSuccess:function(e){o.sslInfo.RedirectProductPageJSON(S.SSLInfoSectionViewModel.CertificateId).then(function(e){if(e.Error)return S.sslnotification.alerts.clear(),S.sslnotification.alerts.addError(e.Msg,S.sslnotificationAlertArguments),$("html, body").animate({scrollTop:0},800),!1;var t=e.Msg;window.location=t})},onLoading:function(e){var t=this.instance;S.sslnotification.alerts.clear(),t.activeNotification=S.sslnotification.stuckNotifications.addLoading("<B>Submitting Confirmation</B> Please wait.",!1),t.isDisabled=!0,t.showError=!1},onError:function(e){S.sslnotification.alerts.clear();var t=e.Msg;-1<t.indexOf("-3000")&&S.sslnotification.alerts.addError(S.SSLInfoRes.static_ErrorChildReissue,S.sslnotificationAlertArguments),-1<t.indexOf("foreignOrderNumber")?S.sslnotification.alerts.addError(S.SSLInfoRes.static_foreignOrderNumberError,S.sslnotificationAlertArguments):S.sslnotification.alerts.addError(e.Msg,S.sslnotificationAlertArguments),$("html, body").animate({scrollTop:0},800)}}),S.ClickNext=function(){if(S.ReplaceCommonNameIfModified(),S.NextButtonClicked=!0,1==S.wizardstep){for(S.sslnotification.alerts.clear(),S.CheckIsMinimumAddonDomainEntered(),S.CheckDuplicateCommonNames(),S.WebServer==S.SSLInfoRes.static_SelectOption?S.sslactivate.ddlWebServer.$setValidity("webserverRequired",!1):S.sslactivate.ddlWebServer.$setValidity("webserverRequired",!0),addonIndex=0;addonIndex<S.addonDomains.length;addonIndex++)S.AddonDomainValidation(S.addonDomains[addonIndex].CommonName,addonIndex);("NEWPURCHASE"==S.SSLInfoSectionViewModel.Status||"NEWRENEWAL"==S.SSLInfoSectionViewModel.Status)&&0<S.SSLInfoSectionViewModel.SanCount&&0==S.addonDomains.length&&(S.sslactivate.$invalid=!0),"ACTIVE"==S.SSLInfoSectionViewModel.Status&&S.ErrorOccuredInReissue&&(S.sslactivate.$invalid=!0),S.sslactivate.$invalid?(S.sslnotification.alerts.addError(S.ErrorMsgRes.error_Site_SummaryMessage,S.sslnotificationAlertArguments),$("html, body").animate({scrollTop:0},800)):"ACTIVE"==S.SSLInfoSectionViewModel.Status&&"COMODO"==S.SSLInfoSectionViewModel.ProviderName&&S.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName!=S.oldPrimaryDomain.CommonName?S.ReissueModel():S.ValidateCsr.click()}else if(2==S.wizardstep)if(!S.SSLInfoSectionViewModel.IsDCVStepRequired||"NEWPURCHASE"!=S.SSLInfoSectionViewModel.Status&&"NEWRENEWAL"!=S.SSLInfoSectionViewModel.Status&&"ACTIVE"!=S.SSLInfoSectionViewModel.Status)S.NextButtonClicked=!1,S.wizardstep=3;else{S.ApproverEmailListErrorCount=0,S.GetApproverListReqFrom="PAGELOAD","Email"==S.GetDcvMethodName(S.SSLInfoSectionViewModel.PrimaryDomainDetail.ValidationType)&&S.GetApproverEmailList.click();for(var e=0;e<S.addonDomains.length;e++)"EMAIL"==S.addonDomains[e].ValidationType.toUpperCase()&&""!=S.addonDomains[e].CommonName&&S.GetApproverEmailListForAddOns.click(S.addonDomains[e].CommonName,e);0==S.ApproverEmailListErrorCount&&"ACTIVE"==S.SSLInfoSectionViewModel.Status&&(S.NextButtonClicked=!1,S.wizardstep=3)}else if(3==S.wizardstep&&S.SSLInfoSectionViewModel.IsDCVStepRequired){for(var t=!1,n=!1,e=0;e<S.domainstovalidateviaemail.length;e++){if(!(null!=S.domainstovalidateviaemail[e].EMAILADDRESS&&""!=S.domainstovalidateviaemail[e].EMAILADDRESS&&NaN!=S.domainstovalidateviaemail[e].EMAILADDRESS&&S.domainstovalidateviaemail[e].EMAILADDRESS!=S.SSLInfoRes.static_SelectOption||"NEWPURCHASE"!=S.SSLInfoSectionViewModel.Status&&"NEWRENEWAL"!=S.SSLInfoSectionViewModel.Status)){S.sslnotification.alerts.clear();var a=S.SSLInfoValidation.error_Contextual_ApproverEmailRequired.replace("{COMMONNAME}",S.domainstovalidateviaemail[e].NAME);S.sslnotification.alerts.addError(a,S.sslnotificationAlertArguments),t=!0;break}if("ACTIVE"==S.SSLInfoSectionViewModel.Status&&(null==S.domainstovalidateviaemail[e].EMAILADDRESS||""==S.domainstovalidateviaemail[e].EMAILADDRESS||NaN==S.domainstovalidateviaemail[e].EMAILADDRESS||S.domainstovalidateviaemail[e].EMAILADDRESS==S.SSLInfoRes.static_SelectOption)){S.sslnotification.alerts.clear();a=S.SSLInfoValidation.error_Contextual_ApproverEmailRequired.replace("{COMMONNAME}",S.domainstovalidateviaemail[e].NAME);S.sslnotification.alerts.addError(a,S.sslnotificationAlertArguments),t=!0;break}}if("COMODO"!=S.SSLInfoSectionViewModel.ProviderName&&("NEWPURCHASE"==S.SSLInfoSectionViewModel.Status||"NEWRENEWAL"==S.SSLInfoSectionViewModel.Status)){for(e=0;e<S.domainstovalidateviadns.length;e++)if(null==S.domainstovalidateviadns[e].EMAILADDRESS||""==S.domainstovalidateviadns[e].EMAILADDRESS||NaN==S.domainstovalidateviadns[e].EMAILADDRESS||S.domainstovalidateviadns[e].EMAILADDRESS==S.SSLInfoRes.static_SelectOption){S.sslnotification.alerts.clear();a=S.SSLInfoValidation.error_Contextual_ApproverEmailRequired.replace("{COMMONNAME}",S.domainstovalidateviadns[e].NAME);S.sslnotification.alerts.addError(a,S.sslnotificationAlertArguments),t=!0;break}for(e=0;e<S.domainstovalidateviahttp.length;e++)if(null==S.domainstovalidateviahttp[e].EMAILADDRESS||""==S.domainstovalidateviahttp[e].EMAILADDRESS||NaN==S.domainstovalidateviahttp[e].EMAILADDRESS||S.domainstovalidateviahttp[e].EMAILADDRESS==S.SSLInfoRes.static_SelectOption){S.sslnotification.alerts.clear();a=S.SSLInfoValidation.error_Contextual_ApproverEmailRequired.replace("{COMMONNAME}",S.domainstovalidateviahttp[e].NAME);S.sslnotification.alerts.addError(a,S.sslnotificationAlertArguments),t=!0;break}}var i=0;S.domainstovalidateviaemail.length;for(var o=0,s=0,r=0;r<S.domainstovalidateviaemail.length;r++)""!=S.domainstovalidateviaemail[r].NAME&&(i+=1);for(var c=0;c<S.domainstovalidateviadns.length;c++)""!=S.domainstovalidateviadns[c].NAME&&(o+=1);for(var l=0;l<S.domainstovalidateviahttp.length;l++)""!=S.domainstovalidateviahttp[l].NAME&&(s+=1);"COMODO"==S.SSLInfoSectionViewModel.ProviderName?S.addonDomainCount+1!=i+o+s&&(S.sslnotification.alerts.clear(),S.sslnotification.alerts.addError(S.SSLInfoValidation.error_Contextual_DCVMethodRequired,S.sslnotificationAlertArguments),n=!0):i+o+s==0&&(S.sslnotification.alerts.clear(),S.sslnotification.alerts.addError(S.SSLInfoValidation.error_Contextual_PrimaryDomainDCVMethodRequired,S.sslnotificationAlertArguments),n=!0),n||t?$("html, body").animate({scrollTop:0},800):(S.NextButtonClicked=!1,S.ClearSummaryMsgAndScrollTop(),S.wizardstep=4),S.ClearUnselectedDropdownValidationMsgs()}else if(4==S.wizardstep&&S.SSLInfoSectionViewModel.IsDCVStepRequired||!S.SSLInfoSectionViewModel.IsDCVStepRequired&&3==S.wizardstep)if(S.NextButtonClicked=!0,S.sslnotification.alerts.clear(),("ACTIVE"!=S.SSLInfoSectionViewModel.Status.toUpperCase()||"ACTIVE"==S.SSLInfoSectionViewModel.Status.toUpperCase()&&"COMODO"==S.SSLInfoSectionViewModel.ProviderName)&&(null!=S.frmCompanyContacts&&null!=S.frmCompanyContacts.addressListCountryOfIncorporation&&(""==S.AddressList.CountryofIncorporation&&"ACTIVE"==S.SSLInfoSectionViewModel.Status||""==S.AddressList.CountryofIncorporation&&"COMODO"==S.SSLInfoSectionViewModel.ProviderName&&"Extended"==S.GetValidationType(S.SSLInfoSectionViewModel.ValidationType)?S.frmCompanyContacts.addressListCountryOfIncorporation.$setValidity("countryOfIncorpRequired",!1):null!=S.frmCompanyContacts.addressListCountryOfIncorporation&&(S.frmCompanyContacts.addressListCountryOfIncorporation.$setValidity("countryOfIncorpRequired",!0),""!=S.AddressList.StateprovinceofIncorporation&&null!=S.frmCompanyContacts.StateprovinceofIncorporation&&(S.AddressList.StateprovinceofIncorporation=S.GetStateCode(S.frmCompanyContacts.StateprovinceofIncorporation,S.AddressList.CountryofIncorporation,S.AddressList.StateprovinceofIncorporation)))),null!=S.frmCompanyContacts&&(""==S.AddressList.Country||"--"==S.AddressList.Country||null==S.AddressList.Country||NaN==S.AddressList.Country?S.frmCompanyContacts.addressListCountry.$setValidity("countryRequired",!1):S.frmCompanyContacts.addressListCountry.$setValidity("countryRequired",!0)),"GEOTRUST"==S.SSLInfoSectionViewModel.ProviderName.toUpperCase()&&"Domain"==S.GetValidationType(S.SSLInfoSectionViewModel.ValidationType)&&S.frmCompanyContacts.addressListCountry.$setValidity("countryRequired",!0),null!=S.frmCallBackContact&&(""==S.CallBackContacts.CallBackMethod?S.frmCallBackContact.ddlCallBackMethod.$setValidity("invalidCallBackMethod",!1):S.frmCallBackContact.ddlCallBackMethod.$setValidity("invalidCallBackMethod",!0)),null!=S.frmCompanyContacts&&null!=S.frmCompanyContacts.PhoneCode&&(""==S.AddressList.PhoneCode&&""!=S.AddressList.PhoneNumber?S.frmCompanyContacts.PhoneCode.$setValidity("companyPhoneCodeRequired",!1):S.frmCompanyContacts.PhoneCode.$setValidity("companyPhoneCodeRequired",!0)),null!=S.frmAdminContacts&&null!=S.frmAdminContacts.PhoneCode&&(""==S.AdminContacts.PhoneCode&&""!=S.AdminContacts.PhoneNumber?S.frmAdminContacts.PhoneCode.$setValidity("adminPhoneCodeRequired",!1):S.frmAdminContacts.PhoneCode.$setValidity("adminPhoneCodeRequired",!0)),null!=S.frmTechContacts&&null!=S.frmTechContacts.PhoneCode&&(""==S.TechContacts.PhoneCode&&""!=S.TechContacts.PhoneNumber?S.frmTechContacts.PhoneCode.$setValidity("techPhoneCodeRequired",!1):S.frmTechContacts.PhoneCode.$setValidity("techPhoneCodeRequired",!0)),null!=S.frmCallBackContact&&null!=S.frmCallBackContact.CallBackPhoneCode&&(""==S.CallBackContacts.PhoneCode&&""!=S.CallBackContacts.Phone?S.frmCallBackContact.CallBackPhoneCode.$setValidity("callbackPhoneCodeRequired",!1):S.frmCallBackContact.CallBackPhoneCode.$setValidity("callbackPhoneCodeRequired",!0)),null!=S.frmCallBackContact&&null!=S.frmCallBackContact.CallBackFaxCode&&(""==S.CallBackContacts.FaxCode&&""!=S.CallBackContacts.Fax?S.frmCallBackContact.CallBackFaxCode.$setValidity("callbackFaxCodeRequired",!1):S.frmCallBackContact.CallBackFaxCode.$setValidity("callbackFaxCodeRequired",!0)),null!=S.frmCompanyContacts&&null!=S.frmCompanyContacts.FaxNumber&&(""!=S.AddressList.FaxNumber&&""==S.AddressList.FaxCode?S.frmCompanyContacts.FaxCode.$setValidity("companyFaxCodeRequired",!1):S.frmCompanyContacts.FaxCode.$setValidity("companyFaxCodeRequired",!0)),null!=S.frmAdminContacts&&null!=S.frmAdminContacts.FaxNumber&&(""!=S.AdminContacts.FaxNumber&&""==S.AdminContacts.FaxCode?S.frmAdminContacts.FaxCode.$setValidity("adminFaxCodeRequired",!1):S.frmAdminContacts.FaxCode.$setValidity("adminFaxCodeRequired",!0)),null!=S.frmTechContacts&&null!=S.frmTechContacts.FaxNumber&&(""!=S.TechContacts.FaxNumber&&""==S.TechContacts.FaxCode?S.frmTechContacts.FaxCode.$setValidity("techFaxCodeRequired",!1):S.frmTechContacts.FaxCode.$setValidity("techFaxCodeRequired",!0))),null!=S.frmCompanyContacts&&S.frmCompanyContacts.$invalid||null!=S.frmCallBackContact&&S.frmCallBackContact.$invalid||S.frmAdminContacts.$invalid||null!=S.frmTechContacts&&S.frmTechContacts.$invalid)S.sslnotification.alerts.addError(S.ErrorMsgRes.error_Site_SummaryMessage,S.sslnotificationAlertArguments),$("html, body").animate({scrollTop:0},800);else{if(S.SSLInfoSectionViewModel.IsDCVStepRequired){for(e=0;e<S.domainstovalidateviaemail.length;e++)""!=S.domainstovalidateviaemail[e].NAME&&null!=S.domainstovalidateviaemail[e].NAME||(S.domainstovalidateviaemail.splice(e,1),--e);for(e=0;e<S.domainstovalidateviahttp.length;e++)""!=S.domainstovalidateviahttp[e].NAME&&null!=S.domainstovalidateviahttp[e].NAME||(S.domainstovalidateviahttp.splice(e,1),--e);for(e=0;e<S.domainstovalidateviadns.length;e++)""!=S.domainstovalidateviadns[e].NAME&&null!=S.domainstovalidateviadns[e].NAME||(S.domainstovalidateviadns.splice(e,1),--e);if(S.domainstovalidateviahttp=u("orderBy")(S.domainstovalidateviahttp,["DOMAINTYPE","SanOrder"]),S.domainstovalidateviaemail=u("orderBy")(S.domainstovalidateviaemail,["DOMAINTYPE","SanOrder"]),S.domainstovalidateviadns=u("orderBy")(S.domainstovalidateviadns,["DOMAINTYPE","SanOrder"]),S.displayemailflag="",S.domainstovalidateviaemaildisplayonly=[],S.domainstovalidateviahttpdisplayonly=[],S.domainstovalidateviadnsdisplayonly=[],S.domainstovalidateviahttpdisplayonly=S.domainstovalidateviahttp.concat(),0!=S.domainstovalidateviahttp.length&&"COMODO"!=S.SSLInfoSectionViewModel.ProviderName){for(e=0;e<S.addonDomains.length;e++)null!=S.addonDomains[e].CommonName&&""!=S.addonDomains[e].CommonName&&null!=S.addonDomains[e].CommonName&&(domainItemsHttp=[],domainItemsHttp.NAME=S.addonDomains[e].CommonName,domainItemsHttp.DOMAINTYPE="SECONDARY",domainItemsHttp.DCV="File",domainItemsHttp.SanOrder=e,domainItemsHttp.EMAILADDRESS="",S.domainstovalidateviahttpdisplayonly.push(domainItemsHttp));S.displayemailflag="1"}if(S.domainstovalidateviaemaildisplayonly=S.domainstovalidateviaemail.concat(),0!=S.domainstovalidateviaemail.length&&"COMODO"!=S.SSLInfoSectionViewModel.ProviderName){for(e=0;e<S.addonDomains.length;e++)null!=S.addonDomains[e].CommonName&&""!=S.addonDomains[e].CommonName&&null!=S.addonDomains[e].CommonName&&(domainItemsEmail=[],domainItemsEmail.NAME=S.addonDomains[e].CommonName,domainItemsEmail.DOMAINTYPE="SECONDARY",domainItemsEmail.DCV="Email",domainItemsEmail.SanOrder=e,domainItemsEmail.EMAILADDRESS="",S.domainstovalidateviaemaildisplayonly.push(domainItemsEmail));S.displayemailflag="1"}if(S.domainstovalidateviadnsdisplayonly=S.domainstovalidateviadns.concat(),0!=S.domainstovalidateviadns.length&&"COMODO"!=S.SSLInfoSectionViewModel.ProviderName){for(e=0;e<S.addonDomains.length;e++)null!=S.addonDomains[e].CommonName&&""!=S.addonDomains[e].CommonName&&null!=S.addonDomains[e].CommonName&&(domainItemsDns=[],domainItemsDns.NAME=S.addonDomains[e].CommonName,domainItemsDns.DOMAINTYPE="SECONDARY",domainItemsDns.DCV="Dns",domainItemsDns.SanOrder=e,domainItemsDns.EMAILADDRESS="",S.domainstovalidateviadnsdisplayonly.push(domainItemsDns));S.displayemailflag="1"}S.domainstovalidateviahttpdisplayonly=u("orderBy")(S.domainstovalidateviahttpdisplayonly,["DOMAINTYPE","SanOrder"]),S.domainstovalidateviaemaildisplayonly=u("orderBy")(S.domainstovalidateviaemaildisplayonly,["DOMAINTYPE","SanOrder"]),S.domainstovalidateviadnsdisplayonly=u("orderBy")(S.domainstovalidateviadnsdisplayonly,["DOMAINTYPE","SanOrder"])}else{var d=[];d.CommonName=S.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName,d.DomainType="PRIMARY",S.DomainsToBeProtected=[],S.DomainsToBeProtected.push(d);for(e=0;e<S.addonDomains.length;e++)null!=S.addonDomains[e].CommonName&&""!=S.addonDomains[e].CommonName&&null!=S.addonDomains[e].CommonName&&((d=[]).CommonName=S.addonDomains[e].CommonName,d.DomainType="SECONDARY",S.DomainsToBeProtected.push(d))}S.ClearSummaryMsgAndScrollTop(),S.SSLInfoSectionViewModel.IsDCVStepRequired?S.wizardstep=5:S.wizardstep=4}else(5==S.wizardstep&&S.SSLInfoSectionViewModel.IsDCVStepRequired||!S.SSLInfoSectionViewModel.IsDCVStepRequired&&4==S.wizardstep)&&(S.AssignValuesToModel(),S.SSLInfoSectionViewModel.Webserver=S.WebServer,S.AsynchronousWizardConfirmation.Click())},$(document).ready(function(){$("#EditCSR").click(function(){$("#CSRCode").focus()})}),S.setStep=function(e){S.ClearValuesOnStepBackward(e),S.wizardstep=e};var m=S.selecteddcvmethod="",p=$('form[name="frmTechContacts"] select#PhoneCode'),f=$('form[name="frmTechContacts"] select#TechContactsCountry'),h=$('form[name="frmTechContacts"] select#FaxCode');S.SetNamecheapPrimaryContact=new c.AsyncStateBehavior({constructor:function(){var t=this.instance;t.onChange=function(e){m=e,S.TechContacts.CheckUseNamecheapContacts&&"Tech"==m&&o.sslInfo.GetNamecheapPrimaryContactDetails().then(function(e){t.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e)}),S.TechContacts.CheckUseNamecheapContacts||"Tech"!=m||(p.length&&$(p).prop("disabled",!1),f.length&&$(f).prop("disabled",!1),h.length&&$(h).prop("disabled",!1),S.TechContacts.FirstName="",S.TechContacts.LastName="",S.TechContacts.Address="",S.TechContacts.Address1="",S.TechContacts.CompanyName="",S.TechContacts.JobTitle="",S.TechContacts.PhoneNumber="",S.TechContacts.FaxNumber="",S.TechContacts.ZIPPostalCode="",S.TechContacts.StateProvince="",S.TechContacts.City="",S.TechContacts.PhoneNumberExt="",S.TechContacts.EmailAddress="",S.TechContacts.PhoneCode="",S.TechContacts.FaxCode="",S.TechContacts.Country="",p.length&&p.select2("val",""),f.length&&f.select2("val",C),h.length&&h.select2("val",""),S.TechContacts.PhoneExtCheckBox=!1,$("#PhSectionTechnical").length&&$("#PhSectionTechnical").removeClass("has-extension"),$("#PhSectionTechMin").length&&$("#PhSectionTechMin").removeClass("has-extension"))}},onSuccess:function(e){S.TechContacts.CheckUseNamecheapContacts&&"Tech"==m&&(p.length&&$(p).prop("disabled",!0),f.length&&$(f).prop("disabled",!0),h.length&&$(h).prop("disabled",!0),S.TechContacts.FirstName="Namecheap",S.TechContacts.LastName="Support",S.TechContacts.Address="11400 W. Olympic Blvd. Suite 200",S.TechContacts.Address1=" ",S.TechContacts.FaxNumber="",S.TechContacts.CompanyName="Namecheap, Inc",S.TechContacts.JobTitle="NA",e.Result.UserAddressInfoSection.Address.Phone="+1.6613102107",-1!=e.Result.UserAddressInfoSection.Address.Phone.indexOf(".")&&(S.TechContacts.PhoneNumber=e.Result.UserAddressInfoSection.Address.Phone.split(".")[1]),e.Result.UserAddressInfoSection.Address.Fax=" ",-1!=e.Result.UserAddressInfoSection.Address.Fax.indexOf(".")&&(S.TechContacts.FaxNumber=e.Result.UserAddressInfoSection.Address.Fax.split(".")[1]),S.TechContacts.ZIPPostalCode="90064",S.TechContacts.StateProvince="CA",S.TechContacts.City="Los Angeles",S.TechContacts.PhoneNumberExt="",S.TechContacts.EmailAddress="sslsupport@namecheap.com",e.Result.UserAddressInfoSection.Address.Phone="+1.6613102107",-1!=e.Result.UserAddressInfoSection.Address.Phone.indexOf(".")&&(S.TechContacts.PhoneCode=e.Result.UserAddressInfoSection.Address.Phone.split(".")[0].replace(/\+/g,"")),e.Result.UserAddressInfoSection.Address.Fax=" ",-1!=e.Result.UserAddressInfoSection.Address.Fax.indexOf(".")&&(S.TechContacts.FaxCode=e.Result.UserAddressInfoSection.Address.Fax.split(".")[0].replace(/\+/g,"")),p.length&&(e.Result.UserAddressInfoSection.Address.Phone="+1.6613102107",-1!=e.Result.UserAddressInfoSection.Address.Phone.indexOf(".")?p.select2("val",e.Result.UserAddressInfoSection.Address.Phone.split(".")[0].replace(/\+/g,"")):$(p).prop("disabled",!1)),S.TechContacts.Country="US",e.Result.UserAddressInfoSection.Address.Country="US",f.length&&f.select2("val",e.Result.UserAddressInfoSection.Address.Country.toUpperCase()),e.Result.UserAddressInfoSection.Address.Fax="",h.length&&-1!=e.Result.UserAddressInfoSection.Address.Fax.indexOf(".")&&h.select2("val",e.Result.UserAddressInfoSection.Address.Fax.split(".")[0].replace(/\+/g,"")),(e.Result.UserAddressInfoSection.Address.PhoneExt="")!=e.Result.UserAddressInfoSection.Address.PhoneExt&&(S.TechContacts.PhoneExtCheckBox=!0,$("#PhSectionTechnical").length&&$("#PhSectionTechnical").addClass("has-extension"),$("#PhSectionTechMin").length&&$("#PhSectionTechMin").addClass("has-extension"))),m="",this.instance.asyncStatus(c.AsyncStatus.Active)},onActive:function(e){}}),S.ParseCsr=new c.AsyncStateBehavior({constructor:function(){var a=this.instance,i=0;a.onBlur=function(){var e,t,n;null!=S.SSLInfoSectionViewModel.CSRCode&&(e=(S.SSLInfoSectionViewModel.CSRCode.match(/-----BEGIN NEW CERTIFICATE REQUEST-----/g)||[]).length,t=(S.SSLInfoSectionViewModel.CSRCode.match(/-----BEGIN CERTIFICATE REQUEST-----/g)||[]).length,n=(S.SSLInfoSectionViewModel.CSRCode.match(/-----END CERTIFICATE REQUEST-----/g)||[]).length||(S.SSLInfoSectionViewModel.CSRCode.match(/-----END NEW CERTIFICATE REQUEST-----/g)||[]).length,0==e&&0==t&&0==n&&(i=1),null==S.SSLInfoSectionViewModel.CSRCode||""==S.SSLInfoSectionViewModel.CSRCode||1!=t&&1!=e&&1!=i||0!=S.NextButtonClicked||(a.asyncStatus(c.AsyncStatus.Loading),o.sslInfo.ParseCsr(S.SSLInfoSectionViewModel.CSRCode,S.SSLInfoSectionViewModel.APIParameterValue,S.httpDCValidation,S.dnsDCValidation).then(function(e){a.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e)})))}},onSuccess:function(e){S.WebServer!=S.SSLInfoRes.static_SelectOption&&S.sslnotification.alerts.clear();this.instance;if(null==S.SSLInfoSectionViewModel.PrimaryDomainDetail&&(S.SSLInfoSectionViewModel.PrimaryDomainDetail={}),S.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName=e.Result.CsrDetails.CommonName,S.SSLInfoSectionViewModel.PrimaryDomainDetail.DomainName=e.Result.CsrDetails.DomainName,S.domainName=e.Result.CsrDetails.DomainName,"COMODO"!=S.SSLInfoSectionViewModel.ProviderName.toUpperCase()&&"ACTIVE"==S.SSLInfoSectionViewModel.Status.toUpperCase()&&(e.Result.CsrDetails.DNSNames=null),null!=e.Result.CsrDetails.DNSNames&&""!=e.Result.CsrDetails.DNSNames){var t=e.Result.CsrDetails.DNSNames.split(",");S.addonDomains=[];for(var n=0;n<S.SSLInfoSectionViewModel.SanCount;n++){var a=[];null!=t[n]?a.CommonName=t[n]:a.CommonName="",a.DomainName="",a.ValidationType="",a.ValidationValue="",S.addonDomains.push(a)}}},onLoading:function(e){S.sslnotification.alerts.clear();var t=this.instance;t.activeNotification=S.sslnotification.stuckNotifications.addLoading("<B>Submitting CSR.</B> Please wait.",!1),t.isDisabled=!0,t.showError=!1},onError:function(e){S.sslnotification.alerts.clear(),S.sslnotification.alerts.addError(S.ErrorMsgRes.error_Site_SummaryMessage,S.sslnotificationAlertArguments),"noDomainName"==e.Msg||"noCommonName"==e.Msg?S.sslactivate.CSRCode.$setValidity("noDomainName",!1):"wildcard"==e.Msg?S.sslactivate.CSRCode.$setValidity("enterwildcard",!1):"nonWildcard"==e.Msg?S.sslactivate.CSRCode.$setValidity("enternonwildcard",!1):-1<e.Msg.indexOf("Domain in this CSR")?(S.errormessage=e.Msg,S.sslactivate.CSRCode.$setValidity("errorDomain",!1)):S.sslactivate.CSRCode.$setValidity("CSRInvalid",!1),$("html, body").animate({scrollTop:0},800)}}),S.ValidateCsr=new c.AsyncStateBehavior({constructor:function(){var t=this.instance;t.click=function(){if(null!=S.SSLInfoSectionViewModel.CSRCode&&""!=S.SSLInfoSectionViewModel.CSRCode){for(t.asyncStatus(c.AsyncStatus.Loading),S.SSLInfoSectionViewModel.CSR=S.SSLInfoSectionViewModel.CSRCode,S.SSLInfoSectionViewModel.SanDomainsDetail=[],indexAddon=0;indexAddon<S.addonDomains.length;indexAddon++){var e=[];e.CommonName=S.addonDomains[indexAddon].CommonName,e.DomainName=S.addonDomains[indexAddon].DomainName,e.ValidationType=S.addonDomains[indexAddon].ValidationType,e.ValidationValue=S.addonDomains[indexAddon].ValidationValue,S.SSLInfoSectionViewModel.SanDomainsDetail.push(e)}S.SSLInfoSectionViewModel.SanDomainsDetail=S.addonDomains,o.sslInfo.ValidateCsr(S.SSLInfoSectionViewModel,S.addonDomains).then(function(e){t.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e)})}}},onSuccess:function(e){for(var t=S.addonDomainCount=0;t<S.addonDomains.length;t++)""!=S.addonDomains[t].CommonName&&null!=S.addonDomains[t].CommonName&&(S.addonDomainCount+=1);this.instance;null==S.SSLInfoSectionViewModel.PrimaryDomainDetail&&(S.SSLInfoSectionViewModel.PrimaryDomainDetail={}),S.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName=e.Result.CsrDetails.CommonName,S.primaryEmail=e.Result.CsrDetails.Email,S.Organisation=e.Result.CsrDetails.Organisation,S.Department=e.Result.CsrDetails.OrganisationUnit,S.Location=e.Result.CsrDetails.Locality,S.State=e.Result.CsrDetails.State,S.GetAndAssignCountryName(e.Result.CsrDetails.Country),S.wizardstep=2,S.NextButtonClicked=!1,S.CommonName=e.Result.CsrDetails.CommonName,S.ClearSummaryMsgAndScrollTop()},onLoading:function(e){var t=this.instance;S.sslnotification.alerts.clear(),t.activeNotification=S.sslnotification.stuckNotifications.addLoading("<B>Submitting CSR.</B> Please wait.",!1),t.isDisabled=!0,t.showError=!1},onError:function(e){S.sslnotification.alerts.clear(),"positiveSSLCantBeRenewals"==e.Msg?S.sslnotification.alerts.addError(S.SSLInfoValidation.error_Site_Certificate_SpecialPromotionsCantBeRenewals,S.sslnotificationAlertArguments):S.sslnotification.alerts.addError(S.ErrorMsgRes.error_Site_SummaryMessage,S.sslnotificationAlertArguments),"noDomainName"==e.Msg||"noCommonName"==e.Msg?S.sslactivate.CSRCode.$setValidity("noDomainName",!1):"invalidSanEntered"==e.Msg?S.sslactivate.addondomainField.$setValidity("invaliddomain",!1):"wildcard"==e.Msg?S.sslactivate.CSRCode.$setValidity("enterwildcard",!1):"nonWildcard"==e.Msg?S.sslactivate.CSRCode.$setValidity("enternonwildcard",!1):"noMultiDomain"==e.Msg?S.sslactivate.CSRCode.$setValidity("multidomainnotallowed",!1):"activateMoreDomain"==e.Msg?S.sslactivate.CSRCode.$setValidity("activateMoreDomain",!1):"invalidDomainRenewal"==e.Msg?S.sslactivate.CSRCode.$setValidity("invalidDomainRenewal",!1):"samePrimaryDomainForRenewal"==e.Msg?S.sslactivate.CSRCode.$setValidity("samePrimaryDomainForRenewal",!1):"internalDomainNameNotAllowed"==e.Msg?S.sslactivate.CSRCode.$setValidity("internalDomainNameNotAllowed",!1):"sansParametersDoNotMatchWithCommonName"==e.Msg?S.sslactivate.CSRCode.$setValidity("sansParametersDoNotMatchWithCommonName",!1):"positiveSSLCantBeRenewals"==e.Msg?S.sslactivate.CSRCode.$setValidity("positiveSSLCantBeRenewals",!1):"specialPromotionsCantBeRenewals"==e.Msg?S.sslactivate.CSRCode.$setValidity("specialPromotionsCantBeRenewals",!1):"commonNameInCSRIsBlocked"==e.Msg?S.sslactivate.CSRCode.$setValidity("commonNameInCSRIsBlocked",!1):-1<e.Msg.indexOf("Domain in this CSR")?(S.errormessage=e.Msg,S.sslactivate.CSRCode.$setValidity("errorDomain",!1)):S.sslactivate.CSRCode.$setValidity("CSRInvalid",!1),$("html, body").animate({scrollTop:0},800)}}),S.GetApproverEmailList=new c.AsyncStateBehavior({constructor:function(){var t=this.instance;t.click=function(e){t.asyncStatus(c.AsyncStatus.Loading),o.sslInfo.GetApproverEmailList(S.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName,S.SSLInfoSectionViewModel.APIParameterValue,0).then(function(e){t.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e)})}},onSuccess:function(e){e.Result.AprroverEmailList.length<=10?S.PrimaryDomainIgnoreSearchOption={minimumResultsForSearch:-1}:S.PrimaryDomainIgnoreSearchOption={};this.instance;if(S.ClearSummaryMsgAndScrollTop(),S.SSLInfoSectionViewModel.IsGetApproverEmailListRequired){S.primarydomainapproveremaillist=e.Result.AprroverEmailList;var t=$("select#ddlApproverEmail");for(t.empty(),t.append($("<option selected></option>").val(S.SSLInfoRes.static_SelectOption).html(S.SSLInfoRes.static_SelectOption)),i=0;i<e.Result.AprroverEmailList.length;i++)t.append($("<option></option>").val(e.Result.AprroverEmailList[i]).html(e.Result.AprroverEmailList[i]))}""!=S.primarydomainapproveremail&&null!=S.primarydomainapproveremail&&t.select2("val",S.primarydomainapproveremail),"PAGELOAD"==S.GetApproverListReqFrom&&(S.wizardstep=3)},onLoading:function(e){var t=this.instance;S.sslnotification.alerts.clear(),t.activeNotification=S.sslnotification.stuckNotifications.addLoading("<B>Loading</B> Please wait.",!1),t.isDisabled=!0,t.showError=!1},onError:function(e){S.ApproverEmailListErrorCount+=1,S.sslnotification.alerts.clear(),S.sslnotification.alerts.addError(e.Msg,S.sslnotificationAlertArguments),$("html, body").animate({scrollTop:0},800),S.wizardstep=3}}),S.GetApproverEmailListForAddOns=new c.AsyncStateBehavior({constructor:function(){var n=this.instance;n.click=function(e,t){n.asyncStatus(c.AsyncStatus.Loading),o.sslInfo.GetApproverEmailList(e,S.SSLInfoSectionViewModel.APIParameterValue,t).then(function(e){n.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e,t)})}},onSuccess:function(e,t){e.Result.AprroverEmailList.length<=10?S.SecondaryDomainIgnoreSearchOption[e.Result.SanIndex]={minimumResultsForSearch:-1}:S.SecondaryDomainIgnoreSearchOption[e.Result.SanIndex]={};this.instance;S.sslnotification.alerts.clear();var n="#sanDropDown_"+e.Result.SanIndex,a=$(n);for(a.empty(),a.append($("<option selected></option>").val(S.SSLInfoRes.static_SelectOption).html(S.SSLInfoRes.static_SelectOption)),i=0;i<e.Result.AprroverEmailList.length;i++)a.append($("<option></option>").val(e.Result.AprroverEmailList[i]).html(e.Result.AprroverEmailList[i]));"ACTIVE"==S.SSLInfoSectionViewModel.Status&&a.select2("val",S.addonDomainApproverEmail[e.Result.SanIndex]),this.instance.asyncStatus(c.AsyncStatus.Active),"PAGELOAD"==S.GetApproverListReqFrom&&(S.wizardstep=3)},onLoading:function(e){var t=this.instance;S.sslnotification.alerts.clear(),t.activeNotification=S.sslnotification.stuckNotifications.addLoading("<B>Loading</B> Please wait.",!1),t.isDisabled=!0,t.showError=!1},onError:function(e){S.ApproverEmailListErrorCount+=1,S.sslnotification.alerts.clear(),S.sslnotification.alerts.addError(e.Msg,S.sslnotificationAlertArguments),$("html, body").animate({scrollTop:0},800),S.wizardstep=2}}),S.GetAndAssignCountryName=function(e){o.sslInfo.GetCountryName(e).then(function(e){S.Country=e})},S.bindApproverEmails=function(e,t,n,a,i){"Email"==n&&(null!=S.addonDomainApproverEmail||(S.addonDomainApproverEmail=[]),S.addonDomainApproverEmail[t]=S.SSLInfoRes.static_SelectOption,$("#sanDropDown_"+t).select2("val",S.SSLInfoRes.static_SelectOption),S.GetApproverEmailListForAddOns.click(e,t)),S.bindDomainsToValidateAndDCVMethod(e,n,"",a,"",t)},S.selecteddcvmethodofaddondomain=[],S.bindDomainsToValidateAndDCVMethod=function(e,t,n,a,i,o){"EMAIL"==t.toUpperCase()&&(S.SSLInfoSectionViewModel.IsGetApproverEmailListRequired=!0,"PRIMARYDROPDOWNCHANGE"==i&&(S.RemoveDomainNameFromDCVMethods(e,!0,!0,!0),S.primarydomainapproveremail=S.SSLInfoRes.static_SelectOption,n=S.primarydomainapproveremail,$("#primDomainDcvMethod").select2("val",S.SSLInfoRes.static_SelectOption))),"PRIMARY"!=a||"ACTIVE"!=S.SSLInfoSectionViewModel.Status||"EMAIL"!=t.toUpperCase()||""!=n&&null!=n&&null!=n&&n!=S.SSLInfoRes.static_SelectOption||(S.GetApproverListReqFrom="DROPDOWNCHANGE",S.GetApproverEmailList.click()),"PRIMARY"==a&&S.dcvUseSameMethodForAllDomains&&"PRIMARYDROPDOWNCHANGE"==i&&S.UseSameMethodForAddonDomains(t,!0),S.AddDCVMethodToList(t,e,n,a,o)},S.RemoveDomainNameFromDCVMethods=function(e,t,n,a){for(var i=0;i<S.domainstovalidateviaemail.length;i++)S.domainstovalidateviaemail[i].NAME==e&&t&&S.domainstovalidateviaemail.splice(i,1);for(i=0;i<S.domainstovalidateviahttp.length;i++)S.domainstovalidateviahttp[i].NAME==e&&n&&S.domainstovalidateviahttp.splice(i,1);for(i=0;i<S.domainstovalidateviadns.length;i++)S.domainstovalidateviadns[i].NAME==e&&a&&S.domainstovalidateviadns.splice(i,1)},S.ReplaceCommonNameIfModified=function(){if("ACTIVE"==S.SSLInfoSectionViewModel.Status)for(S.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName!=S.oldPrimaryDomain.CommonName&&S.ReplaceCommonNameIfModifiedOnReissue(S.oldPrimaryDomain.CommonName,S.SSLInfoSectionViewModel.PrimaryDomainDetail.CommonName,"PRIMARY"),domainInex=0;domainInex<S.addonDomains.length;domainInex++)S.oldAddonDomains[domainInex].OldCommonName!=S.addonDomains[domainInex].CommonName&&(S.ReplaceCommonNameIfModifiedOnReissue(S.oldAddonDomains[domainInex].OldCommonName,S.addonDomains[domainInex].CommonName,"SECONDARY"),S.oldAddonDomains[domainInex].OldCommonName=S.addonDomains[domainInex].CommonName)},S.ReplaceCommonNameIfModifiedOnReissue=function(e,t,n){for(var a=0;a<S.domainstovalidateviaemail.length;a++)S.domainstovalidateviaemail[a].NAME==e&&S.domainstovalidateviaemail[a].DOMAINTYPE==n&&(S.domainstovalidateviaemail[a].NAME=t);for(a=0;a<S.domainstovalidateviahttp.length;a++)S.domainstovalidateviahttp[a].NAME==e&&S.domainstovalidateviahttp[a].DOMAINTYPE==n&&(S.domainstovalidateviahttp[a].NAME=t);for(a=0;a<S.domainstovalidateviadns.length;a++)S.domainstovalidateviadns[a].NAME==e&&S.domainstovalidateviadns[a].DOMAINTYPE==n&&(S.domainstovalidateviadns[a].NAME=t)},S.UseSameMethodForAddonDomains=function(e,t){S.addonDomainApproverEmail=[];for(var n=0;n<S.addonDomains.length;n++){S.selecteddcvmethodofaddondomain[n]="",S.addonDcvMethodDisabled=!1,S.RemoveDomainNameFromDCVMethods(S.addonDomains[n].CommonName,!0,!0,!0),$("#sanDropDown_"+n).select2("val",S.SSLInfoRes.static_SelectOption)}if(""!=e&&t)for(var a,n=0;n<S.addonDomains.length;n++){""!=S.addonDomains[n].CommonName&&null!=S.addonDomains[n].CommonName&&((a=[]).NAME=S.addonDomains[n].CommonName,a.DCV=e,a.EMAILADDRESS="",a.DOMAINTYPE="SECONDARY",S.selecteddcvmethodofaddondomain[n]=e,S.addonDcvMethodDisabled=!0,"EMAIL"==e.toUpperCase()&&""!=S.addonDomains[n].CommonName&&S.GetApproverEmailListForAddOns.click(S.addonDomains[n].CommonName,n),S.AddDCVMethodToList(e,S.addonDomains[n].CommonName,"","SECONDARY",n))}},S.IsEditAddonDomainModalPopUpOpened=!1,S.openEditAddonDomainModalPopUp=function(t){var e;S.IsEditAddonDomainModalPopUpOpened||((e=a.open({templateUrl:"/Domains/SSL/EditAddonDomain",controller:"sslEditAddonDomainModalCtrl",size:"lg",backdrop:"static",resolve:{addonDomainName:function(){return S.addonDomains[t]},primaryDomainDetails:function(){return S.SSLInfoSectionViewModel.PrimaryDomainDetail},IsSanActivationWithSubDomainsOnly:function(){return S.SSLInfoSectionViewModel.IsSanActivationWithSubDomainsOnly},IsSanReissueEditWithSubDomainOnly:function(){return S.SSLInfoSectionViewModel.IsSanReissueEditWithSubDomainOnly}}})).result.then(function(e){S.IsEditAddonDomainModalPopUpOpened=!1,""!=e&&(S.addonDomains[t].CommonName=e,S.sslnotification.stuckNotifications.addSuccess(S.ErrorMsgRes.error_Site_AddonChangeSucceeded,S.sslnotificationAlertArgumentsforSanEdit))}),e.opened.then(function(){S.IsEditAddonDomainModalPopUpOpened=!0}))},S.IsRemoveAddonDomainModalPopUpOpened=!1,S.openRemoveAddonDomainModalPopUp=function(t){var e;S.IsRemoveAddonDomainModalPopUpOpened||((e=a.open({templateUrl:"/Domains/SSL/Common/PromptRemove",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return S.SSLInfoRes.static_RemoveAddonDomainTitle},modalContent:function(){return S.SSLInfoRes.static_RemoveAddonDomainContent}}})).result.then(function(e){S.IsRemoveAddonDomainModalPopUpOpened=!1,"yes"==e&&(S.addonDomains.splice(t,1),S.SSLInfoSectionViewModel.SanCount=S.SSLInfoSectionViewModel.SanCount-1)},function(){e=null}),e.opened.then(function(){S.IsRemoveAddonDomainModalPopUpOpened=!0}))},S.GetDcvMethodName=function(e){var t="";switch(e){case 0:t="Email";break;case 1:t="File";break;case 2:t="Dns"}return t},S.GetValidationType=function(e){var t="";switch(e){case 0:t="Domain";break;case 1:t="Organization";break;case 2:t="Extended"}return t},S.subDomainNameforQuicSSLPremium="",S.domainIndex="",S.validateDomain=new c.AsyncStateBehavior({constructor:function(){var a=this.instance;a.click=function(e,t,n){a.asyncStatus(c.AsyncStatus.Loading),S.subDomainNameforQuicSSLPremium=t,S.domainIndex=n,o.sslInfo.ValidateDomainInfo(e).then(function(e){a.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e)})}},onSuccess:function(e){this.instance.showLoadPanel=!1,newDomain=e.Result,""==newDomain||""!=newDomain&&newDomain.toLowerCase()!=S.subDomainNameforQuicSSLPremium.toLowerCase()?(S.sslactivate.addondomainField.$setValidity("Saninvalidforquicksslpremium",!1),S.ErrorOccuredInReissue=!0,S.addOnErrorLength=S.domainIndex):(S.sslactivate.addondomainField.$setValidity("Saninvalidforquicksslpremium",!0),S.ErrorOccuredInReissue=!1)},onActive:function(e){this.instance},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){this.instance.showErrors=!0,S.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}}),S.AddonDomainValidation=function(e,t){var n,a,i;S.CheckDuplicateCommonNames(),S.CheckIsMinimumAddonDomainEntered(),!S.SSLInfoSectionViewModel.IsSanActivationWithSubDomainsOnly||"NEWPURCHASE"!=S.SSLInfoSectionViewModel.Status&&"NEWRENEWAL"!=S.SSLInfoSectionViewModel.Status||(n=S.SSLInfoSectionViewModel.PrimaryDomainDetail.DomainName,""!=e&&(e.match(n+"$")!=n&&null!=S.sslactivate.addondomainField?(S.sslactivate.addondomainField.$setValidity("invalidSan",!1),S.addOnErrorLength=t):S.sslactivate.addondomainField.$setValidity("invalidSan",!0))),S.SSLInfoSectionViewModel.IsSanReissueEditWithSubDomainOnly&&"ACTIVE"==S.SSLInfoSectionViewModel.Status&&(a=S.addonDomains[t].DomainName,""!=e&&(e.match(a+"$")!=a&&null!=S.sslactivate.addondomainField?(S.sslactivate.addondomainField.$setValidity("invalidSubDomain",!1),S.ErrorOccuredInReissue=!0,S.addOnErrorLength=t):(S.sslactivate.addondomainField.$setValidity("invalidSubDomain",!0),S.ErrorOccuredInReissue=!1)),""!=e&&""!=S.addonDomains[0].DomainName&&null!=S.addonDomains[0].DomainName&&null!=S.addonDomains[0].DomainName&&-1!=S.addonDomains[0].DomainName.indexOf(".")&&(i=S.addonDomains[0].DomainName,"QUICKSSL PREMIUM"==S.SSLInfoSectionViewModel.SSlType.toUpperCase()&&S.validateDomain.click(e,i.toLowerCase(),t))),S.ReplaceCommonNameIfModified(),null!=S.sslactivate.addondomainField&&S.sslactivate.addondomainField.$setValidity("invaliddomain",!0)},S.CheckIsMinimumAddonDomainEntered=function(){if(null!=S.sslactivate.addondomainField){for(var e=0,t=0;t<S.addonDomains.length;t++)""!=S.addonDomains[t].CommonName&&(e+=1);null!=S.sslactivate.addondomainField&&(e>=S.SSLInfoSectionViewModel.MinimumSanToActivate?S.sslactivate.addondomainField.$setValidity("miniumSanNotAdded",!0):(S.sslactivate.addondomainField.$setValidity("invalidSan",!0),S.sslactivate.addondomainField.$setValidity("invalidSubDomain",!0),S.sslactivate.addondomainField.$setValidity("miniumSanNotAdded",!1),S.addOnErrorLength=0))}},S.ClearSummaryMsgAndScrollTop=function(){S.sslnotification.alerts.clear(),$("html, body").animate({scrollTop:0},800)},S.AssignValuesToModel=function(){if(S.SSLInfoSectionViewModel.CSR=S.SSLInfoSectionViewModel.CSRCode,null==S.SSLInfoSectionViewModel.CompanyContactDetails&&(S.SSLInfoSectionViewModel.CompanyContactDetails={}),S.SSLInfoSectionViewModel.CompanyContactDetails.CompanyName=S.AddressList.CompanyName,S.SSLInfoSectionViewModel.CompanyContactDetails.AssumedName=S.AddressList.AssumedName,S.SSLInfoSectionViewModel.CompanyContactDetails.Department=S.AddressList.Department,S.SSLInfoSectionViewModel.CompanyContactDetails.CompanyNumber=S.AddressList.CompanyNumber,S.SSLInfoSectionViewModel.CompanyContactDetails.DunsNumber=S.AddressList.DunsNumber,S.SSLInfoSectionViewModel.CompanyContactDetails.IncorporatingAgency=S.AddressList.IncorporatingAgency,S.SSLInfoSectionViewModel.CompanyContactDetails.CityOfIncorporation=S.AddressList.CityOfIncorporation,S.SSLInfoSectionViewModel.CompanyContactDetails.StateProvinceOfIncorporation=S.AddressList.StateprovinceofIncorporation,S.SSLInfoSectionViewModel.CompanyContactDetails.CountryOfIncorporation=S.AddressList.CountryofIncorporation,S.SSLInfoSectionViewModel.CompanyContactDetails.Address1=S.AddressList.Address,S.SSLInfoSectionViewModel.CompanyContactDetails.Address2=S.AddressList.Address1,S.SSLInfoSectionViewModel.CompanyContactDetails.POBox=S.AddressList.POBox,S.SSLInfoSectionViewModel.CompanyContactDetails.City=S.AddressList.City,S.SSLInfoSectionViewModel.CompanyContactDetails.StateProvince=S.AddressList.StateProvince,S.SSLInfoSectionViewModel.CompanyContactDetails.PostalCode=S.AddressList.ZIPPostalCode,S.SSLInfoSectionViewModel.CompanyContactDetails.Country=S.AddressList.Country,S.SSLInfoSectionViewModel.CompanyContactDetails.AdminEmail=S.AddressList.EmailAddress,S.SSLInfoSectionViewModel.CompanyContactDetails.BusinessCategory=S.AddressList.BusinessCategory,S.SSLInfoSectionViewModel.CompanyContactDetails.DateOfIncorporation=S.AddressList.DateofIncorporation,""!=S.AddressList.PhoneNumber&&""!=S.AddressList.PhoneCode?S.SSLInfoSectionViewModel.CompanyContactDetails.PhoneNumber=S.AddressList.PhoneCode+"."+S.AddressList.PhoneNumber:S.SSLInfoSectionViewModel.CompanyContactDetails.PhoneNumber="",S.SSLInfoSectionViewModel.CompanyContactDetails.PhoneNumberExt=S.AddressList.PhoneNumberExt,""!=S.AddressList.FaxNumber&&""!=S.AddressList.FaxCode?S.SSLInfoSectionViewModel.CompanyContactDetails.FaxNumber=S.AddressList.FaxCode+"."+S.AddressList.FaxNumber:S.SSLInfoSectionViewModel.CompanyContactDetails.FaxNumber="",null==S.SSLInfoSectionViewModel.CallbackContactDetails&&(S.SSLInfoSectionViewModel.CallbackContactDetails={}),S.SSLInfoSectionViewModel.CallbackContactDetails.FirstName=S.CallBackContacts.FirstName,S.SSLInfoSectionViewModel.CallbackContactDetails.LastName=S.CallBackContacts.LastName,S.SSLInfoSectionViewModel.CallbackContactDetails.JobTitle=S.CallBackContacts.JobTitle,S.SSLInfoSectionViewModel.CallbackContactDetails.CallbackMethod=S.CallBackContacts.CallBackMethod,""!=S.CallBackContacts.PhoneCode&&""!=S.CallBackContacts.Phone?S.SSLInfoSectionViewModel.CallbackContactDetails.PhoneNumber=S.CallBackContacts.PhoneCode+"."+S.CallBackContacts.Phone:S.SSLInfoSectionViewModel.CallbackContactDetails.PhoneNumber="",S.SSLInfoSectionViewModel.CallbackContactDetails.PhoneNumberExt=S.CallBackContacts.PhoneExt,""!=S.CallBackContacts.Fax&&""!=S.CallBackContacts.FaxCode?S.SSLInfoSectionViewModel.CallbackContactDetails.FaxNumber=S.CallBackContacts.FaxCode+"."+S.CallBackContacts.Fax:S.SSLInfoSectionViewModel.CallbackContactDetails.FaxNumber="",S.SSLInfoSectionViewModel.CallbackContactDetails.EmailAddress=S.CallBackContacts.EmailAddress,S.SSLInfoSectionViewModel.CallbackContactDetails.CompanyName=S.CallBackContacts.CompanyName,S.SSLInfoSectionViewModel.CallbackContactDetails.Department=S.CallBackContacts.Department,S.SSLInfoSectionViewModel.CallbackContactDetails.Address1=S.CallBackContacts.Address,S.SSLInfoSectionViewModel.CallbackContactDetails.Address2=S.CallBackContacts.Address1,S.SSLInfoSectionViewModel.CallbackContactDetails.POBox=S.CallBackContacts.POBox,S.SSLInfoSectionViewModel.CallbackContactDetails.City=S.CallBackContacts.City,S.SSLInfoSectionViewModel.CallbackContactDetails.StateProvince=S.CallBackContacts.StateProvince,S.SSLInfoSectionViewModel.CallbackContactDetails.PostalCode=S.CallBackContacts.ZIPPostalCode,S.SSLInfoSectionViewModel.CallbackContactDetails.Country=S.CallBackContacts.Country,S.SSLInfoSectionViewModel.CallbackContactDetails.DestinationSame=S.CallBackContacts.DestinationSame,null==S.SSLInfoSectionViewModel.AdminContactDetails&&(S.SSLInfoSectionViewModel.AdminContactDetails={},S.SSLInfoSectionViewModel.AdminContactDetails.Address={}),S.SSLInfoSectionViewModel.AdminContactDetails.FirstName=S.AdminContacts.FirstName,S.SSLInfoSectionViewModel.AdminContactDetails.LastName=S.AdminContacts.LastName,S.SSLInfoSectionViewModel.AdminContactDetails.Organization=S.AdminContacts.CompanyName,S.SSLInfoSectionViewModel.AdminContactDetails.JobTitle=S.AdminContacts.JobTitle,S.SSLInfoSectionViewModel.AdminContactDetails.Address1=S.AdminContacts.Address,S.SSLInfoSectionViewModel.AdminContactDetails.Address2=S.AdminContacts.Address1,S.SSLInfoSectionViewModel.AdminContactDetails.City=S.AdminContacts.City,S.SSLInfoSectionViewModel.AdminContactDetails.StateProvince=S.AdminContacts.StateProvince,S.SSLInfoSectionViewModel.AdminContactDetails.PostalCode=S.AdminContacts.ZIPPostalCode,S.SSLInfoSectionViewModel.AdminContactDetails.Country=S.AdminContacts.Country,""!=S.AdminContacts.PhoneCode&&""!=S.AdminContacts.PhoneNumber?S.SSLInfoSectionViewModel.AdminContactDetails.Phone=S.AdminContacts.PhoneCode+"."+S.AdminContacts.PhoneNumber:S.SSLInfoSectionViewModel.AdminContactDetails.Phone="",S.SSLInfoSectionViewModel.AdminContactDetails.PhoneExt=S.AdminContacts.PhoneNumberExt,""!=S.AdminContacts.FaxNumber&&""!=S.AdminContacts.FaxCode?S.SSLInfoSectionViewModel.AdminContactDetails.Fax=S.AdminContacts.FaxCode+"."+S.AdminContacts.FaxNumber:S.SSLInfoSectionViewModel.AdminContactDetails.Fax="",S.SSLInfoSectionViewModel.AdminContactDetails.EmailAddress=S.AdminContacts.EmailAddress,null==S.SSLInfoSectionViewModel.TechContactDetails&&(S.SSLInfoSectionViewModel.TechContactDetails={},S.SSLInfoSectionViewModel.TechContactDetails.Address={}),S.SSLInfoSectionViewModel.TechContactDetails.FirstName=S.TechContacts.FirstName,S.SSLInfoSectionViewModel.TechContactDetails.LastName=S.TechContacts.LastName,S.SSLInfoSectionViewModel.TechContactDetails.Organization=S.TechContacts.CompanyName,S.SSLInfoSectionViewModel.TechContactDetails.JobTitle=S.TechContacts.JobTitle,S.SSLInfoSectionViewModel.TechContactDetails.Address1=S.TechContacts.Address,S.SSLInfoSectionViewModel.TechContactDetails.Address2=S.TechContacts.Address1,S.SSLInfoSectionViewModel.TechContactDetails.City=S.TechContacts.City,S.SSLInfoSectionViewModel.TechContactDetails.StateProvince=S.TechContacts.StateProvince,S.SSLInfoSectionViewModel.TechContactDetails.PostalCode=S.TechContacts.ZIPPostalCode,S.SSLInfoSectionViewModel.TechContactDetails.Country=S.TechContacts.Country,""!=S.TechContacts.PhoneCode&&""!=S.TechContacts.PhoneNumber?S.SSLInfoSectionViewModel.TechContactDetails.Phone=S.TechContacts.PhoneCode+"."+S.TechContacts.PhoneNumber:S.SSLInfoSectionViewModel.TechContactDetails.Phone="",S.SSLInfoSectionViewModel.TechContactDetails.PhoneExt=S.TechContacts.PhoneNumberExt,""!=S.TechContacts.FaxNumber&&""!=S.TechContacts.FaxCode?S.SSLInfoSectionViewModel.TechContactDetails.Fax=S.TechContacts.FaxCode+"."+S.TechContacts.FaxNumber:S.SSLInfoSectionViewModel.TechContactDetails.Fax="",S.SSLInfoSectionViewModel.TechContactDetails.EmailAddress=S.TechContacts.EmailAddress,S.SSLInfoSectionViewModel.IsDCVStepRequired){var e=[];e.CommonName="",e.DomainName="",e.ValidationType="",e.ValidationValue="",e.IsHttpDCVUsed=!1,e.IsDNSDCVUsed=!1;var t,n=[];for(S.SSLInfoSectionViewModel.SanDomainsDetail=[],o=0;o<S.domainstovalidateviaemail.length;o++){"PRIMARY"==S.domainstovalidateviaemail[o].DOMAINTYPE?(e.CommonName=S.domainstovalidateviaemail[o].NAME,e.DomainName=S.domainstovalidateviaemail[o].NAME,e.ValidationType=S.domainstovalidateviaemail[o].DCV,e.ValidationValue=S.domainstovalidateviaemail[o].EMAILADDRESS,e.IsHttpDCVUsed=!1,e.IsDNSDCVUsed=!1):((t=[]).CommonName=S.domainstovalidateviaemail[o].NAME,t.DomainName=S.domainstovalidateviaemail[o].NAME,t.ValidationType=S.domainstovalidateviaemail[o].DCV,t.ValidationValue=S.domainstovalidateviaemail[o].EMAILADDRESS,t.SanOrder=S.domainstovalidateviaemail[o].SanOrder,n.push(t))}for(o=0;o<S.domainstovalidateviahttp.length;o++){"PRIMARY"==S.domainstovalidateviahttp[o].DOMAINTYPE?(e.CommonName=S.domainstovalidateviahttp[o].NAME,e.DomainName=S.domainstovalidateviahttp[o].NAME,e.ValidationType=S.domainstovalidateviahttp[o].DCV,e.ValidationValue=S.domainstovalidateviahttp[o].EMAILADDRESS,e.IsHttpDCVUsed=!0,e.IsDNSDCVUsed=!1):((t=[]).CommonName=S.domainstovalidateviahttp[o].NAME,t.DomainName=S.domainstovalidateviahttp[o].NAME,t.ValidationType=S.domainstovalidateviahttp[o].DCV,t.ValidationValue=S.domainstovalidateviahttp[o].EMAILADDRESS,t.SanOrder=S.domainstovalidateviahttp[o].SanOrder,n.push(t))}for(o=0;o<S.domainstovalidateviadns.length;o++){"PRIMARY"==S.domainstovalidateviadns[o].DOMAINTYPE?(e.CommonName=S.domainstovalidateviadns[o].NAME,e.DomainName=S.domainstovalidateviadns[o].NAME,e.ValidationType=S.domainstovalidateviadns[o].DCV,e.ValidationValue=S.domainstovalidateviadns[o].EMAILADDRESS,e.IsHttpDCVUsed=!1,e.IsDNSDCVUsed=!0):((t=[]).CommonName=S.domainstovalidateviadns[o].NAME,t.DomainName=S.domainstovalidateviadns[o].NAME,t.ValidationType=S.domainstovalidateviadns[o].DCV,t.ValidationValue=S.domainstovalidateviadns[o].EMAILADDRESS,t.SanOrder=S.domainstovalidateviadns[o].SanOrder,n.push(t))}var a=u("orderBy")(n,"SanOrder");S.SSLInfoSectionViewModel.SanDomainsDetail=a,S.SSLInfoSectionViewModel.IsSan&&0<S.addonDomainCount&&"COMODO"!=S.SSLInfoSectionViewModel.ProviderName&&(S.SSLInfoSectionViewModel.SanDomainsDetail=S.addonDomains),0<S.domainstovalidateviahttp.length&&0==S.domainstovalidateviaemail.length&&0==S.domainstovalidateviadns.length?S.SSLInfoSectionViewModel.IsHttpDCVUsed=!0:S.SSLInfoSectionViewModel.IsHttpDCVUsed=!1,0<S.domainstovalidateviadns.length&&0==S.domainstovalidateviahttp.length&&0==S.domainstovalidateviaemail.length?S.SSLInfoSectionViewModel.IsDNSDCVUsed=!0:S.SSLInfoSectionViewModel.IsDNSDCVUsed=!1,S.SSLInfoSectionViewModel.PrimaryDomainDetail=e}else{for(var i="",o=0;o<S.addonDomains.length;o++)null!=S.addonDomains[o].CommonName&&""!=S.addonDomains[o].CommonName&&null!=S.addonDomains[o].CommonName&&(i=""==i?S.addonDomains[o].CommonName:i+","+S.addonDomains[o].CommonName);S.SSLInfoSectionViewModel.DnsNames=i}S.SSLInfoSectionViewModel.PrimaryDomainDetail.ValidationValue==S.SSLInfoRes.static_SelectOption&&(S.SSLInfoSectionViewModel.PrimaryDomainDetail.ValidationValue="")},S.WizardStepCancelClick=function(e){if(1<S.wizardstep)if(""!=e&&null!=e&&null!=e&&S.isConfirmClicked)window.location="/domains/ssl/ProductPage/"+S.SSLInfoSectionViewModel.CertificateId+"/"+S.domainName;else{if(""!=e&&null!=e&&null!=e&&"productlist"==e.toLowerCase())for(var t=S.wizardstep;1<t;t--)S.ClearValuesOnStepBackward(t);S.wizardstep=1}else 1==S.wizardstep&&o.sslInfo.RedirectProductPageJSON(S.SSLInfoSectionViewModel.CertificateId).then(function(e){return e.Error?(S.sslnotification.alerts.clear(),S.sslnotification.alerts.addError(e.Msg,S.sslnotificationAlertArguments),$("html, body").animate({scrollTop:0},800),!1):void(""!=e.Result.PrimaryDomainName&&null!=e.Result.PrimaryDomainName&&null!=e.Result.PrimaryDomainName?(t=e.Msg,window.location=t):window.location="/productlist/sslcertificates");var t})},S.ClearValuesOnStepBackward=function(e){if(S.sslnotification.alerts.clear(),S.SSLInfoSectionViewModel.IsDCVStepRequired&&e<3)for("COMODO"==S.SSLInfoSectionViewModel.ProviderName&&(S.selecteddcvmethod=S.SSLInfoRes.static_SelectOption,S.primarydomainapproveremail=S.SSLInfoRes.static_SelectOption,S.domainstovalidateviaemail=[],S.domainstovalidateviahttp=[],S.domainstovalidateviadns=[]),S.dcvUseSameMethodForAllDomains=!1,index=0;index<S.selecteddcvmethodofaddondomain.length;index++)S.selecteddcvmethodofaddondomain[index]="",S.addonDcvMethodDisabled=!1},S.AddDCVMethodToList=function(e,t,n,a,i,o){if(""!=t&&null!=t&&null!=t){var s=[];if(s.NAME=t,s.DCV=e,s.SanOrder=i,"COMODO"==S.SSLInfoSectionViewModel.ProviderName&&("COMODO"!=S.SSLInfoSectionViewModel.ProviderName||"EMAIL"!=e.toUpperCase()||"NEWPURCHASE"!=S.SSLInfoSectionViewModel.Status&&"NEWRENEWAL"!=S.SSLInfoSectionViewModel.Status)&&"COMODO"==S.SSLInfoSectionViewModel.ProviderName&&"EMAIL"!=e.toUpperCase()?"FILE"==e.toUpperCase()?s.EMAILADDRESS=S.SSLInfoRes.static_File_Based:s.EMAILADDRESS=S.SSLInfoRes.static_DNS_Based:s.EMAILADDRESS=null!=i&&"PAGELOAD"!=o?n[i]:n,s.DOMAINTYPE=a,"EMAIL"==e.toUpperCase()){for(index=0;index<S.domainstovalidateviaemail.length;index++){if(S.domainstovalidateviaemail[index].NAME==t){S.domainstovalidateviaemail[index].DCV=e,S.domainstovalidateviaemail[index].EMAILADDRESS=null!=i&&"PAGELOAD"!=o?n[i]:n,S.domainstovalidateviaemail[index].DOMAINTYPE=a;break}S.RemoveDomainNameFromDCVMethods(t,!0,!0,!0),S.domainstovalidateviaemail.push(s);break}0==S.domainstovalidateviaemail.length&&S.domainstovalidateviaemail.push(s),S.RemoveDomainNameFromDCVMethods(t,!1,!0,!0)}else if("FILE"==e.toUpperCase()){for(index=0;index<S.domainstovalidateviahttp.length;index++){if(S.domainstovalidateviahttp[index].NAME==t){S.domainstovalidateviahttp[index].DCV=e,"COMODO"!=S.SSLInfoSectionViewModel.ProviderName?S.domainstovalidateviahttp[index].EMAILADDRESS=n:"NEWPURCHASE"==S.SSLInfoSectionViewModel.Status||"NEWRENEWAL"==S.SSLInfoSectionViewModel.Status?S.domainstovalidateviahttp[index].EMAILADDRESS=S.SSLInfoRes.static_File_Based:S.domainstovalidateviahttp[index].EMAILADDRESS="",S.domainstovalidateviahttp[index].DOMAINTYPE=a;break}S.RemoveDomainNameFromDCVMethods(t,!0,!0,!0),S.domainstovalidateviahttp.push(s);break}0==S.domainstovalidateviahttp.length&&S.domainstovalidateviahttp.push(s),S.RemoveDomainNameFromDCVMethods(t,!0,!1,!0)}else if("DNS"==e.toUpperCase()){for(index=0;index<S.domainstovalidateviadns.length;index++){if(S.domainstovalidateviadns[index].NAME==t){S.domainstovalidateviadns[index].DCV=e,"COMODO"!=S.SSLInfoSectionViewModel.ProviderName?S.domainstovalidateviadns[index].EMAILADDRESS=n:"NEWPURCHASE"==S.SSLInfoSectionViewModel.Status||"NEWRENEWAL"==S.SSLInfoSectionViewModel.Status?S.domainstovalidateviadns[index].EMAILADDRESS=S.SSLInfoRes.static_DNS_Based:S.domainstovalidateviadns[index].EMAILADDRESS="",S.domainstovalidateviadns[index].DOMAINTYPE=a;break}S.RemoveDomainNameFromDCVMethods(t,!0,!0,!0),S.domainstovalidateviadns.push(s);break}0==S.domainstovalidateviadns.length&&S.domainstovalidateviadns.push(s),S.RemoveDomainNameFromDCVMethods(t,!0,!0,!1)}}},S.ValidateTLD=function(e){var t=e.split("@")[1];if(null!=t){var n,a,i=t.indexOf("."),o=!1;return-1!=i&&(n=t.substr(i+1,t.length-i),a=nc_Val_AlphaAndDot,""!=n&&(o=!!n.match(a))),o}},S.ClearUnselectedDropdownValidationMsgs=function(){null!=S.frmCallBackContact&&S.frmCallBackContact.ddlCallBackMethod.$setValidity("invalidCallBackMethod",!0)},S.IsReissueConfirmationOpen=!1,S.ReissueModel=function(){var e;S.IsReissueConfirmationOpen||((e=a.open({templateUrl:"/Common/PromptRemove",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return"Certificate Reissue"},modalContent:function(){return S.SSLInfoRes.static_ReissuePrompt}}})).result.then(function(e){S.IsReissueConfirmationOpen=!1,"yes"==e&&S.ValidateCsr.click()},function(){S.IsReissueConfirmationOpen=!1,e=null}),e.opened.then(function(){S.IsReissueConfirmationOpen=!0}))}}]),app.controller("toolsCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","$location","notificationService","$timeout","$window",function(e,t,n,a,i,o,s,r,c){e.pageNotification=new s.instance;var l=s.getUrlNotificationKey();"s_dcp"==l&&e.pageNotification.stuckNotifications.addSuccess(ToolsRes.msg_contactsSavedSuccessfully,{hasClose:!0,isAutoHide:!0}),"s_dnsp"==l&&e.pageNotification.stuckNotifications.addSuccess(ToolsRes.msg_dnsSavedSuccessfully,{hasClose:!0,isAutoHide:!0})}]),app.directive("focusOn",["$timeout",function(a){return{restrict:"A",link:function(e,t,n){e.$watch(n.focusOn,function(e){a(function(){e?t.focus():t.blur()})})}}}]),app.directive("focusOnSelect2",["$timeout",function(a){return{restrict:"A",link:function(e,t,n){e.$watch(n.focusOnSelect2,function(e){e&&a(function(){t.select2("open")})})}}}]),app.directive("focusOnTooltip",["$timeout",function(a){return{restrict:"A",link:function(e,t,n){e.$watch(n.focusOnTooltip,function(e){e&&a(function(){var e=t.find(".tooltip-toggle");e&&angular.element(e).click()})})}}}]),app.directive("infiniteScroll",["$rootScope","$window","$timeout",function(c,l,e){return{link:function(n,a,i){var o,t,s,r;return l=angular.element(l),s=0,null!=i.infiniteScrollDistance&&n.$watch(i.infiniteScrollDistance,function(e){return s=parseInt(e,10)}),o=!(r=!0),null!=i.infiniteScrollDisabled&&n.$watch(i.infiniteScrollDisabled,function(e){if((r=!e)&&o)return o=!1,t()}),t=function(){var e=l.height()+l.scrollTop(),t=a.offset().top+a.height()-e<=l.height()*s;return t&&r?c.$$phase?n.$eval(i.infiniteScroll):n.$apply(i.infiniteScroll):t?o=!0:void 0},l.on("scroll",t),n.$on("$destroy",function(){return l.off("scroll",t)}),e(function(){return!i.infiniteScrollImmediateCheck||n.$eval(i.infiniteScrollImmediateCheck)?t():void 0},0)}}}]),app.directive("initResponsiveTooltip",["$compile","$timeout","$parse",function(o,s,r){return{restrict:"A",replace:!1,link:function(n,a,e){function t(){s(function(){var e,t=a.find("[rel]").attr("rel");!t||(e=document.querySelector('[id="'+t.replace("toggle","tip")+'"]'))&&o(angular.element(e).contents())(n)})}var i;e.responsiveTooltipSettings?(i=r(e.responsiveTooltipSettings),n.$watch(i,function(e){a.responsiveTooltip(e),t()})):(a.responsiveTooltip(),t())}}}]),app.directive("dynamicResponsiveTooltip",["$timeout","$compile",function(o,s){return{restrict:"A",replace:!1,scope:{tooltipUpdateCondition:"="},link:function(n,a){function i(){o(function(){var e,t=a.find("[rel]").attr("rel");!t||(e=document.querySelector('[id="'+t.replace("toggle","tip")+'"]'))&&(s(angular.element(e).contents())(n),o(function(){a.responsiveTooltip()}))})}n.$watch("tooltipUpdateCondition",function(e,t){if(e!=t)if(null==e){var n=a.find("[rel]").attr("rel");if(n)return void document.querySelector('[id="'+n.replace("toggle","tip")+'"]').remove()}else a.responsiveTooltip(),i()}),null!=n.tooltipUpdateCondition&&o(function(){a.responsiveTooltip(),i()})}}}]),app.directive("htmlResponsiveTooltip",["$timeout","$compile","$parse",function($timeout,$compile,$parse){return{restrict:"A",replace:!1,link:function postLink(scope,elm,attrs,ctrl){var elementTooltipContent=elm.find(".tooltip");elm.find(".tooltip").remove();var showedTooltipElement=null;scope.$on("$destroy",function(){});var htmlTooltipGetter=$parse(attrs.htmlResponsiveTooltip),responsiveSetting={name:attrs.responsiveTooltipSetting,value:null,keys:null};null!=responsiveSetting.name&&null!=ResponsiveTooltipSetting()[responsiveSetting.name]&&(responsiveSetting.keys=ResponsiveTooltipSetting()[responsiveSetting.name]),scope.$watch(htmlTooltipGetter,function(tooltipHtml){if(null!=responsiveSetting.keys)for(var availableClasses=elm[0].className.replace("responsive-tooltip",""),classList=availableClasses.split(" "),i=0;i<classList.length;i++)if(null!=responsiveSetting.keys[classList[i]]){responsiveSetting.value=responsiveSetting.keys[classList[i]];break}null!=tooltipHtml&&elementTooltipContent.html(tooltipHtml),$timeout(function(){var attVal=null,obj,tipElement;null!=responsiveSetting.value?(elm.responsiveTooltip(responsiveSetting.value),null!=responsiveSetting.value.tipToggle&&(obj=elm,tipElement=eval(responsiveSetting.value.tipToggle)[0],null!=tipElement&&(attVal=angular.element(tipElement).attr("rel")))):elm.responsiveTooltip(),null==attVal&&(attVal=elm.find("[rel]").attr("rel")),attVal&&(showedTooltipElement=document.querySelector('[id="'+attVal.replace("toggle","tip")+'"]'),showedTooltipElement&&(angular.element(showedTooltipElement).html(elementTooltipContent),$compile(angular.element(showedTooltipElement).contents())(scope)))},0)})}}}]),app.directive("ncBindSanitizeHtml",["$sce","sanitizeHtmlService","$compile","$parse",function(a,i,e,t){return{restrict:"A",link:function(e,t,n){e.$watch(a.parseAsHtml(n.ncBindSanitizeHtml),function(e){null!=e&&(e=i(e)),t.html(e||"")})}}}]),app.directive("ncPluralTemplate",["$compile","$timeout","httpRepository","$templateCache",function(i,e,t,o){return{require:"^?templateId",link:function(t,n,a){t.$watch(a.ncPluralTemplate,function(e){o.get(null,e).then(function(){t.$watch(a.templateId,function(e){null!=e&&n.html(i(o.get(e))(t))})})})}}}]),app.directive("ncQuicTip",[function(){return{restrict:"A",replace:!1,link:function(e,t){var n=t.quicktip();e.$on("$destroy",function(){$(t).mouseleave(),-1!=$(n).length&&$(n).mouseleave()})}}}]),app.directive("ncScrollToThis",function(){return{restrict:"A",link:function(e,t){var n=$(t).offset().top-100;$("html, body").animate({scrollTop:n},0)}}}),function(){function o(e){return(jQuery._data(window,"events")[e]||[]).map(function(e){return e.handler})}app.directive("ncStickyFilters",function(){return{restrict:"A",link:function(e,t){var n=function(e,t){var a={};e.forEach(function(e){a[e]=o(e)}),t(),e.forEach(function(e){});var i={};return e.forEach(function(e){var t=o(e),n=a[e];i[e]=t.filter(function(e){return n.indexOf(e)<0})}),function(){for(var t in i)i.hasOwnProperty(t)&&i[t].forEach(function(e){$(window).off(t,e)})}}(["resize","scroll"],function(){$(t).sticky({top:function(){return $(this).find(".table-filters").offset().top-24},bottom:function(){var e=$(this).parent().find("table");return e.offset().top+e.height()-24-$(this).find(".table-filters").height()}})});e.$on("$destroy",function(){n()})}}})}(),function(){var a=".ncTooltip",i="mouseenter"+a;app.directive("ncTooltip",["ncTooltipSettings",function(n){return{restrict:"EA",replace:!0,scope:{},link:function(e,t){t.on(i,function(){!function(e,t){try{e.responsiveTooltip(t)}finally{e.off(i),e.find(".tooltip-toggle").trigger("mouseenter")}}(t,n)}),e.$on("$destroy",function(){var e=t.data("tooltip");e&&e.destroy(),t.off(a)})}}}])}(),app.constant("ncTooltipSettings",{align:"center",width:"999999",extraclass:"dl-tip"}),app.directive("nmProgress",[function(){return{restrict:"AE",template:'<progress class="progress active" data-ng-value="progressPercent" max="100" data-ng-class="getClass()"></progress>',replace:!0,scope:{percent:"="},link:function(t){t.getClass=function(){var e=Math.round(t.percent);return null==t.percent||isNaN(t.percent)?0:(t.progressPercent=t.percent,80<e&&e<=95?"alert":95<e?"danger":"")}}}}]),app.directive("notificationHolder",["notificationService",function(n){return{restrict:"AE",template:'<div> <div class="notificationContainer magicmessages" data-ng-class="{\'has-content\':link.stuckNotifications.items.length>0}" ><div class="magicmessages-panel"><div class="magicmessages-wrapper" ng-class="getNotificationHtmlType(notification.type)"  ng-repeat="notification in link.stuckNotifications.items" ><a href="" ng-click="notification.close()" ng-show="notification.hasClose" class="magicmessages-close">Close</a><notification-msg-text value="notification" ismagicmessage="true" id="notification.notificationId"></<notification-msg-text></div></div></div><div class="site-msg  has-close" data-ng-class="getAlertHtmlType(alert.type)" ng-repeat="alert in link.alerts.items"><a href="" class="close" ng-show="alert.hasClose" ng-click="alert.close()">Close</a><notification-msg-text value="alert" ismagicmessage="false" id="$index"></<notification-msg-text></div></div>',replace:!0,transclude:!0,scope:{link:"="},link:function(e){var t=new n.instance;e.getAlertHtmlType=function(e){return e==t.type.success?"success":e==t.type.warning?"alert":e==t.type.info?"info":"error"},e.getNotificationHtmlType=function(e){return e==t.type.success?"success":e==t.type.warning?"alert":e==t.type.loading?"loading":e==t.type.info?"info":"error"}}}}]),app.directive("notificationMsgText",["$parse","$sce","$compile","sanitizeHtmlService",function(s,e,r,t){return{restrict:"E",replace:!0,scope:!0,template:"<p></p>",link:function(e,t,n){var a=s(n.value),i=s(n.id),o=s(n.ismagicmessage);e.$watch(o,function(arguments){!0===arguments&&(t[0].className+=" magicmessages-content")}),e.$watch(i,function(e){t[0].setAttribute("id",e)}),e.$watch(a,function(arguments){null!=arguments.msg&&(arguments.msg=arguments.msg.replace(/\n/g,"<br/>"),t.append(arguments.msg),r(t.contents())(arguments.senderScope||e))})}}}]),app.directive("selfCleaningNgInit",[function(){return{priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.selfCleaningNgInit),t.removeAttr("self-cleaning-ng-init")}}}}}]),app.directive("domainServicesTooltip",["tooltipService",function(o){return{restrict:"E",replace:!0,scope:{services:"=",domainBlock:"=",onServiceAction:"=",isFromExpiringList:"="},link:function(e,t){var n="";e.domainBlock&&"DOMAIN"!=e.services.ProductTypeString&&"FREEDNS"!=e.services.ProductTypeString&&(n="disabled");var a="<a href='' data-ng-if='$index==0' data-ng-click='onServiceAction((isFromExpiringList)? services : action)' target=\"{{action.CustomAttributes.target}}\" class='highlight "+n+"' data-ng-bind='action.DisplayText'></a>",i="<div class='tooltip "+n+"'><ul class='app-status'><li ng-repeat='statusType in services.Status track by $index'><strong data-ng-if='$index==0' class='ellipsis' data-ng-bind-html='statusType'></strong><span data-ng-if='$index!=0' data-ng-bind-html='statusType'></span></li></ul><ul class='app-actions' ><li ng-repeat='action in services.Actions track by $index'>"+(a="HOSTING"==e.services.ProductTypeString?a+"<a href='' data-ng-if='$index!=0 && action.DisplayText.toLowerCase().trim() !== \"go to cpanel\" && action.CustomAttributes.isVpsPanel !== \"true\"' data-ng-click='onServiceAction((isFromExpiringList)? services : action)' target=\"{{action.CustomAttributes.target}}\" class='"+n+"' data-ng-bind='action.DisplayText'></a><a href='{{action.DestinationURL}}' data-ng-if='$index!=0 && (action.DisplayText.toLowerCase().trim() === \"go to cpanel\" || action.CustomAttributes.isVpsPanel === \"true\")' target=\"{{action.CustomAttributes.target}}\" class='"+n+"' data-ng-bind='action.DisplayText'></a>":a+"<a href='' data-ng-if='$index!=0' data-ng-click='onServiceAction((isFromExpiringList)? services : action)' target=\"{{action.CustomAttributes.target}}\" class='"+n+"' data-ng-bind='action.DisplayText'></a>")+"</li></ul></div>";o.renderOnDemand(angular.element(i),e,t)}}}]),app.directive("ncCounter",function(){return{restrict:"E",scope:{number:"="},template:'<span class="notification"\t\t\t\t\t\tng-show="number > 99"\t\t\t\t\t\tnc-quic-tip data-quicktip-title="{{number}}"\t\t\t\t\t>99+</span>\t\t\t\t\t<span class="notification"\t\t\t\t\t\tng-show="number > 0 && number < 100"\t\t\t\t\t\tng-bind="number"\t\t\t\t\t></span>'}}),app.directive("ncDomainPrice",function(){return{restrict:"EA",scope:{price:"="},template:'<p ng-show="!price.Loading && price.ShowDiscount"> \t\t\t\t\t\t{{price.DiscountPrice | currency : "$" : 2 }}\t\t\t\t\t\t<s>{{price.RegularPrice | currency : "$" : 2 }}</s>\t\t\t\t\t</p>\t\t\t\t\t<p ng-hide="price.Loading || price.ShowDiscount">\t\t\t\t\t\t{{price.RegularPrice | currency : "$" : 2 }}\t\t\t\t\t</p>',link:function(e,t){e.$watch("price.Loading",function(e){null!=e&&t.toggleClass("async-processing",e)})}}}),app.factory("dspAutoRenewService",["$modal",function(d){return function(e,t,n,a,i,o,s){var r={baseClass:function(){},OffDomain:function(){this.domainAction(!1)},OffDomainWhoisGuardPremiumDNS:function(){var t=this;this.modalContent="Youre about to turn off auto-renewal for your domain. Please note that this action will also disable auto-renewal for Domain Privacy and PremiumDNS services associated with the domain. Would you like to proceed?",this.resolveOkModalAction=function(){t.domainAction(!1).then(function(e){e&&(t.whoisGuardAction(!1),t.premiumDNSAction(!1))})},this.showModalWindow()},OffDomainWhoisGuard:function(){var t=this;this.modalContent="Youre about to turn off auto-renewal for your domain. Please note that this action will also disable auto-renewal for Domain Privacy service associated with the domain. Would you like to proceed?",this.resolveOkModalAction=function(){t.domainAction(!1).then(function(e){e&&t.whoisGuardAction(!1)})},this.showModalWindow()},OffDomainPremiumDNS:function(){var t=this;this.modalContent="Youre about to turn off auto-renewal for your domain. Please note that this action will also disable auto-renewal for PremiumDNS service associated with the domain. Would you like to proceed?",this.resolveOkModalAction=function(){t.domainAction(!1).then(function(e){e&&t.premiumDNSAction(!1)})},this.showModalWindow()},OffWhoisGuard:function(){this.whoisGuardAction(!1)},OffPremiumDNS:function(){this.premiumDNSAction(!1)},OnDomain:function(){this.domainAction(!0)},OnWhoisGuardTurn:function(){this.whoisGuardTurnAction(!0)},OffWhoisGuardTurn:function(){var e=this;this.modalContent="You're about to turn off Domain Privacy protection for your domain. Please note that this action will disclose your domain's contact information to the public. By clicking \"Yes,\" you give your explicit consent to reveal this information in the public Whois database.",this.resolveOkModalAction=function(){e.whoisGuardTurnAction(!1)},this.showModalWindow()},OnDomainWhoisGuardPremiumDNS:function(){var t=this;this.modalContent="You're about to turn on auto-renewal for your domain. Would you like to turn on auto-renewal for your domain's Domain Privacy and PremiumDNS services as well?",this.resolveOkModalAction=function(){t.domainAction(!0).then(function(e){e&&(t.whoisGuardAction(!0),t.premiumDNSAction(!0))})},this.resolveCancelModalAction=function(){t.domainAction(!0)},this.showModalWindow()},OnDomainWhoisGuard:function(){var t=this;this.domainAutoRenewOn?(this.modalContent="You're about to turn on auto-renewal for your domain. Would you like to turn on auto-renewal for your domain's Domain Privacy service as well?",this.resolveCancelModalAction=function(){t.domainAction(!0)}):this.modalContent="You're about to turn on auto-renewal for your domain's Domain Privacy service. Please note that this action will also enable auto-renewal for your domain. Would you like to proceed? ",this.resolveOkModalAction=function(){t.domainAction(!0).then(function(e){e&&t.whoisGuardAction(!0)})},this.showModalWindow()},OnDomainPremiumDNS:function(){var t=this;this.domainAutoRenewOn?(this.modalContent="You're about to turn on auto-renewal for your domain. Would you like to turn on auto-renewal for your domain's PremiumDNS service as well?",this.resolveCancelModalAction=function(){t.domainAction(!0)}):this.modalContent="You're about to turn on auto-renewal for your domain's PremiumDNS service. Please note that this action will also enable auto-renewal for your domain. Would you like to proceed?",this.resolveOkModalAction=function(){t.domainAction(!0).then(function(e){e&&t.premiumDNSAction(!0)})},this.is3dParty?t.premiumDNSAction(!0):this.showModalWindow()},OnWhoisGuard:function(){this.whoisGuardAction(!0)},OnPremiumDNS:function(){this.premiumDNSAction(!0)}},c="WhoisGuardTurn"!=e?(t?"On":"Off")+("Domain"!=e&&0==n?"Domain"+e:e)+(null!=a&&a!=t&&"WhoisGuard"!=e&&"PremiumDNS"!=e?"WhoisGuard":"")+(null!=i&&i!=t&&"PremiumDNS"!=e&&"WhoisGuard"!=e?"PremiumDNS":""):(t?"On":"Off")+"WhoisGuardTurn",l={domain:function(e){},whoisGuard:function(e){},premiumDNS:function(e){},whoisGuardTurn:function(e){}};return r.baseClass.prototype={constructor:r.baseClass,modalTitle:"WhoisGuardTurn"!=e?"Turn "+(t?"On":"Off")+" "+e.replace("WhoisGuard","Domain Privacy")+" Auto-Renewal":"Turn "+(t?"On":"Off")+" Domain Privacy Protection",showModalWindow:function(){var e=this;d.open({templateUrl:"/Domains/PromptModalOpen",controller:"promptRemoveModalCtrl",size:"lg",resolve:{modalTitle:function(){return e.modalTitle},modalContent:function(){return e.modalContent}}}).result.then(this.resolveOkModalAction,this.resolveCancelModalAction)},is3dParty:s,sender:e,domainAutoRenewOn:n,modalContent:null,resolveOkModalAction:function(){},resolveCancelModalAction:function(){},domainAction:function(e){return l.domain(e)},whoisGuardAction:function(e){l.whoisGuard(e)},premiumDNSAction:function(e){l.premiumDNS(e)},whoisGuardTurnAction:function(e){l.whoisGuardTurn(e)}},{callbackAction:l,apply:function(){return function(e,t){function n(){}n.prototype=t.prototype;var a,i=new n;for(a in e.prototype)i[a]=e.prototype[a];e.prototype=i,e.prototype.super=t.prototype}(r[c],r.baseClass),new r[c]}}}}]),app.service("domainStatuses",function(){var t=[{name:"Alert",icon:"alert",orderWeight:0},{name:"Grace",icon:"grace",orderWeight:1}],e=[{header:"Alert",propertyvalue:"Alert"},{header:"Grace",propertyvalue:"Grace"}];return{getExpiringStatusFilterValues:function(t){return e.map(function(e){return angular.extend({propertyname:t+".name"},e)})},getIconFromStatusEnum:function(e){return t[e]}}}),app.service("expiringCounter",["httpRepository","$q",function(e,t){var n="expiringCounter",a="userKey";return{update:function(){return function(){var e=n+sessionStorage.getItem(a);$.cookie(e)&&(document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;")}(),e.expiringList.getExpirationsSummary().then(function(e){return!0===e.Faulted?t.reject(e.FaultMessage):void function(e){var t=document.querySelector("nav li.expiring>a span");if(!t||e<1)return;var n=document.createElement("span");n.className="notification",99<e?(n.innerHTML="99+",n.setAttribute("data-quicktip-title",e),$(n).quicktip()):n.innerHTML=e.toString();t.parentNode.insertBefore(n,t.nextSibling)}(e.Total)})}}}]),app.factory("domainRenew",["pageHelper","cartService","domainStatuses","$q","expiringSoonService",function(s,r,n,c,a){var e=window.GlobalErrorMessages||{},l=window.ExpiringSoonMessages||{},d=e.error_Site_PleaseTryAgain,u="domain",m="whosiguard",p="premiumDns";return{wrapInBehaviour:function(e,t){var o,i;e.Status=n.getIconFromStatusEnum(e.Status),e.HasSeparatePrice=e.IsPremiumDomain,e.ExpirationDateUnix=new Date(e.ExpirationDate).getTime(),e.behavior=(o=e,i=t,new s.AsyncStateBehavior({constructor:function(){var i=this.instance;angular.extend(i,{updatePrice:function(){o.CalculatedPrice=a.pricing.calculateDomainPrice(o)},premiumDnsChanged:function(){o.behavior.updatePrice(),o.IsInCart&&i.renewDomain(p,o.PremiumDnsInfo.IsEnabled)},whoIsGuardChanged:function(){o.behavior.updatePrice(),o.IsInCart&&i.renewDomain(m,o.WhoisGuardInfo.IsEnabled)},renewDomain:function(n,a){return n=n||u,i.asyncStatus(s.AsyncStatus.Loading),r.renewDomain(o).then(function(e){if(e&&!0===e.Error)return i.asyncStatus(s.AsyncStatus.Error,{msg:e.Msg}),c.reject(e.Msg)}).then(function(){return r.getCartItems()}).then(function(e){var t=r.getDomainByName(e,o.DomainName);null!=t?(o.IsInCart=!0,o.CartItemId=t.Id,r.notifyCardChanged(),i.asyncStatus(s.AsyncStatus.Success,{renewCause:n,newState:a})):i.asyncStatus(s.AsyncStatus.Error)})}})},onLoading:function(){this.instance.loading=!0},onSuccess:function(e){var t=e.renewCause,n=i.stuckNotifications,a={hasClose:!0,isAutoHide:!0};this.instance.loading=!1,t!==u&&(t!==p&&t!==m||(e.newState?n.addSuccess(l.notification_DomainAddonShoppingCartAdd,a):n.addSuccess(l.notification_DomainAddonShoppingCartUpdate,a)))},onActive:function(){this.instance.loading=!1},onError:function(e){this.instance.loading=!1,i.stuckNotifications.addError(e.msg||d,{hasClose:!0,isAutoHide:!0})}})),e.behavior.updatePrice()}}}]),app.factory("expiringDomainsList",["pageHelper","httpRepository","ncGridParams","domainStatuses","domainRenew","notificationService","$q","$timeout","cartService","$filter","expiringSoonService",function(m,p,o,f,h,g,v,s,S,y,C){"use strict";var A=window.GlobalErrorMessages||{},D=window.ExpiringSoonMessages||{};return{create:function(t){var l=new m.AsyncStateBehavior({constructor:function(){var s,e,i=this.instance;i.showLoadPanel=!0,i.showContent=!1,i.notifications=new g.instance,i.statusList=f.getExpiringStatusFilterValues("Status"),i.gridSettings=(s=i,e=new o,C.applyCommonGridConfig(e),e.parameters.search.serchPropertyNames=["DomainName"],e.settings.ordering.set({propertyName:"ExpirationDateUnix",descending:!0}),e.settings.getData=function(o,e){v.all([p.expiringList.getDomains(e),t()]).then(function(e){var t=e[0],n=e[1];if(!t||!t.Result||t.Error)return s.asyncStatus(m.AsyncStatus.Error),void o.resolve(null);var a=t.Result,i=function(e,t,n){for(var a,i=[],o=0;o<e.length;o++)a=e[o],h.wrapInBehaviour(a,t.notifications),r(a,n),i.push(a.DomainName);return{domains:e,domainsIndex:i}}(a.Data,s,n);s.itemsLength=a.TotalServerItemsCount,s.domainIndexDefer.resolve(i.domainsIndex),o.resolve({Data:i.domains,DnsServerType:a.DnsServerType,IsDomainLocked:a.IsDomainLocked}),C.loadDomainPricesAsync(i.domains),o.promise.then(function(){s.asyncStatus(m.AsyncStatus.Success)})})},e),i.gridSettings.settings.reload(),angular.extend(i,{domainIndexDefer:v.defer(),getDomainsIndex:function(){return i.domainIndexDefer.promise},bulk:{canTogglePdnsOn:function(){return C.bulkState.canRenewPdns(i.gridSettings.parameters.selection.selectedItems)},canTogglePdnsOff:function(){return C.bulkState.canTurnOffPdns(i.gridSettings.parameters.selection.selectedItems)},canToggleWhoisGuardOn:function(){return C.bulkState.canRenewWg(i.gridSettings.parameters.selection.selectedItems)},canToggleWhoisGuardOff:function(){return C.bulkState.canTurnOffWg(i.gridSettings.parameters.selection.selectedItems)},togglePdnsOn:function(){a(i.gridSettings.parameters.selection.selectedItems,"PremiumDnsInfo",!0)},togglePdnsOff:function(){a(i.gridSettings.parameters.selection.selectedItems,"PremiumDnsInfo",!1)},toggleWhoisGuardOn:function(){a(i.gridSettings.parameters.selection.selectedItems,"WhoisGuardInfo",!0)},toggleWhoisGuardOff:function(){a(i.gridSettings.parameters.selection.selectedItems,"WhoisGuardInfo",!1)},addToCart:function(){var e=i.gridSettings.parameters.selection.selectedItems,t=i.notifications.stuckNotifications,n={hasClose:!0,autoHide:!0};if(0!==e.length){var a=e.filter(function(e){return!e.IsInCart});if(0!==a.length)return c(a,{success:D.notification_DomainsRenewSuccess,partialWarning:D.error_DomainsHasNotBeenAdded});t.addWarning(D.notification_allDomainsAreInTheCart,n)}else t.addWarning(D.warning_NoDomainsSelectedToAddToCart,n)}},stopProcessing:angular.noop})},onLoading:function(){this.instance.operationIsInProgress=!0},onSuccess:function(){var e=this.instance;s(function(){e.showLoadPanel=!1,e.showContent=!0,e.operationIsInProgress=!1})},onError:function(e){this.instance.notifications.stuckNotifications.addError(e.msg||A.error_Site_PleaseTryAgain,{hasClose:!0,isAutoHide:!0}),this.instance.showLoadPanel=!1,this.instance.operationIsInProgress=!1}});return l;function c(e,t){return l.asyncStatus(m.AsyncStatus.Loading),C.renewWithProcessingStatus(e,{notifications:l.notifications,getLoadingMessage:n,renewCall:S.renewDomains.bind(S),setupCancellation:function(e){l.stopProcessing=e}}).then(function(e){return n=e,a=t,S.getCartItems().then(function(t){n.forEach(function(e){r(e,t)}),function(e,t,n){var a={hasClose:!0,isAutoHide:!0},i=e.filter(function(e){return null!=S.getDomainByName(t,e.DomainName)}),o=e.length-i.length,s=l.notifications.stuckNotifications;if(4<o)return s.addWarning(u(n.partialWarning,o+" item(s)"),a);if(0<o&&o<=4){var r=i.map(d),c=e.filter(function(e){return r.indexOf(e.DomainName)<0}).map(d).join(", ");return s.addWarning(u(n.partialWarning,c),a)}s.addSuccess(n.success,a)}(n,t,a),S.notifyCardChanged(),l.asyncStatus(m.AsyncStatus.Success)});var n,a}).catch(function(e){l.asyncStatus(m.AsyncStatus.Error,{msg:e.Msg})})}function d(e){return e.DomainName}function u(e,t){return y("stringFormat")(e,[t])}function n(e,t){return y("stringFormat")(D.notification_AddToCartProcessing,[e,t])}function a(e,t,n){if(0===e.length){var a=!0===n?D.warning_NoDomainsSelectedForRenew:D.warning_NoDomainsSelectedForTurnOffRenew;return l.notifications.stuckNotifications.addWarning(a,{hasClose:!0,isAutoHide:!0}),v.when(e||[])}for(var i,o,s=[],r=0;r<e.length;r++)(o=(i=e[r])[t]).IsExist&&o.IsEnabled!==n&&(i.IsInCart&&s.push(i),o.IsEnabled=n,i.behavior.updatePrice());return 0===s.length?v.when(null):(l.asyncStatus(m.AsyncStatus.Loading),c(s,{success:D.notifications_CartHasBeenChanged,partialWarning:D.error_CartUpdatePartiallyFailed}))}function r(e,t){var n=S.getDomainByName(t,e.DomainName);null!==n?(e.IsInCart=!0,e.CartItemId=n.Id,e.WhoisGuardInfo.IsEnabled=i(e,t,S.itemTypes.WhoisGuard),e.PremiumDnsInfo.IsEnabled=i(e,t,S.itemTypes.PremiumDns),e.behavior.updatePrice()):(e.IsInCart=!1,e.CartItemId=null)}function i(e,t,n){return 0<S.getAllItemsByDomainName(t,e.DomainName,[n]).length}}}}]),app.factory("expiringProductsList",["pageHelper","httpRepository","ncGridParams","domainStatuses","expiringDomainProducts","notificationService","$rootScope","productRenew","$q","$timeout","expiringSoonService",function(u,o,s,r,m,e,p,f,h,t,g){"use strict";var n=window.GlobalErrorMessages||{},v=g.productInfoTypes;return p.HasSymantecCertificate=0,{productTypes:v,create:function(a,i){var l=p.$new(),d=new e.instance;return new u.AsyncStateBehavior({constructor:function(){var c,t,e,n=this.instance;n.showContent=!1,n.showLoadPanel=!0,n.operationIsInProgress=!1,n.notifications=d,n.statusList=r.getExpiringStatusFilterValues("Status"),n.gridSettings=(c=n,t=a,e=new s,g.applyCommonGridConfig(e),e.parameters.search.serchPropertyNames=["ProductTitle","DomainName"],e.settings.ordering.set({propertyName:"ExpirationDateUnix",descending:!0}),e.settings.getData=function(r,e){h.all([o.expiringList.getProductsList(e),t,i()]).then(function(e){var t=e[0],n=e[1],a=e[2],i=t&&t.Result;if(!i||t.Error)return c.asyncStatus(u.AsyncStatus.Error),void r.resolve(null);Array.prototype.push.apply(c.sourceProducts,i.Data);for(var o=0;o<i.Data.length;o++)if(null!=i.Data[o].ProviderName&&("GEOTRUST"==i.Data[o].ProviderName.toUpperCase()||"THAWTE"==i.Data[o].ProviderName.toUpperCase()||"VERISIGN"==i.Data[o].ProviderName.toUpperCase())){p.HasSymantecCertificate=1;break}var s=function(e,t,n){for(var a,i,o=[],s=0;s<e.length;s++)a=e[s],i=f.wrapInBehaviour(a,d),g.updateProductCartState(n,i),function(e,t){return(e.ProductInfoType===v.WhoisGuard||e.ProductInfoType===v.PremiumDns)&&-1<t.indexOf(e.DomainName)}(a,t)||o.push(i);return o}(i.Data,n,a);c.itemsLength=function(e,t,n){var a=e;angular.isNumber(a)||(a=0<=t.TotalServerItemsCount?t.TotalServerItemsCount:t.Data.length);return a-(t.Data.length-n.length)}(c.itemsLength,i,s),g.loadProductPricesAsync(s),r.resolve({Data:s,DnsServerType:i.DnsServerType,IsDomainLocked:!1}),r.promise.then(function(){l.$broadcast("PRODUCTS_HAS_BEEN_CHANGED"),c.asyncStatus(u.AsyncStatus.Success)})})},e),n.gridSettings.settings.reload(),angular.extend(n,{sourceProducts:[],destroy:function(){l.$destroy()},showDomainDetails:function(e){n.domainDetails=m.create(e,function(e){return{getProducts:function(){return e.gridSettings.parameters.storage.requestData}}}.bind(null,n)),n.domainDetails.onDestroy(function(){n.domainDetails=null})},renewSelectedProducts:function(){var e=n.gridSettings.parameters.selection.selectedItems;if(0===e.length)return n.notifications.stuckNotifications.addWarning(ExpiringSoonMessages.warning_NoProductsSelectedToAddToCart,{hasClose:!0,autoHide:!0}),h.when(e);var t=e.filter(function(e){return!e.IsInCart});return g.renewProducts(n,n.notifications,t)}})},onLoading:function(){this.instance.operationIsInProgress=!0},onSuccess:function(){var e=this.instance;t(function(){e.operationIsInProgress=!1,e.showContent=!0,e.showLoadPanel=!1})},onError:function(e){this.instance.operationIsInProgress=!1,this.instance.notifications.stuckNotifications.addError(e.msg||n.error_Site_PleaseTryAgain,{hasClose:!0,isAutoHide:!0})}})}}}]),app.service("expiringSoonService",["cartService","pageHelper","$q","pricing","$filter",function(r,o,c,n,s){var l={isAutoHide:!1,hasClose:!1},d=window.ExpiringSoonMessages||{},i={Onepager:0,SslCertificate:1,PremiumDns:2,WhoisGuard:3,Hosting:4,Servers:5,ProductTypePrivateEmail:6};return{productInfoTypes:i,updateProductCartState:u,applyCommonGridConfig:function(e){e.parameters.mapping.isLazyLoading=!0,e.parameters.mapping.serverChunkSize=500,e.parameters.pagination.isTopEnabled=!0,e.parameters.pagination.isBottomEnabled=!0},renewProducts:function(e,n,t){var a=e;if(0!==t.length){a.asyncStatus(o.AsyncStatus.Loading);var i=t.filter(function(e){return!e.IsInCart});return this.renewWithProcessingStatus(i,{getLoadingMessage:function(e,t){return s("stringFormat")(d.notification_AddToCartProductsProcessing,[e,t])},setupCancellation:function(e){a.stopProcessing=e},notifications:n,renewCall:r.renewProducts.bind(r)}).then(function(){return r.getCartItems()}).then(function(t){i.forEach(function(e){u(t,e)}),function(e,t,n){var a=t.filter(function(e){return null!=r.getProductById(n,e.ProductId)}),i=t.length-a.length;if(0==i)return e.addSuccess(d.notification_ProductsAddingToCartSuccess,{hasClose:!0,isAutoHide:!0});var o=s("stringFormat")(d.notifications_ProductsHasNotBeenAddedWarning,[i]);e.addWarning(o,{hasClose:!0,isAutoHide:!0})}(n.stuckNotifications,i,t),r.notifyCardChanged(),a.asyncStatus(o.AsyncStatus.Success)}).catch(function(e){a.asyncStatus(o.AsyncStatus.Error,{msg:e&&e.Msg})})}a.notifications.stuckNotifications.addWarning(d.notification_allProductsAreInTheCart,{hasClose:!0,autoHide:!0})},renewWithProcessingStatus:function(n,a){if(0===n.length)return c.when(null);var i,e,o=0,s=a.getLoadingMessage,t=a.renewCall;return n.length>r.maxRenewChunkLength&&(i=a.notifications.stuckNotifications.addLoading(s(o,n.length),l),e=function(e,t){o+=e.domains.length,i.setNewText(s(o,n.length)),angular.isFunction(a.setupCancellation)&&a.setupCancellation(t)}),t(n,e||angular.noop).then(function(e){return e&&!0===e.Error?c.reject(e):n}).finally(function(){i&&(i.destroy(),i=null)})},loadDomainPricesAsync:function(e){var a={},t=e.filter(function(e){return e.IsPremiumDomain}).map(function(e){return(a[e.DomainName]=e).DomainName});return n.loadPremiumDomainPrices(t,function(e,t){var n=a[e];n.Price={RegularPrice:t,DiscountPrice:null,DiscountDescription:null},n.CalculatedPrice=f(n)})},loadProductPricesAsync:function(e){var a={},t=e.filter(function(e){return e.ProductInfoType===i.Hosting||e.ProductInfoType===i.Servers}).map(function(e){var t=e.ProductId;return a[t]=e,t});return n.loadHostingRenewPrices(t,function(e,t){var n=a[e].CalculatedPrice;n.Loading=!1,n.RegularPrice=t.RegularPrice,n.DiscountPrice=h(t)?t.DiscountPrice:t.RegularPrice,n.DiscountDescription=t.DiscountDescription,n.ShowDiscount=h(t)})},bulkState:{canRenewPdns:function(e){return 0===e.length||m(e,function(e){return a(e.PremiumDnsInfo)})},canRenewWg:function(e){return 0===e.length||m(e,function(e){return a(e.WhoisGuardInfo)})},canTurnOffPdns:function(e){return 0===e.length||m(e,function(e){return t(e.PremiumDnsInfo)})},canTurnOffWg:function(e){return 0===e.length||m(e,function(e){return t(e.WhoisGuardInfo)})}},pricing:{calculateProductPrice:function(e){var t=e.Price;return{DiscountDescription:t.DiscountDescription,DiscountPrice:p(t),ShowDiscount:h(t),RegularPrice:t.RegularPrice,Loading:0===t.RegularPrice}},calculateDomainPrice:f}};function u(e,t){var n=r.getProductById(e,t.ProductId);t.IsInCart=null!=n}function t(e){return e&&e.IsExist&&e.IsEnabled}function a(e){return e&&e.IsExist&&!e.IsEnabled}function m(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}function p(e){return e.DiscountPrice||e.RegularPrice}function f(e){var t,n,a=p((t=e).Price)+v(t.WhoisGuardInfo)+v(t.PremiumDnsInfo),i=e.Price.RegularPrice+g(e.PremiumDnsInfo)+g(e.WhoisGuardInfo);return{DiscountDescription:e.Price.DiscountDescription,DiscountPrice:a,ShowDiscount:(h((n=e).Price)||h(n.PremiumDnsInfo.Price)||h(n.WhoisGuardInfo.Price))&&a!==i,RegularPrice:i}}function h(e){return e&&null!=e.DiscountPrice&&e.DiscountPrice!==e.RegularPrice}function g(e){return e&&e.IsExist&&e.IsEnabled?e.Price.RegularPrice:0}function v(e){if(!e)return 0;var t=e.Price;return e.IsExist&&e.IsEnabled&&null!=t?t.DiscountPrice?t.DiscountPrice:t.RegularPrice:0}}]),app.factory("productRenew",["pageHelper","cartService","expiringSoonService","domainStatuses","$q",function(i,o,s,r,c){var e=window.GlobalErrorMessages||{},l=(window.ExpiringSoonMessages,e.error_Site_PleaseTryAgain);return{wrapInBehaviour:function(e,t){var n,a;return e.Status=r.getIconFromStatusEnum(e.Status),e.CalculatedPrice=s.pricing.calculateProductPrice(e),e.ExpirationDateUnix=new Date(e.ExpirationDate).getTime(),e.behavior=(n=e,a=t,new i.AsyncStateBehavior({constructor:function(){var t=this.instance;angular.extend(t,{renewProduct:function(){return t.asyncStatus(i.AsyncStatus.Loading),o.renewProduct(n).then(function(e){if(e&&!0===e.Error)return t.asyncStatus(i.AsyncStatus.Error,{msg:e.Msg}),c.reject(e.Msg)}).then(function(){return o.getCartItems()}).then(function(e){s.updateProductCartState(e,n),n.IsInCart?(o.notifyCardChanged(),t.asyncStatus(i.AsyncStatus.Success)):t.asyncStatus(i.AsyncStatus.Error)})}})},onLoading:function(){this.instance.loading=!0},onSuccess:function(){this.instance.loading=!1},onActive:function(){this.instance.loading=!1},onError:function(e){this.instance.loading=!1,a.stuckNotifications.addError(e.msg||l,{hasClose:!0,isAutoHide:!0})}})),e}}}]),app.controller("domainTransferAuthorizeModalCtrl",["$scope","$rootScope","httpRepository","pageHelper","notificationService","$filter","$modalInstance","$document","modalInteraction",function(n,e,a,i,o,t,s,r,c){n.startAutoFocus=!0,n.pageHelper=i,n.pageNotification=new o.instance,n.modalBehavior=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;t.model={},t.model.domainName=c.domainName,t.model.transferId=c.transferId,t.activeNotification=new o.instance,t.cancel=function(){s.dismiss("cancel")},t.save=function(){var e;this.showNotifications=!1,n.modalForm.$valid?(t.asyncStatus(i.AsyncStatus.Loading),a.domainTransfer.authorizeTransfer(t.model.transferId,t.model.authCode,t.model.domainName).then(function(e){e.sender="authorize",t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})):(angular.forEach(n.modalForm.$error.required,function(e){e.$setDirty()}),e={Msg:ErrorMessageRes.error_FormIsNotValid},this.asyncStatus(i.AsyncStatus.Error,e))}},onSuccess:function(e){this.instance;"authorize"==e.sender&&s.close(e.Result)},onActive:function(e){this.instance},onLoading:function(e){this.instance},onError:function(e){var t=this.instance;t.activeNotification=n.pageNotification.alerts.addError(DomainTransferRes.message_AutorizeTransfer_Error,{hasClose:!0,isAutoHide:!1}),t.showNotifications=!0,t.asyncStatus(i.AsyncStatus.Active)}}),r.bind("keydown",function(e){27!==e.which||n.modalBehavior.asyncStatus().isDisabled||n.modalBehavior.cancel()}),r.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!n.modalBehavior.asyncStatus().isDisabled&&n.modalBehavior.cancel()})}]),app.controller("domainTransferCtrl",["$scope","$rootScope","httpRepository","pageHelper","notificationService","$filter","$modal","httpService","domainTransferInService","$location",function(n,e,a,i,o,t,s,r,c,l){n.pageHelper=i,n.setTransferModel=function(e){n.transferModel=e},n.pageNotification=e.pageNotification,n.pageBehavior=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;t.activeNotification=new o.instance,t.asyncStatus(i.AsyncStatus.Active),t.authorizeTransfer=function(){t.asyncStatus(i.AsyncStatus.Loading),c.showAuthorizeTransferModal(n.transferModel.DomainName,n.transferModel.TransferId).then(function(e){t.asyncStatus(i.AsyncStatus.Success,{sender:"authorizeTransfer",Result:e})},function(){})},t.refreshStatus=function(){t.asyncStatus(i.AsyncStatus.Loading),a.domainTransfer.refreshTransferStatus(n.transferModel.TransferId,n.transferModel.DomainName).then(function(e){e.sender="refreshStatus",t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},t.resendEmail=function(){t.asyncStatus(i.AsyncStatus.Loading),a.domainTransfer.resendEmail(n.transferModel.TransferId).then(function(e){e.sender="resendEmail",t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})},"s_dts"==o.getUrlNotificationKey()&&n.pageNotification.stuckNotifications.addSuccess(DomainTransferRes.message_RefreshStatus_Success,{hasClose:!0,isAutoHide:!0})},onSuccess:function(e){var t=this.instance;"refreshStatus"==e.sender?e.Result.TransferStatus!=n.transferModel.TransferStatus?window.location.href=window.location.href+"?notificationKey=s_dts":t.activeNotification=n.pageNotification.stuckNotifications.addSuccess(DomainTransferRes.message_RefreshStatus_Success,{hasClose:!0,isAutoHide:!0}):"authorizeTransfer"==e.sender?(n.transferModel=e.Result,t.activeNotification=n.pageNotification.stuckNotifications.addSuccess(DomainTransferRes.message_AutorizeTransfer_Success,{hasClose:!0,isAutoHide:!0})):"resendEmail"==e.sender&&(t.activeNotification=n.pageNotification.stuckNotifications.addSuccess(DomainTransferRes.message_ResendEmail_Success,{hasClose:!0,isAutoHide:!0})),t.asyncStatus(i.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance.showLoadPanel=!0},onError:function(e){var t=this.instance;"resendEmail"==e.sender?e.Msg=DomainTransferRes.message_ResendEmail_Error:"refreshStatus"==e.sender&&(e.Msg=DomainTransferRes.message_RefreshStatus_Error),t.activeNotification=n.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0}),t.asyncStatus(i.AsyncStatus.Active)}}),n.transferStatusType={None:0,Pending:1,Cancelled:2,QueuedForTransfer:3,AwaitingEppCode:4,AwaitingEmailConfirmation:5,Done:6,VerifyingDomainContacts:7}}]),app.controller("domainTransferGetStartedModalCtrl",["$scope","$rootScope","httpRepository","pageHelper","notificationService","$filter","$modalInstance","$document","modalInteraction",function(n,e,a,i,o,t,s,r,c){n.pageHelper=i,n.pageNotification=new o.instance,n.modalBehavior=new i.AsyncStateBehavior({constructor:function(){var t=this.instance;t.model={},t.model.domainName=c.domainName,t.model.transferId=c.transferId,t.activeNotification=new o.instance,t.cancel=function(){s.dismiss("cancel")},t.save=function(){var e;this.showNotifications=!1,n.modalForm.$valid?(t.asyncStatus(i.AsyncStatus.Loading),a.domainTransfer.authorizeTransfer(t.model.transferId,t.model.authCode).then(function(e){e.sender="authorize",t.asyncStatus(0==e.Error?i.AsyncStatus.Success:i.AsyncStatus.Error,e)})):(angular.forEach(n.modalForm.$error.required,function(e){e.$setDirty()}),e={Msg:ErrorMessageRes.error_FormIsNotValid},this.asyncStatus(i.AsyncStatus.Error,e))}},onSuccess:function(e){var t=this.instance;"authorize"==e.sender&&s.close(t.model)},onActive:function(e){this.instance},onLoading:function(e){this.instance},onError:function(e){var t=this.instance;t.activeNotification=n.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1}),t.showNotifications=!0,t.asyncStatus(i.AsyncStatus.Active)}}),r.bind("keydown",function(e){27!==e.which||n.modalBehavior.asyncStatus().isDisabled||n.modalBehavior.cancel()}),r.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!n.modalBehavior.asyncStatus().isDisabled&&n.modalBehavior.cancel()})}]),app.controller("onepagerSubscriptionsCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","$location","notificationService","pageHelper","$timeout","$sce","ncGridParams",function(s,e,r,t,n,a,i,c,o,l,d){s.pageHelper=c,s.pageNotification=new i.instance,s.onePagerResources=OnePagerResources,s.OnepagerStatus={Active:0,Alert:1,Grace:2,Expired:3,ActiveBlocked:4,AlertBlocked:5,GraceBlocked:6,ExpiredBlocked:7},s.OnepagerStatusSortedStatus={Active:0,ActiveBlocked:1,Alert:2,AlertBlocked:3,Grace:4,GraceBlocked:5,Expired:6,ExpiredBlocked:7},s.pageBehavior=new c.AsyncStateBehavior({constructor:function(){var n=this.instance;n.asyncStatus(c.AsyncStatus.Loading),n.activeNotification=new i.instance,r.onepager.getList().then(function(e){e.sender="getModel",n.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e)}),n.onepagerGrid=new d,n.onepagerGrid.parameters.mapping.isLazyLoading=!1,n.onepagerGrid.parameters.search.serchPropertyNames=["model.DomainName"],n.onepagerGrid.settings.getData=function(e,t){e.resolve({Data:n.model})},n.onepagerGrid.settings.selection.canChangeSelection=function(e){return e.model.IsEnabled},n.statusList=[{header:"Active",propertyname:"model.Status",propertyvalue:0},{header:"Alert",propertyname:"model.Status",propertyvalue:1},{header:"Grace",propertyname:"model.Status",propertyvalue:2},{header:"Expired",propertyname:"model.Status",propertyvalue:3}],n.flagList=[{header:"Blocked",propertyname:"model.IsEnabled",propertyvalue:!1}],n.renewBulk=function(){}},onSuccess:function(e){var t=this.instance;if("getModel"==e.sender){for(var n=[],a=0;a<e.Result.Subscriptions.length;a++){var i=function(e){return new c.AsyncStateBehavior({constructor:function(){var t=this.instance;e.ExpirationDateTime=c.Date.dateFromJson(e.ExpirationDateTime),t.model=e,t.model.OnepagerStatusSortedValue=s.OnepagerStatus.Alert==t.model.StatusTotal?s.OnepagerStatusSortedStatus.Alert:s.OnepagerStatus.Grace==t.model.StatusTotal?s.OnepagerStatusSortedStatus.Grace:s.OnepagerStatus.Expired==t.model.StatusTotal?s.OnepagerStatusSortedStatus.Expired:s.OnepagerStatus.ActiveBlocked==t.model.StatusTotal?s.OnepagerStatusSortedStatus.ActiveBlocked:s.OnepagerStatus.AlertBlocked==t.model.StatusTotal?s.OnepagerStatusSortedStatus.AlertBlocked:s.OnepagerStatus.GraceBlocked==t.model.StatusTotal?s.OnepagerStatusSortedStatus.GraceBlocked:s.OnepagerStatus.ExpiredBlocked==t.model.StatusTotal?s.OnepagerStatusSortedStatus.ExpiredBlocked:s.OnepagerStatusSortedStatus.Active,t.switchAutoRenew=function(){t.model.IsAutoRenew=!t.model.IsAutoRenew,t.model.IsEnabled&&t.model.Status!=s.OnepagerStatus.Grace&&t.model.Status!=s.OnepagerStatus.Expired&&r.onepager.setAutoRenew(t.model.SubscriptionId,!t.model.IsAutoRenew).then(function(e){e.sender="switchAutoRenew",t.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e)})},t.editWebsite=function(){r.onepager.getLoginUrl(t.model.SubscriptionId).then(function(e){e.sender="getLoginUrl",t.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e),0==e.Error&&window.open(e.Result,"_blank")})}},onSuccess:function(e){var t=this.instance;"switchAutoRenew"==e.sender&&(t.model.IsAutoRenew=!t.model.IsAutoRenew),t.asyncStatus(c.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;"switchAutoRenew"==e.sender&&(e.Msg=s.onePagerResources.msg_updateAutoRenewError),t.activeNotification=s.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}})}(e.Result.Subscriptions[a]);i.selectrionChbId="chb_onepager"+a,n.push(i)}t.model=n,t.showContent=!0,t.showLoadPanel=!1,t.onepagerGrid.settings.reload()}var o=t.onepagerGrid.parameters.ordering.usedEntities[1];o.descending=!1,t.onepagerGrid.settings.ordering.set(o),t.asyncStatus(c.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){this.instance.activeNotification=s.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!1})}})}]),app.controller("sslCertificates",["$rootScope","$scope","httpRepository","pageHelper","notificationService","ncGridParams","popupWindow","$window",function(e,o,i,s,r,c,l,d){o.resources=SslCertificatesProductList,o.pageHelper=s,o.pageNotification=new r.instance,o.SymantecSunsetMasterKey=SymantecSunsetMasterKey,o.SiteServerNameUrl=siteServerNameUrl,o.ServerName=ServerName,o.SymantecSunsetDate=new Date(SymantecSunsetDate),o.SymantecSunsetDate=o.SymantecSunsetDate.setDate(o.SymantecSunsetDate.getDate()+1),o.currentDate=new Date,o.SSLInfoRes=SSLInfoRes,o.popupWindow=l;var u=o.SSLInfoRes.static_ErrorMessage_SymantecSunset,m=o.SSLInfoRes.static_InsufficentFundsErrorMsg;o.behavior=new s.AsyncStateBehavior({constructor:function(){var e,t,n,a=this.instance;a.dangerStatuses=["expired","cancelled","pendingcancellation","purchaseerror","submiterror"],a.alertStatuses=["replaced","waitingapproval","inprogress","newreplace","newpurchase","newrenewal"],a.activeNotification=new r.instance,a.showLoadPanel=!1,a.showNotifications=!1,a.showHeader=!1,a.showContent=!1,a.asyncStatus(s.AsyncStatus.Loading),i.sslCertificates.getList().then(function(e){e.sender="getModel",a.asyncStatus(0==e.Error?s.AsyncStatus.Success:s.AsyncStatus.Error,e)}),a.sslGrid=new c,a.sslGrid.parameters.mapping.isLazyLoading=!1,a.sslGrid.parameters.search.serchPropertyNames=["model.Name"],a.sslGrid.settings.getData=function(e,t){e.resolve({Data:a.model})},a.sslGrid.settings.selection.canChangeSelection=function(e){return e.canChangeSelection()},o.openModal=function(e,t,n,a,i){o.symantecCertificateDetails={certificateType:e,certificateId:t,validYears:n,sansQty:a},l.openPopupWindow(o.symantecCertificateDetails,"activate",i,o.SiteServerNameUrl)},1==o.SymantecSunsetMasterKey&&o.currentDate>o.SymantecSunsetDate&&0<d.localStorage.length&&(null!=(e=l.replaceOrRefundResult()).isError&&("false"===e.isError?"replace"==e.action?(t=o.SSLInfoRes.static_Replace_SuccessMessage,o.pageNotification.stuckNotifications.addSuccess(t,{hasClose:!0,isAutoHide:!0})):(n=o.SSLInfoRes.static_Refund_SuccessMessage,o.pageNotification.stuckNotifications.addSuccess(n.replace("{0}",e.symantecCertType),{hasClose:!0,isAutoHide:!0})):(-1<e.Message.indexOf("INSUFFICIENTFUNDS")?1:0)?o.pageNotification.stuckNotifications.addError(m.replace("{0}",o.ServerName),{hasClose:!0,isAutoHide:!1}):o.pageNotification.stuckNotifications.addError(u,{hasClose:!0,isAutoHide:!0})))},onSuccess:function(e){var n,t,a=this.instance;if(o.currentDate<=o.SymantecSunsetDate)for(o.IsSymantecCertExist=!1,index=0;index<e.Result.SslCertificates.length;index++)if("comodo"!=e.Result.SslCertificates[index].ProviderName.toLowerCase()){o.IsSymantecCertExist=!0;break}"getModel"==e.sender&&(n=[],e.Result.SslCertificates.forEach(function(e){var t;e.ActivationDueDate&&(e.ActivationDueDate=s.Date.dateFromJson(e.ActivationDueDate)),e.PurchaseDate&&(e.PurchaseDate=s.Date.dateFromJson(e.PurchaseDate)),e.ProviderName=e.ProviderName.toLowerCase(),"verisign"==e.ProviderName&&(e.ProviderName="symantec"),"geotrust"==e.ProviderName&&(e.ProviderName="geoTrust"),1==o.SymantecSunsetMasterKey&&"comodo"!=e.ProviderName&&(o.SymantecSunsetDate<=o.currentDate&&(e.DueDateIsExpired=!0),e.ActivationDueDate=o.SymantecSunsetDate-1),n.push((t=e,new s.AsyncStateBehavior({constructor:function(){var e=this.instance;e.model=t,e.asyncStatus(s.AsyncStatus.Active),e.model.nameSortValue=e.model.Name.toLowerCase(),e.providerClass=function(){return"comodo"==e.model.ProviderName.toLowerCase()?"icon-ssl-comodo":"geotrust"==e.model.ProviderName.toLowerCase()?"icon-ssl-geotrust":"verisign"==e.model.ProviderName.toLowerCase()?"icon-ssl-symantec":"thawte"==e.model.ProviderName.toLowerCase()?"icon-ssl-thawte":"symantec"==e.model.ProviderName.toLowerCase()?"icon-ssl-symantec":""}},onSuccess:function(e){this.instance.asyncStatus(s.AsyncStatus.Active)},onActive:function(e){this.instance.aliasError=null},onLoading:function(e){this.instance.aliasError=null},onLocked:function(e){this.instance},onError:function(e){this.instance}})))}),a.model=n,a.showContent=!0,a.showLoadPanel=!1,a.sslGrid.settings.reload(),(t=a.sslGrid.parameters.ordering.usedEntities[2]).descending=!0,a.sslGrid.settings.ordering.set(t)),a.asyncStatus(s.AsyncStatus.Active)},onActive:function(e){this.instance.showLoadPanel=!1},onLoading:function(e){this.instance.showLoadPanel=!0},onError:function(e){var t=this.instance;t.activeNotification=o.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1}),t.showNotifications=!0,t.showHeader=!0,t.asyncStatus(s.AsyncStatus.Active)}})}]),app.controller("profileBillingAutoRenewalPreferencesCtrl",["$scope",function(a){a.setRenewValues=function(e,t,n){a.domainAutoRenewEnabled="True"===e,a.whoIsGuardAutoRenewEnabled="True"===t,a.premiumDnsAutoRenewEnabled="True"===n},a.$watch("domainAutoRenewEnabled",function(e,t){e!=t&&(e||(a.whoIsGuardAutoRenewEnabled=!1,a.premiumDnsAutoRenewEnabled=!1))})}]),app.controller("affiliateCtrl",["$scope","$rootScope","httpRepository","pageHelper","notificationService","$modal","$filter",function(r,e,c,l,t,d,n){r.affiliateResource=AffiliateRes,r.pageHelper=l,r.pageNotification=new t.instance,r.showDetails=!1,r.isEnabled=!1,r.blocked=!1,r.affiliateBehavior=new l.AsyncStateBehavior({constructor:function(){var s=this.instance;s.activeNotification=new t.instance,s.showLoadPanel=!0,s.showNotifications=!1,s.showContent=!1,s.asyncStatus(l.AsyncStatus.Loading),c.affiliate.getInfo().then(function(e){e.sender="getModel",s.asyncStatus(0==e.Error?l.AsyncStatus.Success:l.AsyncStatus.Error,e)});s.setBannersFolder=function(e){s.banners.selectedIndex=e},s.onChangeAccess=function(){var e,t,n,a,i,o;r.blocked||(s.model.Active=!s.model.Active,e=s.model.Active?r.affiliateResource.modal_title_TurnOff:r.affiliateResource.modal_title_TurnOn,t=s.model.Active?r.affiliateResource.modal_intro_TurnOff:r.affiliateResource.modal_intro_TurnOn,s.model.Active||(n=e,a=t,i=function(e,t){t.asyncStatus(l.AsyncStatus.Loading),s.model.Active?c.affiliate.turnOff(e).then(function(e){e.sender="turnOff",0==e.Error?(s.asyncStatus(l.AsyncStatus.Success,e),t.asyncStatus(l.AsyncStatus.Success,e)):(e.Msg=r.affiliateResource.msg_TurnOffError,t.asyncStatus(l.AsyncStatus.Error,e))}):c.affiliate.turnOn(e).then(function(e){e.sender="turnOn",0==e.Error?(s.asyncStatus(l.AsyncStatus.Success,e),t.asyncStatus(l.AsyncStatus.Success,e)):(e.Msg=r.affiliateResource.msg_TurnOnError,t.asyncStatus(l.AsyncStatus.Error,e))})},o=[],d.open({templateUrl:"/Common/ConfirmNmPassword",controller:"confirmNmPasswordCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{modalTitle:function(){return n},modalIntro:function(){return a},confirmFn:function(){return i},alertMsgs:function(){return o}}})))},s.initPageState=function(){r.isSwitchBtn=!0,r.blocked=!1,r.showDetails=s.model.Status!=r.affiliateStatus.NotEnrolled,r.isEnabled=r.showDetails&&s.model.Active&&s.model.Status!=r.affiliateStatus.Blocked,r.isSwitchBtn=!s.model.Active;var e=n("propertyFilter")(s.banners.Folders,{Height:200,Width:200});0<e.length?s.banners.selectedIndex=s.banners.Folders.indexOf(e[0]):s.banners.selectedIndex=0;var t=null;s.model.Status==r.affiliateStatus.Blocked&&(t=r.affiliateResource.label_BlockedAlert,r.blocked=!0,s.model.Active=!1),null!=t&&r.pageNotification.alerts.addWarning(t,{hasClose:!0,isAutoHide:!1})}},onSuccess:function(e){var t=this.instance;"getModel"==e.sender&&(t.model=e.Result,c.affiliate.getBanners().then(function(e){e.sender="getBanners",t.asyncStatus(0==e.Error?l.AsyncStatus.Success:l.AsyncStatus.Error,e)})),"getBanners"==e.sender&&(t.banners=e.Result,t.initPageState(),t.showContent=!0),"turnOn"==e.sender&&(r.pageNotification.alerts.clear(),t.model=e.Result,t.activeNotification=r.pageNotification.stuckNotifications.addSuccess(r.affiliateResource.msg_TurnOnSuccess,{hasClose:!0,isAutoHide:!0}),r.showDetails=!0,r.isEnabled=!0,r.isSwitchBtn=!1),"turnOff"==e.sender&&(r.pageNotification.alerts.clear(),t.model=e.Result,t.activeNotification=r.pageNotification.stuckNotifications.addSuccess(r.affiliateResource.msg_TurnOffSuccess,{hasClose:!0,isAutoHide:!0}),r.isEnabled=!1),t.asyncStatus(l.AsyncStatus.Active)},onActive:function(e){this.instance.showLoadPanel=!1},onLoading:function(e){this.instance.showLoadPanel=!0},onError:function(e){var t=this.instance;t.activeNotification=r.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1}),t.showNotifications=!0,t.asyncStatus(l.AsyncStatus.Active)}}),r.affiliateStatus={NotEnrolled:0,Enrolled:1,Deleted:2,Blocked:3,DeletedAndBlocked:4}}]),app.controller("apiAccessCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","$location","notificationService","pageHelper","$timeout","$sce",function(a,e,i,t,o,n,s,r,c,l){a.apiAccessResource=APIAccessRes;CommonButtonTextRes;a.pageHelper=r,a.pageNotification=new s.instance,a.apiAccessBehavior=new r.AsyncStateBehavior({constructor:function(){var n=this.instance;n.activeNotification=new s.instance,n.asyncStatus(r.AsyncStatus.Loading),i.apiAccess.get().then(function(e){e.sender="getModel",n.asyncStatus(0==e.Error?r.AsyncStatus.Success:r.AsyncStatus.Error,e)});function e(e,t,n,a){return o.open({templateUrl:"/Common/ConfirmNmPassword",controller:"confirmNmPasswordCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{modalTitle:function(){return e},modalIntro:function(){return t},confirmFn:function(){return n},alertMsgs:function(){return a}}})}n.initPageState=function(){a.submittedStatus=!1,a.isSwitchBtn=!0,a.isManageContent=!1,a.pageNotification.alerts.clear(),a.disableManageBtns=!1,a.disableEditBtn=!1,a.pageIntroEligible=n.model.CanEnable;var e=null;switch(n.model.Status){case a.apiAccessStatus.Never:n.model.CanEnable||(a.pageNotification.alerts.addWarning(a.apiAccessResource.label_ApiUserDoesNotQualify,{hasClose:!0,isAutoHide:!1}),a.isSwitchBtn=!1,a.submittedStatus=!0);break;case a.apiAccessStatus.Disabled:e=t("stringFormat")(a.apiAccessResource.label_ApiUserAbusiveActivity,[n.model.DisableReason]),n.model.WasDisabled?(a.submittedStatus=!0,a.disableEditBtn=!0,a.isManageContent=!0):(a.submittedStatus=!0,a.isManageContent=!1),a.disableManageBtns=!0;break;case a.apiAccessStatus.Off:a.isManageContent=!0,a.disableManageBtns=!0,e=a.apiAccessResource.label_ApiTurnedOFF;break;case a.apiAccessStatus.On:a.pageIntroEligible=!0,0==n.model.WhitelistedIpCount&&(e=a.apiAccessResource.label_ApiRequestApproved),a.isManageContent=!0}null!=e&&a.pageNotification.alerts.addWarning(e,{hasClose:!0,isAutoHide:!1})},n.onChangeAccess=function(){a.submittedStatus||(n.model.Enabled=!n.model.Enabled,e(n.model.Enabled?a.apiAccessResource.modal_title_TurnOffApiAccess:a.apiAccessResource.modal_title_TurnOnApiAccess,n.model.Enabled?a.apiAccessResource.modal_intro_TurnOffApiAccess:a.apiAccessResource.modal_intro_TurnOnApiAccess,function(e,t){n.model.Enabled?i.apiAccess.turnOffApiAccess(e).then(function(e){e.sender="turnOff",0==e.Error?(n.asyncStatus(r.AsyncStatus.Success,e),t.asyncStatus(r.AsyncStatus.Success,e)):(e.Msg=a.apiAccessResource.msg_ApiAccessTurnedOffError,t.asyncStatus(r.AsyncStatus.Error,e))}):i.apiAccess.turnOnApiAccess(e).then(function(e){e.sender="turnOn",0==e.Error?(n.asyncStatus(r.AsyncStatus.Success,e),t.asyncStatus(r.AsyncStatus.Success,e)):(e.Msg=a.apiAccessResource.msg_ApiAccessTurnedOnError,t.asyncStatus(r.AsyncStatus.Error,e))})},[]))},n.resetApiKey=function(){e(a.apiAccessResource.modal_title_ResetApiKey,a.apiAccessResource.modal_intro_ResetApiKey,function(e,t){i.apiAccess.resetApiKey(e).then(function(e){e.sender="resetApiKey",0==e.Error?(n.asyncStatus(r.AsyncStatus.Success,e),t.asyncStatus(r.AsyncStatus.Success,e)):(e.Msg=a.apiAccessResource.msg_ApiAccessResetKeyError,t.asyncStatus(r.AsyncStatus.Error,e))})})},n.updateApiKeyDate=function(e){null!=e.LastKeyGenerationDate?(n.model.LastKeyGenerationDate=r.Date.dateFromJson(e.LastKeyGenerationDate),n.generateDate=t("stringFormat")(e.IsResetApiKey?a.apiAccessResource.label_ApiKeyReset:a.apiAccessResource.label_ApiKeyGenerated,[r.Date.toEstDate(n.model.LastKeyGenerationDate),r.Date.toEstTime(n.model.LastKeyGenerationDate)])):n.generateDate=null}},onSuccess:function(e){var t=this.instance;"getModel"==e.sender?(t.model=e.Result,t.showContent=!0,t.updateApiKeyDate(t.model),t.initPageState()):"turnOn"==e.sender?(a.pageNotification.alerts.clear(),t.model.Status=e.Result.Status,t.model.ApiKey,e.Result.ApiKey,t.updateApiKeyDate(e.Result),t.model.Status==a.apiAccessStatus.On&&(a.pageIntroEligible=!0,a.submittedStatus=!1,a.isManageContent=!0,a.disableManageBtns=!1,t.model.Enabled=!0,0==t.model.WhitelistedIpCount&&a.pageNotification.alerts.addWarning(a.apiAccessResource.label_ApiRequestApproved,{hasClose:!0,isAutoHide:!1}),t.activeNotification=a.pageNotification.stuckNotifications.addSuccess(a.apiAccessResource.msg_ApiAccessTurnedOnSuccess,{hasClose:!0,isAutoHide:!0}))):"turnOff"==e.sender?(a.pageNotification.alerts.clear(),t.model.Status=a.apiAccessStatus.Off,t.model.Enabled=!1,a.disableManageBtns=!0,a.pageNotification.alerts.addWarning(a.apiAccessResource.label_ApiTurnedOFF,{hasClose:!0,isAutoHide:!1}),t.activeNotification=a.pageNotification.stuckNotifications.addSuccess(a.apiAccessResource.msg_ApiAccessTurnedOffSuccess,{hasClose:!0,isAutoHide:!0})):"resetApiKey"==e.sender&&(t.model.ApiKey=e.Result.ApiKey,e.Result.IsResetApiKey=!0,t.updateApiKeyDate(e.Result),t.activeNotification=a.pageNotification.stuckNotifications.addSuccess(a.apiAccessResource.msg_ApiAccessResetKeySuccess,{hasClose:!0,isAutoHide:!0})),t.asyncStatus(r.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){this.instance.activeNotification=a.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!1})}}),a.apiAccessStatus={Unknown:0,Never:1,On:2,Off:3,Disabled:4}}]),app.controller("apiAccessEditWhitelistedIpModalCtrl",["$scope","httpRepository","pageHelper","notificationService","$filter","$document","$modalInstance","model","isEdit","whitelistedBehavior",function(i,t,o,e,n,a,s,r,c,l){var d=APIAccessRes;i.pageNotification=new e.instance,i.pageHelper=o,i.startAutoFocus=!0;var u=ErrorMessageRes;i.oldModel=r,i.modalBehavior=new o.AsyncStateBehavior({constructor:function(){var n=this.instance;n.requiredName=!1,n.model=angular.copy(i.oldModel),n.existAddreses=[],n.existNames=[],n.setGeoLocation=function(e){t.apiAccess.getIpGeoLocation(e).then(function(e){var t=e.Result.Country;null!=e.Result.CountIndex&&(t+="-"+e.Result.CountIndex),n.model.GeoLocation=t})},null!=l.model.WhitelistedIPs&&0<l.model.WhitelistedIPs.length&&l.model.WhitelistedIPs.forEach(function(e){null!=i.oldModel&&i.oldModel.Name==e.model.Name||(n.existAddreses.push(e.model.Address),n.existNames.push(e.model.Name.toLocaleLowerCase()))}),null==n.model&&(n.model={}),n.isEdit=c,n.showErrors=!1,n.activeNotification=i.pageNotification.alerts,n.cancel=function(){s.dismiss("cancel")},n.save=function(){if(""!=n.model.Name&&null!=n.model.Name||(n.model.Name=n.model.GeoLocation),i.modalForm.$valid)if(n.showErrors=!1,n.requiredName||null!=n.model.Name&&""!=n.model.Name||(n.model.Name=n.model.GeoLocation),n.isEdit){if(n.isEdit&&n.model.Name==r.Name&&n.model.Address==r.Address)return void n.cancel();n.asyncStatus(o.AsyncStatus.Loading,{sender:"edit"}),t.apiAccess.editWhiteIP(r,n.model).then(function(e){angular.isDefined(e.Result)&&null!=e.Result&&angular.isDefined(e.Result.IsNamecheapPasswordValid)&&!e.Result.IsNamecheapPasswordValid?(i.modalForm.password.$setValidity("invalidPassword",!1),n.asyncStatus(o.AsyncStatus.Active)):(e.sender="edit",n.asyncStatus(0==e.Error?o.AsyncStatus.Success:o.AsyncStatus.Error,e))})}else n.asyncStatus(o.AsyncStatus.Loading,{sender:"addNew"}),t.apiAccess.addWhiteIP(n.model).then(function(e){angular.isDefined(e.Result)&&null!=e.Result&&angular.isDefined(e.Result.IsNamecheapPasswordValid)&&!e.Result.IsNamecheapPasswordValid?(i.modalForm.password.$setValidity("invalidPassword",!1),n.asyncStatus(o.AsyncStatus.Active)):(e.sender="addNew",n.asyncStatus(0==e.Error?o.AsyncStatus.Success:o.AsyncStatus.Error,e))});else angular.forEach(i.modalForm.$error.required,function(e){e.$setDirty()}),n.showErrors=!0,msg=u.error_FormIsNotValid,n.activeNotification.clear(),n.activeNotification.addError(msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){n.activeNotification.clear()}})},n.asyncStatus(o.AsyncStatus.Active)},onSuccess:function(e){var t=this.instance;t.showErrors=!1,"addNew"!=e.sender&&"edit"!=e.sender||s.close(e.Result),t.asyncStatus(o.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance},onError:function(e){var t=this.instance;null!=t.activeNotification&&t.activeNotification.clear(),e.Msg=null==i.oldModel?d.msg_WhitelistedIpAddError:d.msg_WhitelistedIpUpdateError,t.showErrors=!0,t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.showErrors=!1}})}}),i.$watch("modalBehavior.model.Address",function(e,t){if(e!==t){e=null==e?"":e.toString();var n,a=o.Validation.ip4(e);for(n in a)i.modalForm.address["errorMsg_"+n]=a[n].arg,i.modalForm.address.$setValidity(n,a[n].isValid);i.modalForm.address.$setValidity("duplicateName",-1==i.modalBehavior.existAddreses.indexOf(e)),i.modalBehavior.setGeoLocation(e)}}),i.$watch("modalBehavior.model.Name",function(e,t){var n,a;""!=e&&null!=e?e!==t&&(e=null==e?"":e.toString(),n=0<=i.modalBehavior.existNames.indexOf(e.toLowerCase()),i.modalForm.name.$setValidity("duplicateName",!n),i.modalForm.name.$setValidity("maxLength",e.length<31),a=o.Validation.characters(e,null,/^[a-zA-Z0-9\+\-\.\ \,]+$/,!0),i.modalForm.name.$setValidity("invalidCharacter",a.isValid)):i.modalBehavior.model.Name=null}),i.$watch("modalBehavior.model.password",function(e,t){if(e!==t){var n,a=o.Validation.namecheapPassword(e);for(n in a)i.modalForm.password["errorMsg_"+n]=a[n].arg,i.modalForm.password.$setValidity(n,a[n].isValid);i.modalForm.password.$setValidity("invalidPassword",!0)}}),a.bind("keydown",function(e){27!==e.which||i.modalBehavior.asyncStatus().isDisabled||i.modalBehavior.cancel()}),a.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!i.modalBehavior.asyncStatus().isDisabled&&i.modalBehavior.cancel()})}]),app.controller("apiAccessWhitelistedCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","$location","notificationService","pageHelper","$timeout","$sce","ncGridParams","forEachChunk",function(n,e,s,r,c,t,a,l,i,o,d,u){var m=APIAccessRes;CommonButtonTextRes;function p(e,i){return new l.AsyncStateBehavior({constructor:function(){var t=this.instance;t.activeNotification=i.activeNotification,t.model=e,t.updatetSortDate=function(){function e(e){return e<10?"0"+e:e}t.model.UpdatedDate=l.Date.dateFromJson(t.model.UpdatedDate),t.model.date=l.Date.toEstDate(t.model.UpdatedDate),t.model.time=l.Date.toEstTime(t.model.UpdatedDate).toLowerCase(),t.model.timeSortValue=""+e(t.model.UpdatedDate.getHours())+e(t.model.UpdatedDate.getMinutes()),t.model.dateSortValue=""+e(t.model.UpdatedDate.getYear())+e(t.model.UpdatedDate.getMonth())+e(t.model.UpdatedDate.getDate()),t.model.addressSortValue=Number(t.model.Address.replace(/\./g,"")),t.model.nameSortValue=t.model.Name.toLowerCase()},t.updatetSortDate(),t.canChangeSelection=function(){return!t.asyncStatus().isDisabled},t.edit=function(){i.edit(t)},t.remove=function(){i.remove(t)}},onSuccess:function(e){var t,n=this.instance;function a(e){n.activeNotification.addSuccess(e,{hasClose:!0,isAutoHide:!0})}n.isDisabled=!1,"added"==e.sender?a(r("stringFormat")(m.msg_WhitelistedIpAdded,[n.model.Name])):"edit"==e.sender&&(a(r("stringFormat")(m.msg_WhitelistedIpUpdated,[n.model.Name])),n.model=e.Result,n.updatetSortDate(),-1!=(t=i.model.WhitelistedIPs.indexOf(n))&&(i.model.WhitelistedIPs[t]=n)),"remove"==e.sender&&i.whitelistedNgGrid.settings.actions.removeItem(n).then(function(e){a(r("stringFormat")(m.msg_WhitelistedIpRemoved,[e.model.Name])),n.asyncStatus(l.AsyncStatus.Active)}),n.asyncStatus(l.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.isDisabled=!1,t.showError=!1},onLoading:function(e){var t=this.instance;t.showError=!1,t.isDisabled=!0},onLocked:function(e){var t=this.instance;t.showError=!1,t.isDisabled=!0},onError:function(e){var t=this.instance;t.isDisabled=!1,t.showError=!0,"added"==e.sender?e.Msg=m.msg_WhitelistedIpAddError:"edit"==e.sender?e.Msg=m.msg_WhitelistedIpUpdateError:"remove"==e.sender&&(e.Msg=m.msg_WhitelistedIpRemoveError),t.activeNotification&&t.activeNotification.destroy&&t.activeNotification.destroy(),t.activeNotification=n.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.showError=!1,t.asyncStatus(l.AsyncStatus.Active)}})}})}e.closeLightbox=function(){window.location.href="/Profile/Tools/ApiAccess"},n.pageHelper=l,n.pageNotification=new a.instance,n.whitelistedBehavior=new l.AsyncStateBehavior({constructor:function(){var i=this.instance;i.showLoadPanel=!0,i.showContent=!1,i.createIpBehavior=p,i.activeNotification=n.pageNotification.stuckNotifications,i.asyncStatus(l.AsyncStatus.Loading),s.apiAccess.getWhitelistedIPs().then(function(e){e.sender="getModel",i.asyncStatus(0==e.Error?l.AsyncStatus.Success:l.AsyncStatus.Error,e)});var o=null;function t(t,n){(o=c.open({templateUrl:"/Profile/Tools/ApiAccess/EditWhitelistedIpModal",controller:"apiAccessEditWhitelistedIpModalCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{model:function(){return n?t.model:null},isEdit:function(){return n},whitelistedBehavior:function(){return i}}})).result.then(function(e){n?t.asyncStatus(l.AsyncStatus.Success,{sender:"edit",Result:e}):i.whitelistedNgGrid.settings.actions.addNewItem(p(e,i)).then(function(e){e.asyncStatus(l.AsyncStatus.Success,{sender:"added"}),i.asyncStatus(l.AsyncStatus.Active)}),o=null},function(){o=null})}i.add=function(){t(null,!1)},i.edit=function(e){t(e,!0)};o=null;i.remove=function(e){var a=[];return null!=e?a.push(e):a=i.whitelistedNgGrid.parameters.selection.selectedItems,(o=c.open({templateUrl:"/Common/ConfirmNmPassword",controller:"confirmNmPasswordCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{modalTitle:function(){var e=1==a.length?m.modal_title_RemoveWhitelistedIp:m.modal_title_RemoveWhitelistedIps,t=1==a.length?a[0].model.Name:a.length;return r("stringFormat")(e,[t])},modalIntro:function(){return m.modal_intro_RemoveWhitelistedIp},confirmFn:function(){return function(n,t){s.common.checkUser(n).then(function(e){0==e.Error&&1==e.Result.IsCorrect?(t.asyncStatus(l.AsyncStatus.Success,e),a.forEach(function(e,t,n){e.asyncStatus(l.AsyncStatus.Loading)}),u(a,function(t){var e=s.apiAccess.removeWhiteIP(t.model,n);return e.then(function(e){e.sender="remove",t.asyncStatus(0==e.Error?l.AsyncStatus.Success:l.AsyncStatus.Error,e)}),e})):((null==e.Errors[0]||null!=e.Errors[0]&&1011109!=e.Errors[0].ErrorFullCode)&&(e.Msg=1==a.length?m.msg_WhitelistedIpRemoveError:m.msg_WhitelistedIpsRemoveError),t.asyncStatus(l.AsyncStatus.Error,e))})}},alertMsgs:function(){return null}}})).result.then(function(){},function(){o=null}),o},i.whitelistedNgGrid=new d,i.whitelistedNgGrid.parameters.search.serchPropertyNames=["model.Name","model.Address"],i.whitelistedNgGrid.parameters.mapping.isLazyLoading=!1,i.whitelistedNgGrid.settings.getData=function(e,t){e.resolve({Data:i.model.WhitelistedIPs})},i.whitelistedNgGrid.settings.selection.canChangeSelection=function(e){return e.canChangeSelection()}},onSuccess:function(e){var t,n=this.instance;"getModel"==e.sender&&(n.showContent=!0,t=[],n.model=e.Result,null!=e.Result.WhitelistedIPs&&e.Result.WhitelistedIPs.forEach(function(e){t.push(n.createIpBehavior(e,n))}),n.model.WhitelistedIPs=t,n.whitelistedNgGrid.settings.reload()),n.asyncStatus(l.AsyncStatus.Active)},onActive:function(e){var t=this.instance;t.showLoadPanel=!1,t.showContent=!0},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.showLoadPanel=!1,"getModel"!=e.sender&&(t.showContent=!0),t.activeNotification=n.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0})}})}]),app.controller("categoriesAddEditCategoryModalCtrl",["$scope","$rootScope","httpRepository","$filter","$document","$modalInstance","model","$location","notificationService","pageHelper","categoryList",function(o,e,n,t,a,i,s,r,c,l,d){var u=CategoriesRes;o.oldModel=s,o.pageHelper=l,o.pageNotification=new c.instance,o.startAutoFocus=!0,o.modalBehavior=new l.AsyncStateBehavior({constructor:function(){var t=this.instance;t.model=angular.copy(o.oldModel),t.categoryList=d,t.showErrors=!1,t.activeNotification=o.pageNotification.alerts,t.cancel=function(){i.dismiss("cancel")},t.save=function(){if(o.modalForm.$valid)if(t.asyncStatus(l.AsyncStatus.Loading),null==o.oldModel)n.category.addCategory(t.model.CategoryName).then(function(e){1==e.Error&&(e.Msg=ErrorMessageRes.error_failedToSave),t.asyncStatus(0==e.Error?l.AsyncStatus.Success:l.AsyncStatus.Error,e)});else{if(o.oldModel.CategoryName==t.model.CategoryName)return void t.asyncStatus(l.AsyncStatus.Success);n.category.editCategory(o.oldModel.CategoryName,t.model.CategoryName).then(function(e){1==e.Error&&(e.Msg=ErrorMessageRes.error_failedToSave),t.asyncStatus(0==e.Error?l.AsyncStatus.Success:l.AsyncStatus.Error,e)})}else{angular.forEach(o.modalForm.$error.required,function(e){e.$setDirty()}),t.showErrors=!0;var e=u.error_FormIsNotValid;t.activeNotification.clear(),t.activeNotification.addError(e,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.activeNotification.clear()}})}}},onLoading:function(e){this.instance},onSuccess:function(e){var t=this.instance;t.showErrors=!1,i.close(t.model.CategoryName)},onError:function(e){var t=this.instance;null!=t.activeNotification&&t.activeNotification.clear(),t.showErrors=!0,t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.showErrors=!1}})}}),o.$watch("modalBehavior.model.CategoryName",function(e,t){if(""!=e&&null!=e){if(e!==t){var n=0<=o.modalBehavior.categoryList.indexOf(e.toLowerCase());o.modalForm.categoryName.$setValidity("duplicateName",!n),o.modalForm.categoryName.$setValidity("maxLength",e.length<=30);for(var a=!0,i=0;i<e.length;i++)(e[i]<" "||"z"<e[i]||"<"==e[i])&&(a=!1);o.modalForm.categoryName.$setValidity("invalidCharacter",a)}}else null!=o.modalBehavior.model&&(o.modalBehavior.model.CategoryName=null)}),a.bind("keydown",function(e){27!==e.which||o.modalBehavior.asyncStatus().isDisabled||o.modalBehavior.cancel()}),a.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!o.modalBehavior.asyncStatus().isDisabled&&o.modalBehavior.cancel()})}]),app.controller("categoriesCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","$location","notificationService","pageHelper","$timeout","$sce","ncGridParams",function(o,e,i,s,r,t,n,c,a,l,d){function u(t,i){return new c.AsyncStateBehavior({constructor:function(){var e=this.instance;e.model=t,e.model.CategoryName&&(e.model.CategoryNameSortValue=e.model.CategoryName.toLowerCase()),e.canChangeSelection=function(){return!e.asyncStatus().isDisabled},e.remove=function(){i.remove(e)},e.edit=function(){i.edit(e)}},onSuccess:function(n){var e,a=this.instance;a.showContextualError=!1,"addNew"==n.sender&&i.categoryNgGrid.settings.actions.addNewItem(a).then(function(){var e=s("stringFormat")(o.categoriesResource.msg_add_category_successFormat,[a.model.CategoryName]);a.activeNotification=o.pageNotification.stuckNotifications.addSuccess(e,{hasClose:!0,isAutoHide:!0})}),"editCategory"==n.sender&&(e=s("stringFormat")(o.categoriesResource.msg_dynamic_edit_SuccessFormat,[a.model.CategoryName]),a.activeNotification=o.pageNotification.stuckNotifications.addSuccess(e,{hasClose:!0,isAutoHide:!0})),"remove"==n.sender&&i.categoryNgGrid.settings.actions.removeItem(a).then(function(e){null!=n.Result&&i.model.forEach(function(e){null!=n.Result.CategoryName&&e.model.CategoryName==n.Result.CategoryName&&(e.model.DomainsQuantity=n.Result.DomainsQuantity)});var t=s("stringFormat")(o.categoriesResource.msg_remove_category_success,[a.model.CategoryName]);a.activeNotification=o.pageNotification.stuckNotifications.addSuccess(t,{hasClose:!0,isAutoHide:!0}),a.asyncStatus(c.AsyncStatus.Active)}),a.asyncStatus(c.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance.showContextualError=!1,o.errorCount=0},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;o.errorCount++,t.showContextualError=!0,"remove"==e.sender&&0<o.errorCount&&(e.Msg=o.errorCount<2?o.categoriesResource.msg_site_remove_ErrorFormat:o.categoriesResource.msg_site_remove_multiple_ErrorFormat),t.activeNotification&&t.activeNotification.destroy&&t.activeNotification.destroy(),0<o.errorCount&&(t.activeNotification=o.pageNotification.alerts.clear(),t.activeNotification=o.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!0}),t.showNotifications=!0,t.showHeader=!0,t.asyncStatus(c.AsyncStatus.Active))}})}o.categoriesResource=CategoriesRes,o.pageHelper=c,o.pageNotification=new n.instance,o.totalDomainsToDel=0,o.errorCount=0,o.pageBehavior=new c.AsyncStateBehavior({constructor:function(){var a=this.instance;a.showLoadPanel=!0,a.activeNotification=new n.instance,a.asyncStatus(c.AsyncStatus.Loading),i.category.get().then(function(e){e.sender="getModel",a.showLoadPanel=!1,a.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e)}),a.categoryNgGrid=new d,a.categoryNgGrid.parameters.search.serchPropertyNames=["model.CategoryNameSortValue"],a.categoryNgGrid.parameters.mapping.isLazyLoading=!1,a.categoryNgGrid.settings.getData=function(e,t){e.resolve({Data:a.model})},a.categoryNgGrid.settings.selection.canChangeSelection=function(e){return e.canChangeSelection()},a.edit=function(n){var e=r.open({templateUrl:"/Profile/Tools/Categories/AddEditCategory",controller:"categoriesAddEditCategoryModalCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{categoryList:function(){var t=[];return a.model.forEach(function(e){null==e.model.CategoryName||null!=n&&e.model.CategoryName==n.model.CategoryName||t.push(e.model.CategoryName.toLowerCase())}),t},model:function(){return null==n?null:n.model}}});return e.result.then(function(e){a.activeNotification=o.pageNotification.alerts.clear(),null==n?u({CategoryName:e,DomainsQuantity:0},a).asyncStatus(c.AsyncStatus.Success,{sender:"addNew"}):(n.model.CategoryNameSortValue=e.toLowerCase(),n.asyncStatus(c.AsyncStatus.Success,{sender:"editCategory"}),n.model.CategoryName=e)},function(){e=null}),e},a.remove=function(e){var n=[];if(o.totalDomainsToDel=0,a.activeNotification=o.pageNotification.alerts.clear(),null!=e?(o.totalDomainsToDel=e.model.DomainsQuantity,n.push(e)):(n=a.categoryNgGrid.parameters.selection.selectedItems).forEach(function(e){o.totalDomainsToDel+=e.model.DomainsQuantity}),0==o.totalDomainsToDel)return n.forEach(function(e){e.asyncStatus(c.AsyncStatus.Loading)}),void n.forEach(function(t){i.category.deleteCategory(t.model.CategoryName,null).then(function(e){e.sender="remove",t.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e)})});var t=r.open({templateUrl:"/Profile/Tools/Categories/RemoveCategory",controller:"categoriesRemoveCategoryModalCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{categoryList:function(){var t=[];return a.model.forEach(function(e){-1==n.indexOf(e)&&t.push(e.model.CategoryName)}),t},categoriesToDelQuantity:function(){return n.length}}});t.result.then(function(e){a.asyncStatus(c.AsyncStatus.Loading),n.forEach(function(e){e.asyncStatus(c.AsyncStatus.Loading)}),n.forEach(function(t){i.category.deleteCategory(t.model.CategoryName,e.newCategoryName).then(function(e){e.sender="remove",t.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e)})})},function(){t=null})}},onSuccess:function(e){var t,n=this.instance;"getModel"==e.sender&&(n.model=[],t=[],e.Result.Categories.forEach(function(e){t.push(u(e,n))}),n.model=t,n.categoryNgGrid.settings.reload(),n.showContent=!0),n.asyncStatus(c.AsyncStatus.Active)},onActive:function(e){this.instance},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){instance.activeNotification=o.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!1})}})}]),app.controller("categoriesEditCategoryModalCtrl",["$scope","$rootScope","httpRepository","$filter","$document","$modalInstance","model","$location","notificationService","pageHelper",function(t,e,n,a,i,o,s,r,c,l){t.pageHelper=l,t.pageNotification=new c.instance,t.modalBehavior=new l.AsyncStateBehavior({constructor:function(){var e=this.instance;e.requiredName=!0,e.model=angular.copy(t.oldModel),e.existAddreses=[],e.existNames=[],e.showErrors=!1,e.activeNotification=t.pageNotification.alerts,e.cancel=function(){o.dismiss("cancel")},e.save=function(){return null}}}),i.bind("keydown",function(e){27!==e.which||t.modalBehavior.asyncStatus().isDisabled||t.modalBehavior.cancel()}),i.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!t.modalBehavior.asyncStatus().isDisabled&&t.modalBehavior.cancel()})}]),app.controller("categoriesRemoveCategoryModalCtrl",["$scope","$rootScope","httpRepository","$filter","$document","$modalInstance","$location","notificationService","pageHelper","categoryList","categoriesToDelQuantity",function(t,e,n,a,i,o,s,r,c,l,d){CategoriesRes;t.select2Options={minimumResultsForSearch:10},t.pageHelper=c,t.pageNotification=new r.instance,t.modalBehavior=new c.AsyncStateBehavior({constructor:function(){var e=this.instance;e.requiredName=!0,e.categoryList=l,e.categoriesToDelQuantity=d,e.showErrors=!1,e.activeNotification=t.pageNotification.alerts,e.cancel=function(){o.dismiss("cancel")},e.remove=function(){e.asyncStatus(c.AsyncStatus.Loading),o.close({newCategoryName:e.asignTo})}},onActive:function(){this.instance},onLoading:function(e){this.instance},onSuccess:function(e){var t=this.instance;t.showErrors=!1,t.asyncStatus(c.AsyncStatus.Active)},onError:function(e){var t=this.instance;null!=t.activeNotification&&t.activeNotification.clear(),t.showErrors=!0,t.activeNotification.addError(e.Msg,{hasClose:!0,isAutoHide:!0,onDestroyed:function(){t.showErrors=!1}})}}),i.bind("keydown",function(e){27!==e.which||t.modalBehavior.asyncStatus().isDisabled||t.modalBehavior.cancel()}),i.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!t.modalBehavior.asyncStatus().isDisabled&&t.modalBehavior.cancel()})}]),app.controller("dnsSettingsCtrl",["$rootScope","$scope","$rootScope","httpRepository","pageHelper","notificationService","$modal","$filter","$timeout",function(a,o,a,s,r,e,t,n,c){a.closeLightbox=function(){window.location.href="/Profile/Tools/"},o.dnsServerType={Default:0,Custom:1};var l=null;o.resources=DnsSettingsRes,o.pageHelper=r,o.pageNotification=new e.instance,o.select2Options={minimumResultsForSearch:-1},o.$watch("behavior.model.ForwardTo",function(e,t){var n;e!==t&&o.DnsSettingsForm.destinationEmail&&(null==e&&(e=""),n=r.Validation.email(e),o.DnsSettingsForm.destinationEmail.$setValidity("invalidEmailFormat",n.isValid),o.DnsSettingsForm.destinationEmail.$setValidity("destinationEmailMaxLength",e.length<=128),o.DnsSettingsForm.destinationEmail.errorMsg_maxLength=128)}),o.$watch("behavior.model.ForwardingUrl",function(e,t){e!==t&&o.DnsSettingsForm.destinationUrl&&(null==e&&(e=""),o.DnsSettingsForm.destinationUrl.$setValidity("urlMaxLength",e.length<=255),o.DnsSettingsForm.destinationUrl.errorMsg_maxLength=255)}),o.$watch("behavior.model.Email",function(e,t){var n;e!==t&&o.DnsSettingsForm.forwarder&&(null==e&&(e=""),n=r.Validation.emailForwarder(e),o.DnsSettingsForm.forwarder.$setValidity("invalidEmailForwarderFormat",n.isValid),o.DnsSettingsForm.forwarder.$setValidity("EmailForwardeMaxLength",e.length<=63),o.DnsSettingsForm.forwarder.errorMsg_maxLength=63)}),o.behavior=new r.AsyncStateBehavior({constructor:function(){var n=this.instance;n.activeNotification=new e.instance,n.showLoadPanel=!1,n.showNotifications=!1,n.showHeader=!1,n.showContent=!1,n.asyncStatus(r.AsyncStatus.Loading),s.dnsSettings.getInfo().then(function(e){e.sender="getModel",n.asyncStatus(0==e.Error?r.AsyncStatus.Success:r.AsyncStatus.Error,e)}),n.save=function(){if(n.model.DnsProvider==o.dnsServerType.Custom){var e=n.model.CustomNameservers;for(i=0;i<e.length;i++)o.onNameChange(e[i])}var t;o.DnsSettingsForm.$valid?(n.asyncStatus(r.AsyncStatus.Loading,{sender:"save"}),1==JSON.parse(n.model.NamecheapDefaultUrlForwardig)?n.model.ForwardingUrl="":0==JSON.parse(n.model.NamecheapDefaultUrlForwardig)&&(n.model.ForwardingUrl=u(n.model.ForwardingUrl)),1==JSON.parse(n.model.NamecheapDefaultEmailForwardig)&&(n.model.Email="",n.model.ForwardTo=""),s.dnsSettings.save(n.model).then(function(e){e.sender="save",1==e.Error&&a.scroolToElement($('[link="pageNotification"]'),100),n.asyncStatus(0==e.Error?window.location.href="/Profile/Tools?notificationKey=s_dnsp":n.asyncStatus(r.AsyncStatus.Error,{Msg:ErrorMessageRes.error_FaildToSaveDns}),e)})):(t=null,t=o.DnsSettingsForm.$error.required?o.DnsSettingsForm.$error.required[0]:o.DnsSettingsForm.$error[Object.keys(o.DnsSettingsForm.$error)[0]][0],angular.forEach(o.DnsSettingsForm.$error.required,function(e){e.$setDirty()}),t&&a.scroolToElement($("[name="+t.$name+"]"),100),n.asyncStatus(r.AsyncStatus.Error,{Msg:ErrorMessageRes.error_NotAllFieldsFilledCorrectly}))}},onSuccess:function(e){var t=this.instance;"getModel"==e.sender&&(t.model=e.Result,t.model.NamecheapDefaultUrlForwardig=t.model.NamecheapDefaultUrlForwardig.toString(),t.model.NamecheapDefaultEmailForwardig=t.model.NamecheapDefaultEmailForwardig.toString(),m(l={},t.model),t.showNotifications=!0,t.showHeader=!0,t.showContent=!0,t.model.CustomNameservers.forEach(function(e,t){e.toolTipText=t<2?o.resources.label_NameserverIteratorInfo:o.resources.label_NameserverIteratorInfoOptional}),c(function(){var e=t.model.CustomNameservers;for(i=0;i<e.length;i++)o.onNameChange(e[i])})),"save"==e.sender&&(a.closeLightbox(),m(l,t.model)),t.asyncStatus(r.AsyncStatus.Active)},onActive:function(e){this.instance.showLoadPanel=!1},onLoading:function(e){var t=this.instance;"save"!=e.sender&&(t.showLoadPanel=!0)},onError:function(e){var t=this.instance;t.activeNotification=o.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1}),t.showNotifications=!0,t.showHeader=!0,t.asyncStatus(r.AsyncStatus.Active)}}),o.onNameChange=function(e){var t=""==e.Name||null==e.Name||!d(e);o.DnsSettingsForm["nameserver"+e.Idx].$setValidity("NsDuplicated",t)};var d=function(e){for(var t=!1,n=o.behavior.model.CustomNameservers,a=0,i=0;i<n.length;i++)e.Name==n[i].Name&&(t=1<++a);return t};o.onDnsCustomTypeChange=function(){var e=o.behavior;e.model.NamecheapDefaultUrlForwardig=l.NamecheapDefaultUrlForwardig,e.model.ForwardingUrl=l.ForwardingUrl,e.model.ForwardingType=l.ForwardingType,e.model.NamecheapDefaultEmailForwardig=l.NamecheapDefaultEmailForwardig,e.model.Email=l.Email,e.model.ForwardTo=l.ForwardTo};var u=function(e){return"http://"!=e.substring(0,7).toString()&&"https://"!=e.substring(0,8).toString()?"http://".concat(e):e},m=function(e,t){e.NamecheapDefaultUrlForwardig=t.NamecheapDefaultUrlForwardig,e.ForwardingUrl=t.ForwardingUrl,e.ForwardingType=t.ForwardingType,e.NamecheapDefaultEmailForwardig=t.NamecheapDefaultEmailForwardig,e.Email=t.Email,e.ForwardTo=t.ForwardTo}}]),app.controller("createNewContactModalCtrl",["$scope","$rootScope","httpRepository","notificationService","pageHelper","$modalInstance","modalInteraction","$document",function(c,t,a,i,l,d,o,e){c.pageNotification=new i.instance;ErrorMessageRes;c.pageHelper=l,c.modalBehavior=new l.AsyncStateBehavior({constructor:function(){var n=this.instance;n.bulkData={},n.model={},n.activeNotification=new i.instance,n.asyncStatus(l.AsyncStatus.Loading);var e=o.contactType;n.isRegistrantContact=1==e,n.isAdministrativeContact=2==e,n.isTechnicalContact=3==e,n.isBillingContact=4==e,n.showErrors=!1,a.userContacts.getUserAddContactModel().then(function(e){e.sender="getModel",0==e.Error&&(t.userAddContactModel=angular.copy(e)),n.asyncStatus(0==e.Error?l.AsyncStatus.Success:l.AsyncStatus.Error,e)}),n.onAddressNameChanged=function(){var e=this.model.addressName||"";if(this.isNameEmpty=""===e,this.isNameAlreadyExists=!1,this.isAddressNameCanBeChanged)for(var t=0;t<this.bulkData.existingNames.length;t++){var n=this.bulkData.existingNames[t].AddressName;null==n&&(n=""),n.toLowerCase()===e.toLowerCase()&&(this.isNameAlreadyExists=!0)}this.isNameValid=this.isNameEmpty||e.match(nc_Val_EnglishNameAndNumbers)},n.isNameValidFull=function(){return!this.isNameAlreadyExists&&this.isNameValid&&!this.isAddressNameTooLong()},n.isAddressNameTooLong=function(){return 30<(this.model.addressName||"").length},n.onFirstNameChanged=function(){var e=this.model.firstName||"";this.isFirstNameEmpty=""===e,this.isFirstNameValid=this.isFirstNameEmpty||e.match(nc_Val_FnameLnameRegExpression)},n.isFirstNameValidFull=function(){return!this.isFirstNameEmpty&&this.isFirstNameValid},n.onLastNameChanged=function(){var e=this.model.lastName||"";this.isLastNameEmpty=""===e,this.isLastNameValid=this.isLastNameEmpty||e.match(nc_Val_FnameLnameRegExpression)},n.isLastNameValidFull=function(){return!this.isLastNameEmpty&&this.isLastNameValid},n.onCompanyNameChanged=function(){var e=this.model.companyName||"";this.isCompanyNameEmptyAndRequired=""===e&&this.model.isCompanyAddress,this.isCompanyNameValid=""===e||e.match(nc_Val_OrgCompanyNameRegExpression)||!this.model.isCompanyAddress},n.isCompanyNameValidFull=function(){return!this.isCompanyNameEmptyAndRequired&&this.isCompanyNameValid},n.onJobTitleChanged=function(){var e=this.model.jobTitle||"";this.isJobTitleEmptyAndRequired=""===e&&this.model.isCompanyAddress,this.isJobTitleValid=""===e||e.match(nc_Val_FnameLnameRegExpression)||!this.model.isCompanyAddress},n.isJobTitleValidFull=function(){return this.isJobTitleValid&&!this.isJobTitleEmptyAndRequired},n.onAddress1Changed=function(){var e=this.model.address1||"";this.isAddress1Empty=""===e,this.isAddress1Valid=this.isAddress1Empty||e.match(nc_Val_AddressRegex)},n.isAddress1ValidFull=function(){return!this.isAddress1Empty&&this.isAddress1Valid},n.onAddress2Changed=function(){var e=this.model.address2||"";this.isAddress2Valid=""===e||e.match(nc_Val_AddressRegex)},n.isAddress2ValidFull=function(){return this.isAddress2Valid},n.onStateChanged=function(){var e=(this.model.state||"").toUpperCase();this.isStateEmpty=""===e;var t=e.match(nc_Val_TwoCapitalsRegex),n=e.match(nc_Val_StateRegex),a="US"==this.model.country||"CA"==this.model.country;this.isStateValid=!0,a&&!t&&(this.stateValidationMessage=AddressValidationRes.error_Site_StateProvinceExceedErrorMessage,this.isStateValid=!1),a||n||(this.stateValidationMessage=AddressValidationRes.error_invalidCharacters,this.isStateValid=!1),this.isStateValid=this.isStateEmpty||this.isStateValid;var i=!1,o=this.bulkData.states;if(o)for(var s=0;s<o.length;s++)if(this.model.country==o[s].CountryCode){i=!0;break}if(i){if(t){for(s=0;s<o.length;s++)if(this.model.country==o[s].CountryCode&&e==o[s].StateCode)return;return this.stateValidationMessage=AddressValidationRes.error_Site_StateProvinceErrorMessage,void(this.isStateValid=!1)}for(s=0;s<o.length;s++)if(this.model.country==o[s].CountryCode&&e.toUpperCase()==o[s].StateName.toUpperCase())return this.model.state=o[s].StateCode,void this.onStateChanged()}},n.isStateValidFull=function(){return this.isStateValid&&!this.isStateEmpty},n.onCityChanged=function(){var e=this.model.city||"";this.isCityEmpty=""===e,this.isCityValid=this.isCityEmpty||e.match(nc_Val_CityRegex)},n.isCityValidFull=function(){return this.isCityValid&&!this.isCityEmpty},n.onZipChanged=function(){var e=this.model.zipCode||"";this.isZipEmpty=""===e;var t=this.model.country.toUpperCase(),n=nc_Val_AlphaNumericSpace;switch(this.zipValidationMessage=AddressValidationRes.error_Site_PostalCodeErrorMessage,t.toUpperCase()){case"US":n=nc_Val_US_PostalCodeRegex,this.zipValidationMessage=AddressValidationRes.error_Site_PostalUSErrorMessage;break;case"CA":n=nc_Val_CA_PostalCodeRegex,this.zipValidationMessage=AddressValidationRes.error_Site_PostalCAErrorMessage;break;case"GB":n=nc_Val_GB_PostalCodeRegex,this.zipValidationMessage=AddressValidationRes.error_Site_PostalGBErrorMessage;break;case"NL":n=nc_Val_NL_PostalCodeRegex,this.zipValidationMessage=AddressValidationRes.error_Site_PostalNLErrorMessage;break;case"BR":n=nc_Val_BR_PostalCodeRegex,this.zipValidationMessage=AddressValidationRes.error_Site_PostalBRErrorMessage;break;case"JP":n=nc_Val_JP_PostalCodeRegex,this.zipValidationMessage=AddressValidationRes.error_Site_PostalJPErrorMessage;break;case"JE":n=nc_Val_JE_PostalCodeRegex,this.zipValidationMessage=AddressValidationRes.error_Site_PostalJEErrorMessage;break;case"GG":n=nc_Val_GG_PostalCodeRegex,this.zipValidationMessage=AddressValidationRes.error_Site_PostalGGErrorMessage}this.isZipValid=e.match(n)||this.isZipEmpty},n.isZipValidFull=function(){return this.isZipValid&&!this.isZipEmpty},n.onPhoneChanged=function(){var e=this.model.phone||"";this.isPhoneValid=e.match(nc_Val_FiveOrMoreDigits),c.addEditContactForm.tel.$setValidity("invalidPhone",null!=e.match(nc_Val_FiveOrMoreDigits))},n.onFaxChanged=function(){var e=this.model.fax||"";this.isFaxValid=!0,c.addEditContactForm.fax.$setValidity("invalidFax",!0),""!=e&&(this.isFaxValid=e.match(nc_Val_Numeric),c.addEditContactForm.fax.$setValidity("invalidFax",null!=e.match(nc_Val_FiveOrMoreDigits)))},n.isFaxValidFull=function(){return null==this.isFaxValid||this.isFaxValid},n.isCountryEmpty=function(){return""==this.model.country},n.isPhonePrefixEmpty=function(){return(this.model.phonePrefix||"")<="+"},n.isFaxPrefixEmptyAndRequired=function(){return this.model.faxPrefix<="+"&&""<this.model.fax},n.isPhoneValidFull=function(){return this.isPhoneValid&&!this.isPhonePrefixEmpty()},n.onEmailChanged=function(){var e=this.model.email||"";this.emailMaxLength=128<e.length,c.addEditContactForm.email.errorMsg_maxLength=128,this.isEmailEmpty=""===e,this.isEmailValid=this.isEmailEmpty||l.Validation.email(e).isValid},n.isEmailValidFull=function(){return this.isEmailValid&&!this.isEmailEmpty&&!this.emailMaxLength},n.revalidateForm=function(){this.onAddressNameChanged(),this.onFirstNameChanged(),this.onLastNameChanged(),this.onCompanyNameChanged(),this.onJobTitleChanged(),this.onAddress1Changed(),this.onAddress2Changed(),this.onStateChanged(),this.onCityChanged(),this.onZipChanged(),this.onPhoneChanged(),this.onFaxChanged(),this.onEmailChanged()},n.areAllFieldsValid=function(){return this.isEmailValidFull()&&this.isFaxValidFull()&&this.isPhoneValidFull()&&this.isZipValidFull()&&this.isCityValidFull()&&this.isStateValidFull()&&this.isAddress1ValidFull()&&this.isAddress2ValidFull()&&this.isCompanyNameValidFull()&&this.isJobTitleValidFull()&&this.isFirstNameValidFull()&&this.isLastNameValidFull()&&!this.isCountryEmpty()&&!this.isPhonePrefixEmpty()&&!this.isFaxPrefixEmptyAndRequired()&&this.isNameValidFull()},n.save=function(){var e;n.asyncStatus(l.AsyncStatus.Loading),this.showErrors=!0,this.asyncStatus(l.AsyncStatus.Locked),""==this.model.addressName&&(this.model.addressName=this.bulkData.AutoName,this.onAddressNameChanged()),angular.forEach(c.addEditContactForm.$error.required,function(e){e.$setDirty()}),angular.isDefined(c.addEditContactForm.telExt)&&c.addEditContactForm.telExt.$setDirty(),c.addEditContactForm.fax.$setDirty(),c.addEditContactForm.email.$setDirty(),""==(this.model.fax||"")&&(this.model.faxPrefix=""),this.areAllFieldsValid()?(n.selfModel=this.model,this.isAddressNameCanBeChanged?a.userContacts.addNewCustomContact(this.model).then(function(e){e.sender="addNew",n.asyncStatus(0==e.Error?l.AsyncStatus.Success:l.AsyncStatus.Error,e)}):a.userContacts.editCustomContact(this.model).then(function(e){e.sender="edit",n.asyncStatus(0==e.Error?l.AsyncStatus.Success:l.AsyncStatus.Error,e)})):(e={Msg:AddressValidationRes.error_validation},this.asyncStatus(l.AsyncStatus.Error,e))},n.close=function(){d.dismiss("cancel")},c.$watch("modalBehavior.model.country",function(e,t){e!=t&&(n.onZipChanged(),n.onStateChanged())})},onSuccess:function(e){var t=this.instance;if("getModel"==e.sender){t.bulkData.existingNames=e.Result.ExistingNames,t.bulkData.countries=e.Result.Countries,t.bulkData.phoneCodes=e.Result.PhoneCodes,t.bulkData.states=e.Result.States,t.bulkData.AutoName=e.Result.RequestCountry,t.bulkData.isDefaultCompulsory=e.Result.IsDefaultCompulsory;var n=0;do{for(var a=!0,i=0;i<t.bulkData.existingNames.length;i++){var o=t.bulkData.existingNames[i].AddressName;null==o&&(o=""),o.toLowerCase()==t.bulkData.AutoName.toLowerCase()&&(a=!1,n++,t.bulkData.AutoName=e.Result.RequestCountry+" "+n)}}while(!a);var s=e.Result.OldContact;t.model.addressName=s.AddressName,null==t.model.addressName&&(t.model.addressName=""),t.isAddressNameCanBeChanged=""==t.model.addressName,t.model.isDefault=t.bulkData.isDefaultCompulsory,t.model.firstName=s.FirstName,t.model.lastName=s.LastName,t.model.companyName=s.Organization,t.model.jobTitle=s.JobTitle,t.model.address1=s.StreetAddress,t.model.address2=s.Address2,t.model.state=s.State,t.model.city=s.City,t.model.zipCode=s.Zip,t.model.country=s.Country,t.model.stateProvince=s.StateProvince,t.model.state=s.State,t.model.phoneExtension=s.PhoneExtension,t.model.isUseForRegistrant=t.isRegistrantContact,t.model.isUseForAdministrative=t.isAdministrativeContact,t.model.isUseForTechnical=t.isTechnicalContact,t.model.isUseForAuxBilling=t.isBillingContact;var r=s.Phone.split(".");1<r.length?(t.model.phonePrefix=r[0],t.model.phone=r[1]):t.model.phone=r[0],1<(r=s.Fax.split(".")).length?(t.model.faxPrefix=r[0],t.model.fax=r[1]):(t.model.faxPrefix="",t.model.fax=r[0]),t.model.email=s.Email,t.model.phoneExtension="",c.startAutoFocus=!0}else("addNew"==e.sender||"edit"==e.sender)&&d.close({savedEntity:e.Result,modalEntity:t.selfModel});t.asyncStatus(l.AsyncStatus.Active)},onActive:function(e){this.instance.revalidateForm&&this.instance.revalidateForm()},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;"addNew"!=e.sender&&"edit"!=e.sender||(e.Msg=AddressValidationRes.error_fatal),t.activeNotification=c.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1}),t.showNotifications=!0,t.asyncStatus(l.AsyncStatus.Active)}}),e.bind("keydown",function(e){27!==e.which||c.modalBehavior.asyncStatus().isDisabled||c.modalBehavior.close()}),e.bind("click",function(e){angular.element(e.target).hasClass("mfp-content")&&!c.modalBehavior.asyncStatus().isDisabled&&c.modalBehavior.close()})}]),app.controller("domainContactsCtrl",["$scope","$rootScope","httpRepository","$filter","$modal","$location","notificationService","pageHelper","$timeout","$sce","$templateCache","httpService","$anchorScroll",function(o,s,r,e,t,n,a,c,i,l,d,u,m){s.closeLightbox=function(){window.location.href="/Profile/Tools/"},o.skipTld=["de","bio","eu"];CommonButtonTextRes;var p=ErrorMessageRes;o.resources=DomainContactsRes,d.get("/Profile/Tools/DomainContacts/ItemContacts/Template/"),o.pageHelper=c,o.pageNotification=new a.instance,s.contactType={Registrant:1,Administrative:2,Techinical:3,Billing:4},o.pageBehavior=new c.AsyncStateBehavior({constructor:function(){var i=this.instance;i.asyncStatus(c.AsyncStatus.Loading),i.activeNotification=new a.instance,i.isLoading=!0,i.showContent=!1,r.userContacts.getDomainContactsSettings().then(function(e){e.sender="getModel",i.asyncStatus(0==e.Error?c.AsyncStatus.Success:c.AsyncStatus.Error,e)}),r.userContacts.getProfile().then(function(e){s.primaryAddressInfo=e.Result}),r.userContacts.getDefault().then(function(e){s.defaultAddressInfo=e.Result}),i.saveChanges=function(){i.asyncStatus(c.AsyncStatus.Loading);var n,t=!0,e={},a=null;i.model.defaultDomainContacts.contacts.form.$valid||(t=!1,angular.forEach(i.model.defaultDomainContacts.contacts.form.$error.required,function(e){null==a&&(a=e.$name),e.$setDirty()})),i.model.tldAlternativeContacts.forEach(function(e){e.attributes.IsUsed&&(null==e.contacts||e.contacts.form.$valid||(t=!1,angular.forEach(e.contacts.form.$error.required,function(e){null==a&&(a=e.$name),e.$setDirty()})),e.form.$valid||(t=!1,angular.forEach(e.form.$error.required,function(e){null==a&&(a=e.$name),e.$setDirty()})))}),t?(i.serverData.DefaultDomainContacts.Registrant.ContactInfoType==parseInt(i.model.defaultDomainContacts.contacts.Registrant.ContactInfoType)&&i.serverData.DefaultDomainContacts.Registrant.CustomAddressId==parseInt(i.model.defaultDomainContacts.contacts.Registrant.CustomAddressId)||(e.Registrant={ContactType:i.model.defaultDomainContacts.contacts.Registrant.ContactInfoType,CustomContactAddressId:i.model.defaultDomainContacts.contacts.Registrant.CustomAddressId}),i.serverData.DefaultDomainContacts.Admin.ContactInfoType==parseInt(i.model.defaultDomainContacts.contacts.Admin.ContactInfoType)&&i.serverData.DefaultDomainContacts.Admin.CustomAddressId==parseInt(i.model.defaultDomainContacts.contacts.Admin.CustomAddressId)||(e.Administrative={ContactType:i.model.defaultDomainContacts.contacts.Admin.ContactInfoType,CustomContactAddressId:i.model.defaultDomainContacts.contacts.Admin.CustomAddressId}),i.serverData.DefaultDomainContacts.Tech.ContactInfoType==parseInt(i.model.defaultDomainContacts.contacts.Tech.ContactInfoType)&&i.serverData.DefaultDomainContacts.Tech.CustomAddressId==parseInt(i.model.defaultDomainContacts.contacts.Tech.CustomAddressId)||(e.Techinical={ContactType:i.model.defaultDomainContacts.contacts.Tech.ContactInfoType,CustomContactAddressId:i.model.defaultDomainContacts.contacts.Tech.CustomAddressId}),i.serverData.DefaultDomainContacts.Billing.ContactInfoType==parseInt(i.model.defaultDomainContacts.contacts.Billing.ContactInfoType)&&i.serverData.DefaultDomainContacts.Billing.CustomAddressId==parseInt(i.model.defaultDomainContacts.contacts.Billing.CustomAddressId)||(e.Billing={ContactType:i.model.defaultDomainContacts.contacts.Billing.ContactInfoType,CustomContactAddressId:i.model.defaultDomainContacts.contacts.Billing.CustomAddressId}),n=angular.copy(i.serverData.ExtendedAttributes),i.model.tldAlternativeContacts.forEach(function(e){var t=function(e){for(name in n)if(null!=n[name].TldName&&n[name].TldName==e)return name;return null}(e.attributes.TldName);e.prepareSave&&e.prepareSave(),n[t]=e.attributes,null!=e.contacts&&(n[t+"Contacts"]=e.contacts)}),e.ExtendedAttributes=n,r.userContacts.saveDomainContactsSettings(e).then(function(e){e.sender="saveDomainContactsSettings",0==e.Error?window.location.href="/Profile/Tools?notificationKey=s_dcp":(e.Msg=o.resources.message_DomainContactsPresetsSave_Error,s.scroolToElement($('[link="pageNotification"]'),100),i.asyncStatus(c.AsyncStatus.Error,e))})):(null!=a&&s.scroolToElement($("[name="+a+"]"),100),i.asyncStatus(c.AsyncStatus.Error,{Msg:p.error_ContactsFormIsNotValid,sender:"save"}))},i.asyncStatus(c.AsyncStatus.Active)},onSuccess:function(e){var t=this.instance;if("getModel"==e.sender){for(var n in t.model={},t.model.defaultDomainContacts={contacts:e.Result.DefaultDomainContacts},t.model.defaultDomainContacts.contacts.customAddressDropDownPrefixId="defaultDomainContacts",t.model.tldAlternativeContacts=[],t.serverData=angular.copy(e.Result),e.Result.ExtendedAttributes)if(null!=e.Result.ExtendedAttributes[n]&&null!=e.Result.ExtendedAttributes[n].TldName&&e.Result.ExtendedAttributes[n].TldName.toLowerCase()==n.toLowerCase()){if(-1<o.skipTld.indexOf(e.Result.ExtendedAttributes[n].TldName.toLowerCase()))continue;var a={};a.firstName=e.Result.ExtendedAttributes.FirstName,a.lastName=e.Result.ExtendedAttributes.LastName,a.userName=e.Result.ExtendedAttributes.UserName,a.attributes=e.Result.ExtendedAttributes[n],a.contacts=e.Result.ExtendedAttributes[n+"Contacts"],null!=a.contacts&&(a.contacts.customAddressDropDownPrefixId=e.Result.ExtendedAttributes[n].TldName.toLowerCase()+"DomainContacts"),t.model.tldAlternativeContacts.push(a)}s.domainContactsParameters=e.Result.DefaultDomainContactsParameters,s.getCountryByCode=function(e){if(null==e)return null;for(var t=0;t<s.countries.length;t++)if(s.countries[t].Code==e)return s.countries[t].Name;return null},s.customContacts=e.Result.CustomContacts,s.countries=e.Result.Countries,s.asiaCountries=e.Result.AsiaCountries,i(function(){t.isLoading=!1,t.showContent=!0},450)}},onActive:function(e){this.instance},onLoading:function(e){this.instance},onLocked:function(e){this.instance},onError:function(e){var t=this.instance;t.isLoading=!1,"getModel"!=e.sender&&"save"!=e.sender&&"saveDomainContactsSettings"!=e.sender?t.activeNotification=o.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!1}):t.activeNotification=o.pageNotification.alerts.addError(e.Msg,{hasClose:!0,isAutoHide:!1})}})}]),app.controller("notificationCtrl",["$scope","$rootScope","httpRepository","pageHelper","notificationService","$filter","$modal",function(o,e,s,r,n,c,t){o.NotificationsRes=NotificationsRes,o.pageHelper=r,o.pageNotification=new n.instance,o.notificationBehavior=new r.AsyncStateBehavior({constructor:function(){var t=this.instance;t.activeNotification=new n.instance,t.asyncStatus(r.AsyncStatus.Loading),s.notifications.getInfo().then(function(e){e.sender="getModel",t.asyncStatus(0==e.Error?r.AsyncStatus.Success:r.AsyncStatus.Error,e)})},onSuccess:function(e){var t=this.instance;if("getModel"==e.sender){for(var n=[],a=0;a<e.Result.OptionalNotificationList.length;a++){var i=function(e){return new r.AsyncStateBehavior({constructor:function(){var n=this.instance;n.model=e,n.switchOptions=function(){var e=n.model.IsEnabled,t=n.model.NotificationType;n.model.IsEnabled=!n.model.IsEnabled,s.notifications.switchOptions(e,t).then(function(e){e.sender="switchOptions",e.model=n.model,0==e.Error?n.asyncStatus(r.AsyncStatus.Success):n.asyncStatus(r.AsyncStatus.Error,e)})}},onSuccess:function(){var e=this.instance;e.model.IsEnabled=!e.model.IsEnabled,e.asyncStatus(r.AsyncStatus.Active)},onActive:function(){this.instance},onLoading:function(){this.instance},onError:function(e){var t=this.instance;"switchOptions"==e.sender&&(e.Msg=e.model.IsEnabled?c("stringFormat")(o.NotificationsRes.label_notifications_not_possible_off,[o.NotificationsRes["label_"+e.model.Name]]):c("stringFormat")(o.NotificationsRes.label_notifications_not_possible_on,[o.NotificationsRes["label_"+e.model.Name]])),t.activeNotification=o.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!0}),t.showNotifications=!0,t.asyncStatus(r.AsyncStatus.Active)}})}(e.Result.OptionalNotificationList[a]);n.push(i)}t.model=n,t.showContent=!0,t.showLoadPanel=!1}t.asyncStatus(r.AsyncStatus.Active)},onActive:function(e){this.instance.showLoadPanel=!1},onLoading:function(e){this.instance.showLoadPanel=!0},onError:function(e){this.instance.activeNotification=o.pageNotification.stuckNotifications.addError(e.Msg,{hasClose:!0,isAutoHide:!1})}})}]),app.directive("advansedDnsEditRow",["$compile","$templateCache","httpRepository",function(a,i,o){return{link:function(e,t,n){i.get(null,o.domainAdvancedDNS.getAdvancedDnsRecordTemplatePath).then(function(){t.html(a(i.get("advancedDns_editRecord_view"))(e))})}}}]),app.directive("advansedDnsSetForm",[function(){return{link:function(e,t,n){var a=e.$parent.listItem?e.$parent.listItem:e.listItem,i=n.advansedDnsSetForm;a[i+"Name"]=n.name,a[i+"Form"]=e[n.name],a.editModel&&(a.editModel[i+"Form"]=e[n.name])}}}]),app.directive("tldCustomContactInfo",["httpService","$compile","$templateCache","$timeout",function(e,a,r,i){return{restrict:"E",replace:!0,scope:{tldItem:"=tldItem"},link:function(t,n){function o(e){n.replaceWith(a(e)(t)),t.$broadcast("InitExtendedAttributes",t.tldItem)}var s,e;null!=t.tldItem.attributes.TldName&&(s=t.tldItem.attributes.TldName.toLowerCase(),(e=r.get(s+"_AlternativeContact.html","/Profile/Tools/DomainContacts/Tld/ExtendedAttributes/Templates/")).then?e.then(function(e){if(null!=e.fromCache)o(e.fromCache);else for(var t=angular.element(e.data),n=0;n<t.length;n++){var a=angular.element(t[n]),i=a.attr("data-use-for");if(null!=i&&-1!=i.indexOf(s)){o(r.get(a.attr("id")));break}}}):i(function(){o(e)}))}}}]),app.directive("contactsInfoItem",["$modal","$compile","$templateCache","$rootScope","httpRepository","ncGridEmitPropertyScopeSearch","$timeout",function(r,c,l,d,u,m,p){return{restrict:"E",replace:!0,scope:{contact:"=contact",contacts:"=contacts"},link:function(o,n,e){o.dropDownContactType={None:0,Profile:1,Default:2,Custom:3,CreateNew:4},o.getCountryByCode=function(e){return d.getCountryByCode(e)};function s(e){null!=e&&(!o.domainContactsParameters.HasPrimary&&o.contact.ContactInfoType.toString()==o.dropDownContactType.Profile.toString()||!o.domainContactsParameters.HasDefault&&o.contact.ContactInfoType.toString()==o.dropDownContactType.Default.toString()||!o.domainContactsParameters.HasCustom&&o.contact.ContactInfoType.toString()==o.dropDownContactType.Custom.toString())&&(o.contact.ContactInfoType=o.dropDownContactType.None)}d.$watch("domainContactsParameters",function(e,t){null!=e&&(o.domainContactsParameters=d.domainContactsParameters,s(o.contact))}),o.$watch("contact",function(e,t){var a,i;null!=e&&(null!=o.contacts&&(o.form=o.contacts.form),s(o.domainContactsParameters),o.contact.ContactInfoType!=o.dropDownContactType.Custom&&(o.contact.CustomAddressId=null),a=o.contact.ContactInfoType,i=o.contact.CustomAddressId,d.$watch("customContacts",function(e,t){o.customContacts=d.customContacts,null!=o.contact.CustomAddressId&&p(function(){o.contact.CustomAddressId=o.contact.CustomAddressId.toString()})}),o.contact.setCustom=function(e,t){o.contact.ContactInfoType=o.dropDownContactType.Custom,i=o.contact.CustomAddressId,a=o.contact.ContactInfoType,null!=o.contact.RegistrantInfo&&(o.contact.RegistrantInfo=t),p(function(){o.contact.CustomAddressId=e.toString()},0)},d.$on("updateFefaultAddressInfo",function(){o.contact.ContactInfoType==o.dropDownContactType.Default&&null!=o.contact.RegistrantInfo&&(o.contact.RegistrantInfo=d.defaultAddressInfo)}),o.onChangeContactType=function(){o.contact.ContactInfoType!=a&&("3"!=o.contact.ContactInfoType&&(o.contact.CustomAddressId=null),o.contact.RegistrantInfo=null,o.contact.ContactInfoType==o.dropDownContactType.CreateNew?r.open({templateUrl:"/Profile/Tools/CreateNewContactModal/Get",controller:"createNewContactModalCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{modalInteraction:function(){return{contactType:o.contact.contactType}}}}).result.then(function(e){var t={AddressName:e.modalEntity.addressName,Id:e.savedEntity.ContactId,IsDefault:e.savedEntity.IsDefault,RegistrantInfo:e.savedEntity};e.modalEntity.isUseForRegistrant&&o.contacts.Registrant.setCustom(t.Id,t.RegistrantInfo),e.modalEntity.isUseForAdministrative&&o.contacts.Admin.setCustom(t.Id,t.RegistrantInfo),e.modalEntity.isUseForTechnical&&o.contacts.Tech.setCustom(t.Id,t.RegistrantInfo),e.modalEntity.isUseForAuxBilling&&o.contacts.Billing.setCustom(t.Id,t.RegistrantInfo),e.modalEntity.isDefault&&(d.domainContactsParameters.HasDefault=!0,d.defaultAddressInfo=t.RegistrantInfo,o.$emit("updateFefaultAddressInfo")),o.customContacts.push(t),o.contact.RegistrantInfo=t.RegistrantInfo,o.contact.ContactInfoType=o.dropDownContactType.Custom,i=o.contact.CustomAddressId,a=o.contact.ContactInfoType,d.domainContactsParameters.HasCustom=!0;var n=m(o,"pageNotification");n.pageNotification.alerts.clear(),n.pageNotification.alerts.addSuccess("Contact details have been saved to address book.",{hasClose:!0,isAutoHide:!0}),p(function(){o.contact.CustomAddressId=t.Id.toString()},0)},function(){o.contact.ContactInfoType=a,o.contact.CustomAddressId=i}):(a=o.contact.ContactInfoType,o.dropDownContactType.Profile==o.contact.ContactInfoType&&(null==d.primaryAddressInfo&&u.userContacts.getProfile().then(function(e){d.primaryAddressInfo=e.Result,o.contact.RegistrantInfo=d.primaryAddressInfo}),o.contact.RegistrantInfo=d.primaryAddressInfo),o.dropDownContactType.Default==o.contact.ContactInfoType&&(null==d.defaultAddressInfo&&u.userContacts.getDefault().then(function(e){d.defaultAddressInfo=e.Result,o.contact.RegistrantInfo=d.defaultAddressInfo}),o.contact.RegistrantInfo=d.defaultAddressInfo)))},o.onChangeCustomAddress=function(){i!=o.contact.CustomAddressId&&(i=o.contact.CustomAddressId,function(e){for(var t=0;t<o.customContacts.length;t++)if(e==o.customContacts[t].Id){null==o.customContacts[t].RegistrantInfo?u.userContacts.getCustomContactInfo(e).then(function(e){o.contact.RegistrantInfo=e.Result}):o.contact.RegistrantInfo=o.customContacts[t].RegistrantInfo;break}}(o.contact.CustomAddressId))},l.get("/Profile/Tools/DomainContacts/ItemContacts/Template/").then(function(e){n.replaceWith(c(e.data)(o))}))})}}}]),app.directive("contactsInfoItems",["$rootScope",function(a){return{restrict:"E",replace:!0,scope:{item:"=item"},template:"<div class='form'><ng-form name='form'><contacts-info-item contacts='item.contacts' contact='item.contacts.Registrant'></contacts-info-item><contacts-info-item contacts='item.contacts' contact='item.contacts.Admin'></contacts-info-item><contacts-info-item contacts='item.contacts' contact='item.contacts.Tech'></contacts-info-item><contacts-info-item contacts='item.contacts' contact='item.contacts.Billing'></contacts-info-item></ng-form> </div>",link:function(n){n.$watch("item",function(e,t){null!=e&&null!=e.contacts&&(n.item.contacts.form=n.form,n.item.contacts.Registrant.title="Registrant Contact",n.item.contacts.Registrant.contactType=a.contactType.Registrant,n.item.contacts.Registrant.customAddressDropDownId=n.item.contacts.customAddressDropDownPrefixId+"Registrant",n.item.contacts.Admin.title="Administrative Contact",n.item.contacts.Admin.contactType=a.contactType.Administrative,n.item.contacts.Admin.customAddressDropDownId=n.item.contacts.customAddressDropDownPrefixId+"Admin",n.item.contacts.Tech.title="Technical Contact",n.item.contacts.Tech.contactType=a.contactType.Techinical,n.item.contacts.Tech.customAddressDropDownId=n.item.contacts.customAddressDropDownPrefixId+"Tech",n.item.contacts.Billing.title="Billing Contact",n.item.contacts.Billing.contactType=a.contactType.Billing,n.item.contacts.Billing.customAddressDropDownId=n.item.contacts.customAddressDropDownPrefixId+"Billing")})}}}]),app.factory("advansedDnsModelService",["$timeout","$filter",function(i,n){function s(e){var t=0;return(e=e.toString())==d.A.sortValue.toString()||e==d.AdDns.sortValue.toString()?t=1:d.AAAA.sortValue.toString()==e?t=8:d.CNAME.sortValue.toString()==e?t=2:d.MX.sortValue.toString()==e?t=3:d.MXE.sortValue.toString()==e?t=4:d.NS.sortValue.toString()==e?t=9:d.SRV.sortValue.toString()==e?t=11:d.TXT.sortValue.toString()==e?t=5:d.CAA.sortValue.toString()===e?t=12:d.ALIAS.sortValue.toString()===e&&(t=13),t}function r(e){if(null!=e)for(var t=Object.keys(u),n=0;n<t.length;n++)if(u[t[n]].sortValue==e)return u[t[n]].value;return u[1799].value}function c(a){return{viewModel:function(e){var t=e;return t.selectedRecordTypeValue=a.name,0!=e.Ttl&&null!=u[e.Ttl]?t.selectedTtlTypeValue=u[e.Ttl].name:t.selectedTtlTypeValue=u[1799].name,t},editModel:function(e,t){var n=e||(t?this.viewModel(t):{});return n.selectedRecordTypeValue=a.sortValue,null==t&&null==n.selectedTtlTypeValue?n.selectedTtlTypeValue=u[1799].sortValue:t&&t.Ttl&&(0!=t.Ttl&&null!=u[t.Ttl]?n.selectedTtlTypeValue=u[t.Ttl].sortValue:n.selectedTtlTypeValue=u[1799].sortValue),i(function(){n.selectedRecordTypeValue=n.selectedRecordTypeValue.toString(),n.selectedTtlTypeValue=n.selectedTtlTypeValue.toString()}),n.canSave=function(){return!(!n.hostForm.$valid||!n.valueForm.$valid)||(angular.forEach(n.hostForm.$error.required,function(e){e.$setDirty()}),angular.forEach(n.valueForm.$error.required,function(e){e.$setDirty()}),!1)},n.getRealModel=function(){var e=angular.copy(n);return e.RecordType=s(n.selectedRecordTypeValue),e.Ttl=r(n.selectedTtlTypeValue),delete e.selectedRecordTypeValue,delete e.selectedTtlTypeValue,delete e.valueForm,delete e.hostForm,delete e.recordModel,delete e.isMetaFilled,delete e.tmpMetaTitle,delete e.tmpMetaDescription,delete e.tmpMetaKeywords,delete e.selectedUrlTypeValue,e},n.isTheSameWithPrevSaved=function(){if(!n.recordModel)return!1;var e=angular.copy(n.recordModel);delete e.selectedRecordTypeValue,delete e.selectedTtlTypeValue,delete e.valueForm,delete e.hostForm;var t=n.getRealModel();return JSON.stringify(e)===JSON.stringify(t)},n}}}var o=[{name:"1 RSA/MD5",value:1,sortValue:0},{name:"3 DSA/SHA-1",value:3,sortValue:1},{name:"5 RSA/SHA-1",value:5,sortValue:2},{name:"7 RSASHA1-NSEC3-SHA1",value:7,sortValue:3},{name:"8 RSA/SHA-256",value:8,sortValue:4},{name:"10 RSA/SHA-512",value:10,sortValue:5},{name:"12 GOST R 34.10-2001",value:12,sortValue:6},{name:"13 ECDSA/SHA-256",value:13,sortValue:7},{name:"14 ECDSA/SHA-384",value:14,sortValue:8},{name:"253 PRIVATEDNS",value:253,sortValue:9},{name:"254 PRIVATEOID",value:254,sortValue:10}],l=[{name:"1 SHA-1",value:1,sortValue:0,validationLength:40},{name:"2 SHA-256",value:2,sortValue:1,validationLength:64},{name:"3 GOST R 34.11-94",value:3,sortValue:2,validationLength:64},{name:"4 SHA-384",value:4,sortValue:3,validationLength:96}],d={Unknown:{name:"Unknown",sortValue:1,filterTitle:"Unknown",rowClass:"",type:"Unknown",viewTemplatePath:"",editTemplatePath:"",focusedFields:{}},A:{name:"A Record",sortValue:2,filterTitle:"A",rowClass:"",type:"A",viewTemplatePath:"advancedDns_A_view",editTemplatePath:"advancedDns_A_edit",focusedFields:{host:!1,idAddress:!1,ttl:!1,recordType:!1}},AdDns:{name:"A + Dynamic DNS Record",sortValue:3,filterTitle:"A+Dynamic DNS",rowClass:"",type:"AdDns",viewTemplatePath:"advancedDns_AdDns_view",editTemplatePath:"advancedDns_AdDns_edit",focusedFields:{host:!1,idAddress:!1,ttl:!1,recordType:!1}},AAAA:{name:"AAAA Record",sortValue:4,filterTitle:"AAAA",rowClass:"",type:"AAAA",viewTemplatePath:"advancedDns_AAAA_view",editTemplatePath:"advancedDns_AAAA_edit",focusedFields:{host:!1,idAddress:!1,ttl:!1,recordType:!1}},ALIAS:{name:"ALIAS Record",sortValue:5,filterTitle:"ALIAS",rowClass:"",type:"ALIAS",viewTemplatePath:"advancedDns_ALIAS_view",editTemplatePath:"advancedDns_ALIAS_edit",focusedFields:{host:!1,target:!1,ttl:!1,recordType:!1}},CAA:{name:"CAA Record",sortValue:6,filterTitle:"CAA",rowClass:"caa-record",type:"CAA",viewTemplatePath:"advancedDns_CAA_view",editTemplatePath:"advancedDns_CAA_edit",focusedFields:{host:!1,idAddress:!1,ttl:!1,recordType:!1}},CNAME:{name:"CNAME Record",sortValue:7,filterTitle:"CNAME",rowClass:"",type:"CNAME",viewTemplatePath:"advancedDns_CNAME_view",editTemplatePath:"advancedDns_CNAME_edit",focusedFields:{host:!1,target:!1,ttl:!1,recordType:!1}},MX:{name:"MX Record",sortValue:8,filterTitle:"MX",rowClass:"mx-record",type:"MX",viewTemplatePath:"advancedDns_MX_view",editTemplatePath:"advancedDns_MX_edit",focusedFields:{host:!1,mailServer:!1,priority:!1,ttl:!1,recordType:!1}},MXE:{name:"MXE Record",sortValue:9,filterTitle:"MXE",rowClass:"",type:"MXE",viewTemplatePath:"advancedDns_MXE_view",editTemplatePath:"advancedDns_MXE_edit",focusedFields:{host:!1,idAddress:!1,ttl:!1,recordType:!1}},NS:{name:"NS Record",sortValue:10,filterTitle:"NS",rowClass:"",type:"NS",viewTemplatePath:"advancedDns_NS_view",editTemplatePath:"advancedDns_NS_edit",focusedFields:{host:!1,nameServer:!1,ttl:!1,recordType:!1}},SRV:{name:"SRV Record",sortValue:11,filterTitle:"SRV",rowClass:"srv-record",type:"SRV",viewTemplatePath:"advancedDns_SRV_view",editTemplatePath:"advancedDns_SRV_edit",focusedFields:{service:!1,protocol:!1,priority:!1,weight:!1,port:!1,target:!1,recordType:!1}},TXT:{name:"TXT Record",sortValue:12,filterTitle:"TXT",rowClass:"",type:"TXT",viewTemplatePath:"advancedDns_TXT_view",editTemplatePath:"advancedDns_TXT_edit",focusedFields:{host:!1,value:!1,ttl:!1,recordType:!1}},URL:{name:"URL Redirect Record",sortValue:13,filterTitle:"URL Redirect",rowClass:"url-record",type:"URL",viewTemplatePath:"advancedDns_URL_view",editTemplatePath:"advancedDns_URL_edit",focusedFields:{destinationURL:!1,urlType:!1,meta:!1,recordType:!1}}},a={Masked:{name:"Masked",sortValue:0},Unmasked:{name:"Unmasked",sortValue:1},Permanent:{name:"Permanent (301)",sortValue:2}},u={1799:{name:"Automatic",value:1799,sortValue:0},3600:{name:"60 min",value:3600,sortValue:1},1800:{name:"30 min",value:1800,sortValue:2},1200:{name:"20 min",value:1200,sortValue:3},300:{name:"5 min",value:300,sortValue:4},60:{name:"1 min",value:60,sortValue:5}},m=[{name:"Automatic",value:300,sortValue:0},{name:"5 min",value:300,sortValue:1},{name:"1 min",value:60,sortValue:2}],e={viewModel:function(e){return c(d.ALIAS).viewModel(e)},editModel:function(e,t){var n=c(d.ALIAS).editModel(e,t);return n.getRealModel=function(){var e=angular.copy(n);return e.RecordType=s(n.selectedRecordTypeValue),e.Ttl=function(e){if(null!=e)for(var t=0;t<m.length;t++)if(m[t].sortValue.toString()===e)return m[t].value;return m[0].value}(n.selectedTtlTypeValue),delete e.selectedRecordTypeValue,delete e.selectedTtlTypeValue,delete e.valueForm,delete e.hostForm,delete e.recordModel,delete e.isMetaFilled,delete e.tmpMetaTitle,delete e.tmpMetaDescription,delete e.tmpMetaKeywords,delete e.selectedUrlTypeValue,e},n}},t={isMetaFilled:function(e){return null!=e.MetaTitle&&null!=e.MetaKeywords&&null!=e.MetaDescription||(e.MetaTitle="",e.MetaKeywords="",e.MetaDescription=""),0!=e.MetaTitle.length||0!=e.MetaKeywords.length||0!=e.MetaDescription.length},getSelectedUrlType:function(e){return 6==e.RecordType?a.Unmasked:7==e.RecordType?a.Masked:10==e.RecordType?a.Permanent:a.Unmasked},viewModel:function(e){var t=c(d.URL).viewModel(e);return t.isMetaFilled=this.isMetaFilled(t),t.urlType=this.getSelectedUrlType(e),t.selectedUrlTypeValue=t.urlType.sortValue,t},editModel:function(e,t){var n=c(d.URL).editModel(e,t);return n.selectedUrlTypeValue=null==e&&null!=t?this.getSelectedUrlType(t).sortValue:a.Unmasked.sortValue,n.isMetaFilled=t?this.isMetaFilled(n):7==n.selectedUrlTypeValue,i(function(){n.selectedUrlTypeValue=n.selectedUrlTypeValue.toString()}),n.openMeta=function(){n.tmpMetaTitle=n.MetaTitle,n.tmpMetaDescription=n.MetaDescription,n.tmpMetaKeywords=n.MetaKeywords},n.isMetaFilledValid=function(){return(!n.tmpMetaTitle||n.tmpMetaTitle.length<=100)&&(!n.tmpMetaDescription||n.tmpMetaDescription.length<=250)&&(!n.tmpMetaKeywords||n.tmpMetaKeywords.length<=250)},n.saveMeta=function(e){n.isMetaFilledValid()&&(n.MetaTitle=n.tmpMetaTitle,n.MetaDescription=n.tmpMetaDescription,n.MetaKeywords=n.tmpMetaKeywords,angular.element(e.target).closest(".is-active").removeClass("is-active"))},n.getRealModel=function(){var e=angular.copy(n);return n.selectedUrlTypeValue.toString()==a.Unmasked.sortValue.toString()?e.RecordType=6:n.selectedUrlTypeValue.toString()==a.Masked.sortValue.toString()?e.RecordType=7:n.selectedUrlTypeValue.toString()==a.Permanent.sortValue.toString()&&(e.RecordType=10),delete e.selectedRecordTypeValue,delete e.selectedTtlTypeValue,delete e.valueForm,delete e.hostForm,delete e.recordModel,delete e.isMetaFilled,delete e.tmpMetaTitle,delete e.tmpMetaDescription,delete e.tmpMetaKeywords,delete e.selectedUrlTypeValue,e},n}};return{DNSProviderSubType:{NONE:0,FREE:1,ENOM:2,CUSTOM:3,FREE2:4,PREMIUM:5},realHostType:{Unknown:0,A:1,CNAME:2,MX:3,MXE:4,TXT:5,URL:6,FRAME:7,AAAA:8,NS:9,URL301:10,SRV:11,CAA:12,ALIAS:13},availableEmailProviders:{NONE:{name:"No Email Service",value:0,sortValue:0},FWD:{name:"Email Forwarding",value:3,sortValue:1},MXE:{name:"MXE Record",value:1,sortValue:2},MX:{name:"Custom MX",value:2,sortValue:3},OX:{name:"Private Email",value:4,sortValue:4},GMAIL:{name:"Gmail",value:5,sortValue:5}},validationPattern:{url:"^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$",host:"^(\\@|\\*|((\\*\\.)?((?=[a-zA-Z0-9_-]*[a-zA-Z0-9][a-zA-Z0-9_-]*\\.?)(?![a-zA-Z0-9_-]{64,}\\.?)[a-zA-Z0-9_]([a-zA-Z0-9_-]*[a-zA-Z0-9_])*)(\\.((?=[a-zA-Z0-9_-]*[a-zA-Z0-9][a-zA-Z0-9_-]*\\.?)(?![a-zA-Z0-9_-]{64,}\\.?)[a-zA-Z0-9_]([a-zA-Z0-9_-]*[a-zA-Z0-9_])*))*))$",domainName:"^(?!:\\/\\/)(?=.{1,255}\\.?$)(?:[_a-zA-Z0-9](?:[_a-zA-Z0-9-]{0,61}[_a-zA-Z0-9])?\\.)+[_a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9]\\.?$",destinationURL:"^[a-zA-Z0-9.-_/.-~:?[]@#!$&'()*+,;=%]*$",ipv6Address:"^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*",ipAddress:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,srvServiceProtocol:/^_[0-9A-Za-z_\\.\\-]/,srvWeightPortMaxValue:65535,priorityMaxValue:255,intagerOneToFive:/^\d{1,5}$/,nc:/^([a-zA-Z0-9]+[a-zA-Z0-9\-\.]{0,99}[a-zA-Z0-9]+\.)([a-zA-Z0-9]+[a-zA-Z0-9\-]{0,60}[a-zA-Z0-9]+\.[a-zA-Z\-\.]{2,20})$/,caaIssue:/(^(")?;(")?$)|(((^(")?\w+)((-)*\w*)+(\.(\w+)((-)*\w*))*)(; (\w+=.+))*)(")?$/,caaIodef:/(^(")?(mailto:)?([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3}))|^(")?(http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:\/?#[\]@!\$&'\(\)\*\+,;=.]+(")?$/},getRestrictedRecordType:function(e){return 1==e.RecordType?1==e.IsDynDns?d.AdDns:d.A:2==e.RecordType?d.CNAME:3==e.RecordType?d.MX:4==e.RecordType?d.MXE:5==e.RecordType?d.TXT:6==e.RecordType||7==e.RecordType||10==e.RecordType?d.URL:8==e.RecordType?d.AAAA:9==e.RecordType?d.NS:11==e.RecordType?d.SRV:12==e.RecordType?d.CAA:13==e.RecordType?d.ALIAS:d.Unknown},recordTypes:d,availableUrlTypes:a,availableTtlTypes:u,avaliableAliasTtlTypes:m,tags:["issue","issuewild","iodef"],A:{viewModel:function(e){return c(d.A).viewModel(e)},editModel:function(e,t){var n=c(d.A).editModel(e,t);return n.getRealModel=function(){var e=angular.copy(n);return e.IsDynDns=!1,e.RecordType=s(n.selectedRecordTypeValue),e.Ttl=r(n.selectedTtlTypeValue),delete e.selectedRecordTypeValue,delete e.selectedTtlTypeValue,delete e.valueForm,delete e.hostForm,delete e.recordModel,delete e.isMetaFilled,delete e.tmpMetaTitle,delete e.tmpMetaDescription,delete e.tmpMetaKeywords,delete e.selectedUrlTypeValue,e},n}},AdDns:{viewModel:function(e){return c(d.AdDns).viewModel(e)},editModel:function(e,t){var n=c(d.AdDns).editModel(e,t);return n.getRealModel=function(){var e=angular.copy(n);return e.IsDynDns=!0,e.RecordType=s(n.selectedRecordTypeValue),e.Ttl=r(n.selectedTtlTypeValue),delete e.selectedRecordTypeValue,delete e.selectedTtlTypeValue,delete e.valueForm,delete e.hostForm,delete e.recordModel,delete e.isMetaFilled,delete e.tmpMetaTitle,delete e.tmpMetaDescription,delete e.tmpMetaKeywords,delete e.selectedUrlTypeValue,e},n}},AAAA:{viewModel:function(e){return c(d.AAAA).viewModel(e)},editModel:function(e,t){return c(d.AAAA).editModel(e,t)}},ALIAS:e,CNAME:{viewModel:function(e){return c(d.CNAME).viewModel(e)},editModel:function(e,t){return c(d.CNAME).editModel(e,t)}},CAA:{viewModel:function(e){return c(d.CAA).viewModel(e)},editModel:function(e,t){var n,a,i,o=c(d.CAA).editModel(e,t);return t?(a=t.Data,n={flag:0,tag:(i=a.split(" "))[1]||"issue",value:i.slice(2).join(" ")},o.selectedTag=n.tag,o.Data=n.value):o.selectedTag="issue",o.getRealModel=function(){var e,t,n=angular.copy(o);return n.RecordType=s(o.selectedRecordTypeValue),n.Ttl=r(o.selectedTtlTypeValue),n.Data=(t=(e=n).selectedTag,e.caaFlag=0,e.caaFlag+" "+t+" "+e.Data),delete n.selectedTag,delete n.caaFlag,delete n.selectedRecordTypeValue,delete n.selectedTtlTypeValue,delete n.valueForm,delete n.hostForm,delete n.recordModel,delete n.isMetaFilled,delete n.tmpMetaTitle,delete n.tmpMetaDescription,delete n.tmpMetaKeywords,delete n.selectedUrlTypeValue,n},o}},SRV:{viewModel:function(e){return c(d.SRV).viewModel(e)},editModel:function(e,t){return c(d.SRV).editModel(e,t)}},TXT:{viewModel:function(e){return c(d.TXT).viewModel(e)},editModel:function(e,t){return c(d.TXT).editModel(e,t)}},URL:t,NS:{viewModel:function(e){return c(d.NS).viewModel(e)},editModel:function(e,t){return c(d.NS).editModel(e,t)}},MX:{viewModel:function(e){return c(d.MX).viewModel(e)},editModel:function(e,t){return c(d.MX).editModel(e,t)}},MXE:{viewModel:function(e){return c(d.MXE).viewModel(e)},editModel:function(e,t){return c(d.MXE).editModel(e,t)}},DnsSec:{viewModel:function(e){var t=e;return null!=t.AlgorythmType?t.algorythmTypeTitle=n("propertyFilter")(o,{value:t.AlgorythmType})[0].name:t.algorythmTypeTitle=o[0].name,null!=t.DigestType?t.digestTypeTitle=n("propertyFilter")(l,{value:t.DigestType})[0].name:t.digestTypeTitle=l[0].name,t},editModel:function(e,t){var a=e||(t?this.viewModel(t):{});return null!=a.AlgorythmType?a.selectedDnsSecAlgorithmType=n("propertyFilter")(o,{value:t.AlgorythmType})[0].sortValue:a.selectedDnsSecAlgorithmType=0,null!=a.DigestType?a.selecteddnsSecDigestType=n("propertyFilter")(l,{value:t.DigestType})[0].sortValue:a.selecteddnsSecDigestType=0,i(function(){a.selectedDnsSecAlgorithmType=a.selectedDnsSecAlgorithmType.toString(),a.selecteddnsSecDigestType=a.selecteddnsSecDigestType.toString()}),a.canSave=function(){return!(!a.hostForm.$valid||!a.valueForm.$valid)||(angular.forEach(a.hostForm.$error.required,function(e){e.$setDirty()}),angular.forEach(a.valueForm.$error.required,function(e){e.$setDirty()}),!1)},a.getRealModel=function(){var t=angular.copy(a);return t.KeyTag=parseInt(t.KeyTag),o.forEach(function(e){e.sortValue.toString()==t.selectedDnsSecAlgorithmType&&(t.AlgorythmType=e.value)}),l.forEach(function(e){e.sortValue.toString()==t.selecteddnsSecDigestType&&(t.DigestType=e.value)}),delete t.selectedDnsSecAlgorithmType,delete t.selecteddnsSecDigestType,delete t.valueForm,delete t.hostForm,delete t.modalForm,delete t.digestTypeTitle,delete t.algorythmTypeTitle,delete t.canSave,delete t.getRealModel,delete t.isTheSameWithPrevSaved,delete t.recordModel,delete t.onDigestChange,delete t.onKeyTagChange,t},a.isTheSameWithPrevSaved=function(){if(!a.recordModel)return!1;var e=angular.copy(a.recordModel);delete e.selectedDnsSecAlgorithmType,delete e.selecteddnsSecDigestType,delete e.valueForm,delete e.hostForm,delete e.modalForm;var t=a.getRealModel();return JSON.stringify(e)===JSON.stringify(t)},a.onKeyTagChange=function(e){a[e?"modalForm":"hostForm"].keyTag.$setValidity("pattern",parseInt(a.KeyTag)&&a.KeyTag.toString()==parseInt(a.KeyTag).toString()),a[e?"modalForm":"hostForm"].keyTag.$setValidity("range",parseInt(a.KeyTag)<=65535&&0<=parseInt(a.KeyTag))},a.onDigestChange=function(e){a[e?"modalForm":"valueForm"].digest.currentLength=a.Digest.length?a.Digest.length:0,a[e?"modalForm":"valueForm"].digest.$setValidity("digestLength",!0),a[e?"modalForm":"valueForm"].digest.$setValidity("digestDataIncorrect",!0);for(var t,n=0;n<l.length;n++)a.Digest.length!=l[n].validationLength&&a.selecteddnsSecDigestType==l[n].sortValue.toString()&&(a[e?"modalForm":"valueForm"].digest.needLength=l[n].validationLength,a[e?"modalForm":"valueForm"].digest.$setValidity("digestLength",!1));t=a.Digest,/^[0-9A-Fa-f]+$/.test(t)||a[e?"modalForm":"valueForm"].digest.$setValidity("digestDataIncorrect",!1),a[e?"modalForm":"valueForm"].digest.$setDirty()},a}},dnsSecDigestType:l,dnsSecAlgorithmType:o}}]),app.service("dnsTemplateService",["httpRepository",function(n){this.allTemplates=[],this.activeTemplates=[],this.mapTemplates=function(){var t=this.activeTemplates.map(function(e){return e.Key});this.allTemplates=this.allTemplates.map(function(e){return e.Disabled=-1!==t.indexOf(e.Key),e}).sort(function(e,t){return e.DisplayName.localeCompare(t.DisplayName)})},this.reloadDnsTemplates=function(e){var t=this;n.domainAdvancedDNS.getActiveDnsTemplates(e).then(function(e){e.Error||(t.activeTemplates=e,t.mapTemplates())})},this.initTemplates=function(e){this.allTemplates=e.All,this.activeTemplates=e.Active,this.mapTemplates()},this.text=function(){return this.activeTemplates.length+" "+(1===this.activeTemplates.length?"product":"products")},this.hint=function(){return"Your domain is currently configured using the following apps: "+this.activeTemplates.map(function(e){return e.DisplayName}).join(", ")}}]),app.factory("domainTransferInService",["$modal",function(n){return{showAuthorizeTransferModal:function(e,t){return n.open({templateUrl:"/Domains/TransferIn/AuthorizeTransferModal/Get",controller:"domainTransferAuthorizeModalCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{modalInteraction:function(){return{domainName:e,transferId:t}}}}).result},showGetStartedModal:function(e){return n.open({templateUrl:"/Domains/TransferIn/TransferInGetStartedModal/Get",controller:"domainTransferGetStartedModalCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{modalInteraction:function(){return{domainName:e}}}}).result}}}]),app.controller("asia_AlternativeContactCtrl",["$scope","$rootScope","$timeout",function(a,e,i){a.countries=e.countries,a.asiaCountries=e.asiaCountries,a.asiaEntityType={Corporation:0,Cooperative:1,Partnership:2,Government:3,PoliticalParty:4,Society:5,Institution:6,NaturalPerson:7,Other:8},a.asiaIdentityForm={Certificate:0,Legislation:1,Societyregistry:2,Politicalpartyregistry:3,Passport:4,Other:5},a.asiaContactType={CED:0,CEA:1},a.$on("InitExtendedAttributes",function(e,t){var n;null!=t.attributes.CcLocality&&(n=angular.copy(t.attributes.CcLocality.toString()),a.tldItem.attributes.CcLocality=null,i(function(){a.tldItem.attributes.CcLocality=n})),a.tldItem=t,a.tldItem.form=a.form,a.$watch("tldItem.attributes.LegalEntityType",function(){a.tldItem.form.asia_EntityType&&a.tldItem.form.asia_EntityType.$setValidity("required",-1<t.attributes.LegalEntityType)}),a.$watch("tldItem.attributes.ContactType",function(){a.tldItem.form.asia_ContactType&&(a.tldItem.form.asia_ContactType.$setValidity("required",-1<t.attributes.ContactType),a.tldItem.form.asia_EntityType&&i(function(){a.tldItem.form.asia_EntityType.$setValidity("required",-1<t.attributes.LegalEntityType)}),a.tldItem.form.asia_IdentityForm&&i(function(){a.tldItem.form.asia_IdentityForm.$setValidity("required",-1<t.attributes.IdentForm)}))}),a.$watch("tldItem.attributes.IdentForm",function(){a.tldItem.form.asia_IdentityForm&&a.tldItem.form.asia_IdentityForm.$setValidity("required",-1<t.attributes.IdentForm)}),t.prepareSave=function(){t.attributes.LegalEntityType!=a.asiaEntityType.Other&&(t.attributes.OtherLegalType=null),t.attributes.IdentForm!=a.asiaIdentityForm.Other&&(t.attributes.OtherIdentForm=null)}})}]),app.controller("au_AlternativeContactCtrl",["$scope","$rootScope","pageHelper",function(n,e,a){n.resources=DomainContactsRes,n.auIdType={NONE:-1,ABN:0,ACN:1,RBN:2,TM:3},n.$on("InitExtendedAttributes",function(e,t){n.tldItem=t,n.tldItem.form=n.form,n.pageHelper=a,n.$watch("tldItem.attributes.RegistrantIdType",function(){n.tldItem.form.auIdType.$setValidity("required",t.attributes.RegistrantIdType>n.auIdType.NONE)})})}]),app.controller("ca_AlternativeContactCtrl",["$scope","$rootScope","$timeout",function(n,e,t){n.ciraContactType={CCO:0,CCT:1,RES:2,GOV:3,EDU:4,ASS:5,HOP:6,PRT:7,TDM:8,TRD:9,PLT:10,LAM:11,TRS:12,ABO:13,INB:14,LGR:15,OMK:16,MAJ:17},n.ciraWhois={Full:0,Private:1},n.lang={en:0,fr:1},n.agreement={yes:"y",no:"n"},n.agreementversion={v2:"2.0"},n.resources=DomainContactsRes,n.$on("InitExtendedAttributes",function(e,t){n.tldItem=t,n.tldItem.form=n.form,t.attributes.CaRegistrantAgrementValue||(t.attributes.CaRegistrantAgrementValue=n.agreement.no),t.attributes.CARegistrantAgreementVersion||(t.attributes.CARegistrantAgreementVersion=n.agreementversion.v2),t.attributes.CIRAWhois||(t.attributes.CIRAWhois=n.ciraWhois.Full),n.tldItem.attributes.cbAgreement=n.tldItem.attributes.CaRegistrantAgrementValue.toLowerCase()==n.agreement.yes,n.tldItem.attributes.cbHideWhoisData=n.tldItem.attributes.CIRAWhois==n.ciraWhois.Private,n.$watch("tldItem.attributes.CIRAType",function(){n.tldItem.form.ca_ciraLegalType&&n.tldItem.form.ca_ciraLegalType.$setValidity("required",-1<t.attributes.CIRAType)}),n.$watch("tldItem.attributes.CIRAWhois",function(){n.tldItem.form.ca_ciraWhois&&n.tldItem.form.ca_ciraWhois.$setValidity("required",-1<t.attributes.CIRAWhois)}),n.tldItem.prepareSave=function(){n.tldItem.attributes.CaRegistrantAgrementValue=n.tldItem.attributes.cbAgreement?n.agreement.yes:n.agreement.no,n.tldItem.attributes.CIRAWhois=n.tldItem.attributes.cbHideWhoisData?n.ciraWhois.Private:n.ciraWhois.Full,t.attributes.CIRAType!=n.ciraContactType.CCT&&t.attributes.CIRAType!=n.ciraContactType.RES&&t.attributes.CIRAType!=n.ciraContactType.ABO&&t.attributes.CIRAType!=n.ciraContactType.LGR&&(t.attributes.cbHideWhoisData=null)}})}]),app.controller("es_AlternativeContactCtrl",["$scope","$rootScope","$timeout",function(n,e,a){n.idType={GenericId:0,VatId:1,ResidentAlienId:3},n.legalType={IND:0,FIND:1,LTD:2,PLC:3,PTNR:4,LLP:5,STRA:6,RCHAR:7,IP:8,SCH:9,GOV:10,CRC:11,STAT:12,OTHER:13,FCORP:14,FOTHER:15},n.adminType={GenericId:0,NationalId:1,ResidentAlienId:3},n.legalFormType={Individual:1,EconomicInterestGroup:39,Association:47,SportsAssociation:59,ProfessionalAssociation:68,SavingsBank:124,CommunityProperty:150,CommunityofOwners:152,OrderorReligiousInstitution:164,Consulate:181,PublicLawAssociation:197,Embassy:203,LocalAuthority:229,SportsFederation:269,Foundation:286,MutualInsuranceCompany:365,RegionalGovernmentBody:434,CentralGovernmentBody:436,PoliticalParty:439,TradeUnion:476,FarmPartnership:510,PublicLimitedCompany:524,Sports_Association:525,CivilSociety:554,GeneralPartnership:560,GeneralandLimitedPartnership:562,Cooperative:566,WorkerownedCompany:608,LimitedCompany:612,SpanishOffice:713,TemporaryAllianceofEnterprises:717,WorkerownedLimitedCompany:744,RegionalPublicEntity:745,NationalPublicEntity:746,LocalPublicEntity:747,Others:877,DesignationofOriginSupervisoryCouncil:878,EntityManagingNaturalAreas:879},n.resources=DomainContactsRes,n.$on("InitExtendedAttributes",function(e,t){n.tldItem=t,n.tldItem.form=n.form,n.$watch("tldItem.attributes.RegistrantIdType",function(){n.tldItem.form.esIdType&&n.tldItem.form.esIdType.$setValidity("required",-1<t.attributes.RegistrantIdType)}),n.$watch("tldItem.attributes.LegalFormType",function(){n.tldItem.form.esLegalFormType&&(n.tldItem.form.esLegalFormType.$setValidity("required",0<t.attributes.LegalFormType),n.tldItem.form.esAcceptAgreement&&a(function(){n.tldItem.form.esAcceptAgreement.$setValidity("required",1==t.attributes.AcceptAgreement)}))}),n.$watch("tldItem.attributes.AdminIdType",function(){n.tldItem.form.esAdminType&&n.$evalAsync(function(){n.tldItem.form.esAdminType.$setValidity("required",-1<t.attributes.AdminIdType)})}),n.$watch("tldItem.attributes.AcceptAgreement",function(){n.tldItem.form.esAcceptAgreement&&n.tldItem.form.esAcceptAgreement.$setValidity("required",1==t.attributes.AcceptAgreement)}),t.prepareSave=function(){"ES"!=t.attributes.TldName&&(t.attributes.AdminId=null,t.attributes.AdminIdType=null),1!=t.attributes.LegalFormType&&(t.attributes.AcceptAgreement="false")}})}]),app.controller("fr_AlternativeContactCtrl",["$scope","$rootScope","pageHelper","$filter","$timeout",function(s,e,r,c,l){s.$on("InitExtendedAttributes",function(e,t){var n;s.tldItem=t,s.tldItem.form=s.form,null!=t.attributes.RegistrantBirthplace&&(n=angular.copy(t.attributes.RegistrantBirthplace.toString()),l(function(){var e;2<n.length?(s.tldItem.attributes.PlaceOfBirth="FR",-1<(e=n.indexOf(","))?(s.tldItem.attributes.CityOfBirth=n.substring(e+1,n.length),s.tldItem.attributes.PostalCodeOfBirth=n.substring(0,e)):(s.tldItem.attributes.CityOfBirth=n,s.tldItem.attributes.PostalCodeOfBirth="")):(s.tldItem.attributes.PlaceOfBirth=n,s.tldItem.attributes.CityOfBirth="",s.tldItem.attributes.PostalCodeOfBirth="")}));var a=null,i=null,o=null;null!=s.tldItem.attributes.RegistrantBirthDate&&(a=r.Date.dateFromJson(s.tldItem.attributes.RegistrantBirthDate),s.tldItem.attributes.RegistrantBirthDate=c("date")(r.Date.dateFromJson(s.tldItem.attributes.RegistrantBirthDate),"yyyy/MM/dd")),null!=s.tldItem.attributes.RegistrantJoDatePub&&(i=r.Date.dateFromJson(s.tldItem.attributes.RegistrantJoDatePub),s.tldItem.attributes.RegistrantJoDatePub=c("date")(r.Date.dateFromJson(s.tldItem.attributes.RegistrantJoDatePub),"yyyy/MM/dd")),null!=s.tldItem.attributes.RegistrantJoDateDec&&(o=r.Date.dateFromJson(s.tldItem.attributes.RegistrantJoDateDec),s.tldItem.attributes.RegistrantJoDateDec=c("date")(r.Date.dateFromJson(s.tldItem.attributes.RegistrantJoDateDec),"yyyy/MM/dd")),s.$watch("tldItem.attributes.FRLegalType",function(e){s.tldItem.form.fr_RegistrantType.$setValidity("required",0<s.tldItem.attributes.FRLegalType),"2"==e?$("#fr_DateOfBirth").daterangepicker({minDate:new Date("1900/01/01"),startDate:null==a?new Date:a,maxDate:new Date,singleDatePicker:!0,showDropdowns:!0},function(e,t,n){s.tldItem.attributes.RegistrantBirthDate=c("date")(new Date($("#fr_DateOfBirth").val()),"yyyy/MM/dd"),s.$apply()}):"1"==e&&($("#fr_GazettePublishedOn").daterangepicker({minDate:new Date("1900/01/01"),startDate:null==i?new Date:i,maxDate:new Date,singleDatePicker:!0,showDropdowns:!0},function(e,t,n){s.tldItem.attributes.RegistrantJoDatePub=c("date")(new Date($("#fr_GazettePublishedOn").val()),"yyyy/MM/dd"),s.$apply()}),$("#fr_AssociationDeclaredOn").daterangepicker({minDate:new Date("1900/01/01"),startDate:null==o?new Date:o,maxDate:new Date,singleDatePicker:!0,showDropdowns:!0},function(e,t,n){s.tldItem.attributes.RegistrantJoDateDec=c("date")(new Date($("#fr_AssociationDeclaredOn").val()),"yyyy/MM/dd"),s.$apply()}))}),t.prepareSave=function(){1!=t.attributes.FRLegalType&&(t.attributes.RegistrantLegalId=null),"FR"==t.attributes.PlaceOfBirth?t.attributes.RegistrantBirthplace=t.attributes.PostalCodeOfBirth+","+t.attributes.CityOfBirth:t.attributes.RegistrantBirthplace=t.attributes.PlaceOfBirth,2!=t.attributes.FRLegalType&&(t.attributes.RegistrantBirthDate=null,t.attributes.RegistrantBirthplace=null)}}),s.countries=e.countries}]),app.controller("nu_AlternativeContactCtrl",["$scope","$rootScope",function(n,e){n.resources=DomainContactsRes,n.$on("InitExtendedAttributes",function(e,t){n.tldItem=t,n.tldItem.form=n.form})}]),app.controller("nyc_AlternativeContactCtrl",["$scope","$rootScope","httpRepository",function(n,e,a){n.$on("InitExtendedAttributes",function(e,t){n.$watch("tldItem.attributes.NYCNexusCategory",function(){null!=n.tldItem.form&&null!=n.tldItem.form.nyc_nexusCategory&&n.tldItem.form.nyc_nexusCategory.$setValidity("required",0<t.attributes.NYCNexusCategory)}),a.userContacts.getDomainContactsSettings().then(function(e){n.contacts=e.Result.DefaultDomainContacts,n.contacts.form=n.form,null==t.attributes.NYCContact&&(t.attributes.NYCContact={AddressName:null,ContactInfoType:0,CustomAddressId:null}),t.attributes.NYCContact.title="New York Contact",n.tldItem=t,n.tldItem.form=n.form})}),n.nexusCategory={Organization:1,Individual:2}}]),app.controller("sg_AlternativeContactCtrl",["$scope","$rootScope","$timeout","httpRepository",function(n,a,e,i){n.resources=DomainContactsRes;var o={combineCheckContacts:function(){n.tldItem.isSgAdminIdVisible=1==o.isRegistrantSingapore||1==o.isTechSingapore},isRegistrantSingapore:!(n.dropDownContactType={None:0,Profile:1,Default:2,Custom:3,CreateNew:4}),isTechSingapore:!1,check:function(e,t){e.ContactInfoType.toString()==n.dropDownContactType.None.toString()?o[t]=!1:null!=a.primaryAddressInfo&&e.ContactInfoType.toString()==n.dropDownContactType.Profile.toString()?o[t]="SG"==a.primaryAddressInfo.Country:null!=a.defaultAddressInfo&&e.ContactInfoType.toString()==n.dropDownContactType.Default.toString()?o[t]="SG"==a.defaultAddressInfo.Country:i.userContacts.getCustomContactInfo(e.CustomAddressId).then(function(e){o[t]="SG"==e.Result.Country,o.combineCheckContacts()}),o.combineCheckContacts()},initCheck:function(){this.check(n.tldItem.contacts.Registrant,"isRegistrantSingapore"),this.check(n.tldItem.contacts.Tech,"isTechSingapore");for(var i=[{path:"tldItem.contacts.Registrant.ContactInfoType",skip:[n.dropDownContactType.Custom.toString(),n.dropDownContactType.CreateNew.toString()],contact:n.tldItem.contacts.Registrant,key:"isRegistrantSingapore"},{path:"tldItem.contacts.Registrant.CustomAddressId",contact:n.tldItem.contacts.Registrant,key:"isRegistrantSingapore"},{path:"tldItem.contacts.Tech.ContactInfoType",skip:[n.dropDownContactType.Custom.toString(),n.dropDownContactType.CreateNew.toString()],contact:n.tldItem.contacts.Tech,key:"isTechSingapore"},{path:"tldItem.contacts.Tech.CustomAddressId",contact:n.tldItem.contacts.Tech,key:"isTechSingapore"}],e=0;e<i.length;e++)n.$watch(i[e].path,function(e,t){var n;e==t||0!=(n=function(e,t){for(var n=0;n<i.length;n++)if(i[n].path==e){var a=i[n];return(!a.skip||!(-1<a.skip.indexOf(t)))&&a}return!1}(this.exp,e))&&o.check(n.contact,n.key)})}};n.$on("InitExtendedAttributes",function(e,t){n.tldItem=t,n.tldItem.form=n.form,o.initCheck()})}]),app.controller("uk_AlternativeContactCtrl",["$scope","$rootScope",function(n,e){n.resources=DomainContactsRes,n.legalType={IND:0,FIND:1,LTD:2,PLC:3,PTNR:4,LLP:5,STRA:6,RCHAR:7,IP:8,SCH:9,GOV:10,CRC:11,STAT:12,OTHER:13,FCORP:14,FOTHER:15},n.$on("InitExtendedAttributes",function(e,t){n.tldItem=t,n.tldItem.form=n.form,t.attributes.RegOptOut||(t.attributes.RegOptOut="n"),n.tldItem.attributes.cbWhoisData="y"==n.tldItem.attributes.RegOptOut.toLowerCase(),null!=n.tldItem.attributes.Registeredfor&&""!=n.tldItem.Registeredfor||(n.tldItem.attributes.Registeredfor=n.tldItem.firstName+" "+n.tldItem.lastName),t.prepareSave=function(){n.tldItem.attributes.RegOptOut=n.tldItem.attributes.cbWhoisData?"y":"n",t.attributes.UKLegalType!=n.legalType.IND&&t.attributes.UKLegalType!=n.legalType.FIND&&(t.attributes.cbWhoisData=null),t.attributes.UKLegalType!=n.legalType.LTD&&t.attributes.UKLegalType!=n.legalType.PLC&&t.attributes.UKLegalType!=n.legalType.LLP&&t.attributes.UKLegalType!=n.legalType.RCHAR&&(t.attributes.CompanyID=null)}})}]),app.controller("us_AlternativeContactCtrl",["$scope","$rootScope","$timeout",function(a,e,i){function o(){return a.tldItem.attributes.RegistrantNexus==a.nexusCategory.C31||a.tldItem.attributes.RegistrantNexus==a.nexusCategory.C32}a.countries=e.countries,a.nexusCategory={C11:0,C12:1,C21:2,C31:3,C32:4},a.nexusPurpose={P1:0,P2:1,P3:2,P4:3,P5:4},a.$on("InitExtendedAttributes",function(e,t){var n;a.tldItem=t,a.tldItem.form=a.form,o()||(t.attributes.RegistrantNexusCountry=null),null!=t.attributes.RegistrantNexusCountry&&(n=angular.copy(t.attributes.RegistrantNexusCountry.toString()),a.tldItem.attributes.RegistrantNexusCountry=null,i(function(){a.tldItem.attributes.RegistrantNexusCountry=n})),a.$watch("tldItem.attributes.RegistrantNexus",function(){var e;a.tldItem.form.us_NexusCategory&&(a.tldItem.form.us_NexusCategory.$setValidity("required",-1<t.attributes.RegistrantNexus),e=null!=a.tldItem.attributes.RegistrantNexusCountry,o()||(a.tldItem.attributes.RegistrantNexusCountry=null),angular.isDefined(a.tldItem.form.us_CountryCode)&&a.tldItem.form.us_CountryCode.$setValidity("required",e))}),a.$watch("tldItem.attributes.RegistrantPurpose",function(){a.tldItem.form.us_NexusPurpose&&a.tldItem.form.us_NexusPurpose.$setValidity("required",-1<t.attributes.RegistrantPurpose)}),t.prepareSave=function(){t.attributes.RegistrantNexus!=a.nexusCategory.C31&&t.attributes.RegistrantNexus!=a.nexusCategory.C32&&(t.attributes.RegistrantNexusCountry=null)}})}]),app.controller("xxx_AlternativeContactCtrl",["$scope","$rootScope","pageHelper",function(n,e,a){n.resources=DomainContactsRes,n.$on("InitExtendedAttributes",function(e,t){n.tldItem=t,n.tldItem.form=n.form,n.pageHelper=a})}]);